/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 124);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_create__ = __webpack_require__(157);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return __WEBPACK_IMPORTED_MODULE_0__src_create__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_creator__ = __webpack_require__(26);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "creator", function() { return __WEBPACK_IMPORTED_MODULE_1__src_creator__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_local__ = __webpack_require__(186);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "local", function() { return __WEBPACK_IMPORTED_MODULE_2__src_local__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_matcher__ = __webpack_require__(64);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "matcher", function() { return __WEBPACK_IMPORTED_MODULE_3__src_matcher__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_mouse__ = __webpack_require__(187);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "mouse", function() { return __WEBPACK_IMPORTED_MODULE_4__src_mouse__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_namespace__ = __webpack_require__(34);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "namespace", function() { return __WEBPACK_IMPORTED_MODULE_5__src_namespace__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_namespaces__ = __webpack_require__(35);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "namespaces", function() { return __WEBPACK_IMPORTED_MODULE_6__src_namespaces__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__src_point__ = __webpack_require__(27);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "clientPoint", function() { return __WEBPACK_IMPORTED_MODULE_7__src_point__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__src_select__ = __webpack_require__(62);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "select", function() { return __WEBPACK_IMPORTED_MODULE_8__src_select__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__src_selectAll__ = __webpack_require__(188);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "selectAll", function() { return __WEBPACK_IMPORTED_MODULE_9__src_selectAll__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__src_selection_index__ = __webpack_require__(5);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "selection", function() { return __WEBPACK_IMPORTED_MODULE_10__src_selection_index__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__src_selector__ = __webpack_require__(36);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "selector", function() { return __WEBPACK_IMPORTED_MODULE_11__src_selector__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__src_selectorAll__ = __webpack_require__(63);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "selectorAll", function() { return __WEBPACK_IMPORTED_MODULE_12__src_selectorAll__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__src_selection_style__ = __webpack_require__(67);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "style", function() { return __WEBPACK_IMPORTED_MODULE_13__src_selection_style__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__src_touch__ = __webpack_require__(189);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "touch", function() { return __WEBPACK_IMPORTED_MODULE_14__src_touch__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__src_touches__ = __webpack_require__(190);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "touches", function() { return __WEBPACK_IMPORTED_MODULE_15__src_touches__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__src_window__ = __webpack_require__(37);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "window", function() { return __WEBPACK_IMPORTED_MODULE_16__src_window__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__src_selection_on__ = __webpack_require__(38);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "event", function() { return __WEBPACK_IMPORTED_MODULE_17__src_selection_on__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "customEvent", function() { return __WEBPACK_IMPORTED_MODULE_17__src_selection_on__["a"]; });




















/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* global Blob, XMLSerializer, Image, btoa */

var vkbeautify = __webpack_require__(71);
var _ = __webpack_require__(2);
var d3_json = __webpack_require__(16).json;
var d3_text = __webpack_require__(16).text;
var d3_csvParseRows = __webpack_require__(42).csvParseRows;
var d3_selection = __webpack_require__(0).selection;

try {
  var saveAs = __webpack_require__(227).saveAs;
} catch (e) {
  console.warn('Not a browser, so FileSaver.js not available.');
}

module.exports = {
  set_options: set_options,
  remove_child_nodes: remove_child_nodes,
  load_css: load_css,
  load_files: load_files,
  load_the_file: load_the_file,
  make_class: make_class,
  class_with_optional_new: class_with_optional_new,
  setup_defs: setup_defs,
  draw_an_object: draw_an_object,
  draw_a_nested_object: draw_a_nested_object,
  make_array: make_array,
  make_array_ref: make_array_ref,
  compare_arrays: compare_arrays,
  array_to_object: array_to_object,
  clone: clone,
  extend: extend,
  unique_concat: unique_concat,
  unique_strings_array: unique_strings_array,
  debounce: debounce,
  object_slice_for_ids: object_slice_for_ids,
  object_slice_for_ids_ref: object_slice_for_ids_ref,
  c_plus_c: c_plus_c,
  c_minus_c: c_minus_c,
  c_times_scalar: c_times_scalar,
  download_json: download_json,
  load_json: load_json,
  load_json_or_csv: load_json_or_csv,
  download_svg: download_svg,
  download_png: download_png,
  rotate_coords_recursive: rotate_coords_recursive,
  rotate_coords: rotate_coords,
  get_angle: get_angle,
  to_degrees: to_degrees,
  to_radians_norm: to_radians_norm,
  angle_for_event: angle_for_event,
  distance: distance,
  check_undefined: check_undefined,
  compartmentalize: compartmentalize,
  decompartmentalize: decompartmentalize,
  mean: mean,
  median: median,
  quartiles: quartiles,
  random_characters: random_characters,
  generate_map_id: generate_map_id,
  check_for_parent_tag: check_for_parent_tag,
  name_to_url: name_to_url,
  parse_url_components: parse_url_components,
  get_document: get_document,
  get_window: get_window,
  d3_transform_catch: d3_transform_catch,
  check_browser: check_browser

  /**
   * Check if Blob is available, and alert if it is not.
   */
};function _check_filesaver() {
  try {
    var isFileSaverSupported = !!new Blob();
  } catch (e) {
    alert('Blob not supported');
  }
}

function set_options(options, defaults, must_be_float) {
  if (options === undefined || options === null) {
    return defaults;
  }
  var i = -1;
  var out = {};
  for (var key in defaults) {
    var has_key = key in options && options[key] !== null && options[key] !== undefined;
    var val = has_key ? options[key] : defaults[key];
    if (must_be_float && key in must_be_float) {
      val = parseFloat(val);
      if (isNaN(val)) {
        if (has_key) {
          console.warn('Bad float for option ' + key);
          val = parseFloat(defaults[key]);
          if (isNaN(val)) {
            console.warn('Bad float for default ' + key);
            val = null;
          }
        } else {
          console.warn('Bad float for default ' + key);
          val = null;
        }
      }
    }
    out[key] = val;
  }
  return out;
}

function remove_child_nodes(selection) {
  /** Removes all child nodes from a d3 selection
    */
  var node = selection.node();
  while (node.hasChildNodes()) {
    node.removeChild(node.lastChild);
  }
}

function load_css(css_path, callback) {
  var css = "";
  if (css_path) {
    d3_text(css_path, function (error, text) {
      if (error) {
        console.warn(error);
      }
      css = text;
      callback(css);
    });
  }
  return false;
}

function _ends_with(str, suffix) {
  return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

/**
 * Load a file.
 * @param {} t - this context for callback. Should be an object.
 * @param {} files_to_load - A filename to load. Must be JSON or CSS.
 * @param {} callback - Function to run after the file is loaded. Takes the
 * arguments error and data.
 * @param {} value - If the value is specified, just assign it and do not
 * execute the ajax query.
 */
function load_the_file(t, file, callback, value) {
  if (value) {
    if (file) console.warn('File ' + file + ' overridden by value.');
    callback.call(t, null, value);
    return;
  }
  if (!file) {
    callback.call(t, 'No filename', null);
    return;
  }
  if (_ends_with(file, 'json')) {
    d3_json(file, function (e, d) {
      callback.call(t, e, d);
    });
  } else if (_ends_with(file, 'css')) {
    d3_text(file, function (e, d) {
      callback.call(t, e, d);
    });
  } else {
    callback.call(t, 'Unrecognized file type', null);
  }
  return;
}

function load_files(t, files_to_load, final_callback) {
  /** Load multiple files asynchronously by calling utils.load_the_file.
       t: this context for callback. Should be an object.
       files_to_load: A list of objects with the attributes:
       { file: a_filename.json, callback: a_callback_fn }
       File must be JSON or CSS.
       final_callback: Function that runs after all files have loaded.
   */
  if (files_to_load.length === 0) final_callback.call(t);
  var i = -1,
      remaining = files_to_load.length;
  while (++i < files_to_load.length) {
    load_the_file(t, files_to_load[i].file, function (e, d) {
      this.call(t, e, d);
      if (! --remaining) final_callback.call(t);
    }.bind(files_to_load[i].callback), files_to_load[i].value);
  }
}

/**
 * Create a constructor that returns a new object with our without the 'new'
 * keyword.
 *
 * Adapted from Hubert Kauker (MIT Licensed), John Resig (MIT Licensed).
 * http://stackoverflow.com/questions/7892884/simple-class-instantiation
 */
function make_class() {
  var is_internal;
  var constructor = function constructor(args) {
    if (this instanceof constructor) {
      if (typeof this.init === 'function') {
        this.init.apply(this, is_internal ? args : arguments);
      }
    } else {
      is_internal = true;
      var instance = new constructor(arguments);
      is_internal = false;
      return instance;
    }
  };
  return constructor;
}

/**
 * Return a class that can be instantiated without the new keyword.
 * @param {Class} AClass - Any ES6 class.
 */
function class_with_optional_new(AClass) {
  return new Proxy(AClass, {
    apply: function apply(Target, thisArg, args) {
      return new (Function.prototype.bind.apply(Target, [null].concat(args)))();
    }
  });
}

function setup_defs(svg, style) {
  // add stylesheet
  svg.select("defs").remove();
  var defs = svg.append("defs");
  // make sure the defs is the first node
  var node = defs.node();
  node.parentNode.insertBefore(node, node.parentNode.firstChild);
  defs.append("style").attr("type", "text/css").text(style);
  return defs;
}

/**
 * Run through the d3 data binding steps for an object. Also checks to make sure
 * none of the values in the *object* are undefined, and ignores those.
 *
 * The create_function, update_function, and exit_function CAN modify the input
 * data object.
 *
 * @param {} container_sel - A d3 selection containing all objects.
 *
 * @param {} parent_node_selector - A selector string for a subselection of
 * container_sel.
 *
 * @param {} children_selector - A selector string for each DOM element to bind.
 *
 * @param {} object - An object to bind to the selection.
 *
 * @param {} id_key - The key that will be used to store object IDs in the bound
 * data points.
 *
 * @param {} create_function - A function for enter selection. Create function
 * must return a selection of the new nodes.
 *
 * @param {} update_function - A function for update selection.
 *
 * @param {} exit_function - A function for exit selection.
 */
function draw_an_object(container_sel, parent_node_selector, children_selector, object, id_key, create_function, update_function, exit_function) {
  var draw_object = {};

  for (var id in object) {
    if (object[id] === undefined) {
      console.warn('Undefined value for id ' + id + ' in object. Ignoring.');
    } else {
      draw_object[id] = object[id];
    }
  }

  var sel = container_sel.select(parent_node_selector).selectAll(children_selector).data(make_array_ref(draw_object, id_key), function (d) {
    return d[id_key];
  });

  // enter: generate and place reaction
  var update_sel = create_function ? create_function(sel.enter()).merge(sel) : sel;

  // update: update when necessary
  if (update_function) {
    update_sel.call(update_function);
  }

  // exit
  if (exit_function) {
    sel.exit().call(exit_function);
  }
}

/**
 * Run through the d3 data binding steps for an object that is nested within
 * another element with D3 data.
 *
 * The create_function, update_function, and exit_function CAN modify the input
 * data object.
 *
 * @param {} container_sel - A d3 selection containing all objects.
 *
 * @param {} children_selector - A selector string for each DOM element to bind.
 *
 * @param {} object_data_key - A key for the parent object containing data for
 * the new selection.
 *
 * @param {} id_key - The key that will be used to store object IDs in the bound
 * data points.
 *
 * @param {} create_function - A function for enter selection. Create function
 * must return a selection of the new nodes.
 *
 * @param {} update_function - A function for update selection.
 *
 * @param {} exit_function - A function for exit selection.
 */
function draw_a_nested_object(container_sel, children_selector, object_data_key, id_key, create_function, update_function, exit_function) {
  var sel = container_sel.selectAll(children_selector).data(function (d) {
    return make_array_ref(d[object_data_key], id_key);
  }, function (d) {
    return d[id_key];
  });

  // enter: generate and place reaction
  var update_sel = create_function ? create_function(sel.enter()).merge(sel) : sel;

  // update: update when necessary
  if (update_function) {
    update_sel.call(update_function);
  }

  // exit
  if (exit_function) {
    sel.exit().call(exit_function);
  }
}

function make_array(obj, id_key) {
  // is this super slow?
  var array = [];
  for (var key in obj) {
    // copy object
    var it = clone(obj[key]);
    // add key as 'id'
    it[id_key] = key;
    // add object to array
    array.push(it);
  }
  return array;
}

function make_array_ref(obj, id_key) {
  /** Turn the object into an array, but only by reference. Faster than
      make_array.
   */
  var array = [];
  for (var key in obj) {
    // copy object
    var it = obj[key];
    // add key as 'id'
    it[id_key] = key;
    // add object to array
    array.push(it);
  }
  return array;
}

function compare_arrays(a1, a2) {
  /** Compares two simple (not-nested) arrays.
    */
  if (!a1 || !a2) return false;
  if (a1.length != a2.length) return false;
  for (var i = 0, l = a1.length; i < l; i++) {
    if (a1[i] != a2[i]) {
      // Warning - two different object instances will never be equal: {x:20} != {x:20}
      return false;
    }
  }
  return true;
}

function array_to_object(arr) {
  /** Convert an array of objects to an object with all keys and values
      that are arrays of the same length as arr. Fills in spaces with null.
       For example, [ { a: 1 }, { b: 2 }] becomes { a: [1, null], b: [null, 2] }.
   */
  // new object
  var obj = {};
  // for each element of the array
  for (var i = 0, l = arr.length; i < l; i++) {
    var column = arr[i];
    var keys = Object.keys(column); // TODO: this causes an undefined error ?
    for (var k = 0, nk = keys.length; k < nk; k++) {
      var id = keys[k];
      if (!(id in obj)) {
        var n = [];
        // fill spaces with null
        for (var j = 0; j < l; j++) {
          n[j] = null;
        }
        n[i] = column[id];
        obj[id] = n;
      } else {
        obj[id][i] = column[id];
      }
    }
  }
  return obj;
}

/**
 * Deep copy for array and object types. All other types are returned by
 * reference.
 * @param {T<Object|Array|*>} obj - The object to copy.
 * @return {T} The copied object.
 */
function clone(obj) {
  if (_.isArray(obj)) return _.map(obj, function (t) {
    return clone(t);
  });else if (_.isObject(obj)) return _.mapObject(obj, function (t, k) {
    return clone(t);
  });else return obj;
}

function extend(obj1, obj2, overwrite) {
  /** Extends obj1 with keys/values from obj2. Performs the extension
      cautiously, and does not override attributes, unless the overwrite
      argument is true.
       Arguments
      ---------
       obj1: Object to extend
       obj2: Object with which to extend.
       overwrite: (Optional, Default false) Overwrite attributes in obj1.
   */

  if (overwrite === undefined) overwrite = false;

  for (var attrname in obj2) {
    if (!(attrname in obj1) || overwrite) // UNIT TEST This
      obj1[attrname] = obj2[attrname];else throw new Error('Attribute ' + attrname + ' already in object.');
  }
}

function unique_concat(arrays) {
  var new_array = [];
  arrays.forEach(function (a) {
    a.forEach(function (x) {
      if (new_array.indexOf(x) < 0) {
        new_array.push(x);
      }
    });
  });
  return new_array;
}

/**
 * Return unique values in array of strings.
 *
 * http://stackoverflow.com/questions/1960473/unique-values-in-an-array
 */
function unique_strings_array(arr) {
  var a = [];
  for (var i = 0, l = arr.length; i < l; i++) {
    if (a.indexOf(arr[i]) === -1) {
      a.push(arr[i]);
    }
  }
  return a;
}

/**
 * Returns a function, that, as long as it continues to be invoked, will not be
 * triggered. The function will be called after it stops being called for N
 * milliseconds. If "immediate" is passed, trigger the function on the leading
 * edge, instead of the trailing.
 */
function debounce(func, wait, immediate) {
  var timeout;
  return function () {
    var context = this;
    var args = arguments;
    var later = function later() {
      timeout = null;
      if (!immediate) func.apply(context, args);
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) func.apply(context, args);
  };
}

/**
 * Return a copy of the object with just the given ids.
 * @param {} obj - An object
 * @param {} ids - An array of id strings
 */
function object_slice_for_ids(obj, ids) {
  var subset = {};
  var i = -1;
  while (++i < ids.length) {
    subset[ids[i]] = clone(obj[ids[i]]);
  }
  if (ids.length !== Object.keys(subset).length) {
    console.warn('did not find correct reaction subset');
  }
  return subset;
}

/**
 * Return a reference of the object with just the given ids. Faster than
 * object_slice_for_ids.
 * @param {} obj - An object.
 * @param {} ids - An array of id strings.
 */
function object_slice_for_ids_ref(obj, ids) {
  var subset = {};
  var i = -1;
  while (++i < ids.length) {
    subset[ids[i]] = obj[ids[i]];
  }
  if (ids.length !== Object.keys(subset).length) {
    console.warn('did not find correct reaction subset');
  }
  return subset;
}

function c_plus_c(coords1, coords2) {
  if (coords1 === null || coords2 === null || coords1 === undefined || coords2 === undefined) {
    return null;
  }
  return {
    x: coords1.x + coords2.x,
    y: coords1.y + coords2.y
  };
}

function c_minus_c(coords1, coords2) {
  if (coords1 === null || coords2 === null || coords1 === undefined || coords2 === undefined) {
    return null;
  }
  return {
    x: coords1.x - coords2.x,
    y: coords1.y - coords2.y
  };
}

function c_times_scalar(coords, scalar) {
  return {
    x: coords.x * scalar,
    y: coords.y * scalar
  };
}

/**
 * Download JSON file in a blob.
 */
function download_json(json, name) {
  // Alert if blob isn't going to work
  _check_filesaver();

  var j = JSON.stringify(json);
  var blob = new Blob([j], { type: 'application/json' });
  saveAs(blob, name + '.json');
}

/**
 * Try to load the file as JSON.
 * @param {} f - The file path
 * @param {} callback - A callback function that accepts arguments: error, data.
 * @param {} pre_fn (optional) - A function to call before loading the data.
 * @param {} failure_fn (optional) - A function to call if the load fails or is
 * aborted.
*/
function load_json(f, callback, pre_fn, failure_fn) {
  // Check for the various File API support
  if (!(window.File && window.FileReader && window.FileList && window.Blob)) {
    callback('The File APIs are not fully supported in this browser.', null);
  }

  var reader = new window.FileReader();
  // Closure to capture the file information.
  reader.onload = function (event) {
    var result = event.target.result;
    var data;
    // Try JSON
    try {
      data = JSON.parse(result);
    } catch (e) {
      // If it failed, return the error
      callback(e, null);
      return;
    }
    // If successful, return the data
    callback(null, data);
  };
  if (pre_fn !== undefined && pre_fn !== null) {
    try {
      pre_fn();
    } catch (e) {
      console.warn(e);
    }
  }
  reader.onabort = function (event) {
    try {
      failure_fn();
    } catch (e) {
      console.warn(e);
    }
  };
  reader.onerror = function (event) {
    try {
      failure_fn();
    } catch (e) {
      console.warn(e);
    }
  };
  // Read in the image file as a data URL
  reader.readAsText(f);
}

/**
 * Try to load the file as JSON or CSV (JSON first).
 * @param {String} f - The file path
 * @param {Function} callback - A callback function that accepts arguments: error, data.
 * @param {} pre_fn (optional) - A function to call before loading the data.
 * @param {} failure_fn (optional) - A function to call if the load fails or is
 * aborted.
 * @param {} debug_event (optional) - An event, with a string at
 * event.target.result, to load as though it was the contents of a loaded file.
 */
function load_json_or_csv(f, callback, pre_fn, failure_fn, debug_event) {
  // Capture the file information.
  var onload_function = function onload_function(event) {
    var result = event.target.result;
    var errors;

    var input;

    var data = [[], []]; //old, new: [array of names][array of data]
    var names = [];

    // try JSON
    try {

      input = JSON.parse(result);

      // TODO: check if name and data arrays are same length -> every data set has a name, if not make one up(?)

      if (_.isArray(input) && _.isString(input[0]) && _.isObject(input[1])) {
        // example data type 1, data is in following dictionary

        var numbers = [];
        // sort names and data
        for (var i = 0; i < input.length - 1; i++) {
          names.push(input[i]);
          numbers.push(input[i + 1]);
          i++;
        }

        data[0] = names;
        data[1] = numbers;

        console.log('new format type 1');
      } else if (_.isArray(input) && _.isArray(input[0]) && _.isArray(input[1])) {
        // example data type 2 (favourite), data is array

        data[0] = input[0];
        data[1] = input[1];
        console.log('new format type 2');
      } else if (_.isObject(input) && _.isArray(input.names) && _.isArray(input.data)) {
        // example data type 2b, data is dictionary
        data[0] = input.names;
        data[1] = input.data;

        console.log("new format type 2b");
      } else if (_.isArray(input) && _.isObject(input[0]) && !_.isArray(input[0]) && _.isObject(input[1]) && !_.isArray(input[1])) {
        // is old format but two data sets

        data[0] = ["set_1", "set_2"];
        data[1] = input;

        console.log('old format, two data sets');
      } else {
        // old data format

        //data = []
        data = input;
        //data[0] = names
        //data[1] = input
        console.log('old format, one data set');
      }
    } catch (e) {
      errors = 'JSON error: ' + e;

      // try csv
      try {
        //
        // TODO: comment in these lines to keep names with csv, breaks the api anyway

        var data = [];
        var csv_data = csv_converter(d3_csvParseRows(result));

        //data = csv_data[1] // looses names but does not break api
        //csv_names = csv_data[0]
        data[0] = csv_data[0];
        data[1] = csv_data[1];
      } catch (e) {
        // if both failed, return the errors
        callback(errors + '\nCSV error: ' + e, null);
        return;
      }
    }
    // if successful, return the data as [array of names][array of numbers]
    callback(null, data);
  };
  if (debug_event !== undefined && debug_event !== null) {
    console.warn('Debugging load_json_or_csv');
    return onload_function(debug_event);
  }

  // Check for the various File API support.
  if (!(window.File && window.FileReader && window.FileList && window.Blob)) callback("The File APIs are not fully supported in this browser.", null);
  var reader = new window.FileReader();

  if (pre_fn !== undefined && pre_fn !== null) {
    try {
      pre_fn();
    } catch (e) {
      console.warn(e);
    }
  }
  reader.onabort = function (event) {
    try {
      failure_fn();
    } catch (e) {
      console.warn(e);
    }
  };
  reader.onerror = function (event) {
    try {
      failure_fn();
    } catch (e) {
      console.warn(e);
    }
  };
  // Read in the image file as a data URL.
  reader.onload = onload_function;
  reader.readAsText(f);
}

/**
 * Download an svg file using FileSaver.js.
 * @param {String} name - The filename (without extension)
 * @param {D3 Selection} svg_sel - The d3 selection for the SVG element
 * @param {Boolean} do_beautify - If true, then beautify the SVG output
 */
function download_svg(name, svg_sel, do_beautify) {
  // Alert if blob isn't going to work
  _check_filesaver();

  // Make the xml string
  var xml = new XMLSerializer().serializeToString(svg_sel.node());
  if (do_beautify) xml = vkbeautify.xml(xml);
  xml = '<?xml version="1.0" encoding="utf-8"?>\n' + '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n' + ' "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n' + xml;

  // Save
  var blob = new Blob([xml], { type: 'image/svg+xml' });
  saveAs(blob, name + '.svg');
}

/**
 * Download a png file using FileSaver.js.
 * @param {String} name - The filename (without extension).
 * @param {D3 Selection} svg_sel - The d3 selection for the SVG element.
 */
function download_png(name, svg_sel) {
  // Alert if blob isn't going to work
  _check_filesaver();

  // Make the xml string
  var xml = new XMLSerializer().serializeToString(svg_sel.node());
  xml = '<?xml version="1.0" encoding="utf-8"?>\n' + '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n' + ' "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n' + xml;

  // Canvas to hold the image
  var canvas = document.createElement('canvas');
  var context = canvas.getContext('2d');

  // Get SVG size
  var svg_size = svg_sel.node().getBBox();
  var svg_width = svg_size.width + svg_size.x;
  var svg_height = svg_size.height + svg_size.y;

  // Canvas size = SVG size. Constrained to 10000px for very large SVGs
  if (svg_width < 10000 && svg_height < 10000) {
    canvas.width = svg_width;
    canvas.height = svg_height;
  } else {
    if (canvas.width > canvas.height) {
      canvas.width = 10000;
      canvas.height = 10000 * (svg_height / svg_width);
    } else {
      canvas.width = 10000 * (svg_width / svg_height);
      canvas.height = 10000;
    }
  }

  // Image element appended with data
  var base_image = new Image();
  base_image.src = 'data:image/svg+xml;base64,' + btoa(xml);

  base_image.onload = function () {
    // Draw image to canvas with white background
    context.fillStyle = '#FFF';
    context.fillRect(0, 0, canvas.width, canvas.height);
    context.drawImage(base_image, 0, 0, canvas.width, canvas.height);

    // Save image
    canvas.toBlob(function (blob) {
      saveAs(blob, name + '.png');
    });
  };
}

function rotate_coords_recursive(coords_array, angle, center) {
  return coords_array.map(function (c) {
    return rotate_coords(c, angle, center);
  });
}

/**
 * Calculates displacement { x: dx, y: dy } based on rotating point c around
 * center with angle.
 */
function rotate_coords(c, angle, center) {
  var dx = Math.cos(-angle) * (c.x - center.x) + Math.sin(-angle) * (c.y - center.y) + center.x - c.x;
  var dy = -Math.sin(-angle) * (c.x - center.x) + Math.cos(-angle) * (c.y - center.y) + center.y - c.y;
  return { x: dx, y: dy };
}

/**
 * Get the angle between coordinates
 * @param {Object} coords - Array of 2 coordinate objects { x: 1, y: 1 }
 * @return {Number} angle between 0 and 2PI.
 */
function get_angle(coords) {
  var denominator = coords[1].x - coords[0].x;
  var numerator = coords[1].y - coords[0].y;
  if (denominator === 0 && numerator >= 0) {
    return Math.PI / 2;
  } else if (denominator === 0 && numerator < 0) {
    return 3 * Math.PI / 2;
  } else if (denominator >= 0 && numerator >= 0) {
    return Math.atan(numerator / denominator);
  } else if (denominator >= 0) {
    return Math.atan(numerator / denominator) + 2 * Math.PI;
  } else {
    return Math.atan(numerator / denominator) + Math.PI;
  }
}

function to_degrees(radians) {
  return radians * 180 / Math.PI;
}

/**
 * Force to domain - PI to PI
 */
function _angle_norm(radians) {
  if (radians < -Math.PI) {
    radians = radians + Math.ceil(radians / (-2 * Math.PI)) * 2 * Math.PI;
  } else if (radians > Math.PI) {
    radians = radians - Math.ceil(radians / (2 * Math.PI)) * 2 * Math.PI;
  }
  return radians;
}

/**
 * Convert to radians, and force to domain -PI to PI
 */
function to_radians_norm(degrees) {
  var radians = Math.PI / 180 * degrees;
  return _angle_norm(radians);
}

function angle_for_event(displacement, point, center) {
  var gamma = Math.atan2(point.x - center.x, center.y - point.y);
  var beta = Math.atan2(point.x - center.x + displacement.x, center.y - point.y - displacement.y);
  var angle = beta - gamma;
  return angle;
}

function distance(start, end) {
  return Math.sqrt(Math.pow(end.y - start.y, 2) + Math.pow(end.x - start.x, 2));
}

/**
 * Report an error if any of the arguments are undefined. Call by passing in
 * "arguments" from any function and an array of argument names.
 */
function check_undefined(args, names) {
  names.map(function (name, i) {
    if (args[i] === undefined) {
      console.error('Argument is undefined: ' + String(names[i]));
    }
  });
}

function compartmentalize(bigg_id, compartment_id) {
  return bigg_id + '_' + compartment_id;
}

/**
 * Returns an array of [bigg_id, compartment id]. Matches compartment ids with
 * length 1 or 2. Return [ id, null ] if no match is found.
 */
function decompartmentalize(id) {
  var reg = /(.*)_([a-z0-9]{1,2})$/;
  var result = reg.exec(id);
  return result !== null ? result.slice(1, 3) : [id, null];
}

function mean(array) {
  var sum = array.reduce(function (a, b) {
    return a + b;
  });
  var avg = sum / array.length;
  return avg;
}

function median(array) {
  array.sort(function (a, b) {
    return a - b;
  });
  var half = Math.floor(array.length / 2);
  if (array.length % 2 == 1) {
    return array[half];
  } else {
    return (array[half - 1] + array[half]) / 2.0;
  }
}

function quartiles(array) {
  array.sort(function (a, b) {
    return a - b;
  });
  var half = Math.floor(array.length / 2);
  if (array.length === 1) {
    return [array[0], array[0], array[0]];
  } else if (array.length % 2 === 1) {
    return [median(array.slice(0, half)), array[half], median(array.slice(half + 1))];
  } else {
    return [median(array.slice(0, half)), (array[half - 1] + array[half]) / 2.0, median(array.slice(half))];
  }
}

/**
 * Generate random characters
 *
 * Thanks to @csharptest.net
 * http://stackoverflow.com/questions/1349404/generate-a-string-of-5-random-characters-in-javascript
 */
function random_characters(num) {
  var text = '';
  var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  for (var i = 0; i < num; i++) {
    text += possible.charAt(Math.floor(Math.random() * possible.length));
  }
  return text;
}

function generate_map_id() {
  return random_characters(12);
}

/**
 * Check that the selection has the given parent tag.
 * @param {D3 Selection|DOM Node} el - A D3 Selection or DOM Node to check.
 * @param {String} tag - A tag name (case insensitive).
 */
function check_for_parent_tag(el, tag) {
  // make sure it is a node
  if (el instanceof d3_selection) {
    el = el.node();
  }
  while (el.parentNode !== null) {
    el = el.parentNode;
    if (el.tagName === undefined) {
      continue;
    }
    if (el.tagName.toLowerCase() === tag.toLowerCase()) {
      return true;
    }
  }
  return false;
}

/**
 * Convert model or map name to url.
 * @param {String} name - The short name, e.g. e_coli.iJO1366.central_metabolism.
 * @param {String} download_url (optional) - The url to prepend.
 */
function name_to_url(name, download_url) {
  if (download_url !== undefined && download_url !== null) {
    // strip download_url
    download_url = download_url.replace(/^\/|\/$/g, '');
    name = [download_url, name].join('/');
  }
  // strip final path
  return name.replace(/^\/|\/$/g, '') + '.json';
}

/**
 * Parse the URL and return options based on the URL arguments.
 *
 * Adapted from http://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter
 *
 * @param {} the_window - A reference to the global window.
 * @param {Object} options (optional) - an existing options object to which new
 * options will be added. Overwrites existing arguments in options.
 */
function parse_url_components(the_window, options) {
  if (_.isUndefined(options)) options = {};

  var query = the_window.location.search.substring(1);
  var vars = query.split('&');
  for (var i = 0, l = vars.length; i < l; i++) {
    var pair = vars[i].split('=');
    var val = decodeURIComponent(pair[1]);
    // deal with array options
    if (pair[0].indexOf('[]') === pair[0].length - 2) {
      var o = pair[0].replace('[]', '');
      if (!(o in options)) {
        options[o] = [];
      }
      options[o].push(val);
    } else {
      options[pair[0]] = val;
    }
  }
  return options;
}

/**
 * Get the document for the node
 */
function get_document(node) {
  return node.ownerDocument;
}

/**
 * Get the window for the node
 */
function get_window(node) {
  return get_document(node).defaultView;
}

/**
 * Get translation and rotation values for a transform string. This used to be
 * in d3, but since v4, I just adapted a solution from SO:
 *
 * http://stackoverflow.com/questions/38224875/replacing-d3-transform-in-d3-v4
 *
 * To get skew and scale out, go back to that example.
 *
 * TODO rename function without "catch"
 *
 * @param {String} transform_attr - A transform string.
 */
function d3_transform_catch(transform_attr) {
  if (transform_attr.indexOf('skew') !== -1 || transform_attr.indexOf('matrix') !== -1) {
    throw new Error('d3_transform_catch does not work with skew or matrix');
  }

  var translate_res = /translate\s*\(\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*\)/.exec(transform_attr);
  var tn = _.isNull(translate_res);
  var tx = tn ? 0.0 : Number(translate_res[1]);
  var ty = tn ? 0.0 : Number(translate_res[2]);

  var rotate_res = /rotate\s*\(\s*([0-9.-]+)\s*\)/.exec(transform_attr);
  var rn = _.isNull(rotate_res);
  var r = rn ? 0.0 : Number(rotate_res[1]);

  var scale_res = /scale\s*\(\s*([0-9.-]+)\s*\)/.exec(transform_attr);
  var sn = _.isNull(scale_res);
  var s = sn ? 0.0 : Number(scale_res[1]);

  return { translate: [tx, ty], rotate: r, scale: s

    // // Create a dummy g for calculation purposes only. This will new be appended
    // // to the DOM and will be discarded once this function returns.
    // var g = document.createElementNS('http://www.w3.org/2000/svg', 'g')

    // // Set the transform attribute to the provided string value.
    // g.setAttributeNS(null, 'transform', transform_attr)

    // // Consolidate the SVGTransformList containing all Try to a single
    // // SVGTransform of type SVG_TRANSFORM_MATRIX and get its SVGMatrix.

    // var matrix = g.transform.baseVal.consolidate().matrix

    // // Below calculations are taken and adapted from the private func
    // // transform/decompose.js of D3's module d3-interpolate.
    // var a = matrix.a
    // var b = matrix.b
    // var c = matrix.c
    // var d = matrix.d
    // var e = matrix.e
    // var f = matrix.f
    // var scaleX = Math.sqrt(a * a + b * b)

    // if (scaleX) {
    //   a /= scaleX
    //   b /= scaleX
    // }

    // if (a * d < b * c) {
    //   a = -a
    //   b = -b
    // }

    // return {
    //   translate: [ e, f ],
    //   rotate: Math.atan2(b, a) * Math.PI / 180,
    // }
  };
}

/**
 * Look for name in the user agent string.
 */
function check_browser(name) {
  var browser = function browser() {
    // Thanks to
    // http://stackoverflow.com/questions/2400935/browser-detection-in-javascript
    var ua = navigator.userAgent;
    var M = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
    var tem;
    if (/trident/i.test(M[1])) {
      tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
      return 'IE ' + (tem[1] || '');
    }
    if (M[1] === 'Chrome') {
      tem = ua.match(/\b(OPR|Edge)\/(\d+)/);
      if (tem != null) return tem.slice(1).join(' ').replace('OPR', 'Opera');
    }
    M = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, '-?'];
    if ((tem = ua.match(/version\/(\d+)/i)) !== null) {
      M.splice(1, 1, tem[1]);
    }
    return M.join(' ');
  };

  try {
    // navigator.userAgent is deprecated, so don't count on it
    return browser().toLowerCase().indexOf(name) > -1;
  } catch (e) {
    return false;
  }
}

function csv_converter(csv_rows) {
  /** Convert data from a csv file to json-style data.
    File must include a header row.
    */

  var data = [[], []];
  // count rows
  var c = csv_rows[0].length,
      converted = [];

  if (c < 2) {
    // dataset must have at least identifier and values
    throw new Error('CSV file must have 2 or more columns');
  }
  // set up rows, this works with 2+ data sets also
  for (var i = 1; i < c; i++) {
    converted[i - 1] = {};
  }

  var names = csv_rows[0];
  names.splice(0, 1); // first position is empty or something like "data set names"


  // fill

  csv_rows.slice(1).forEach(function (row) {
    for (var i = 1, l = row.length; i < l; i++) {
      converted[i - 1][row[0]] = row[i];
    }
  });

  data[0] = names;
  data[1] = converted;
  return data;
}

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

(function() {

  // Baseline setup
  // --------------

  // Establish the root object, `window` in the browser, or `exports` on the server.
  var root = this;

  // Save the previous value of the `_` variable.
  var previousUnderscore = root._;

  // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;

  // Create quick reference variables for speed access to core prototypes.
  var
    push             = ArrayProto.push,
    slice            = ArrayProto.slice,
    toString         = ObjProto.toString,
    hasOwnProperty   = ObjProto.hasOwnProperty;

  // All **ECMAScript 5** native function implementations that we hope to use
  // are declared here.
  var
    nativeIsArray      = Array.isArray,
    nativeKeys         = Object.keys,
    nativeBind         = FuncProto.bind,
    nativeCreate       = Object.create;

  // Naked function reference for surrogate-prototype-swapping.
  var Ctor = function(){};

  // Create a safe reference to the Underscore object for use below.
  var _ = function(obj) {
    if (obj instanceof _) return obj;
    if (!(this instanceof _)) return new _(obj);
    this._wrapped = obj;
  };

  // Export the Underscore object for **Node.js**, with
  // backwards-compatibility for the old `require()` API. If we're in
  // the browser, add `_` as a global object.
  if (true) {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = _;
    }
    exports._ = _;
  } else {
    root._ = _;
  }

  // Current version.
  _.VERSION = '1.8.3';

  // Internal function that returns an efficient (for current engines) version
  // of the passed-in callback, to be repeatedly applied in other Underscore
  // functions.
  var optimizeCb = function(func, context, argCount) {
    if (context === void 0) return func;
    switch (argCount == null ? 3 : argCount) {
      case 1: return function(value) {
        return func.call(context, value);
      };
      case 2: return function(value, other) {
        return func.call(context, value, other);
      };
      case 3: return function(value, index, collection) {
        return func.call(context, value, index, collection);
      };
      case 4: return function(accumulator, value, index, collection) {
        return func.call(context, accumulator, value, index, collection);
      };
    }
    return function() {
      return func.apply(context, arguments);
    };
  };

  // A mostly-internal function to generate callbacks that can be applied
  // to each element in a collection, returning the desired result — either
  // identity, an arbitrary callback, a property matcher, or a property accessor.
  var cb = function(value, context, argCount) {
    if (value == null) return _.identity;
    if (_.isFunction(value)) return optimizeCb(value, context, argCount);
    if (_.isObject(value)) return _.matcher(value);
    return _.property(value);
  };
  _.iteratee = function(value, context) {
    return cb(value, context, Infinity);
  };

  // An internal function for creating assigner functions.
  var createAssigner = function(keysFunc, undefinedOnly) {
    return function(obj) {
      var length = arguments.length;
      if (length < 2 || obj == null) return obj;
      for (var index = 1; index < length; index++) {
        var source = arguments[index],
            keys = keysFunc(source),
            l = keys.length;
        for (var i = 0; i < l; i++) {
          var key = keys[i];
          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];
        }
      }
      return obj;
    };
  };

  // An internal function for creating a new object that inherits from another.
  var baseCreate = function(prototype) {
    if (!_.isObject(prototype)) return {};
    if (nativeCreate) return nativeCreate(prototype);
    Ctor.prototype = prototype;
    var result = new Ctor;
    Ctor.prototype = null;
    return result;
  };

  var property = function(key) {
    return function(obj) {
      return obj == null ? void 0 : obj[key];
    };
  };

  // Helper for collection methods to determine whether a collection
  // should be iterated as an array or as an object
  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094
  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
  var getLength = property('length');
  var isArrayLike = function(collection) {
    var length = getLength(collection);
    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;
  };

  // Collection Functions
  // --------------------

  // The cornerstone, an `each` implementation, aka `forEach`.
  // Handles raw objects in addition to array-likes. Treats all
  // sparse array-likes as if they were dense.
  _.each = _.forEach = function(obj, iteratee, context) {
    iteratee = optimizeCb(iteratee, context);
    var i, length;
    if (isArrayLike(obj)) {
      for (i = 0, length = obj.length; i < length; i++) {
        iteratee(obj[i], i, obj);
      }
    } else {
      var keys = _.keys(obj);
      for (i = 0, length = keys.length; i < length; i++) {
        iteratee(obj[keys[i]], keys[i], obj);
      }
    }
    return obj;
  };

  // Return the results of applying the iteratee to each element.
  _.map = _.collect = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length,
        results = Array(length);
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      results[index] = iteratee(obj[currentKey], currentKey, obj);
    }
    return results;
  };

  // Create a reducing function iterating left or right.
  function createReduce(dir) {
    // Optimized iterator function as using arguments.length
    // in the main function will deoptimize the, see #1991.
    function iterator(obj, iteratee, memo, keys, index, length) {
      for (; index >= 0 && index < length; index += dir) {
        var currentKey = keys ? keys[index] : index;
        memo = iteratee(memo, obj[currentKey], currentKey, obj);
      }
      return memo;
    }

    return function(obj, iteratee, memo, context) {
      iteratee = optimizeCb(iteratee, context, 4);
      var keys = !isArrayLike(obj) && _.keys(obj),
          length = (keys || obj).length,
          index = dir > 0 ? 0 : length - 1;
      // Determine the initial value if none is provided.
      if (arguments.length < 3) {
        memo = obj[keys ? keys[index] : index];
        index += dir;
      }
      return iterator(obj, iteratee, memo, keys, index, length);
    };
  }

  // **Reduce** builds up a single result from a list of values, aka `inject`,
  // or `foldl`.
  _.reduce = _.foldl = _.inject = createReduce(1);

  // The right-associative version of reduce, also known as `foldr`.
  _.reduceRight = _.foldr = createReduce(-1);

  // Return the first value which passes a truth test. Aliased as `detect`.
  _.find = _.detect = function(obj, predicate, context) {
    var key;
    if (isArrayLike(obj)) {
      key = _.findIndex(obj, predicate, context);
    } else {
      key = _.findKey(obj, predicate, context);
    }
    if (key !== void 0 && key !== -1) return obj[key];
  };

  // Return all the elements that pass a truth test.
  // Aliased as `select`.
  _.filter = _.select = function(obj, predicate, context) {
    var results = [];
    predicate = cb(predicate, context);
    _.each(obj, function(value, index, list) {
      if (predicate(value, index, list)) results.push(value);
    });
    return results;
  };

  // Return all the elements for which a truth test fails.
  _.reject = function(obj, predicate, context) {
    return _.filter(obj, _.negate(cb(predicate)), context);
  };

  // Determine whether all of the elements match a truth test.
  // Aliased as `all`.
  _.every = _.all = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (!predicate(obj[currentKey], currentKey, obj)) return false;
    }
    return true;
  };

  // Determine if at least one element in the object matches a truth test.
  // Aliased as `any`.
  _.some = _.any = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (predicate(obj[currentKey], currentKey, obj)) return true;
    }
    return false;
  };

  // Determine if the array or object contains a given item (using `===`).
  // Aliased as `includes` and `include`.
  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {
    if (!isArrayLike(obj)) obj = _.values(obj);
    if (typeof fromIndex != 'number' || guard) fromIndex = 0;
    return _.indexOf(obj, item, fromIndex) >= 0;
  };

  // Invoke a method (with arguments) on every item in a collection.
  _.invoke = function(obj, method) {
    var args = slice.call(arguments, 2);
    var isFunc = _.isFunction(method);
    return _.map(obj, function(value) {
      var func = isFunc ? method : value[method];
      return func == null ? func : func.apply(value, args);
    });
  };

  // Convenience version of a common use case of `map`: fetching a property.
  _.pluck = function(obj, key) {
    return _.map(obj, _.property(key));
  };

  // Convenience version of a common use case of `filter`: selecting only objects
  // containing specific `key:value` pairs.
  _.where = function(obj, attrs) {
    return _.filter(obj, _.matcher(attrs));
  };

  // Convenience version of a common use case of `find`: getting the first object
  // containing specific `key:value` pairs.
  _.findWhere = function(obj, attrs) {
    return _.find(obj, _.matcher(attrs));
  };

  // Return the maximum element (or element-based computation).
  _.max = function(obj, iteratee, context) {
    var result = -Infinity, lastComputed = -Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value > result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Return the minimum element (or element-based computation).
  _.min = function(obj, iteratee, context) {
    var result = Infinity, lastComputed = Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value < result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed < lastComputed || computed === Infinity && result === Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Shuffle a collection, using the modern version of the
  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).
  _.shuffle = function(obj) {
    var set = isArrayLike(obj) ? obj : _.values(obj);
    var length = set.length;
    var shuffled = Array(length);
    for (var index = 0, rand; index < length; index++) {
      rand = _.random(0, index);
      if (rand !== index) shuffled[index] = shuffled[rand];
      shuffled[rand] = set[index];
    }
    return shuffled;
  };

  // Sample **n** random values from a collection.
  // If **n** is not specified, returns a single random element.
  // The internal `guard` argument allows it to work with `map`.
  _.sample = function(obj, n, guard) {
    if (n == null || guard) {
      if (!isArrayLike(obj)) obj = _.values(obj);
      return obj[_.random(obj.length - 1)];
    }
    return _.shuffle(obj).slice(0, Math.max(0, n));
  };

  // Sort the object's values by a criterion produced by an iteratee.
  _.sortBy = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    return _.pluck(_.map(obj, function(value, index, list) {
      return {
        value: value,
        index: index,
        criteria: iteratee(value, index, list)
      };
    }).sort(function(left, right) {
      var a = left.criteria;
      var b = right.criteria;
      if (a !== b) {
        if (a > b || a === void 0) return 1;
        if (a < b || b === void 0) return -1;
      }
      return left.index - right.index;
    }), 'value');
  };

  // An internal function used for aggregate "group by" operations.
  var group = function(behavior) {
    return function(obj, iteratee, context) {
      var result = {};
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index) {
        var key = iteratee(value, index, obj);
        behavior(result, value, key);
      });
      return result;
    };
  };

  // Groups the object's values by a criterion. Pass either a string attribute
  // to group by, or a function that returns the criterion.
  _.groupBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key].push(value); else result[key] = [value];
  });

  // Indexes the object's values by a criterion, similar to `groupBy`, but for
  // when you know that your index values will be unique.
  _.indexBy = group(function(result, value, key) {
    result[key] = value;
  });

  // Counts instances of an object that group by a certain criterion. Pass
  // either a string attribute to count by, or a function that returns the
  // criterion.
  _.countBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key]++; else result[key] = 1;
  });

  // Safely create a real, live array from anything iterable.
  _.toArray = function(obj) {
    if (!obj) return [];
    if (_.isArray(obj)) return slice.call(obj);
    if (isArrayLike(obj)) return _.map(obj, _.identity);
    return _.values(obj);
  };

  // Return the number of elements in an object.
  _.size = function(obj) {
    if (obj == null) return 0;
    return isArrayLike(obj) ? obj.length : _.keys(obj).length;
  };

  // Split a collection into two arrays: one whose elements all satisfy the given
  // predicate, and one whose elements all do not satisfy the predicate.
  _.partition = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var pass = [], fail = [];
    _.each(obj, function(value, key, obj) {
      (predicate(value, key, obj) ? pass : fail).push(value);
    });
    return [pass, fail];
  };

  // Array Functions
  // ---------------

  // Get the first element of an array. Passing **n** will return the first N
  // values in the array. Aliased as `head` and `take`. The **guard** check
  // allows it to work with `_.map`.
  _.first = _.head = _.take = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[0];
    return _.initial(array, array.length - n);
  };

  // Returns everything but the last entry of the array. Especially useful on
  // the arguments object. Passing **n** will return all the values in
  // the array, excluding the last N.
  _.initial = function(array, n, guard) {
    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
  };

  // Get the last element of an array. Passing **n** will return the last N
  // values in the array.
  _.last = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[array.length - 1];
    return _.rest(array, Math.max(0, array.length - n));
  };

  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
  // Especially useful on the arguments object. Passing an **n** will return
  // the rest N values in the array.
  _.rest = _.tail = _.drop = function(array, n, guard) {
    return slice.call(array, n == null || guard ? 1 : n);
  };

  // Trim out all falsy values from an array.
  _.compact = function(array) {
    return _.filter(array, _.identity);
  };

  // Internal implementation of a recursive `flatten` function.
  var flatten = function(input, shallow, strict, startIndex) {
    var output = [], idx = 0;
    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {
      var value = input[i];
      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {
        //flatten current level of array or arguments object
        if (!shallow) value = flatten(value, shallow, strict);
        var j = 0, len = value.length;
        output.length += len;
        while (j < len) {
          output[idx++] = value[j++];
        }
      } else if (!strict) {
        output[idx++] = value;
      }
    }
    return output;
  };

  // Flatten out an array, either recursively (by default), or just one level.
  _.flatten = function(array, shallow) {
    return flatten(array, shallow, false);
  };

  // Return a version of the array that does not contain the specified value(s).
  _.without = function(array) {
    return _.difference(array, slice.call(arguments, 1));
  };

  // Produce a duplicate-free version of the array. If the array has already
  // been sorted, you have the option of using a faster algorithm.
  // Aliased as `unique`.
  _.uniq = _.unique = function(array, isSorted, iteratee, context) {
    if (!_.isBoolean(isSorted)) {
      context = iteratee;
      iteratee = isSorted;
      isSorted = false;
    }
    if (iteratee != null) iteratee = cb(iteratee, context);
    var result = [];
    var seen = [];
    for (var i = 0, length = getLength(array); i < length; i++) {
      var value = array[i],
          computed = iteratee ? iteratee(value, i, array) : value;
      if (isSorted) {
        if (!i || seen !== computed) result.push(value);
        seen = computed;
      } else if (iteratee) {
        if (!_.contains(seen, computed)) {
          seen.push(computed);
          result.push(value);
        }
      } else if (!_.contains(result, value)) {
        result.push(value);
      }
    }
    return result;
  };

  // Produce an array that contains the union: each distinct element from all of
  // the passed-in arrays.
  _.union = function() {
    return _.uniq(flatten(arguments, true, true));
  };

  // Produce an array that contains every item shared between all the
  // passed-in arrays.
  _.intersection = function(array) {
    var result = [];
    var argsLength = arguments.length;
    for (var i = 0, length = getLength(array); i < length; i++) {
      var item = array[i];
      if (_.contains(result, item)) continue;
      for (var j = 1; j < argsLength; j++) {
        if (!_.contains(arguments[j], item)) break;
      }
      if (j === argsLength) result.push(item);
    }
    return result;
  };

  // Take the difference between one array and a number of other arrays.
  // Only the elements present in just the first array will remain.
  _.difference = function(array) {
    var rest = flatten(arguments, true, true, 1);
    return _.filter(array, function(value){
      return !_.contains(rest, value);
    });
  };

  // Zip together multiple lists into a single array -- elements that share
  // an index go together.
  _.zip = function() {
    return _.unzip(arguments);
  };

  // Complement of _.zip. Unzip accepts an array of arrays and groups
  // each array's elements on shared indices
  _.unzip = function(array) {
    var length = array && _.max(array, getLength).length || 0;
    var result = Array(length);

    for (var index = 0; index < length; index++) {
      result[index] = _.pluck(array, index);
    }
    return result;
  };

  // Converts lists into objects. Pass either a single array of `[key, value]`
  // pairs, or two parallel arrays of the same length -- one of keys, and one of
  // the corresponding values.
  _.object = function(list, values) {
    var result = {};
    for (var i = 0, length = getLength(list); i < length; i++) {
      if (values) {
        result[list[i]] = values[i];
      } else {
        result[list[i][0]] = list[i][1];
      }
    }
    return result;
  };

  // Generator function to create the findIndex and findLastIndex functions
  function createPredicateIndexFinder(dir) {
    return function(array, predicate, context) {
      predicate = cb(predicate, context);
      var length = getLength(array);
      var index = dir > 0 ? 0 : length - 1;
      for (; index >= 0 && index < length; index += dir) {
        if (predicate(array[index], index, array)) return index;
      }
      return -1;
    };
  }

  // Returns the first index on an array-like that passes a predicate test
  _.findIndex = createPredicateIndexFinder(1);
  _.findLastIndex = createPredicateIndexFinder(-1);

  // Use a comparator function to figure out the smallest index at which
  // an object should be inserted so as to maintain order. Uses binary search.
  _.sortedIndex = function(array, obj, iteratee, context) {
    iteratee = cb(iteratee, context, 1);
    var value = iteratee(obj);
    var low = 0, high = getLength(array);
    while (low < high) {
      var mid = Math.floor((low + high) / 2);
      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;
    }
    return low;
  };

  // Generator function to create the indexOf and lastIndexOf functions
  function createIndexFinder(dir, predicateFind, sortedIndex) {
    return function(array, item, idx) {
      var i = 0, length = getLength(array);
      if (typeof idx == 'number') {
        if (dir > 0) {
            i = idx >= 0 ? idx : Math.max(idx + length, i);
        } else {
            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;
        }
      } else if (sortedIndex && idx && length) {
        idx = sortedIndex(array, item);
        return array[idx] === item ? idx : -1;
      }
      if (item !== item) {
        idx = predicateFind(slice.call(array, i, length), _.isNaN);
        return idx >= 0 ? idx + i : -1;
      }
      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {
        if (array[idx] === item) return idx;
      }
      return -1;
    };
  }

  // Return the position of the first occurrence of an item in an array,
  // or -1 if the item is not included in the array.
  // If the array is large and already in sort order, pass `true`
  // for **isSorted** to use binary search.
  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);
  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);

  // Generate an integer Array containing an arithmetic progression. A port of
  // the native Python `range()` function. See
  // [the Python documentation](http://docs.python.org/library/functions.html#range).
  _.range = function(start, stop, step) {
    if (stop == null) {
      stop = start || 0;
      start = 0;
    }
    step = step || 1;

    var length = Math.max(Math.ceil((stop - start) / step), 0);
    var range = Array(length);

    for (var idx = 0; idx < length; idx++, start += step) {
      range[idx] = start;
    }

    return range;
  };

  // Function (ahem) Functions
  // ------------------

  // Determines whether to execute a function as a constructor
  // or a normal function with the provided arguments
  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {
    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);
    var self = baseCreate(sourceFunc.prototype);
    var result = sourceFunc.apply(self, args);
    if (_.isObject(result)) return result;
    return self;
  };

  // Create a function bound to a given object (assigning `this`, and arguments,
  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
  // available.
  _.bind = function(func, context) {
    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
    var args = slice.call(arguments, 2);
    var bound = function() {
      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));
    };
    return bound;
  };

  // Partially apply a function by creating a version that has had some of its
  // arguments pre-filled, without changing its dynamic `this` context. _ acts
  // as a placeholder, allowing any combination of arguments to be pre-filled.
  _.partial = function(func) {
    var boundArgs = slice.call(arguments, 1);
    var bound = function() {
      var position = 0, length = boundArgs.length;
      var args = Array(length);
      for (var i = 0; i < length; i++) {
        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];
      }
      while (position < arguments.length) args.push(arguments[position++]);
      return executeBound(func, bound, this, this, args);
    };
    return bound;
  };

  // Bind a number of an object's methods to that object. Remaining arguments
  // are the method names to be bound. Useful for ensuring that all callbacks
  // defined on an object belong to it.
  _.bindAll = function(obj) {
    var i, length = arguments.length, key;
    if (length <= 1) throw new Error('bindAll must be passed function names');
    for (i = 1; i < length; i++) {
      key = arguments[i];
      obj[key] = _.bind(obj[key], obj);
    }
    return obj;
  };

  // Memoize an expensive function by storing its results.
  _.memoize = function(func, hasher) {
    var memoize = function(key) {
      var cache = memoize.cache;
      var address = '' + (hasher ? hasher.apply(this, arguments) : key);
      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);
      return cache[address];
    };
    memoize.cache = {};
    return memoize;
  };

  // Delays a function for the given number of milliseconds, and then calls
  // it with the arguments supplied.
  _.delay = function(func, wait) {
    var args = slice.call(arguments, 2);
    return setTimeout(function(){
      return func.apply(null, args);
    }, wait);
  };

  // Defers a function, scheduling it to run after the current call stack has
  // cleared.
  _.defer = _.partial(_.delay, _, 1);

  // Returns a function, that, when invoked, will only be triggered at most once
  // during a given window of time. Normally, the throttled function will run
  // as much as it can, without ever going more than once per `wait` duration;
  // but if you'd like to disable the execution on the leading edge, pass
  // `{leading: false}`. To disable execution on the trailing edge, ditto.
  _.throttle = function(func, wait, options) {
    var context, args, result;
    var timeout = null;
    var previous = 0;
    if (!options) options = {};
    var later = function() {
      previous = options.leading === false ? 0 : _.now();
      timeout = null;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    };
    return function() {
      var now = _.now();
      if (!previous && options.leading === false) previous = now;
      var remaining = wait - (now - previous);
      context = this;
      args = arguments;
      if (remaining <= 0 || remaining > wait) {
        if (timeout) {
          clearTimeout(timeout);
          timeout = null;
        }
        previous = now;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      } else if (!timeout && options.trailing !== false) {
        timeout = setTimeout(later, remaining);
      }
      return result;
    };
  };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function(func, wait, immediate) {
    var timeout, args, context, timestamp, result;

    var later = function() {
      var last = _.now() - timestamp;

      if (last < wait && last >= 0) {
        timeout = setTimeout(later, wait - last);
      } else {
        timeout = null;
        if (!immediate) {
          result = func.apply(context, args);
          if (!timeout) context = args = null;
        }
      }
    };

    return function() {
      context = this;
      args = arguments;
      timestamp = _.now();
      var callNow = immediate && !timeout;
      if (!timeout) timeout = setTimeout(later, wait);
      if (callNow) {
        result = func.apply(context, args);
        context = args = null;
      }

      return result;
    };
  };

  // Returns the first function passed as an argument to the second,
  // allowing you to adjust arguments, run code before and after, and
  // conditionally execute the original function.
  _.wrap = function(func, wrapper) {
    return _.partial(wrapper, func);
  };

  // Returns a negated version of the passed-in predicate.
  _.negate = function(predicate) {
    return function() {
      return !predicate.apply(this, arguments);
    };
  };

  // Returns a function that is the composition of a list of functions, each
  // consuming the return value of the function that follows.
  _.compose = function() {
    var args = arguments;
    var start = args.length - 1;
    return function() {
      var i = start;
      var result = args[start].apply(this, arguments);
      while (i--) result = args[i].call(this, result);
      return result;
    };
  };

  // Returns a function that will only be executed on and after the Nth call.
  _.after = function(times, func) {
    return function() {
      if (--times < 1) {
        return func.apply(this, arguments);
      }
    };
  };

  // Returns a function that will only be executed up to (but not including) the Nth call.
  _.before = function(times, func) {
    var memo;
    return function() {
      if (--times > 0) {
        memo = func.apply(this, arguments);
      }
      if (times <= 1) func = null;
      return memo;
    };
  };

  // Returns a function that will be executed at most one time, no matter how
  // often you call it. Useful for lazy initialization.
  _.once = _.partial(_.before, 2);

  // Object Functions
  // ----------------

  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.
  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');
  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',
                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

  function collectNonEnumProps(obj, keys) {
    var nonEnumIdx = nonEnumerableProps.length;
    var constructor = obj.constructor;
    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;

    // Constructor is a special case.
    var prop = 'constructor';
    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);

    while (nonEnumIdx--) {
      prop = nonEnumerableProps[nonEnumIdx];
      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {
        keys.push(prop);
      }
    }
  }

  // Retrieve the names of an object's own properties.
  // Delegates to **ECMAScript 5**'s native `Object.keys`
  _.keys = function(obj) {
    if (!_.isObject(obj)) return [];
    if (nativeKeys) return nativeKeys(obj);
    var keys = [];
    for (var key in obj) if (_.has(obj, key)) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve all the property names of an object.
  _.allKeys = function(obj) {
    if (!_.isObject(obj)) return [];
    var keys = [];
    for (var key in obj) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve the values of an object's properties.
  _.values = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var values = Array(length);
    for (var i = 0; i < length; i++) {
      values[i] = obj[keys[i]];
    }
    return values;
  };

  // Returns the results of applying the iteratee to each element of the object
  // In contrast to _.map it returns an object
  _.mapObject = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys =  _.keys(obj),
          length = keys.length,
          results = {},
          currentKey;
      for (var index = 0; index < length; index++) {
        currentKey = keys[index];
        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);
      }
      return results;
  };

  // Convert an object into a list of `[key, value]` pairs.
  _.pairs = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var pairs = Array(length);
    for (var i = 0; i < length; i++) {
      pairs[i] = [keys[i], obj[keys[i]]];
    }
    return pairs;
  };

  // Invert the keys and values of an object. The values must be serializable.
  _.invert = function(obj) {
    var result = {};
    var keys = _.keys(obj);
    for (var i = 0, length = keys.length; i < length; i++) {
      result[obj[keys[i]]] = keys[i];
    }
    return result;
  };

  // Return a sorted list of the function names available on the object.
  // Aliased as `methods`
  _.functions = _.methods = function(obj) {
    var names = [];
    for (var key in obj) {
      if (_.isFunction(obj[key])) names.push(key);
    }
    return names.sort();
  };

  // Extend a given object with all the properties in passed-in object(s).
  _.extend = createAssigner(_.allKeys);

  // Assigns a given object with all the own properties in the passed-in object(s)
  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
  _.extendOwn = _.assign = createAssigner(_.keys);

  // Returns the first key on an object that passes a predicate test
  _.findKey = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = _.keys(obj), key;
    for (var i = 0, length = keys.length; i < length; i++) {
      key = keys[i];
      if (predicate(obj[key], key, obj)) return key;
    }
  };

  // Return a copy of the object only containing the whitelisted properties.
  _.pick = function(object, oiteratee, context) {
    var result = {}, obj = object, iteratee, keys;
    if (obj == null) return result;
    if (_.isFunction(oiteratee)) {
      keys = _.allKeys(obj);
      iteratee = optimizeCb(oiteratee, context);
    } else {
      keys = flatten(arguments, false, false, 1);
      iteratee = function(value, key, obj) { return key in obj; };
      obj = Object(obj);
    }
    for (var i = 0, length = keys.length; i < length; i++) {
      var key = keys[i];
      var value = obj[key];
      if (iteratee(value, key, obj)) result[key] = value;
    }
    return result;
  };

   // Return a copy of the object without the blacklisted properties.
  _.omit = function(obj, iteratee, context) {
    if (_.isFunction(iteratee)) {
      iteratee = _.negate(iteratee);
    } else {
      var keys = _.map(flatten(arguments, false, false, 1), String);
      iteratee = function(value, key) {
        return !_.contains(keys, key);
      };
    }
    return _.pick(obj, iteratee, context);
  };

  // Fill in a given object with default properties.
  _.defaults = createAssigner(_.allKeys, true);

  // Creates an object that inherits from the given prototype object.
  // If additional properties are provided then they will be added to the
  // created object.
  _.create = function(prototype, props) {
    var result = baseCreate(prototype);
    if (props) _.extendOwn(result, props);
    return result;
  };

  // Create a (shallow-cloned) duplicate of an object.
  _.clone = function(obj) {
    if (!_.isObject(obj)) return obj;
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
  };

  // Invokes interceptor with the obj, and then returns obj.
  // The primary purpose of this method is to "tap into" a method chain, in
  // order to perform operations on intermediate results within the chain.
  _.tap = function(obj, interceptor) {
    interceptor(obj);
    return obj;
  };

  // Returns whether an object has a given set of `key:value` pairs.
  _.isMatch = function(object, attrs) {
    var keys = _.keys(attrs), length = keys.length;
    if (object == null) return !length;
    var obj = Object(object);
    for (var i = 0; i < length; i++) {
      var key = keys[i];
      if (attrs[key] !== obj[key] || !(key in obj)) return false;
    }
    return true;
  };


  // Internal recursive comparison function for `isEqual`.
  var eq = function(a, b, aStack, bStack) {
    // Identical objects are equal. `0 === -0`, but they aren't identical.
    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
    if (a === b) return a !== 0 || 1 / a === 1 / b;
    // A strict comparison is necessary because `null == undefined`.
    if (a == null || b == null) return a === b;
    // Unwrap any wrapped objects.
    if (a instanceof _) a = a._wrapped;
    if (b instanceof _) b = b._wrapped;
    // Compare `[[Class]]` names.
    var className = toString.call(a);
    if (className !== toString.call(b)) return false;
    switch (className) {
      // Strings, numbers, regular expressions, dates, and booleans are compared by value.
      case '[object RegExp]':
      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
      case '[object String]':
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
        // equivalent to `new String("5")`.
        return '' + a === '' + b;
      case '[object Number]':
        // `NaN`s are equivalent, but non-reflexive.
        // Object(NaN) is equivalent to NaN
        if (+a !== +a) return +b !== +b;
        // An `egal` comparison is performed for other numeric values.
        return +a === 0 ? 1 / +a === 1 / b : +a === +b;
      case '[object Date]':
      case '[object Boolean]':
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
        // millisecond representations. Note that invalid dates with millisecond representations
        // of `NaN` are not equivalent.
        return +a === +b;
    }

    var areArrays = className === '[object Array]';
    if (!areArrays) {
      if (typeof a != 'object' || typeof b != 'object') return false;

      // Objects with different constructors are not equivalent, but `Object`s or `Array`s
      // from different frames are.
      var aCtor = a.constructor, bCtor = b.constructor;
      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&
                               _.isFunction(bCtor) && bCtor instanceof bCtor)
                          && ('constructor' in a && 'constructor' in b)) {
        return false;
      }
    }
    // Assume equality for cyclic structures. The algorithm for detecting cyclic
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.

    // Initializing stack of traversed objects.
    // It's done here since we only need them for objects and arrays comparison.
    aStack = aStack || [];
    bStack = bStack || [];
    var length = aStack.length;
    while (length--) {
      // Linear search. Performance is inversely proportional to the number of
      // unique nested structures.
      if (aStack[length] === a) return bStack[length] === b;
    }

    // Add the first object to the stack of traversed objects.
    aStack.push(a);
    bStack.push(b);

    // Recursively compare objects and arrays.
    if (areArrays) {
      // Compare array lengths to determine if a deep comparison is necessary.
      length = a.length;
      if (length !== b.length) return false;
      // Deep compare the contents, ignoring non-numeric properties.
      while (length--) {
        if (!eq(a[length], b[length], aStack, bStack)) return false;
      }
    } else {
      // Deep compare objects.
      var keys = _.keys(a), key;
      length = keys.length;
      // Ensure that both objects contain the same number of properties before comparing deep equality.
      if (_.keys(b).length !== length) return false;
      while (length--) {
        // Deep compare each member
        key = keys[length];
        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;
      }
    }
    // Remove the first object from the stack of traversed objects.
    aStack.pop();
    bStack.pop();
    return true;
  };

  // Perform a deep comparison to check if two objects are equal.
  _.isEqual = function(a, b) {
    return eq(a, b);
  };

  // Is a given array, string, or object empty?
  // An "empty" object has no enumerable own-properties.
  _.isEmpty = function(obj) {
    if (obj == null) return true;
    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;
    return _.keys(obj).length === 0;
  };

  // Is a given value a DOM element?
  _.isElement = function(obj) {
    return !!(obj && obj.nodeType === 1);
  };

  // Is a given value an array?
  // Delegates to ECMA5's native Array.isArray
  _.isArray = nativeIsArray || function(obj) {
    return toString.call(obj) === '[object Array]';
  };

  // Is a given variable an object?
  _.isObject = function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' && !!obj;
  };

  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.
  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {
    _['is' + name] = function(obj) {
      return toString.call(obj) === '[object ' + name + ']';
    };
  });

  // Define a fallback version of the method in browsers (ahem, IE < 9), where
  // there isn't any inspectable "Arguments" type.
  if (!_.isArguments(arguments)) {
    _.isArguments = function(obj) {
      return _.has(obj, 'callee');
    };
  }

  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,
  // IE 11 (#1621), and in Safari 8 (#1929).
  if (typeof /./ != 'function' && typeof Int8Array != 'object') {
    _.isFunction = function(obj) {
      return typeof obj == 'function' || false;
    };
  }

  // Is a given object a finite number?
  _.isFinite = function(obj) {
    return isFinite(obj) && !isNaN(parseFloat(obj));
  };

  // Is the given value `NaN`? (NaN is the only number which does not equal itself).
  _.isNaN = function(obj) {
    return _.isNumber(obj) && obj !== +obj;
  };

  // Is a given value a boolean?
  _.isBoolean = function(obj) {
    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
  };

  // Is a given value equal to null?
  _.isNull = function(obj) {
    return obj === null;
  };

  // Is a given variable undefined?
  _.isUndefined = function(obj) {
    return obj === void 0;
  };

  // Shortcut function for checking if an object has a given property directly
  // on itself (in other words, not on a prototype).
  _.has = function(obj, key) {
    return obj != null && hasOwnProperty.call(obj, key);
  };

  // Utility Functions
  // -----------------

  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
  // previous owner. Returns a reference to the Underscore object.
  _.noConflict = function() {
    root._ = previousUnderscore;
    return this;
  };

  // Keep the identity function around for default iteratees.
  _.identity = function(value) {
    return value;
  };

  // Predicate-generating functions. Often useful outside of Underscore.
  _.constant = function(value) {
    return function() {
      return value;
    };
  };

  _.noop = function(){};

  _.property = property;

  // Generates a function for a given object that returns a given property.
  _.propertyOf = function(obj) {
    return obj == null ? function(){} : function(key) {
      return obj[key];
    };
  };

  // Returns a predicate for checking whether an object has a given set of
  // `key:value` pairs.
  _.matcher = _.matches = function(attrs) {
    attrs = _.extendOwn({}, attrs);
    return function(obj) {
      return _.isMatch(obj, attrs);
    };
  };

  // Run a function **n** times.
  _.times = function(n, iteratee, context) {
    var accum = Array(Math.max(0, n));
    iteratee = optimizeCb(iteratee, context, 1);
    for (var i = 0; i < n; i++) accum[i] = iteratee(i);
    return accum;
  };

  // Return a random integer between min and max (inclusive).
  _.random = function(min, max) {
    if (max == null) {
      max = min;
      min = 0;
    }
    return min + Math.floor(Math.random() * (max - min + 1));
  };

  // A (possibly faster) way to get the current timestamp as an integer.
  _.now = Date.now || function() {
    return new Date().getTime();
  };

   // List of HTML entities for escaping.
  var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;',
    '`': '&#x60;'
  };
  var unescapeMap = _.invert(escapeMap);

  // Functions for escaping and unescaping strings to/from HTML interpolation.
  var createEscaper = function(map) {
    var escaper = function(match) {
      return map[match];
    };
    // Regexes for identifying a key that needs to be escaped
    var source = '(?:' + _.keys(map).join('|') + ')';
    var testRegexp = RegExp(source);
    var replaceRegexp = RegExp(source, 'g');
    return function(string) {
      string = string == null ? '' : '' + string;
      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
    };
  };
  _.escape = createEscaper(escapeMap);
  _.unescape = createEscaper(unescapeMap);

  // If the value of the named `property` is a function then invoke it with the
  // `object` as context; otherwise, return it.
  _.result = function(object, property, fallback) {
    var value = object == null ? void 0 : object[property];
    if (value === void 0) {
      value = fallback;
    }
    return _.isFunction(value) ? value.call(object) : value;
  };

  // Generate a unique integer id (unique within the entire client session).
  // Useful for temporary DOM ids.
  var idCounter = 0;
  _.uniqueId = function(prefix) {
    var id = ++idCounter + '';
    return prefix ? prefix + id : id;
  };

  // By default, Underscore uses ERB-style template delimiters, change the
  // following template settings to use alternative delimiters.
  _.templateSettings = {
    evaluate    : /<%([\s\S]+?)%>/g,
    interpolate : /<%=([\s\S]+?)%>/g,
    escape      : /<%-([\s\S]+?)%>/g
  };

  // When customizing `templateSettings`, if you don't want to define an
  // interpolation, evaluation or escaping regex, we need one that is
  // guaranteed not to match.
  var noMatch = /(.)^/;

  // Certain characters need to be escaped so that they can be put into a
  // string literal.
  var escapes = {
    "'":      "'",
    '\\':     '\\',
    '\r':     'r',
    '\n':     'n',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  var escaper = /\\|'|\r|\n|\u2028|\u2029/g;

  var escapeChar = function(match) {
    return '\\' + escapes[match];
  };

  // JavaScript micro-templating, similar to John Resig's implementation.
  // Underscore templating handles arbitrary delimiters, preserves whitespace,
  // and correctly escapes quotes within interpolated code.
  // NB: `oldSettings` only exists for backwards compatibility.
  _.template = function(text, settings, oldSettings) {
    if (!settings && oldSettings) settings = oldSettings;
    settings = _.defaults({}, settings, _.templateSettings);

    // Combine delimiters into one regular expression via alternation.
    var matcher = RegExp([
      (settings.escape || noMatch).source,
      (settings.interpolate || noMatch).source,
      (settings.evaluate || noMatch).source
    ].join('|') + '|$', 'g');

    // Compile the template source, escaping string literals appropriately.
    var index = 0;
    var source = "__p+='";
    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
      source += text.slice(index, offset).replace(escaper, escapeChar);
      index = offset + match.length;

      if (escape) {
        source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
      } else if (interpolate) {
        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
      } else if (evaluate) {
        source += "';\n" + evaluate + "\n__p+='";
      }

      // Adobe VMs need the match returned to produce the correct offest.
      return match;
    });
    source += "';\n";

    // If a variable is not specified, place data values in local scope.
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

    source = "var __t,__p='',__j=Array.prototype.join," +
      "print=function(){__p+=__j.call(arguments,'');};\n" +
      source + 'return __p;\n';

    try {
      var render = new Function(settings.variable || 'obj', '_', source);
    } catch (e) {
      e.source = source;
      throw e;
    }

    var template = function(data) {
      return render.call(this, data, _);
    };

    // Provide the compiled source as a convenience for precompilation.
    var argument = settings.variable || 'obj';
    template.source = 'function(' + argument + '){\n' + source + '}';

    return template;
  };

  // Add a "chain" function. Start chaining a wrapped Underscore object.
  _.chain = function(obj) {
    var instance = _(obj);
    instance._chain = true;
    return instance;
  };

  // OOP
  // ---------------
  // If Underscore is called as a function, it returns a wrapped object that
  // can be used OO-style. This wrapper holds altered versions of all the
  // underscore functions. Wrapped objects may be chained.

  // Helper function to continue chaining intermediate results.
  var result = function(instance, obj) {
    return instance._chain ? _(obj).chain() : obj;
  };

  // Add your own custom functions to the Underscore object.
  _.mixin = function(obj) {
    _.each(_.functions(obj), function(name) {
      var func = _[name] = obj[name];
      _.prototype[name] = function() {
        var args = [this._wrapped];
        push.apply(args, arguments);
        return result(this, func.apply(_, args));
      };
    });
  };

  // Add all of the Underscore functions to the wrapper object.
  _.mixin(_);

  // Add all mutator Array functions to the wrapper.
  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      var obj = this._wrapped;
      method.apply(obj, arguments);
      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
      return result(this, obj);
    };
  });

  // Add all accessor Array functions to the wrapper.
  _.each(['concat', 'join', 'slice'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      return result(this, method.apply(this._wrapped, arguments));
    };
  });

  // Extracts the result from a wrapped and chained object.
  _.prototype.value = function() {
    return this._wrapped;
  };

  // Provide unwrapping proxy for some methods used in engine operations
  // such as arithmetic and JSON stringification.
  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;

  _.prototype.toString = function() {
    return '' + this._wrapped;
  };

  // AMD registration happens at the end for compatibility with AMD loaders
  // that may not enforce next-turn semantics on modules. Even though general
  // practice for AMD registration is to be anonymous, underscore registers
  // as a named module because, like jQuery, it is a base library that is
  // popular enough to be bundled in a third party lib, but not be part of
  // an AMD load request. Those cases could generate an error when an
  // anonymous define() is called outside of a loader request.
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
      return _;
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  }
}.call(this));


/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cloneElement", function() { return cloneElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Component", function() { return Component; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "render", function() { return render; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rerender", function() { return rerender; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "options", function() { return options; });
/** Virtual DOM Node */
function VNode() {}

/** Global options
 *	@public
 *	@namespace options {Object}
 */
var options = {

	/** If `true`, `prop` changes trigger synchronous component updates.
  *	@name syncComponentUpdates
  *	@type Boolean
  *	@default true
  */
	//syncComponentUpdates: true,

	/** Processes all created VNodes.
  *	@param {VNode} vnode	A newly-created VNode to normalize/process
  */
	//vnode(vnode) { }

	/** Hook invoked after a component is mounted. */
	// afterMount(component) { }

	/** Hook invoked after the DOM is updated with a component's latest render. */
	// afterUpdate(component) { }

	/** Hook invoked immediately before a component is unmounted. */
	// beforeUnmount(component) { }
};

var stack = [];

var EMPTY_CHILDREN = [];

/**
 * JSX/hyperscript reviver.
 * @see http://jasonformat.com/wtf-is-jsx
 * Benchmarks: https://esbench.com/bench/57ee8f8e330ab09900a1a1a0
 *
 * Note: this is exported as both `h()` and `createElement()` for compatibility reasons.
 *
 * Creates a VNode (virtual DOM element). A tree of VNodes can be used as a lightweight representation
 * of the structure of a DOM tree. This structure can be realized by recursively comparing it against
 * the current _actual_ DOM structure, and applying only the differences.
 *
 * `h()`/`createElement()` accepts an element name, a list of attributes/props,
 * and optionally children to append to the element.
 *
 * @example The following DOM tree
 *
 * `<div id="foo" name="bar">Hello!</div>`
 *
 * can be constructed using this function as:
 *
 * `h('div', { id: 'foo', name : 'bar' }, 'Hello!');`
 *
 * @param {string} nodeName	An element name. Ex: `div`, `a`, `span`, etc.
 * @param {Object} attributes	Any attributes/props to set on the created element.
 * @param rest			Additional arguments are taken to be children to append. Can be infinitely nested Arrays.
 *
 * @public
 */
function h(nodeName, attributes) {
	var children = EMPTY_CHILDREN,
	    lastSimple,
	    child,
	    simple,
	    i;
	for (i = arguments.length; i-- > 2;) {
		stack.push(arguments[i]);
	}
	if (attributes && attributes.children != null) {
		if (!stack.length) stack.push(attributes.children);
		delete attributes.children;
	}
	while (stack.length) {
		if ((child = stack.pop()) && child.pop !== undefined) {
			for (i = child.length; i--;) {
				stack.push(child[i]);
			}
		} else {
			if (typeof child === 'boolean') child = null;

			if (simple = typeof nodeName !== 'function') {
				if (child == null) child = '';else if (typeof child === 'number') child = String(child);else if (typeof child !== 'string') simple = false;
			}

			if (simple && lastSimple) {
				children[children.length - 1] += child;
			} else if (children === EMPTY_CHILDREN) {
				children = [child];
			} else {
				children.push(child);
			}

			lastSimple = simple;
		}
	}

	var p = new VNode();
	p.nodeName = nodeName;
	p.children = children;
	p.attributes = attributes == null ? undefined : attributes;
	p.key = attributes == null ? undefined : attributes.key;

	// if a "vnode hook" is defined, pass every created VNode to it
	if (options.vnode !== undefined) options.vnode(p);

	return p;
}

/**
 *  Copy all properties from `props` onto `obj`.
 *  @param {Object} obj		Object onto which properties should be copied.
 *  @param {Object} props	Object from which to copy properties.
 *  @returns obj
 *  @private
 */
function extend(obj, props) {
  for (var i in props) {
    obj[i] = props[i];
  }return obj;
}

/**
 * Call a function asynchronously, as soon as possible. Makes
 * use of HTML Promise to schedule the callback if available,
 * otherwise falling back to `setTimeout` (mainly for IE<11).
 *
 * @param {Function} callback
 */
var defer = typeof Promise == 'function' ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;

/**
 * Clones the given VNode, optionally adding attributes/props and replacing its children.
 * @param {VNode} vnode		The virutal DOM element to clone
 * @param {Object} props	Attributes/props to add when cloning
 * @param {VNode} rest		Any additional arguments will be used as replacement children.
 */
function cloneElement(vnode, props) {
  return h(vnode.nodeName, extend(extend({}, vnode.attributes), props), arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children);
}

// DOM properties that should NOT have "px" added when numeric
var IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;

/** Managed queue of dirty components to be re-rendered */

var items = [];

function enqueueRender(component) {
	if (!component._dirty && (component._dirty = true) && items.push(component) == 1) {
		(options.debounceRendering || defer)(rerender);
	}
}

function rerender() {
	var p,
	    list = items;
	items = [];
	while (p = list.pop()) {
		if (p._dirty) renderComponent(p);
	}
}

/**
 * Check if two nodes are equivalent.
 *
 * @param {Node} node			DOM Node to compare
 * @param {VNode} vnode			Virtual DOM node to compare
 * @param {boolean} [hyrdating=false]	If true, ignores component constructors when comparing.
 * @private
 */
function isSameNodeType(node, vnode, hydrating) {
  if (typeof vnode === 'string' || typeof vnode === 'number') {
    return node.splitText !== undefined;
  }
  if (typeof vnode.nodeName === 'string') {
    return !node._componentConstructor && isNamedNode(node, vnode.nodeName);
  }
  return hydrating || node._componentConstructor === vnode.nodeName;
}

/**
 * Check if an Element has a given nodeName, case-insensitively.
 *
 * @param {Element} node	A DOM Element to inspect the name of.
 * @param {String} nodeName	Unnormalized name to compare against.
 */
function isNamedNode(node, nodeName) {
  return node.normalizedNodeName === nodeName || node.nodeName.toLowerCase() === nodeName.toLowerCase();
}

/**
 * Reconstruct Component-style `props` from a VNode.
 * Ensures default/fallback values from `defaultProps`:
 * Own-properties of `defaultProps` not present in `vnode.attributes` are added.
 *
 * @param {VNode} vnode
 * @returns {Object} props
 */
function getNodeProps(vnode) {
  var props = extend({}, vnode.attributes);
  props.children = vnode.children;

  var defaultProps = vnode.nodeName.defaultProps;
  if (defaultProps !== undefined) {
    for (var i in defaultProps) {
      if (props[i] === undefined) {
        props[i] = defaultProps[i];
      }
    }
  }

  return props;
}

/** Create an element with the given nodeName.
 *	@param {String} nodeName
 *	@param {Boolean} [isSvg=false]	If `true`, creates an element within the SVG namespace.
 *	@returns {Element} node
 */
function createNode(nodeName, isSvg) {
	var node = isSvg ? document.createElementNS('http://www.w3.org/2000/svg', nodeName) : document.createElement(nodeName);
	node.normalizedNodeName = nodeName;
	return node;
}

/** Remove a child node from its parent if attached.
 *	@param {Element} node		The node to remove
 */
function removeNode(node) {
	var parentNode = node.parentNode;
	if (parentNode) parentNode.removeChild(node);
}

/** Set a named attribute on the given Node, with special behavior for some names and event handlers.
 *	If `value` is `null`, the attribute/handler will be removed.
 *	@param {Element} node	An element to mutate
 *	@param {string} name	The name/key to set, such as an event or attribute name
 *	@param {any} old	The last value that was set for this name/node pair
 *	@param {any} value	An attribute value, such as a function to be used as an event handler
 *	@param {Boolean} isSvg	Are we currently diffing inside an svg?
 *	@private
 */
function setAccessor(node, name, old, value, isSvg) {
	if (name === 'className') name = 'class';

	if (name === 'key') {
		// ignore
	} else if (name === 'ref') {
		if (old) old(null);
		if (value) value(node);
	} else if (name === 'class' && !isSvg) {
		node.className = value || '';
	} else if (name === 'style') {
		if (!value || typeof value === 'string' || typeof old === 'string') {
			node.style.cssText = value || '';
		}
		if (value && typeof value === 'object') {
			if (typeof old !== 'string') {
				for (var i in old) {
					if (!(i in value)) node.style[i] = '';
				}
			}
			for (var i in value) {
				node.style[i] = typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false ? value[i] + 'px' : value[i];
			}
		}
	} else if (name === 'dangerouslySetInnerHTML') {
		if (value) node.innerHTML = value.__html || '';
	} else if (name[0] == 'o' && name[1] == 'n') {
		var useCapture = name !== (name = name.replace(/Capture$/, ''));
		name = name.toLowerCase().substring(2);
		if (value) {
			if (!old) node.addEventListener(name, eventProxy, useCapture);
		} else {
			node.removeEventListener(name, eventProxy, useCapture);
		}
		(node._listeners || (node._listeners = {}))[name] = value;
	} else if (name !== 'list' && name !== 'type' && !isSvg && name in node) {
		setProperty(node, name, value == null ? '' : value);
		if (value == null || value === false) node.removeAttribute(name);
	} else {
		var ns = isSvg && name !== (name = name.replace(/^xlink\:?/, ''));
		if (value == null || value === false) {
			if (ns) node.removeAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase());else node.removeAttribute(name);
		} else if (typeof value !== 'function') {
			if (ns) node.setAttributeNS('http://www.w3.org/1999/xlink', name.toLowerCase(), value);else node.setAttribute(name, value);
		}
	}
}

/** Attempt to set a DOM property to the given value.
 *	IE & FF throw for certain property-value combinations.
 */
function setProperty(node, name, value) {
	try {
		node[name] = value;
	} catch (e) {}
}

/** Proxy an event to hooked event handlers
 *	@private
 */
function eventProxy(e) {
	return this._listeners[e.type](options.event && options.event(e) || e);
}

/** Queue of components that have been mounted and are awaiting componentDidMount */
var mounts = [];

/** Diff recursion count, used to track the end of the diff cycle. */
var diffLevel = 0;

/** Global flag indicating if the diff is currently within an SVG */
var isSvgMode = false;

/** Global flag indicating if the diff is performing hydration */
var hydrating = false;

/** Invoke queued componentDidMount lifecycle methods */
function flushMounts() {
	var c;
	while (c = mounts.pop()) {
		if (options.afterMount) options.afterMount(c);
		if (c.componentDidMount) c.componentDidMount();
	}
}

/** Apply differences in a given vnode (and it's deep children) to a real DOM Node.
 *	@param {Element} [dom=null]		A DOM node to mutate into the shape of the `vnode`
 *	@param {VNode} vnode			A VNode (with descendants forming a tree) representing the desired DOM structure
 *	@returns {Element} dom			The created/mutated element
 *	@private
 */
function diff(dom, vnode, context, mountAll, parent, componentRoot) {
	// diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)
	if (!diffLevel++) {
		// when first starting the diff, check if we're diffing an SVG or within an SVG
		isSvgMode = parent != null && parent.ownerSVGElement !== undefined;

		// hydration is indicated by the existing element to be diffed not having a prop cache
		hydrating = dom != null && !('__preactattr_' in dom);
	}

	var ret = idiff(dom, vnode, context, mountAll, componentRoot);

	// append the element if its a new parent
	if (parent && ret.parentNode !== parent) parent.appendChild(ret);

	// diffLevel being reduced to 0 means we're exiting the diff
	if (! --diffLevel) {
		hydrating = false;
		// invoke queued componentDidMount lifecycle methods
		if (!componentRoot) flushMounts();
	}

	return ret;
}

/** Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing. */
function idiff(dom, vnode, context, mountAll, componentRoot) {
	var out = dom,
	    prevSvgMode = isSvgMode;

	// empty values (null, undefined, booleans) render as empty Text nodes
	if (vnode == null || typeof vnode === 'boolean') vnode = '';

	// Fast case: Strings & Numbers create/update Text nodes.
	if (typeof vnode === 'string' || typeof vnode === 'number') {

		// update if it's already a Text node:
		if (dom && dom.splitText !== undefined && dom.parentNode && (!dom._component || componentRoot)) {
			/* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */
			if (dom.nodeValue != vnode) {
				dom.nodeValue = vnode;
			}
		} else {
			// it wasn't a Text node: replace it with one and recycle the old Element
			out = document.createTextNode(vnode);
			if (dom) {
				if (dom.parentNode) dom.parentNode.replaceChild(out, dom);
				recollectNodeTree(dom, true);
			}
		}

		out['__preactattr_'] = true;

		return out;
	}

	// If the VNode represents a Component, perform a component diff:
	var vnodeName = vnode.nodeName;
	if (typeof vnodeName === 'function') {
		return buildComponentFromVNode(dom, vnode, context, mountAll);
	}

	// Tracks entering and exiting SVG namespace when descending through the tree.
	isSvgMode = vnodeName === 'svg' ? true : vnodeName === 'foreignObject' ? false : isSvgMode;

	// If there's no existing element or it's the wrong type, create a new one:
	vnodeName = String(vnodeName);
	if (!dom || !isNamedNode(dom, vnodeName)) {
		out = createNode(vnodeName, isSvgMode);

		if (dom) {
			// move children into the replacement node
			while (dom.firstChild) {
				out.appendChild(dom.firstChild);
			} // if the previous Element was mounted into the DOM, replace it inline
			if (dom.parentNode) dom.parentNode.replaceChild(out, dom);

			// recycle the old element (skips non-Element node types)
			recollectNodeTree(dom, true);
		}
	}

	var fc = out.firstChild,
	    props = out['__preactattr_'],
	    vchildren = vnode.children;

	if (props == null) {
		props = out['__preactattr_'] = {};
		for (var a = out.attributes, i = a.length; i--;) {
			props[a[i].name] = a[i].value;
		}
	}

	// Optimization: fast-path for elements containing a single TextNode:
	if (!hydrating && vchildren && vchildren.length === 1 && typeof vchildren[0] === 'string' && fc != null && fc.splitText !== undefined && fc.nextSibling == null) {
		if (fc.nodeValue != vchildren[0]) {
			fc.nodeValue = vchildren[0];
		}
	}
	// otherwise, if there are existing or new children, diff them:
	else if (vchildren && vchildren.length || fc != null) {
			innerDiffNode(out, vchildren, context, mountAll, hydrating || props.dangerouslySetInnerHTML != null);
		}

	// Apply attributes/props from VNode to the DOM Element:
	diffAttributes(out, vnode.attributes, props);

	// restore previous SVG mode: (in case we're exiting an SVG namespace)
	isSvgMode = prevSvgMode;

	return out;
}

/** Apply child and attribute changes between a VNode and a DOM Node to the DOM.
 *	@param {Element} dom			Element whose children should be compared & mutated
 *	@param {Array} vchildren		Array of VNodes to compare to `dom.childNodes`
 *	@param {Object} context			Implicitly descendant context object (from most recent `getChildContext()`)
 *	@param {Boolean} mountAll
 *	@param {Boolean} isHydrating	If `true`, consumes externally created elements similar to hydration
 */
function innerDiffNode(dom, vchildren, context, mountAll, isHydrating) {
	var originalChildren = dom.childNodes,
	    children = [],
	    keyed = {},
	    keyedLen = 0,
	    min = 0,
	    len = originalChildren.length,
	    childrenLen = 0,
	    vlen = vchildren ? vchildren.length : 0,
	    j,
	    c,
	    f,
	    vchild,
	    child;

	// Build up a map of keyed children and an Array of unkeyed children:
	if (len !== 0) {
		for (var i = 0; i < len; i++) {
			var _child = originalChildren[i],
			    props = _child['__preactattr_'],
			    key = vlen && props ? _child._component ? _child._component.__key : props.key : null;
			if (key != null) {
				keyedLen++;
				keyed[key] = _child;
			} else if (props || (_child.splitText !== undefined ? isHydrating ? _child.nodeValue.trim() : true : isHydrating)) {
				children[childrenLen++] = _child;
			}
		}
	}

	if (vlen !== 0) {
		for (var i = 0; i < vlen; i++) {
			vchild = vchildren[i];
			child = null;

			// attempt to find a node based on key matching
			var key = vchild.key;
			if (key != null) {
				if (keyedLen && keyed[key] !== undefined) {
					child = keyed[key];
					keyed[key] = undefined;
					keyedLen--;
				}
			}
			// attempt to pluck a node of the same type from the existing children
			else if (!child && min < childrenLen) {
					for (j = min; j < childrenLen; j++) {
						if (children[j] !== undefined && isSameNodeType(c = children[j], vchild, isHydrating)) {
							child = c;
							children[j] = undefined;
							if (j === childrenLen - 1) childrenLen--;
							if (j === min) min++;
							break;
						}
					}
				}

			// morph the matched/found/created DOM child to match vchild (deep)
			child = idiff(child, vchild, context, mountAll);

			f = originalChildren[i];
			if (child && child !== dom && child !== f) {
				if (f == null) {
					dom.appendChild(child);
				} else if (child === f.nextSibling) {
					removeNode(f);
				} else {
					dom.insertBefore(child, f);
				}
			}
		}
	}

	// remove unused keyed children:
	if (keyedLen) {
		for (var i in keyed) {
			if (keyed[i] !== undefined) recollectNodeTree(keyed[i], false);
		}
	}

	// remove orphaned unkeyed children:
	while (min <= childrenLen) {
		if ((child = children[childrenLen--]) !== undefined) recollectNodeTree(child, false);
	}
}

/** Recursively recycle (or just unmount) a node and its descendants.
 *	@param {Node} node						DOM node to start unmount/removal from
 *	@param {Boolean} [unmountOnly=false]	If `true`, only triggers unmount lifecycle, skips removal
 */
function recollectNodeTree(node, unmountOnly) {
	var component = node._component;
	if (component) {
		// if node is owned by a Component, unmount that component (ends up recursing back here)
		unmountComponent(component);
	} else {
		// If the node's VNode had a ref function, invoke it with null here.
		// (this is part of the React spec, and smart for unsetting references)
		if (node['__preactattr_'] != null && node['__preactattr_'].ref) node['__preactattr_'].ref(null);

		if (unmountOnly === false || node['__preactattr_'] == null) {
			removeNode(node);
		}

		removeChildren(node);
	}
}

/** Recollect/unmount all children.
 *	- we use .lastChild here because it causes less reflow than .firstChild
 *	- it's also cheaper than accessing the .childNodes Live NodeList
 */
function removeChildren(node) {
	node = node.lastChild;
	while (node) {
		var next = node.previousSibling;
		recollectNodeTree(node, true);
		node = next;
	}
}

/** Apply differences in attributes from a VNode to the given DOM Element.
 *	@param {Element} dom		Element with attributes to diff `attrs` against
 *	@param {Object} attrs		The desired end-state key-value attribute pairs
 *	@param {Object} old			Current/previous attributes (from previous VNode or element's prop cache)
 */
function diffAttributes(dom, attrs, old) {
	var name;

	// remove attributes no longer present on the vnode by setting them to undefined
	for (name in old) {
		if (!(attrs && attrs[name] != null) && old[name] != null) {
			setAccessor(dom, name, old[name], old[name] = undefined, isSvgMode);
		}
	}

	// add new & update changed attributes
	for (name in attrs) {
		if (name !== 'children' && name !== 'innerHTML' && (!(name in old) || attrs[name] !== (name === 'value' || name === 'checked' ? dom[name] : old[name]))) {
			setAccessor(dom, name, old[name], old[name] = attrs[name], isSvgMode);
		}
	}
}

/** Retains a pool of Components for re-use, keyed on component name.
 *	Note: since component names are not unique or even necessarily available, these are primarily a form of sharding.
 *	@private
 */
var components = {};

/** Reclaim a component for later re-use by the recycler. */
function collectComponent(component) {
	var name = component.constructor.name;
	(components[name] || (components[name] = [])).push(component);
}

/** Create a component. Normalizes differences between PFC's and classful Components. */
function createComponent(Ctor, props, context) {
	var list = components[Ctor.name],
	    inst;

	if (Ctor.prototype && Ctor.prototype.render) {
		inst = new Ctor(props, context);
		Component.call(inst, props, context);
	} else {
		inst = new Component(props, context);
		inst.constructor = Ctor;
		inst.render = doRender;
	}

	if (list) {
		for (var i = list.length; i--;) {
			if (list[i].constructor === Ctor) {
				inst.nextBase = list[i].nextBase;
				list.splice(i, 1);
				break;
			}
		}
	}
	return inst;
}

/** The `.render()` method for a PFC backing instance. */
function doRender(props, state, context) {
	return this.constructor(props, context);
}

/** Set a component's `props` (generally derived from JSX attributes).
 *	@param {Object} props
 *	@param {Object} [opts]
 *	@param {boolean} [opts.renderSync=false]	If `true` and {@link options.syncComponentUpdates} is `true`, triggers synchronous rendering.
 *	@param {boolean} [opts.render=true]			If `false`, no render will be triggered.
 */
function setComponentProps(component, props, opts, context, mountAll) {
	if (component._disable) return;
	component._disable = true;

	if (component.__ref = props.ref) delete props.ref;
	if (component.__key = props.key) delete props.key;

	if (!component.base || mountAll) {
		if (component.componentWillMount) component.componentWillMount();
	} else if (component.componentWillReceiveProps) {
		component.componentWillReceiveProps(props, context);
	}

	if (context && context !== component.context) {
		if (!component.prevContext) component.prevContext = component.context;
		component.context = context;
	}

	if (!component.prevProps) component.prevProps = component.props;
	component.props = props;

	component._disable = false;

	if (opts !== 0) {
		if (opts === 1 || options.syncComponentUpdates !== false || !component.base) {
			renderComponent(component, 1, mountAll);
		} else {
			enqueueRender(component);
		}
	}

	if (component.__ref) component.__ref(component);
}

/** Render a Component, triggering necessary lifecycle events and taking High-Order Components into account.
 *	@param {Component} component
 *	@param {Object} [opts]
 *	@param {boolean} [opts.build=false]		If `true`, component will build and store a DOM node if not already associated with one.
 *	@private
 */
function renderComponent(component, opts, mountAll, isChild) {
	if (component._disable) return;

	var props = component.props,
	    state = component.state,
	    context = component.context,
	    previousProps = component.prevProps || props,
	    previousState = component.prevState || state,
	    previousContext = component.prevContext || context,
	    isUpdate = component.base,
	    nextBase = component.nextBase,
	    initialBase = isUpdate || nextBase,
	    initialChildComponent = component._component,
	    skip = false,
	    rendered,
	    inst,
	    cbase;

	// if updating
	if (isUpdate) {
		component.props = previousProps;
		component.state = previousState;
		component.context = previousContext;
		if (opts !== 2 && component.shouldComponentUpdate && component.shouldComponentUpdate(props, state, context) === false) {
			skip = true;
		} else if (component.componentWillUpdate) {
			component.componentWillUpdate(props, state, context);
		}
		component.props = props;
		component.state = state;
		component.context = context;
	}

	component.prevProps = component.prevState = component.prevContext = component.nextBase = null;
	component._dirty = false;

	if (!skip) {
		rendered = component.render(props, state, context);

		// context to pass to the child, can be updated via (grand-)parent component
		if (component.getChildContext) {
			context = extend(extend({}, context), component.getChildContext());
		}

		var childComponent = rendered && rendered.nodeName,
		    toUnmount,
		    base;

		if (typeof childComponent === 'function') {
			// set up high order component link

			var childProps = getNodeProps(rendered);
			inst = initialChildComponent;

			if (inst && inst.constructor === childComponent && childProps.key == inst.__key) {
				setComponentProps(inst, childProps, 1, context, false);
			} else {
				toUnmount = inst;

				component._component = inst = createComponent(childComponent, childProps, context);
				inst.nextBase = inst.nextBase || nextBase;
				inst._parentComponent = component;
				setComponentProps(inst, childProps, 0, context, false);
				renderComponent(inst, 1, mountAll, true);
			}

			base = inst.base;
		} else {
			cbase = initialBase;

			// destroy high order component link
			toUnmount = initialChildComponent;
			if (toUnmount) {
				cbase = component._component = null;
			}

			if (initialBase || opts === 1) {
				if (cbase) cbase._component = null;
				base = diff(cbase, rendered, context, mountAll || !isUpdate, initialBase && initialBase.parentNode, true);
			}
		}

		if (initialBase && base !== initialBase && inst !== initialChildComponent) {
			var baseParent = initialBase.parentNode;
			if (baseParent && base !== baseParent) {
				baseParent.replaceChild(base, initialBase);

				if (!toUnmount) {
					initialBase._component = null;
					recollectNodeTree(initialBase, false);
				}
			}
		}

		if (toUnmount) {
			unmountComponent(toUnmount);
		}

		component.base = base;
		if (base && !isChild) {
			var componentRef = component,
			    t = component;
			while (t = t._parentComponent) {
				(componentRef = t).base = base;
			}
			base._component = componentRef;
			base._componentConstructor = componentRef.constructor;
		}
	}

	if (!isUpdate || mountAll) {
		mounts.unshift(component);
	} else if (!skip) {
		// Ensure that pending componentDidMount() hooks of child components
		// are called before the componentDidUpdate() hook in the parent.
		// Note: disabled as it causes duplicate hooks, see https://github.com/developit/preact/issues/750
		// flushMounts();

		if (component.componentDidUpdate) {
			component.componentDidUpdate(previousProps, previousState, previousContext);
		}
		if (options.afterUpdate) options.afterUpdate(component);
	}

	if (component._renderCallbacks != null) {
		while (component._renderCallbacks.length) {
			component._renderCallbacks.pop().call(component);
		}
	}

	if (!diffLevel && !isChild) flushMounts();
}

/** Apply the Component referenced by a VNode to the DOM.
 *	@param {Element} dom	The DOM node to mutate
 *	@param {VNode} vnode	A Component-referencing VNode
 *	@returns {Element} dom	The created/mutated element
 *	@private
 */
function buildComponentFromVNode(dom, vnode, context, mountAll) {
	var c = dom && dom._component,
	    originalComponent = c,
	    oldDom = dom,
	    isDirectOwner = c && dom._componentConstructor === vnode.nodeName,
	    isOwner = isDirectOwner,
	    props = getNodeProps(vnode);
	while (c && !isOwner && (c = c._parentComponent)) {
		isOwner = c.constructor === vnode.nodeName;
	}

	if (c && isOwner && (!mountAll || c._component)) {
		setComponentProps(c, props, 3, context, mountAll);
		dom = c.base;
	} else {
		if (originalComponent && !isDirectOwner) {
			unmountComponent(originalComponent);
			dom = oldDom = null;
		}

		c = createComponent(vnode.nodeName, props, context);
		if (dom && !c.nextBase) {
			c.nextBase = dom;
			// passing dom/oldDom as nextBase will recycle it if unused, so bypass recycling on L229:
			oldDom = null;
		}
		setComponentProps(c, props, 1, context, mountAll);
		dom = c.base;

		if (oldDom && dom !== oldDom) {
			oldDom._component = null;
			recollectNodeTree(oldDom, false);
		}
	}

	return dom;
}

/** Remove a component from the DOM and recycle it.
 *	@param {Component} component	The Component instance to unmount
 *	@private
 */
function unmountComponent(component) {
	if (options.beforeUnmount) options.beforeUnmount(component);

	var base = component.base;

	component._disable = true;

	if (component.componentWillUnmount) component.componentWillUnmount();

	component.base = null;

	// recursively tear down & recollect high-order component children:
	var inner = component._component;
	if (inner) {
		unmountComponent(inner);
	} else if (base) {
		if (base['__preactattr_'] && base['__preactattr_'].ref) base['__preactattr_'].ref(null);

		component.nextBase = base;

		removeNode(base);
		collectComponent(component);

		removeChildren(base);
	}

	if (component.__ref) component.__ref(null);
}

/** Base Component class.
 *	Provides `setState()` and `forceUpdate()`, which trigger rendering.
 *	@public
 *
 *	@example
 *	class MyFoo extends Component {
 *		render(props, state) {
 *			return <div />;
 *		}
 *	}
 */
function Component(props, context) {
	this._dirty = true;

	/** @public
  *	@type {object}
  */
	this.context = context;

	/** @public
  *	@type {object}
  */
	this.props = props;

	/** @public
  *	@type {object}
  */
	this.state = this.state || {};
}

extend(Component.prototype, {

	/** Returns a `boolean` indicating if the component should re-render when receiving the given `props` and `state`.
  *	@param {object} nextProps
  *	@param {object} nextState
  *	@param {object} nextContext
  *	@returns {Boolean} should the component re-render
  *	@name shouldComponentUpdate
  *	@function
  */

	/** Update component state by copying properties from `state` to `this.state`.
  *	@param {object} state		A hash of state properties to update with new values
  *	@param {function} callback	A function to be called once component state is updated
  */
	setState: function setState(state, callback) {
		var s = this.state;
		if (!this.prevState) this.prevState = extend({}, s);
		extend(s, typeof state === 'function' ? state(s, this.props) : state);
		if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);
		enqueueRender(this);
	},


	/** Immediately perform a synchronous re-render of the component.
  *	@param {function} callback		A function to be called after component is re-rendered.
  *	@private
  */
	forceUpdate: function forceUpdate(callback) {
		if (callback) (this._renderCallbacks = this._renderCallbacks || []).push(callback);
		renderComponent(this, 2);
	},


	/** Accepts `props` and `state`, and returns a new Virtual DOM tree to build.
  *	Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).
  *	@param {object} props		Props (eg: JSX attributes) received from parent element/component
  *	@param {object} state		The component's current state
  *	@param {object} context		Context object (if a parent component has provided context)
  *	@returns VNode
  */
	render: function render() {}
});

/** Render JSX into a `parent` Element.
 *	@param {VNode} vnode		A (JSX) VNode to render
 *	@param {Element} parent		DOM element to render into
 *	@param {Element} [merge]	Attempt to re-use an existing DOM tree rooted at `merge`
 *	@public
 *
 *	@example
 *	// render a div into <body>:
 *	render(<div id="hello">hello!</div>, document.body);
 *
 *	@example
 *	// render a "Thing" component into #foo:
 *	const Thing = ({ name }) => <span>{ name }</span>;
 *	render(<Thing name="one" />, document.querySelector('#foo'));
 */
function render(vnode, parent, merge) {
  return diff(merge, vnode, {}, false, parent, false);
}

var preact = {
	h: h,
	createElement: h,
	cloneElement: cloneElement,
	Component: Component,
	render: render,
	rerender: rerender,
	options: options
};


/* harmony default export */ __webpack_exports__["default"] = (preact);
//# sourceMappingURL=preact.esm.js.map


/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = newInterval;
var t0 = new Date,
    t1 = new Date;

function newInterval(floori, offseti, count, field) {

  function interval(date) {
    return floori(date = new Date(+date)), date;
  }

  interval.floor = interval;

  interval.ceil = function(date) {
    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;
  };

  interval.round = function(date) {
    var d0 = interval(date),
        d1 = interval.ceil(date);
    return date - d0 < d1 - date ? d0 : d1;
  };

  interval.offset = function(date, step) {
    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;
  };

  interval.range = function(start, stop, step) {
    var range = [], previous;
    start = interval.ceil(start);
    step = step == null ? 1 : Math.floor(step);
    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date
    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);
    while (previous < start && start < stop);
    return range;
  };

  interval.filter = function(test) {
    return newInterval(function(date) {
      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);
    }, function(date, step) {
      if (date >= date) {
        if (step < 0) while (++step <= 0) {
          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty
        } else while (--step >= 0) {
          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty
        }
      }
    });
  };

  if (count) {
    interval.count = function(start, end) {
      t0.setTime(+start), t1.setTime(+end);
      floori(t0), floori(t1);
      return Math.floor(count(t0, t1));
    };

    interval.every = function(step) {
      step = Math.floor(step);
      return !isFinite(step) || !(step > 0) ? null
          : !(step > 1) ? interval
          : interval.filter(field
              ? function(d) { return field(d) % step === 0; }
              : function(d) { return interval.count(0, d) % step === 0; });
    };
  }

  return interval;
}


/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return root; });
/* harmony export (immutable) */ __webpack_exports__["a"] = Selection;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__select__ = __webpack_require__(158);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__selectAll__ = __webpack_require__(159);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__filter__ = __webpack_require__(160);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__data__ = __webpack_require__(161);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__enter__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__exit__ = __webpack_require__(163);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__merge__ = __webpack_require__(164);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__order__ = __webpack_require__(165);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__sort__ = __webpack_require__(166);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__call__ = __webpack_require__(167);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__nodes__ = __webpack_require__(168);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__node__ = __webpack_require__(169);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__size__ = __webpack_require__(170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__empty__ = __webpack_require__(171);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__each__ = __webpack_require__(172);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__attr__ = __webpack_require__(173);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__style__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__property__ = __webpack_require__(174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__classed__ = __webpack_require__(175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__text__ = __webpack_require__(176);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__html__ = __webpack_require__(177);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__raise__ = __webpack_require__(178);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__lower__ = __webpack_require__(179);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__append__ = __webpack_require__(180);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__insert__ = __webpack_require__(181);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__remove__ = __webpack_require__(182);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__clone__ = __webpack_require__(183);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__datum__ = __webpack_require__(184);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__on__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__dispatch__ = __webpack_require__(185);































var root = [null];

function Selection(groups, parents) {
  this._groups = groups;
  this._parents = parents;
}

function selection() {
  return new Selection([[document.documentElement]], root);
}

Selection.prototype = selection.prototype = {
  constructor: Selection,
  select: __WEBPACK_IMPORTED_MODULE_0__select__["a" /* default */],
  selectAll: __WEBPACK_IMPORTED_MODULE_1__selectAll__["a" /* default */],
  filter: __WEBPACK_IMPORTED_MODULE_2__filter__["a" /* default */],
  data: __WEBPACK_IMPORTED_MODULE_3__data__["a" /* default */],
  enter: __WEBPACK_IMPORTED_MODULE_4__enter__["b" /* default */],
  exit: __WEBPACK_IMPORTED_MODULE_5__exit__["a" /* default */],
  merge: __WEBPACK_IMPORTED_MODULE_6__merge__["a" /* default */],
  order: __WEBPACK_IMPORTED_MODULE_7__order__["a" /* default */],
  sort: __WEBPACK_IMPORTED_MODULE_8__sort__["a" /* default */],
  call: __WEBPACK_IMPORTED_MODULE_9__call__["a" /* default */],
  nodes: __WEBPACK_IMPORTED_MODULE_10__nodes__["a" /* default */],
  node: __WEBPACK_IMPORTED_MODULE_11__node__["a" /* default */],
  size: __WEBPACK_IMPORTED_MODULE_12__size__["a" /* default */],
  empty: __WEBPACK_IMPORTED_MODULE_13__empty__["a" /* default */],
  each: __WEBPACK_IMPORTED_MODULE_14__each__["a" /* default */],
  attr: __WEBPACK_IMPORTED_MODULE_15__attr__["a" /* default */],
  style: __WEBPACK_IMPORTED_MODULE_16__style__["a" /* default */],
  property: __WEBPACK_IMPORTED_MODULE_17__property__["a" /* default */],
  classed: __WEBPACK_IMPORTED_MODULE_18__classed__["a" /* default */],
  text: __WEBPACK_IMPORTED_MODULE_19__text__["a" /* default */],
  html: __WEBPACK_IMPORTED_MODULE_20__html__["a" /* default */],
  raise: __WEBPACK_IMPORTED_MODULE_21__raise__["a" /* default */],
  lower: __WEBPACK_IMPORTED_MODULE_22__lower__["a" /* default */],
  append: __WEBPACK_IMPORTED_MODULE_23__append__["a" /* default */],
  insert: __WEBPACK_IMPORTED_MODULE_24__insert__["a" /* default */],
  remove: __WEBPACK_IMPORTED_MODULE_25__remove__["a" /* default */],
  clone: __WEBPACK_IMPORTED_MODULE_26__clone__["a" /* default */],
  datum: __WEBPACK_IMPORTED_MODULE_27__datum__["a" /* default */],
  on: __WEBPACK_IMPORTED_MODULE_28__on__["b" /* default */],
  dispatch: __WEBPACK_IMPORTED_MODULE_29__dispatch__["a" /* default */]
};

/* harmony default export */ __webpack_exports__["b"] = (selection);


/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export CREATED */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return SCHEDULED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return STARTING; });
/* unused harmony export STARTED */
/* unused harmony export RUNNING */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ENDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ENDED; });
/* harmony export (immutable) */ __webpack_exports__["g"] = init;
/* harmony export (immutable) */ __webpack_exports__["h"] = set;
/* harmony export (immutable) */ __webpack_exports__["f"] = get;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_dispatch__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_timer__ = __webpack_require__(91);



var emptyOn = Object(__WEBPACK_IMPORTED_MODULE_0_d3_dispatch__["a" /* dispatch */])("start", "end", "interrupt");
var emptyTween = [];

var CREATED = 0;
var SCHEDULED = 1;
var STARTING = 2;
var STARTED = 3;
var RUNNING = 4;
var ENDING = 5;
var ENDED = 6;

/* harmony default export */ __webpack_exports__["e"] = (function(node, name, id, index, group, timing) {
  var schedules = node.__transition;
  if (!schedules) node.__transition = {};
  else if (id in schedules) return;
  create(node, id, {
    name: name,
    index: index, // For context during callback.
    group: group, // For context during callback.
    on: emptyOn,
    tween: emptyTween,
    time: timing.time,
    delay: timing.delay,
    duration: timing.duration,
    ease: timing.ease,
    timer: null,
    state: CREATED
  });
});

function init(node, id) {
  var schedule = get(node, id);
  if (schedule.state > CREATED) throw new Error("too late; already scheduled");
  return schedule;
}

function set(node, id) {
  var schedule = get(node, id);
  if (schedule.state > STARTING) throw new Error("too late; already started");
  return schedule;
}

function get(node, id) {
  var schedule = node.__transition;
  if (!schedule || !(schedule = schedule[id])) throw new Error("transition not found");
  return schedule;
}

function create(node, id, self) {
  var schedules = node.__transition,
      tween;

  // Initialize the self timer when the transition is created.
  // Note the actual delay is not known until the first callback!
  schedules[id] = self;
  self.timer = Object(__WEBPACK_IMPORTED_MODULE_1_d3_timer__["c" /* timer */])(schedule, 0, self.time);

  function schedule(elapsed) {
    self.state = SCHEDULED;
    self.timer.restart(start, self.delay, self.time);

    // If the elapsed delay is less than our first sleep, start immediately.
    if (self.delay <= elapsed) start(elapsed - self.delay);
  }

  function start(elapsed) {
    var i, j, n, o;

    // If the state is not SCHEDULED, then we previously errored on start.
    if (self.state !== SCHEDULED) return stop();

    for (i in schedules) {
      o = schedules[i];
      if (o.name !== self.name) continue;

      // While this element already has a starting transition during this frame,
      // defer starting an interrupting transition until that transition has a
      // chance to tick (and possibly end); see d3/d3-transition#54!
      if (o.state === STARTED) return Object(__WEBPACK_IMPORTED_MODULE_1_d3_timer__["b" /* timeout */])(start);

      // Interrupt the active transition, if any.
      // Dispatch the interrupt event.
      if (o.state === RUNNING) {
        o.state = ENDED;
        o.timer.stop();
        o.on.call("interrupt", node, node.__data__, o.index, o.group);
        delete schedules[i];
      }

      // Cancel any pre-empted transitions. No interrupt event is dispatched
      // because the cancelled transitions never started. Note that this also
      // removes this transition from the pending list!
      else if (+i < id) {
        o.state = ENDED;
        o.timer.stop();
        delete schedules[i];
      }
    }

    // Defer the first tick to end of the current frame; see d3/d3#1576.
    // Note the transition may be canceled after start and before the first tick!
    // Note this must be scheduled before the start event; see d3/d3-transition#16!
    // Assuming this is successful, subsequent callbacks go straight to tick.
    Object(__WEBPACK_IMPORTED_MODULE_1_d3_timer__["b" /* timeout */])(function() {
      if (self.state === STARTED) {
        self.state = RUNNING;
        self.timer.restart(tick, self.delay, self.time);
        tick(elapsed);
      }
    });

    // Dispatch the start event.
    // Note this must be done before the tween are initialized.
    self.state = STARTING;
    self.on.call("start", node, node.__data__, self.index, self.group);
    if (self.state !== STARTING) return; // interrupted
    self.state = STARTED;

    // Initialize the tween, deleting null tween.
    tween = new Array(n = self.tween.length);
    for (i = 0, j = -1; i < n; ++i) {
      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {
        tween[++j] = o;
      }
    }
    tween.length = j + 1;
  }

  function tick(elapsed) {
    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),
        i = -1,
        n = tween.length;

    while (++i < n) {
      tween[i].call(null, t);
    }

    // Dispatch the end event.
    if (self.state === ENDING) {
      self.on.call("end", node, node.__data__, self.index, self.group);
      stop();
    }
  }

  function stop() {
    self.state = ENDED;
    self.timer.stop();
    delete schedules[id];
    for (var i in schedules) return; // eslint-disable-line no-unused-vars
    delete node.__transition;
  }
}


/***/ }),
/* 7 */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function(useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if(item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function(modules, mediaQuery) {
		if(typeof modules === "string")
			modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for(var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if(typeof id === "number")
				alreadyImportedModules[id] = true;
		}
		for(i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if(mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if(mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

var stylesInDom = {};

var	memoize = function (fn) {
	var memo;

	return function () {
		if (typeof memo === "undefined") memo = fn.apply(this, arguments);
		return memo;
	};
};

var isOldIE = memoize(function () {
	// Test for IE <= 9 as proposed by Browserhacks
	// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
	// Tests for existence of standard globals is to allow style-loader
	// to operate correctly into non-standard environments
	// @see https://github.com/webpack-contrib/style-loader/issues/177
	return window && document && document.all && !window.atob;
});

var getElement = (function (fn) {
	var memo = {};

	return function(selector) {
		if (typeof memo[selector] === "undefined") {
			memo[selector] = fn.call(this, selector);
		}

		return memo[selector]
	};
})(function (target) {
	return document.querySelector(target)
});

var singleton = null;
var	singletonCounter = 0;
var	stylesInsertedAtTop = [];

var	fixUrls = __webpack_require__(156);

module.exports = function(list, options) {
	if (typeof DEBUG !== "undefined" && DEBUG) {
		if (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
	}

	options = options || {};

	options.attrs = typeof options.attrs === "object" ? options.attrs : {};

	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
	// tags it will allow on a page
	if (!options.singleton) options.singleton = isOldIE();

	// By default, add <style> tags to the <head> element
	if (!options.insertInto) options.insertInto = "head";

	// By default, add <style> tags to the bottom of the target
	if (!options.insertAt) options.insertAt = "bottom";

	var styles = listToStyles(list, options);

	addStylesToDom(styles, options);

	return function update (newList) {
		var mayRemove = [];

		for (var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];

			domStyle.refs--;
			mayRemove.push(domStyle);
		}

		if(newList) {
			var newStyles = listToStyles(newList, options);
			addStylesToDom(newStyles, options);
		}

		for (var i = 0; i < mayRemove.length; i++) {
			var domStyle = mayRemove[i];

			if(domStyle.refs === 0) {
				for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();

				delete stylesInDom[domStyle.id];
			}
		}
	};
};

function addStylesToDom (styles, options) {
	for (var i = 0; i < styles.length; i++) {
		var item = styles[i];
		var domStyle = stylesInDom[item.id];

		if(domStyle) {
			domStyle.refs++;

			for(var j = 0; j < domStyle.parts.length; j++) {
				domStyle.parts[j](item.parts[j]);
			}

			for(; j < item.parts.length; j++) {
				domStyle.parts.push(addStyle(item.parts[j], options));
			}
		} else {
			var parts = [];

			for(var j = 0; j < item.parts.length; j++) {
				parts.push(addStyle(item.parts[j], options));
			}

			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
		}
	}
}

function listToStyles (list, options) {
	var styles = [];
	var newStyles = {};

	for (var i = 0; i < list.length; i++) {
		var item = list[i];
		var id = options.base ? item[0] + options.base : item[0];
		var css = item[1];
		var media = item[2];
		var sourceMap = item[3];
		var part = {css: css, media: media, sourceMap: sourceMap};

		if(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});
		else newStyles[id].parts.push(part);
	}

	return styles;
}

function insertStyleElement (options, style) {
	var target = getElement(options.insertInto)

	if (!target) {
		throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
	}

	var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];

	if (options.insertAt === "top") {
		if (!lastStyleElementInsertedAtTop) {
			target.insertBefore(style, target.firstChild);
		} else if (lastStyleElementInsertedAtTop.nextSibling) {
			target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);
		} else {
			target.appendChild(style);
		}
		stylesInsertedAtTop.push(style);
	} else if (options.insertAt === "bottom") {
		target.appendChild(style);
	} else {
		throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
	}
}

function removeStyleElement (style) {
	if (style.parentNode === null) return false;
	style.parentNode.removeChild(style);

	var idx = stylesInsertedAtTop.indexOf(style);
	if(idx >= 0) {
		stylesInsertedAtTop.splice(idx, 1);
	}
}

function createStyleElement (options) {
	var style = document.createElement("style");

	options.attrs.type = "text/css";

	addAttrs(style, options.attrs);
	insertStyleElement(options, style);

	return style;
}

function createLinkElement (options) {
	var link = document.createElement("link");

	options.attrs.type = "text/css";
	options.attrs.rel = "stylesheet";

	addAttrs(link, options.attrs);
	insertStyleElement(options, link);

	return link;
}

function addAttrs (el, attrs) {
	Object.keys(attrs).forEach(function (key) {
		el.setAttribute(key, attrs[key]);
	});
}

function addStyle (obj, options) {
	var style, update, remove, result;

	// If a transform function was defined, run it on the css
	if (options.transform && obj.css) {
	    result = options.transform(obj.css);

	    if (result) {
	    	// If transform returns a value, use that instead of the original css.
	    	// This allows running runtime transformations on the css.
	    	obj.css = result;
	    } else {
	    	// If the transform function returns a falsy value, don't add this css.
	    	// This allows conditional loading of css
	    	return function() {
	    		// noop
	    	};
	    }
	}

	if (options.singleton) {
		var styleIndex = singletonCounter++;

		style = singleton || (singleton = createStyleElement(options));

		update = applyToSingletonTag.bind(null, style, styleIndex, false);
		remove = applyToSingletonTag.bind(null, style, styleIndex, true);

	} else if (
		obj.sourceMap &&
		typeof URL === "function" &&
		typeof URL.createObjectURL === "function" &&
		typeof URL.revokeObjectURL === "function" &&
		typeof Blob === "function" &&
		typeof btoa === "function"
	) {
		style = createLinkElement(options);
		update = updateLink.bind(null, style, options);
		remove = function () {
			removeStyleElement(style);

			if(style.href) URL.revokeObjectURL(style.href);
		};
	} else {
		style = createStyleElement(options);
		update = applyToTag.bind(null, style);
		remove = function () {
			removeStyleElement(style);
		};
	}

	update(obj);

	return function updateStyle (newObj) {
		if (newObj) {
			if (
				newObj.css === obj.css &&
				newObj.media === obj.media &&
				newObj.sourceMap === obj.sourceMap
			) {
				return;
			}

			update(obj = newObj);
		} else {
			remove();
		}
	};
}

var replaceText = (function () {
	var textStore = [];

	return function (index, replacement) {
		textStore[index] = replacement;

		return textStore.filter(Boolean).join('\n');
	};
})();

function applyToSingletonTag (style, index, remove, obj) {
	var css = remove ? "" : obj.css;

	if (style.styleSheet) {
		style.styleSheet.cssText = replaceText(index, css);
	} else {
		var cssNode = document.createTextNode(css);
		var childNodes = style.childNodes;

		if (childNodes[index]) style.removeChild(childNodes[index]);

		if (childNodes.length) {
			style.insertBefore(cssNode, childNodes[index]);
		} else {
			style.appendChild(cssNode);
		}
	}
}

function applyToTag (style, obj) {
	var css = obj.css;
	var media = obj.media;

	if(media) {
		style.setAttribute("media", media)
	}

	if(style.styleSheet) {
		style.styleSheet.cssText = css;
	} else {
		while(style.firstChild) {
			style.removeChild(style.firstChild);
		}

		style.appendChild(document.createTextNode(css));
	}
}

function updateLink (link, options, obj) {
	var css = obj.css;
	var sourceMap = obj.sourceMap;

	/*
		If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled
		and there is no publicPath defined then lets turn convertToAbsoluteUrls
		on by default.  Otherwise default to the convertToAbsoluteUrls option
		directly
	*/
	var autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;

	if (options.convertToAbsoluteUrls || autoFixUrls) {
		css = fixUrls(css);
	}

	if (sourceMap) {
		// http://stackoverflow.com/a/26603875
		css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
	}

	var blob = new Blob([css], { type: "text/css" });

	var oldSrc = link.href;

	link.href = URL.createObjectURL(blob);

	if(oldSrc) URL.revokeObjectURL(oldSrc);
}


/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_value__ = __webpack_require__(48);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__src_value__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_array__ = __webpack_require__(85);
/* unused harmony reexport interpolateArray */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_basis__ = __webpack_require__(51);
/* unused harmony reexport interpolateBasis */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_basisClosed__ = __webpack_require__(83);
/* unused harmony reexport interpolateBasisClosed */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_date__ = __webpack_require__(86);
/* unused harmony reexport interpolateDate */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_number__ = __webpack_require__(30);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return __WEBPACK_IMPORTED_MODULE_5__src_number__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_object__ = __webpack_require__(87);
/* unused harmony reexport interpolateObject */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__src_round__ = __webpack_require__(243);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return __WEBPACK_IMPORTED_MODULE_7__src_round__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__src_string__ = __webpack_require__(88);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return __WEBPACK_IMPORTED_MODULE_8__src_string__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__src_transform_index__ = __webpack_require__(244);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return __WEBPACK_IMPORTED_MODULE_9__src_transform_index__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return __WEBPACK_IMPORTED_MODULE_9__src_transform_index__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__src_zoom__ = __webpack_require__(247);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return __WEBPACK_IMPORTED_MODULE_10__src_zoom__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__src_rgb__ = __webpack_require__(82);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return __WEBPACK_IMPORTED_MODULE_11__src_rgb__["a"]; });
/* unused harmony reexport interpolateRgbBasis */
/* unused harmony reexport interpolateRgbBasisClosed */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__src_hsl__ = __webpack_require__(248);
/* unused harmony reexport interpolateHsl */
/* unused harmony reexport interpolateHslLong */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__src_lab__ = __webpack_require__(249);
/* unused harmony reexport interpolateLab */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__src_hcl__ = __webpack_require__(250);
/* unused harmony reexport interpolateHcl */
/* unused harmony reexport interpolateHclLong */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__ = __webpack_require__(251);
/* unused harmony reexport interpolateCubehelix */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__src_quantize__ = __webpack_require__(252);
/* unused harmony reexport quantize */



















/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_color__ = __webpack_require__(49);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__src_color__["e"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return __WEBPACK_IMPORTED_MODULE_0__src_color__["g"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return __WEBPACK_IMPORTED_MODULE_0__src_color__["f"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_lab__ = __webpack_require__(241);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return __WEBPACK_IMPORTED_MODULE_1__src_lab__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return __WEBPACK_IMPORTED_MODULE_1__src_lab__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_cubehelix__ = __webpack_require__(242);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_2__src_cubehelix__["a"]; });





/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_bisect__ = __webpack_require__(98);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_0__src_bisect__["a"]; });
/* unused harmony reexport bisectRight */
/* unused harmony reexport bisectLeft */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_ascending__ = __webpack_require__(18);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_1__src_ascending__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_bisector__ = __webpack_require__(99);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return __WEBPACK_IMPORTED_MODULE_2__src_bisector__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_cross__ = __webpack_require__(291);
/* unused harmony reexport cross */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_descending__ = __webpack_require__(292);
/* unused harmony reexport descending */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_deviation__ = __webpack_require__(101);
/* unused harmony reexport deviation */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_extent__ = __webpack_require__(103);
/* unused harmony reexport extent */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__src_histogram__ = __webpack_require__(293);
/* unused harmony reexport histogram */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__src_threshold_freedmanDiaconis__ = __webpack_require__(296);
/* unused harmony reexport thresholdFreedmanDiaconis */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__src_threshold_scott__ = __webpack_require__(297);
/* unused harmony reexport thresholdScott */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__src_threshold_sturges__ = __webpack_require__(107);
/* unused harmony reexport thresholdSturges */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__src_max__ = __webpack_require__(298);
/* unused harmony reexport max */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__src_mean__ = __webpack_require__(299);
/* unused harmony reexport mean */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__src_median__ = __webpack_require__(300);
/* unused harmony reexport median */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__src_merge__ = __webpack_require__(301);
/* unused harmony reexport merge */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__src_min__ = __webpack_require__(108);
/* unused harmony reexport min */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__src_pairs__ = __webpack_require__(100);
/* unused harmony reexport pairs */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__src_permute__ = __webpack_require__(302);
/* unused harmony reexport permute */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__src_quantile__ = __webpack_require__(54);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return __WEBPACK_IMPORTED_MODULE_18__src_quantile__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__src_range__ = __webpack_require__(105);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return __WEBPACK_IMPORTED_MODULE_19__src_range__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__src_scan__ = __webpack_require__(303);
/* unused harmony reexport scan */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__src_shuffle__ = __webpack_require__(304);
/* unused harmony reexport shuffle */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__src_sum__ = __webpack_require__(305);
/* unused harmony reexport sum */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__src_ticks__ = __webpack_require__(106);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return __WEBPACK_IMPORTED_MODULE_23__src_ticks__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return __WEBPACK_IMPORTED_MODULE_23__src_ticks__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return __WEBPACK_IMPORTED_MODULE_23__src_ticks__["c"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__src_transpose__ = __webpack_require__(109);
/* unused harmony reexport transpose */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__src_variance__ = __webpack_require__(102);
/* unused harmony reexport variance */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__src_zip__ = __webpack_require__(306);
/* unused harmony reexport zip */





























/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return durationSecond; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return durationMinute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return durationHour; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return durationDay; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return durationWeek; });
var durationSecond = 1e3;
var durationMinute = 6e4;
var durationHour = 36e5;
var durationDay = 864e5;
var durationWeek = 6048e5;


/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = Transition;
/* unused harmony export default */
/* harmony export (immutable) */ __webpack_exports__["b"] = newId;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__attr__ = __webpack_require__(258);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__attrTween__ = __webpack_require__(259);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__delay__ = __webpack_require__(260);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__duration__ = __webpack_require__(261);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ease__ = __webpack_require__(262);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__filter__ = __webpack_require__(263);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__merge__ = __webpack_require__(264);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__on__ = __webpack_require__(265);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__remove__ = __webpack_require__(266);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__select__ = __webpack_require__(267);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__selectAll__ = __webpack_require__(268);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__selection__ = __webpack_require__(269);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__style__ = __webpack_require__(270);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__styleTween__ = __webpack_require__(271);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__text__ = __webpack_require__(272);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__transition__ = __webpack_require__(273);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__tween__ = __webpack_require__(31);



















var id = 0;

function Transition(groups, parents, name, id) {
  this._groups = groups;
  this._parents = parents;
  this._name = name;
  this._id = id;
}

function transition(name) {
  return Object(__WEBPACK_IMPORTED_MODULE_0_d3_selection__["selection"])().transition(name);
}

function newId() {
  return ++id;
}

var selection_prototype = __WEBPACK_IMPORTED_MODULE_0_d3_selection__["selection"].prototype;

Transition.prototype = transition.prototype = {
  constructor: Transition,
  select: __WEBPACK_IMPORTED_MODULE_10__select__["a" /* default */],
  selectAll: __WEBPACK_IMPORTED_MODULE_11__selectAll__["a" /* default */],
  filter: __WEBPACK_IMPORTED_MODULE_6__filter__["a" /* default */],
  merge: __WEBPACK_IMPORTED_MODULE_7__merge__["a" /* default */],
  selection: __WEBPACK_IMPORTED_MODULE_12__selection__["a" /* default */],
  transition: __WEBPACK_IMPORTED_MODULE_16__transition__["a" /* default */],
  call: selection_prototype.call,
  nodes: selection_prototype.nodes,
  node: selection_prototype.node,
  size: selection_prototype.size,
  empty: selection_prototype.empty,
  each: selection_prototype.each,
  on: __WEBPACK_IMPORTED_MODULE_8__on__["a" /* default */],
  attr: __WEBPACK_IMPORTED_MODULE_1__attr__["a" /* default */],
  attrTween: __WEBPACK_IMPORTED_MODULE_2__attrTween__["a" /* default */],
  style: __WEBPACK_IMPORTED_MODULE_13__style__["a" /* default */],
  styleTween: __WEBPACK_IMPORTED_MODULE_14__styleTween__["a" /* default */],
  text: __WEBPACK_IMPORTED_MODULE_15__text__["a" /* default */],
  remove: __WEBPACK_IMPORTED_MODULE_9__remove__["a" /* default */],
  tween: __WEBPACK_IMPORTED_MODULE_17__tween__["a" /* default */],
  delay: __WEBPACK_IMPORTED_MODULE_3__delay__["a" /* default */],
  duration: __WEBPACK_IMPORTED_MODULE_4__duration__["a" /* default */],
  ease: __WEBPACK_IMPORTED_MODULE_5__ease__["a" /* default */]
};


/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return map; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return slice; });
var array = Array.prototype;

var map = array.map;
var slice = array.slice;


/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_drag__ = __webpack_require__(191);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "drag", function() { return __WEBPACK_IMPORTED_MODULE_0__src_drag__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_nodrag__ = __webpack_require__(68);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "dragDisable", function() { return __WEBPACK_IMPORTED_MODULE_1__src_nodrag__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "dragEnable", function() { return __WEBPACK_IMPORTED_MODULE_1__src_nodrag__["b"]; });




/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_request__ = __webpack_require__(40);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "request", function() { return __WEBPACK_IMPORTED_MODULE_0__src_request__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_html__ = __webpack_require__(219);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "html", function() { return __WEBPACK_IMPORTED_MODULE_1__src_html__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_json__ = __webpack_require__(220);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "json", function() { return __WEBPACK_IMPORTED_MODULE_2__src_json__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_text__ = __webpack_require__(221);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "text", function() { return __WEBPACK_IMPORTED_MODULE_3__src_text__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_xml__ = __webpack_require__(222);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "xml", function() { return __WEBPACK_IMPORTED_MODULE_4__src_xml__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_csv__ = __webpack_require__(223);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "csv", function() { return __WEBPACK_IMPORTED_MODULE_5__src_csv__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_tsv__ = __webpack_require__(226);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "tsv", function() { return __WEBPACK_IMPORTED_MODULE_6__src_tsv__["a"]; });









/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** CallbackManager */

var utils = __webpack_require__(1);
var _ = __webpack_require__(2);

var CallbackManager = utils.make_class();
CallbackManager.prototype = {
    init: init,
    set: set,
    remove: remove,
    run: run
};
module.exports = CallbackManager;

function init() {}

function set(name, fn) {
    /** As in d3 callbacks, you can namespace your callbacks after a period:
      select_metabolite.direction_arrow
     select_metabolite.input
      Both are called by select_metabolite
       TODO add *arguments to set, as in _.defer()
      */
    if (this.callbacks === undefined) this.callbacks = {};
    if (this.callbacks[name] === undefined) this.callbacks[name] = [];
    this.callbacks[name].push(fn);

    return this;
}

function remove(name) {
    /** Remove a callback by name
      */
    if (this.callbacks === undefined || Object.keys(this.callbacks).length == 0) {
        console.warn('No callbacks to remove');
    }
    delete this.callbacks[name];
    return this;
}

function run(name, this_arg) {
    /** Run all callbacks that match the portion of name before the period ('.').
      Arguments
     ---------
      name: The callback name, which can include a tag after a '.' to
     specificy a particular callback.
      this_arg: (Optional, Default: null) The object assigned to `this` in
     the callback.
      */
    if (_.isUndefined(this.callbacks)) return this;
    if (_.isUndefined(this_arg)) this_arg = null;
    // pass all but the first (name) argument to the callback
    var pass_args = Array.prototype.slice.call(arguments, 2);
    // look for matching callback names
    for (var a_name in this.callbacks) {
        var split_name = a_name.split('.')[0];
        if (split_name == name) {
            this.callbacks[a_name].forEach(function (fn) {
                fn.apply(this_arg, pass_args);
            });
        }
    }
    return this;
}

/***/ }),
/* 18 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
});


/***/ }),
/* 19 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_dispatch__ = __webpack_require__(192);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__src_dispatch__["a"]; });



/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * data_styles
 */

var utils = __webpack_require__(1);
var _ = __webpack_require__(2);
var d3_format = __webpack_require__(21).format;

module.exports = {
  import_and_check: import_and_check,
  text_for_data: text_for_data,
  float_for_data: float_for_data,
  reverse_flux_for_data: reverse_flux_for_data,
  gene_string_for_data: gene_string_for_data,
  csv_converter: csv_converter,
  genes_for_gene_reaction_rule: genes_for_gene_reaction_rule,
  evaluate_gene_reaction_rule: evaluate_gene_reaction_rule,
  replace_gene_in_rule: replace_gene_in_rule,
  apply_reaction_data_to_reactions: apply_reaction_data_to_reactions,
  apply_metabolite_data_to_nodes: apply_metabolite_data_to_nodes,
  apply_gene_data_to_reactions: apply_gene_data_to_reactions

  // globals
};var RETURN_ARG = function RETURN_ARG(x) {
  return x;
};
var ESCAPE_REG = /([.*+?^=!:${}()|\[\]\/\\])/g;
var EMPTY_LINES = /\n\s*\n/g;
var TRAILING_NEWLINE = /\n\s*(\)*)\s*$/;
var AND_OR = /([\(\) ])(?:and|or)([\)\( ])/ig;
var ALL_PARENS = /[\(\)]/g;
// capture an expression surrounded by whitespace and a set of parentheses
var EXCESS_PARENS = /\(\s*(\S+)\s*\)/g;
var OR = /\s+or\s+/i;
var AND = /\s+and\s+/i;
// find ORs
var OR_EXPRESSION = /(^|\()(\s*-?[0-9.]+\s+(?:or\s+-?[0-9.]+\s*)+)(\)|$)/ig;
// find ANDS, respecting order of operations (and before or)
var AND_EXPRESSION = /(^|\(|or\s)(\s*-?[0-9.]+\s+(?:and\s+-?[0-9.]+\s*)+)(\sor|\)|$)/ig;

function _align_gene_data_to_reactions(data, reactions) {
  var aligned = {};
  var null_val = [null];
  // make an array of nulls as the default
  for (var first_gene_id in data) {
    null_val = data[first_gene_id].map(function () {
      return null;
    });
    break;
  }
  for (var reaction_id in reactions) {
    var reaction = reactions[reaction_id];
    var bigg_id = reaction.bigg_id;
    var this_gene_data = {};

    reaction.genes.forEach(function (gene) {
      // check both gene id and gene name
      ;['bigg_id', 'name'].forEach(function (kind) {
        var d = data[gene[kind]] || utils.clone(null_val);
        // merger with existing data if present
        var existing_d = this_gene_data[gene.bigg_id];
        if (typeof existing_d === 'undefined') {
          this_gene_data[gene.bigg_id] = d;
        } else {
          for (var i = 0; i < d.length; i++) {
            var pnt = d[i];
            if (pnt !== null) {
              existing_d[i] = pnt;
            }
          }
        }
      });
    });
    aligned[bigg_id] = this_gene_data;
  }
  return aligned;
}

/**
 * Convert imported data to a style that can be applied to reactions and nodes.
 * data: The data object.
 * name: Either 'reaction_data', 'metabolite_data', or 'gene_data'
 * all_reactions: Required for name == 'gene_data'. Must include all GPRs for
 * the map and model.
 */
function import_and_check(data, name, all_reactions) {
  // check arguments
  if (data === null) {
    return null;
  }

  if (['reaction_data', 'metabolite_data', 'gene_data'].indexOf(name) === -1) {
    throw new Error('Invalid name argument: ' + name);
  }

  // make array
  if (!(data instanceof Array)) {
    data = [data];
  }
  // check data
  var check = function check() {
    if (data === null) {
      return null;
    }
    if (data.length === 1) {
      return null;
    }
    if (data.length === 2) {
      return null;
    }
    return console.warn('Bad data style: ' + name);
  };
  check();
  data = utils.array_to_object(data);

  if (name === 'gene_data') {
    if (all_reactions === undefined) {
      throw new Error('Must pass all_reactions argument for gene_data');
    }
    data = _align_gene_data_to_reactions(data, all_reactions);
  }

  return data;
}

function float_for_data(d, styles, compare_style) {
  // all null
  if (d === null) return null;

  // absolute value
  var take_abs = styles.indexOf('abs') != -1;

  if (d.length == 1) {
    // 1 set
    // 1 null
    var f = _parse_float_or_null(d[0]);
    if (f === null) return null;
    return abs(f, take_abs);
  } else if (d.length == 2) {
    // 2 sets
    // 2 null
    var fs = d.map(_parse_float_or_null);
    if (fs[0] === null || fs[1] === null) return null;

    if (compare_style == 'diff') {
      return diff(fs[0], fs[1], take_abs);
    } else if (compare_style == 'fold') {
      return check_finite(fold(fs[0], fs[1], take_abs));
    } else if (compare_style == 'log2_fold') {
      return check_finite(log2_fold(fs[0], fs[1], take_abs));
    }
  } else {
    throw new Error('Data array must be of length 1 or 2');
  }
  throw new Error('Bad data compare_style: ' + compare_style);

  // definitions
  function check_finite(x) {
    return isFinite(x) ? x : null;
  }
  function abs(x, take_abs) {
    return take_abs ? Math.abs(x) : x;
  }
  function diff(x, y, take_abs) {
    if (take_abs) return Math.abs(y - x);else return y - x;
  }
  function fold(x, y, take_abs) {
    if (x == 0 || y == 0) return null;
    var fold = y >= x ? y / x : -x / y;
    return take_abs ? Math.abs(fold) : fold;
  }
  function log2_fold(x, y, take_abs) {
    if (x == 0) return null;
    if (y / x < 0) return null;
    var log = Math.log(y / x) / Math.log(2);
    return take_abs ? Math.abs(log) : log;
  }
}

function reverse_flux_for_data(d) {
  if (d === null || d[0] === null) return false;
  return d[0] < 0;
}

/**
 * Add gene values to the gene_reaction_rule string.
 * @param {String} rule - The gene reaction rule.
 * @param {} gene_values - The values.
 * @param {} genes - An array of objects specifying the gene bigg_id and name.
 * @param {} styles - The reaction styles.
 * @param {String} identifiers_on_map - The type of identifiers ('bigg_id' or 'name').
 * @param {} compare_style - The comparison style.
 *
 * @return {Array} A list of objects with:
 *
 * {
 *    bigg_id: The bigg ID.
 *    name: The name.
 *    text: The new string with formatted data values.
 * }
 *
 * The text elements should each appear on a new line.
 */
function gene_string_for_data(rule, gene_values, genes, styles, identifiers_on_map, compare_style) {
  var out_text = rule;
  var no_data = gene_values === null;
  // keep track of bigg_ids to remove repeats
  var genes_found = {};

  genes.forEach(function (g_obj) {
    var bigg_id = g_obj.bigg_id;

    // ignore repeats that may have found their way into the genes object
    if (bigg_id in genes_found) return;
    genes_found[bigg_id] = true;

    // generate the string
    if (no_data) {
      out_text = replace_gene_in_rule(out_text, bigg_id, bigg_id + '\n');
    } else {
      if (!(bigg_id in gene_values)) return;
      var d = gene_values[bigg_id];
      var f = float_for_data(d, styles, compare_style);
      var format = f === null ? RETURN_ARG : d3_format('.3g');
      if (d.length === 1) {
        out_text = replace_gene_in_rule(out_text, bigg_id, bigg_id + ' (' + null_or_d(d[0], format) + ')\n');
      } else if (d.length === 2) {
        var new_str;
        // check if they are all text
        var any_num = _.any(d, function (x) {
          return _parse_float_or_null(x) !== null;
        });
        if (any_num) {
          new_str = bigg_id + ' (' + null_or_d(d[0], format) + ', ' + null_or_d(d[1], format) + ': ' + null_or_d(f, format) + ')\n';
        } else {
          new_str = bigg_id + ' (' + null_or_d(d[0], format) + ', ' + null_or_d(d[1], format) + ')\n';
        }
        out_text = replace_gene_in_rule(out_text, bigg_id, new_str);
      }
    }
  });
  out_text = out_text
  // remove empty lines
  .replace(EMPTY_LINES, '\n')
  // remove trailing newline (with or without parens)
  .replace(TRAILING_NEWLINE, '$1');

  // split by newlines, and switch to names if necessary
  var result = out_text.split('\n').map(function (text) {
    for (var i = 0, l = genes.length; i < l; i++) {
      var gene = genes[i];
      if (text.indexOf(gene.bigg_id) !== -1) {
        // replace with names
        if (identifiers_on_map === 'name') text = replace_gene_in_rule(text, gene.bigg_id, gene.name);
        return { bigg_id: gene.bigg_id, name: gene.name, text: text };
      }
    }
    // not found, then none
    return { bigg_id: null, name: null, text: text };
  });
  return result;

  // definitions
  function null_or_d(d, format) {
    return d === null ? 'nd' : format(d);
  }
}

function text_for_data(d, f) {
  if (d === null) {
    return null_or_d(null);
  }
  if (d.length === 1) {
    var format = f === null ? RETURN_ARG : d3_format('.3g');
    return null_or_d(d[0], format);
  }
  if (d.length === 2) {
    var format = f === null ? RETURN_ARG : d3_format('.3g'),
        t = null_or_d(d[0], format);
    t += ', ' + null_or_d(d[1], format);
    t += ': ' + null_or_d(f, format);
    return t;
  }
  return '';

  // definitions
  function null_or_d(d, format) {
    return d === null ? '(nd)' : format(d);
  }
}

function csv_converter(csv_rows) {
  /** Convert data from a csv file to json-style data.
       File must include a header row.
   */
  // count rows
  var c = csv_rows[0].length,
      converted = [];
  if (c < 2 || c > 3) throw new Error('CSV file must have 2 or 3 columns');
  // set up rows
  for (var i = 1; i < c; i++) {
    converted[i - 1] = {};
  }
  // fill
  csv_rows.slice(1).forEach(function (row) {
    for (var i = 1, l = row.length; i < l; i++) {
      converted[i - 1][row[0]] = row[i];
    }
  });
  return converted;
}

function genes_for_gene_reaction_rule(rule) {
  /** Find unique genes in gene_reaction_rule string.
       Arguments
      ---------
       rule: A boolean string containing gene names, parentheses, AND's and
      OR's.
       Returns
      -------
       An array of gene strings.
   */
  var genes = rule
  // remove ANDs and ORs, surrounded by space or parentheses
  .replace(AND_OR, '$1$2')
  // remove parentheses
  .replace(ALL_PARENS, '')
  // split on whitespace
  .split(' ').filter(function (x) {
    return x != '';
  });
  // unique strings
  return utils.unique_strings_array(genes);
}

function evaluate_gene_reaction_rule(rule, gene_values, and_method_in_gene_reaction_rule) {
  /** Return a value given the rule and gene_values object.
       Arguments
      ---------
       rule: A boolean string containing gene names, parentheses, AND's and
      OR's.
       gene_values: Object with gene_ids for keys and numbers for values.
       and_method_in_gene_reaction_rule: Either 'mean' or 'min'.
   */

  var null_val = [null],
      l = 1;
  // make an array of nulls as the default
  for (var gene_id in gene_values) {
    null_val = gene_values[gene_id].map(function () {
      return null;
    });
    l = null_val.length;
    break;
  }

  if (rule == '') return utils.clone(null_val);

  // for each element in the arrays
  var out = [];
  for (var i = 0; i < l; i++) {
    // get the rule
    var curr_val = rule;

    // put all the numbers into the expression
    var all_null = true;
    for (var gene_id in gene_values) {
      var f = _parse_float_or_null(gene_values[gene_id][i]);
      if (f === null) {
        f = 0;
      } else {
        all_null = false;
      }
      curr_val = replace_gene_in_rule(curr_val, gene_id, f);
    }
    if (all_null) {
      out.push(null);
      continue;
    }

    // recursively evaluate
    while (true) {
      // arithemtic expressions
      var new_curr_val = curr_val;

      // take out excessive parentheses
      new_curr_val = new_curr_val.replace(EXCESS_PARENS, ' $1 ');

      // or's
      new_curr_val = new_curr_val.replace(OR_EXPRESSION, function (match, p1, p2, p3) {
        // sum
        var nums = p2.split(OR).map(parseFloat),
            sum = nums.reduce(function (a, b) {
          return a + b;
        });
        return p1 + sum + p3;
      });
      // and's
      new_curr_val = new_curr_val.replace(AND_EXPRESSION, function (match, p1, p2, p3) {
        // find min
        var nums = p2.split(AND).map(parseFloat),
            val = and_method_in_gene_reaction_rule == 'min' ? Math.min.apply(null, nums) : nums.reduce(function (a, b) {
          return a + b;
        }) / nums.length;
        return p1 + val + p3;
      });
      // break if there is no change
      if (new_curr_val == curr_val) break;
      curr_val = new_curr_val;
    }
    // strict test for number
    var num = Number(curr_val);
    if (isNaN(num)) {
      console.warn('Could not evaluate ' + rule);
      out.push(null);
    } else {
      out.push(num);
    }
  }
  return out;
}

function replace_gene_in_rule(rule, gene_id, val) {
  // get the escaped string, with surrounding space or parentheses
  var space_or_par_start = '(^|[\\\s\\\(\\\)])';
  var space_or_par_finish = '([\\\s\\\(\\\)]|$)';
  var escaped = space_or_par_start + escape_reg_exp(gene_id) + space_or_par_finish;
  return rule.replace(new RegExp(escaped, 'g'), '$1' + val + '$2');

  // definitions
  function escape_reg_exp(string) {
    return string.replace(ESCAPE_REG, "\\$1");
  }
}

/**
 * Returns True if the scale has changed.
 * @param {Object} reactions -
 * @param {} data -
 * @param {} styles -
 * @param {String} compare_style -
 * @param {Array} keys - (Optional) The keys in reactions to apply data to.
 */
function apply_reaction_data_to_reactions(reactions, data, styles, compare_style, keys) {
  if (_.isUndefined(keys)) keys = Object.keys(reactions);

  var reaction_id;
  var reaction;
  var segment_id;
  var segment;

  if (data === null) {
    keys.map(function (reaction_id) {
      reaction = reactions[reaction_id];
      reaction.data = null;
      reaction.data_string = '';
      for (segment_id in reaction.segments) {
        segment = reaction.segments[segment_id];
        segment.data = null;
      }
      reaction.gene_string = null;
    });
    return false;
  }

  // apply the datasets to the reactions
  keys.map(function (reaction_id) {
    reaction = reactions[reaction_id];
    // check bigg_id and name
    var d = data[reaction.bigg_id] || data[reaction.name] || null;
    var f = float_for_data(d, styles, compare_style);
    var r = reverse_flux_for_data(d);
    var s = text_for_data(d, f);
    reaction.data = f;
    reaction.data_string = s;
    reaction.reverse_flux = r;
    reaction.gene_string = null;
    // apply to the segments
    for (segment_id in reaction.segments) {
      segment = reaction.segments[segment_id];
      segment.data = reaction.data;
      segment.reverse_flux = reaction.reverse_flux;
    }
  });
  return true;
}

/**
 * Returns True if the scale has changed.
 * @param {Object} nodes -
 * @param {} data -
 * @param {} styles -
 * @param {String} compare_style -
 * @param {Array} keys - (Optional) The keys in nodes to apply data to.
 */
function apply_metabolite_data_to_nodes(nodes, data, styles, compare_style, keys) {
  if (_.isUndefined(keys)) keys = Object.keys(nodes);

  var node_id;

  if (data === null) {
    keys.map(function (node_id) {
      nodes[node_id].data = null;
      nodes[node_id].data_string = '';
    });
    return false;
  }

  // grab the data
  keys.map(function (node_id) {
    var node = nodes[node_id];
    // check bigg_id and name
    var d = data[node.bigg_id] || data[node.name] || null,
        f = float_for_data(d, styles, compare_style),
        s = text_for_data(d, f);
    node.data = f;
    node.data_string = s;
  });
  return true;
}

/**
 * Returns true if data is present
 * reactions: The reactions to update.
 * gene_data_obj: The gene data object, with the following style:
 *   { reaction_id: { gene_id: value } }
 * styles:  Gene styles array.
 * identifiers_on_map:
 * compare_style:
 * and_method_in_gene_reaction_rule:
 * @param {Array} keys - (Optional) The keys in reactions to apply data to.
 */
function apply_gene_data_to_reactions(reactions, gene_data_obj, styles, identifiers_on_map, compare_style, and_method_in_gene_reaction_rule, keys) {
  if (_.isUndefined(keys)) keys = Object.keys(reactions);

  if (gene_data_obj === null) {
    keys.map(function (reaction_id) {
      var reaction = reactions[reaction_id];
      reaction.data = null;
      reaction.data_string = '';
      reaction.reverse_flux = false;
      for (var segment_id in reaction.segments) {
        var segment = reaction.segments[segment_id];
        segment.data = null;
      }
      reaction.gene_string = null;
    });
    return false;
  }

  // Get the null val
  var null_val = [null];
  // Make an array of nulls as the default
  for (var reaction_id in gene_data_obj) {
    for (var gene_id in gene_data_obj[reaction_id]) {
      null_val = gene_data_obj[reaction_id][gene_id].map(function () {
        return null;
      });
      break;
    }
    break;
  }

  // Apply the datasets to the reactions
  keys.map(function (reaction_id) {
    var reaction = reactions[reaction_id];
    var rule = reaction.gene_reaction_rule;
    // find the data
    var d, gene_values;
    var r_data = gene_data_obj[reaction.bigg_id];
    if (!_.isUndefined(r_data)) {
      gene_values = r_data;
      d = evaluate_gene_reaction_rule(rule, gene_values, and_method_in_gene_reaction_rule);
    } else {
      gene_values = {};
      d = utils.clone(null_val);
    }
    var f = float_for_data(d, styles, compare_style);
    var r = reverse_flux_for_data(d);
    var s = text_for_data(d, f);
    reaction.data = f;
    reaction.data_string = s;
    reaction.reverse_flux = r;
    // apply to the segments
    for (var segment_id in reaction.segments) {
      var segment = reaction.segments[segment_id];
      segment.data = reaction.data;
      segment.reverse_flux = reaction.reverse_flux;
    }
    // always update the gene string
    reaction.gene_string = gene_string_for_data(rule, gene_values, reaction.genes, styles, identifiers_on_map, compare_style);
  });
  return true;
}

function _parse_float_or_null(x) {
  // strict number casting
  var f = Number(x);
  // check for null and '', which haven't been caught yet
  return isNaN(f) || parseFloat(x) != f ? null : f;
}

/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__ = __webpack_require__(231);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "formatDefaultLocale", function() { return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "format", function() { return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "formatPrefix", function() { return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["c"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_locale__ = __webpack_require__(76);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "formatLocale", function() { return __WEBPACK_IMPORTED_MODULE_1__src_locale__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_formatSpecifier__ = __webpack_require__(77);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "formatSpecifier", function() { return __WEBPACK_IMPORTED_MODULE_2__src_formatSpecifier__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_precisionFixed__ = __webpack_require__(237);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "precisionFixed", function() { return __WEBPACK_IMPORTED_MODULE_3__src_precisionFixed__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_precisionPrefix__ = __webpack_require__(238);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "precisionPrefix", function() { return __WEBPACK_IMPORTED_MODULE_4__src_precisionPrefix__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_precisionRound__ = __webpack_require__(239);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "precisionRound", function() { return __WEBPACK_IMPORTED_MODULE_5__src_precisionRound__["a"]; });








/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["c"] = hue;
/* harmony export (immutable) */ __webpack_exports__["b"] = gamma;
/* harmony export (immutable) */ __webpack_exports__["a"] = nogamma;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constant__ = __webpack_require__(84);


function linear(a, d) {
  return function(t) {
    return a + t * d;
  };
}

function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {
    return Math.pow(a + t * b, y);
  };
}

function hue(a, b) {
  var d = b - a;
  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__["a" /* default */])(isNaN(a) ? b : a);
}

function gamma(y) {
  return (y = +y) === 1 ? nogamma : function(a, b) {
    return b - a ? exponential(a, b, y) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__["a" /* default */])(isNaN(a) ? b : a);
  };
}

function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__["a" /* default */])(isNaN(a) ? b : a);
}


/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return x === null ? NaN : +x;
});


/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = linearish;
/* harmony export (immutable) */ __webpack_exports__["a"] = linear;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__continuous__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tickFormat__ = __webpack_require__(308);





function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["h" /* ticks */])(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    return Object(__WEBPACK_IMPORTED_MODULE_3__tickFormat__["a" /* default */])(domain(), count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain(),
        i0 = 0,
        i1 = d.length - 1,
        start = d[i0],
        stop = d[i1],
        step;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    step = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["f" /* tickIncrement */])(start, stop, count);

    if (step > 0) {
      start = Math.floor(start / step) * step;
      stop = Math.ceil(stop / step) * step;
      step = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["f" /* tickIncrement */])(start, stop, count);
    } else if (step < 0) {
      start = Math.ceil(start * step) / step;
      stop = Math.floor(stop * step) / step;
      step = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["f" /* tickIncrement */])(start, stop, count);
    }

    if (step > 0) {
      d[i0] = Math.floor(start / step) * step;
      d[i1] = Math.ceil(stop / step) * step;
      domain(d);
    } else if (step < 0) {
      d[i0] = Math.ceil(start * step) / step;
      d[i1] = Math.floor(stop * step) / step;
      domain(d);
    }

    return scale;
  };

  return scale;
}

function linear() {
  var scale = Object(__WEBPACK_IMPORTED_MODULE_2__continuous__["b" /* default */])(__WEBPACK_IMPORTED_MODULE_2__continuous__["c" /* deinterpolateLinear */], __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["c" /* interpolateNumber */]);

  scale.copy = function() {
    return Object(__WEBPACK_IMPORTED_MODULE_2__continuous__["a" /* copy */])(scale, linear());
  };

  return linearish(scale);
}


/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(s) {
  return s.match(/.{6}/g).map(function(x) {
    return "#" + x;
  });
});


/***/ }),
/* 26 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__namespace__ = __webpack_require__(34);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__namespaces__ = __webpack_require__(35);



function creatorInherit(name) {
  return function() {
    var document = this.ownerDocument,
        uri = this.namespaceURI;
    return uri === __WEBPACK_IMPORTED_MODULE_1__namespaces__["b" /* xhtml */] && document.documentElement.namespaceURI === __WEBPACK_IMPORTED_MODULE_1__namespaces__["b" /* xhtml */]
        ? document.createElement(name)
        : document.createElementNS(uri, name);
  };
}

function creatorFixed(fullname) {
  return function() {
    return this.ownerDocument.createElementNS(fullname.space, fullname.local);
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name) {
  var fullname = Object(__WEBPACK_IMPORTED_MODULE_0__namespace__["a" /* default */])(name);
  return (fullname.local
      ? creatorFixed
      : creatorInherit)(fullname);
});


/***/ }),
/* 27 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(node, event) {
  var svg = node.ownerSVGElement || node;

  if (svg.createSVGPoint) {
    var point = svg.createSVGPoint();
    point.x = event.clientX, point.y = event.clientY;
    point = point.matrixTransform(node.getScreenCTM().inverse());
    return [point.x, point.y];
  }

  var rect = node.getBoundingClientRect();
  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];
});


/***/ }),
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__request__ = __webpack_require__(40);


/* harmony default export */ __webpack_exports__["a"] = (function(defaultMimeType, response) {
  return function(url, callback) {
    var r = Object(__WEBPACK_IMPORTED_MODULE_0__request__["a" /* default */])(url).mimeType(defaultMimeType).response(response);
    if (callback != null) {
      if (typeof callback !== "function") throw new Error("invalid callback: " + callback);
      return r.get(callback);
    }
    return r;
  };
});


/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__formatDecimal__ = __webpack_require__(46);


/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return x = Object(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a" /* default */])(Math.abs(x)), x ? x[1] : NaN;
});


/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  return a = +a, b -= a, function(t) {
    return a + b * t;
  };
});


/***/ }),
/* 31 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = tweenValue;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__schedule__ = __webpack_require__(6);


function tweenRemove(id, name) {
  var tween0, tween1;
  return function() {
    var schedule = Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["h" /* set */])(this, id),
        tween = schedule.tween;

    // If this node shared tween with the previous node,
    // just assign the updated shared tween and we’re done!
    // Otherwise, copy-on-write.
    if (tween !== tween0) {
      tween1 = tween0 = tween;
      for (var i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1 = tween1.slice();
          tween1.splice(i, 1);
          break;
        }
      }
    }

    schedule.tween = tween1;
  };
}

function tweenFunction(id, name, value) {
  var tween0, tween1;
  if (typeof value !== "function") throw new Error;
  return function() {
    var schedule = Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["h" /* set */])(this, id),
        tween = schedule.tween;

    // If this node shared tween with the previous node,
    // just assign the updated shared tween and we’re done!
    // Otherwise, copy-on-write.
    if (tween !== tween0) {
      tween1 = (tween0 = tween).slice();
      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {
        if (tween1[i].name === name) {
          tween1[i] = t;
          break;
        }
      }
      if (i === n) tween1.push(t);
    }

    schedule.tween = tween1;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value) {
  var id = this._id;

  name += "";

  if (arguments.length < 2) {
    var tween = Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["f" /* get */])(this.node(), id).tween;
    for (var i = 0, n = tween.length, t; i < n; ++i) {
      if ((t = tween[i]).name === name) {
        return t.value;
      }
    }
    return null;
  }

  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));
});

function tweenValue(transition, name, value) {
  var id = transition._id;

  transition.each(function() {
    var schedule = Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["h" /* set */])(this, id);
    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);
  });

  return function(node) {
    return Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["f" /* get */])(node, id).value[name];
  };
}


/***/ }),
/* 32 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["c"] = deinterpolateLinear;
/* harmony export (immutable) */ __webpack_exports__["a"] = copy;
/* harmony export (immutable) */ __webpack_exports__["b"] = continuous;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__array__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__constant__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__number__ = __webpack_require__(111);






var unit = [0, 1];

function deinterpolateLinear(a, b) {
  return (b -= (a = +a))
      ? function(x) { return (x - a) / b; }
      : Object(__WEBPACK_IMPORTED_MODULE_3__constant__["a" /* default */])(b);
}

function deinterpolateClamp(deinterpolate) {
  return function(a, b) {
    var d = deinterpolate(a = +a, b = +b);
    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };
  };
}

function reinterpolateClamp(reinterpolate) {
  return function(a, b) {
    var r = reinterpolate(a = +a, b = +b);
    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };
  };
}

function bimap(domain, range, deinterpolate, reinterpolate) {
  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];
  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);
  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);
  return function(x) { return r0(d0(x)); };
}

function polymap(domain, range, deinterpolate, reinterpolate) {
  var j = Math.min(domain.length, range.length) - 1,
      d = new Array(j),
      r = new Array(j),
      i = -1;

  // Reverse descending domains.
  if (domain[j] < domain[0]) {
    domain = domain.slice().reverse();
    range = range.slice().reverse();
  }

  while (++i < j) {
    d[i] = deinterpolate(domain[i], domain[i + 1]);
    r[i] = reinterpolate(range[i], range[i + 1]);
  }

  return function(x) {
    var i = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["b" /* bisect */])(domain, x, 1, j) - 1;
    return r[i](d[i](x));
  };
}

function copy(source, target) {
  return target
      .domain(source.domain())
      .range(source.range())
      .interpolate(source.interpolate())
      .clamp(source.clamp());
}

// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].
// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].
function continuous(deinterpolate, reinterpolate) {
  var domain = unit,
      range = unit,
      interpolate = __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["a" /* interpolate */],
      clamp = false,
      piecewise,
      output,
      input;

  function rescale() {
    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;
    output = input = null;
    return scale;
  }

  function scale(x) {
    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);
  }

  scale.invert = function(y) {
    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);
  };

  scale.domain = function(_) {
    return arguments.length ? (domain = __WEBPACK_IMPORTED_MODULE_2__array__["a" /* map */].call(_, __WEBPACK_IMPORTED_MODULE_4__number__["a" /* default */]), rescale()) : domain.slice();
  };

  scale.range = function(_) {
    return arguments.length ? (range = __WEBPACK_IMPORTED_MODULE_2__array__["b" /* slice */].call(_), rescale()) : range.slice();
  };

  scale.rangeRound = function(_) {
    return range = __WEBPACK_IMPORTED_MODULE_2__array__["b" /* slice */].call(_), interpolate = __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["e" /* interpolateRound */], rescale();
  };

  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, rescale()) : clamp;
  };

  scale.interpolate = function(_) {
    return arguments.length ? (interpolate = _, rescale()) : interpolate;
  };

  return rescale();
}


/***/ }),
/* 33 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 34 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__namespaces__ = __webpack_require__(35);


/* harmony default export */ __webpack_exports__["a"] = (function(name) {
  var prefix = name += "", i = prefix.indexOf(":");
  if (i >= 0 && (prefix = name.slice(0, i)) !== "xmlns") name = name.slice(i + 1);
  return __WEBPACK_IMPORTED_MODULE_0__namespaces__["a" /* default */].hasOwnProperty(prefix) ? {space: __WEBPACK_IMPORTED_MODULE_0__namespaces__["a" /* default */][prefix], local: name} : name;
});


/***/ }),
/* 35 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return xhtml; });
var xhtml = "http://www.w3.org/1999/xhtml";

/* harmony default export */ __webpack_exports__["a"] = ({
  svg: "http://www.w3.org/2000/svg",
  xhtml: xhtml,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
});


/***/ }),
/* 36 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function none() {}

/* harmony default export */ __webpack_exports__["a"] = (function(selector) {
  return selector == null ? none : function() {
    return this.querySelector(selector);
  };
});


/***/ }),
/* 37 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(node) {
  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node
      || (node.document && node) // node is a Window
      || node.defaultView; // node is a Document
});


/***/ }),
/* 38 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return event; });
/* harmony export (immutable) */ __webpack_exports__["a"] = customEvent;
var filterEvents = {};

var event = null;

if (typeof document !== "undefined") {
  var element = document.documentElement;
  if (!("onmouseenter" in element)) {
    filterEvents = {mouseenter: "mouseover", mouseleave: "mouseout"};
  }
}

function filterContextListener(listener, index, group) {
  listener = contextListener(listener, index, group);
  return function(event) {
    var related = event.relatedTarget;
    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {
      listener.call(this, event);
    }
  };
}

function contextListener(listener, index, group) {
  return function(event1) {
    var event0 = event; // Events can be reentrant (e.g., focus).
    event = event1;
    try {
      listener.call(this, this.__data__, index, group);
    } finally {
      event = event0;
    }
  };
}

function parseTypenames(typenames) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    return {type: t, name: name};
  });
}

function onRemove(typename) {
  return function() {
    var on = this.__on;
    if (!on) return;
    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {
      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
      } else {
        on[++i] = o;
      }
    }
    if (++i) on.length = i;
    else delete this.__on;
  };
}

function onAdd(typename, value, capture) {
  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;
  return function(d, i, group) {
    var on = this.__on, o, listener = wrap(value, i, group);
    if (on) for (var j = 0, m = on.length; j < m; ++j) {
      if ((o = on[j]).type === typename.type && o.name === typename.name) {
        this.removeEventListener(o.type, o.listener, o.capture);
        this.addEventListener(o.type, o.listener = listener, o.capture = capture);
        o.value = value;
        return;
      }
    }
    this.addEventListener(typename.type, listener, capture);
    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};
    if (!on) this.__on = [o];
    else on.push(o);
  };
}

/* harmony default export */ __webpack_exports__["b"] = (function(typename, value, capture) {
  var typenames = parseTypenames(typename + ""), i, n = typenames.length, t;

  if (arguments.length < 2) {
    var on = this.node().__on;
    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {
      for (i = 0, o = on[j]; i < n; ++i) {
        if ((t = typenames[i]).type === o.type && t.name === o.name) {
          return o.value;
        }
      }
    }
    return;
  }

  on = value ? onAdd : onRemove;
  if (capture == null) capture = false;
  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));
  return this;
});

function customEvent(event1, listener, that, args) {
  var event0 = event;
  event1.sourceEvent = event;
  event = event1;
  try {
    return listener.apply(that, args);
  } finally {
    event = event0;
  }
}


/***/ }),
/* 39 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__selection_on__ = __webpack_require__(38);


/* harmony default export */ __webpack_exports__["a"] = (function() {
  var current = __WEBPACK_IMPORTED_MODULE_0__selection_on__["c" /* event */], source;
  while (source = current.sourceEvent) current = source;
  return current;
});


/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_collection__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_dispatch__ = __webpack_require__(19);



/* harmony default export */ __webpack_exports__["a"] = (function(url, callback) {
  var request,
      event = Object(__WEBPACK_IMPORTED_MODULE_1_d3_dispatch__["a" /* dispatch */])("beforesend", "progress", "load", "error"),
      mimeType,
      headers = Object(__WEBPACK_IMPORTED_MODULE_0_d3_collection__["a" /* map */])(),
      xhr = new XMLHttpRequest,
      user = null,
      password = null,
      response,
      responseType,
      timeout = 0;

  // If IE does not support CORS, use XDomainRequest.
  if (typeof XDomainRequest !== "undefined"
      && !("withCredentials" in xhr)
      && /^(http(s)?:)?\/\//.test(url)) xhr = new XDomainRequest;

  "onload" in xhr
      ? xhr.onload = xhr.onerror = xhr.ontimeout = respond
      : xhr.onreadystatechange = function(o) { xhr.readyState > 3 && respond(o); };

  function respond(o) {
    var status = xhr.status, result;
    if (!status && hasResponse(xhr)
        || status >= 200 && status < 300
        || status === 304) {
      if (response) {
        try {
          result = response.call(request, xhr);
        } catch (e) {
          event.call("error", request, e);
          return;
        }
      } else {
        result = xhr;
      }
      event.call("load", request, result);
    } else {
      event.call("error", request, o);
    }
  }

  xhr.onprogress = function(e) {
    event.call("progress", request, e);
  };

  request = {
    header: function(name, value) {
      name = (name + "").toLowerCase();
      if (arguments.length < 2) return headers.get(name);
      if (value == null) headers.remove(name);
      else headers.set(name, value + "");
      return request;
    },

    // If mimeType is non-null and no Accept header is set, a default is used.
    mimeType: function(value) {
      if (!arguments.length) return mimeType;
      mimeType = value == null ? null : value + "";
      return request;
    },

    // Specifies what type the response value should take;
    // for instance, arraybuffer, blob, document, or text.
    responseType: function(value) {
      if (!arguments.length) return responseType;
      responseType = value;
      return request;
    },

    timeout: function(value) {
      if (!arguments.length) return timeout;
      timeout = +value;
      return request;
    },

    user: function(value) {
      return arguments.length < 1 ? user : (user = value == null ? null : value + "", request);
    },

    password: function(value) {
      return arguments.length < 1 ? password : (password = value == null ? null : value + "", request);
    },

    // Specify how to convert the response content to a specific type;
    // changes the callback value on "load" events.
    response: function(value) {
      response = value;
      return request;
    },

    // Alias for send("GET", …).
    get: function(data, callback) {
      return request.send("GET", data, callback);
    },

    // Alias for send("POST", …).
    post: function(data, callback) {
      return request.send("POST", data, callback);
    },

    // If callback is non-null, it will be used for error and load events.
    send: function(method, data, callback) {
      xhr.open(method, url, true, user, password);
      if (mimeType != null && !headers.has("accept")) headers.set("accept", mimeType + ",*/*");
      if (xhr.setRequestHeader) headers.each(function(value, name) { xhr.setRequestHeader(name, value); });
      if (mimeType != null && xhr.overrideMimeType) xhr.overrideMimeType(mimeType);
      if (responseType != null) xhr.responseType = responseType;
      if (timeout > 0) xhr.timeout = timeout;
      if (callback == null && typeof data === "function") callback = data, data = null;
      if (callback != null && callback.length === 1) callback = fixCallback(callback);
      if (callback != null) request.on("error", callback).on("load", function(xhr) { callback(null, xhr); });
      event.call("beforesend", request, xhr);
      xhr.send(data == null ? null : data);
      return request;
    },

    abort: function() {
      xhr.abort();
      return request;
    },

    on: function() {
      var value = event.on.apply(event, arguments);
      return value === event ? request : value;
    }
  };

  if (callback != null) {
    if (typeof callback !== "function") throw new Error("invalid callback: " + callback);
    return request.get(callback);
  }

  return request;
});

function fixCallback(callback) {
  return function(error, xhr) {
    callback(error == null ? xhr : null);
  };
}

function hasResponse(xhr) {
  var type = xhr.responseType;
  return type && type !== "text"
      ? xhr.response // null on error
      : xhr.responseText; // "" on error
}


/***/ }),
/* 41 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return prefix; });
var prefix = "$";

function Map() {}

Map.prototype = map.prototype = {
  constructor: Map,
  has: function(key) {
    return (prefix + key) in this;
  },
  get: function(key) {
    return this[prefix + key];
  },
  set: function(key, value) {
    this[prefix + key] = value;
    return this;
  },
  remove: function(key) {
    var property = prefix + key;
    return property in this && delete this[property];
  },
  clear: function() {
    for (var property in this) if (property[0] === prefix) delete this[property];
  },
  keys: function() {
    var keys = [];
    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));
    return keys;
  },
  values: function() {
    var values = [];
    for (var property in this) if (property[0] === prefix) values.push(this[property]);
    return values;
  },
  entries: function() {
    var entries = [];
    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});
    return entries;
  },
  size: function() {
    var size = 0;
    for (var property in this) if (property[0] === prefix) ++size;
    return size;
  },
  empty: function() {
    for (var property in this) if (property[0] === prefix) return false;
    return true;
  },
  each: function(f) {
    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);
  }
};

function map(object, f) {
  var map = new Map;

  // Copy constructor.
  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });

  // Index array by numeric index or specified key function.
  else if (Array.isArray(object)) {
    var i = -1,
        n = object.length,
        o;

    if (f == null) while (++i < n) map.set(i, object[i]);
    else while (++i < n) map.set(f(o = object[i], i, object), o);
  }

  // Convert object to map.
  else if (object) for (var key in object) map.set(key, object[key]);

  return map;
}

/* harmony default export */ __webpack_exports__["a"] = (map);


/***/ }),
/* 42 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_dsv__ = __webpack_require__(43);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "dsvFormat", function() { return __WEBPACK_IMPORTED_MODULE_0__src_dsv__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_csv__ = __webpack_require__(224);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "csvParse", function() { return __WEBPACK_IMPORTED_MODULE_1__src_csv__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "csvParseRows", function() { return __WEBPACK_IMPORTED_MODULE_1__src_csv__["d"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "csvFormat", function() { return __WEBPACK_IMPORTED_MODULE_1__src_csv__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "csvFormatRows", function() { return __WEBPACK_IMPORTED_MODULE_1__src_csv__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_tsv__ = __webpack_require__(225);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "tsvParse", function() { return __WEBPACK_IMPORTED_MODULE_2__src_tsv__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "tsvParseRows", function() { return __WEBPACK_IMPORTED_MODULE_2__src_tsv__["d"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "tsvFormat", function() { return __WEBPACK_IMPORTED_MODULE_2__src_tsv__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "tsvFormatRows", function() { return __WEBPACK_IMPORTED_MODULE_2__src_tsv__["b"]; });





/***/ }),
/* 43 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var EOL = {},
    EOF = {},
    QUOTE = 34,
    NEWLINE = 10,
    RETURN = 13;

function objectConverter(columns) {
  return new Function("d", "return {" + columns.map(function(name, i) {
    return JSON.stringify(name) + ": d[" + i + "]";
  }).join(",") + "}");
}

function customConverter(columns, f) {
  var object = objectConverter(columns);
  return function(row, i) {
    return f(object(row), i, columns);
  };
}

// Compute unique columns in order of discovery.
function inferColumns(rows) {
  var columnSet = Object.create(null),
      columns = [];

  rows.forEach(function(row) {
    for (var column in row) {
      if (!(column in columnSet)) {
        columns.push(columnSet[column] = column);
      }
    }
  });

  return columns;
}

/* harmony default export */ __webpack_exports__["a"] = (function(delimiter) {
  var reFormat = new RegExp("[\"" + delimiter + "\n\r]"),
      DELIMITER = delimiter.charCodeAt(0);

  function parse(text, f) {
    var convert, columns, rows = parseRows(text, function(row, i) {
      if (convert) return convert(row, i - 1);
      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);
    });
    rows.columns = columns || [];
    return rows;
  }

  function parseRows(text, f) {
    var rows = [], // output rows
        N = text.length,
        I = 0, // current character index
        n = 0, // current line number
        t, // current token
        eof = N <= 0, // current token followed by EOF?
        eol = false; // current token followed by EOL?

    // Strip the trailing newline.
    if (text.charCodeAt(N - 1) === NEWLINE) --N;
    if (text.charCodeAt(N - 1) === RETURN) --N;

    function token() {
      if (eof) return EOF;
      if (eol) return eol = false, EOL;

      // Unescape quotes.
      var i, j = I, c;
      if (text.charCodeAt(j) === QUOTE) {
        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);
        if ((i = I) >= N) eof = true;
        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;
        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }
        return text.slice(j + 1, i - 1).replace(/""/g, "\"");
      }

      // Find next delimiter or newline.
      while (I < N) {
        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;
        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }
        else if (c !== DELIMITER) continue;
        return text.slice(j, i);
      }

      // Return last token before EOF.
      return eof = true, text.slice(j, N);
    }

    while ((t = token()) !== EOF) {
      var row = [];
      while (t !== EOL && t !== EOF) row.push(t), t = token();
      if (f && (row = f(row, n++)) == null) continue;
      rows.push(row);
    }

    return rows;
  }

  function format(rows, columns) {
    if (columns == null) columns = inferColumns(rows);
    return [columns.map(formatValue).join(delimiter)].concat(rows.map(function(row) {
      return columns.map(function(column) {
        return formatValue(row[column]);
      }).join(delimiter);
    })).join("\n");
  }

  function formatRows(rows) {
    return rows.map(formatRow).join("\n");
  }

  function formatRow(row) {
    return row.map(formatValue).join(delimiter);
  }

  function formatValue(text) {
    return text == null ? ""
        : reFormat.test(text += "") ? "\"" + text.replace(/"/g, "\"\"") + "\""
        : text;
  }

  return {
    parse: parse,
    parseRows: parseRows,
    format: format,
    formatRows: formatRows
  };
});


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * PlacedDiv. A container to position an html div to match the coordinates of a
 * SVG element.
 */

var utils = __webpack_require__(1);

var PlacedDiv = utils.make_class();
// instance methods
PlacedDiv.prototype = {
  init: init,
  is_visible: is_visible,
  place: place,
  hide: hide
};
module.exports = PlacedDiv;

function init(div, map) {
  var displacement = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : { x: 0, y: 0 };
  var shouldReposition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;

  this.div = div;
  this.map = map;
  this.displacement = displacement;
  this.shouldReposition = shouldReposition;
  // begin hidden
  this.visible = true;
  this.hide();
}

function is_visible() {
  return this.visible;
}

/**
 * Position the html div to match the given SVG coordinates.
 */
function place(coords) {
  // show the input
  this.div.style('display', null);

  // move the new input
  var window_translate = this.map.zoom_container.window_translate;
  var window_scale = this.map.zoom_container.window_scale;
  var map_size = this.map.get_size();

  /**
   * If shouldReposition is true, the div is placed so that it does not render
   * outside of the viewable area of the window. Math.max is used so that it
   * does not overflow to the left and top, Math.min is used so that it does not
   * overflow to the right or bottom. If the screen is tool small to show the
   * entire div, the div will overflow to the right and bottom.
   */
  if (this.shouldReposition) {
    var left = Math.max(20, Math.min(map_size.width - 270, window_scale * coords.x + window_translate.x - this.displacement.x));
    var top = Math.max(20, Math.min(map_size.height - 40, window_scale * coords.y + window_translate.y - this.displacement.y));
    this.div.style('position', 'absolute').style('display', 'block').style('left', left + 'px').style('top', top + 'px');
  } else {
    this.div.style('position', 'absolute').style('display', 'block').style('left', window_scale * coords.x + window_translate.x - this.displacement.x + 'px').style('top', window_scale * coords.y + window_translate.y - this.displacement.y + 'px');
  }
  this.visible = true;
}

/**
 * Hide the PlacedDiv.
 */
function hide() {
  if (this.visible) {
    this.div.style('display', 'none');
    this.visible = false;
  }
}

/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * CobraModel
 */

var utils = __webpack_require__(1);
var data_styles = __webpack_require__(20);

var CobraModel = utils.make_class();
// class methods
CobraModel.from_cobra_json = from_cobra_json;
CobraModel.build_reaction_string = build_reaction_string;
// instance methods
CobraModel.prototype = {
  init: init,
  apply_reaction_data: apply_reaction_data,
  apply_metabolite_data: apply_metabolite_data,
  apply_gene_data: apply_gene_data
};
module.exports = CobraModel;

// class methods

/**
 * Return a reaction string for the given stoichiometries. Adapted from
 * cobra.core.Reaction.build_reaction_string().
 * @param {Object} stoichiometries - An object with metabolites as keys and
 * stoichiometries as values.
 * @param {Boolean} is_reversible - Whether the reaction is reversible.
 */
function build_reaction_string(stoichiometries, is_reversible) {
  var format = function format(number) {
    if (number == 1) {
      return '';
    }
    return String(number) + ' ';
  };
  var reactant_dict = {};
  var product_dict = {};
  var reactant_bits = [];
  var product_bits = [];
  for (var the_metabolite in stoichiometries) {
    var coefficient = stoichiometries[the_metabolite];
    if (coefficient > 0) product_bits.push(format(coefficient) + the_metabolite);else reactant_bits.push(format(Math.abs(coefficient)) + the_metabolite);
  }
  var reaction_string = reactant_bits.join(' + ');
  if (is_reversible) {
    reaction_string += ' ↔ ';
  } else {
    reaction_string += ' → ';
  }
  reaction_string += product_bits.join(' + ');
  return reaction_string;
}

function from_cobra_json(model_data) {
  /** Use a JSON Cobra model exported by COBRApy to make a new CobraModel
      object.
       The COBRA "id" becomes a "bigg_id", and "upper_bound" and "lower_bound"
      bounds become "reversibility".
       Fills out a "genes" list.
   */
  // reactions and metabolites
  if (!(model_data.reactions && model_data.metabolites)) {
    throw new Error('Bad model data.');
  }

  // make a gene dictionary
  var genes = {};
  for (var i = 0, l = model_data.genes.length; i < l; i++) {
    var r = model_data.genes[i],
        the_id = r.id;
    genes[the_id] = r;
  }

  var model = new CobraModel();

  model.reactions = {};
  for (var i = 0, l = model_data.reactions.length; i < l; i++) {
    var r = model_data.reactions[i];
    var the_id = r.id;
    var reaction = utils.clone(r);
    delete reaction.id;
    reaction.bigg_id = the_id;
    reaction.data_string = '';
    // add the appropriate genes
    reaction.genes = [];

    // set reversibility
    reaction.reversibility = reaction.lower_bound < 0 && reaction.upper_bound > 0;
    if (reaction.upper_bound <= 0 && reaction.lower_bound < 0) {
      // reverse stoichiometries
      for (var met_id in reaction.metabolites) {
        reaction.metabolites[met_id] = -reaction.metabolites[met_id];
      }
    }
    delete reaction.lower_bound;
    delete reaction.upper_bound;

    if ('gene_reaction_rule' in reaction) {
      var gene_ids = data_styles.genes_for_gene_reaction_rule(reaction.gene_reaction_rule);
      gene_ids.forEach(function (gene_id) {
        if (gene_id in genes) {
          var gene = utils.clone(genes[gene_id]);
          // rename id to bigg_id
          gene.bigg_id = gene.id;
          delete gene.id;
          reaction.genes.push(gene);
        } else {
          console.warn('Could not find gene for gene_id ' + gene_id);
        }
      });
    }
    model.reactions[the_id] = reaction;
  }
  model.metabolites = {};
  for (var i = 0, l = model_data.metabolites.length; i < l; i++) {
    var r = model_data.metabolites[i];
    var the_id = r.id;
    var met = utils.clone(r);
    delete met.id;
    met.bigg_id = the_id;
    model.metabolites[the_id] = met;
  }
  return model;
}

// instance methods
function init() {
  this.reactions = {};
  this.metabolites = {};
}

/**
 * Apply data to model. This is only used to display options in
 * BuildInput. apply_reaction_data overrides apply_gene_data.
 */
function apply_reaction_data(reaction_data, styles, compare_style) {
  data_styles.apply_reaction_data_to_reactions(this.reactions, reaction_data, styles, compare_style);
}

/**
 * Apply data to model. This is only used to display options in BuildInput.
 */
function apply_metabolite_data(metabolite_data, styles, compare_style) {
  data_styles.apply_metabolite_data_to_nodes(this.metabolites, metabolite_data, styles, compare_style);
}

/**
 * Apply data to model. This is only used to display options in
 * BuildInput. Overrides apply_reaction_data.
 */
function apply_gene_data(gene_data_obj, styles, identifiers_on_map, compare_style, and_method_in_gene_reaction_rule) {
  data_styles.apply_gene_data_to_reactions(this.reactions, gene_data_obj, styles, identifiers_on_map, compare_style, and_method_in_gene_reaction_rule);
}

/***/ }),
/* 46 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// Computes the decimal coefficient and exponent of the specified number x with
// significant digits p, where x is positive and p is in [1, 21] or undefined.
// For example, formatDecimal(1.23) returns ["123", 0].
/* harmony default export */ __webpack_exports__["a"] = (function(x, p) {
  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf("e")) < 0) return null; // NaN, ±Infinity
  var i, coefficient = x.slice(0, i);

  // The string returned by toExponential either has the form \d\.\d+e[-+]\d+
  // (e.g., 1.2e+3) or the form \de[-+]\d+ (e.g., 1e+3).
  return [
    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
    +x.slice(i + 1)
  ];
});


/***/ }),
/* 47 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_zoom__ = __webpack_require__(240);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "zoom", function() { return __WEBPACK_IMPORTED_MODULE_0__src_zoom__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_transform__ = __webpack_require__(94);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "zoomTransform", function() { return __WEBPACK_IMPORTED_MODULE_1__src_transform__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "zoomIdentity", function() { return __WEBPACK_IMPORTED_MODULE_1__src_transform__["c"]; });




/***/ }),
/* 48 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__rgb__ = __webpack_require__(82);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__array__ = __webpack_require__(85);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__date__ = __webpack_require__(86);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__number__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__object__ = __webpack_require__(87);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__string__ = __webpack_require__(88);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__constant__ = __webpack_require__(84);









/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  var t = typeof b, c;
  return b == null || t === "boolean" ? Object(__WEBPACK_IMPORTED_MODULE_7__constant__["a" /* default */])(b)
      : (t === "number" ? __WEBPACK_IMPORTED_MODULE_4__number__["a" /* default */]
      : t === "string" ? ((c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a" /* color */])(b)) ? (b = c, __WEBPACK_IMPORTED_MODULE_1__rgb__["a" /* default */]) : __WEBPACK_IMPORTED_MODULE_6__string__["a" /* default */])
      : b instanceof __WEBPACK_IMPORTED_MODULE_0_d3_color__["a" /* color */] ? __WEBPACK_IMPORTED_MODULE_1__rgb__["a" /* default */]
      : b instanceof Date ? __WEBPACK_IMPORTED_MODULE_3__date__["a" /* default */]
      : Array.isArray(b) ? __WEBPACK_IMPORTED_MODULE_2__array__["a" /* default */]
      : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? __WEBPACK_IMPORTED_MODULE_5__object__["a" /* default */]
      : __WEBPACK_IMPORTED_MODULE_4__number__["a" /* default */])(a, b);
});


/***/ }),
/* 49 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = Color;
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return darker; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return brighter; });
/* harmony export (immutable) */ __webpack_exports__["e"] = color;
/* harmony export (immutable) */ __webpack_exports__["h"] = rgbConvert;
/* harmony export (immutable) */ __webpack_exports__["g"] = rgb;
/* harmony export (immutable) */ __webpack_exports__["b"] = Rgb;
/* unused harmony export hslConvert */
/* harmony export (immutable) */ __webpack_exports__["f"] = hsl;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(50);


function Color() {}

var darker = 0.7;
var brighter = 1 / darker;

var reI = "\\s*([+-]?\\d+)\\s*",
    reN = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",
    reP = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",
    reHex3 = /^#([0-9a-f]{3})$/,
    reHex6 = /^#([0-9a-f]{6})$/,
    reRgbInteger = new RegExp("^rgb\\(" + [reI, reI, reI] + "\\)$"),
    reRgbPercent = new RegExp("^rgb\\(" + [reP, reP, reP] + "\\)$"),
    reRgbaInteger = new RegExp("^rgba\\(" + [reI, reI, reI, reN] + "\\)$"),
    reRgbaPercent = new RegExp("^rgba\\(" + [reP, reP, reP, reN] + "\\)$"),
    reHslPercent = new RegExp("^hsl\\(" + [reN, reP, reP] + "\\)$"),
    reHslaPercent = new RegExp("^hsla\\(" + [reN, reP, reP, reN] + "\\)$");

var named = {
  aliceblue: 0xf0f8ff,
  antiquewhite: 0xfaebd7,
  aqua: 0x00ffff,
  aquamarine: 0x7fffd4,
  azure: 0xf0ffff,
  beige: 0xf5f5dc,
  bisque: 0xffe4c4,
  black: 0x000000,
  blanchedalmond: 0xffebcd,
  blue: 0x0000ff,
  blueviolet: 0x8a2be2,
  brown: 0xa52a2a,
  burlywood: 0xdeb887,
  cadetblue: 0x5f9ea0,
  chartreuse: 0x7fff00,
  chocolate: 0xd2691e,
  coral: 0xff7f50,
  cornflowerblue: 0x6495ed,
  cornsilk: 0xfff8dc,
  crimson: 0xdc143c,
  cyan: 0x00ffff,
  darkblue: 0x00008b,
  darkcyan: 0x008b8b,
  darkgoldenrod: 0xb8860b,
  darkgray: 0xa9a9a9,
  darkgreen: 0x006400,
  darkgrey: 0xa9a9a9,
  darkkhaki: 0xbdb76b,
  darkmagenta: 0x8b008b,
  darkolivegreen: 0x556b2f,
  darkorange: 0xff8c00,
  darkorchid: 0x9932cc,
  darkred: 0x8b0000,
  darksalmon: 0xe9967a,
  darkseagreen: 0x8fbc8f,
  darkslateblue: 0x483d8b,
  darkslategray: 0x2f4f4f,
  darkslategrey: 0x2f4f4f,
  darkturquoise: 0x00ced1,
  darkviolet: 0x9400d3,
  deeppink: 0xff1493,
  deepskyblue: 0x00bfff,
  dimgray: 0x696969,
  dimgrey: 0x696969,
  dodgerblue: 0x1e90ff,
  firebrick: 0xb22222,
  floralwhite: 0xfffaf0,
  forestgreen: 0x228b22,
  fuchsia: 0xff00ff,
  gainsboro: 0xdcdcdc,
  ghostwhite: 0xf8f8ff,
  gold: 0xffd700,
  goldenrod: 0xdaa520,
  gray: 0x808080,
  green: 0x008000,
  greenyellow: 0xadff2f,
  grey: 0x808080,
  honeydew: 0xf0fff0,
  hotpink: 0xff69b4,
  indianred: 0xcd5c5c,
  indigo: 0x4b0082,
  ivory: 0xfffff0,
  khaki: 0xf0e68c,
  lavender: 0xe6e6fa,
  lavenderblush: 0xfff0f5,
  lawngreen: 0x7cfc00,
  lemonchiffon: 0xfffacd,
  lightblue: 0xadd8e6,
  lightcoral: 0xf08080,
  lightcyan: 0xe0ffff,
  lightgoldenrodyellow: 0xfafad2,
  lightgray: 0xd3d3d3,
  lightgreen: 0x90ee90,
  lightgrey: 0xd3d3d3,
  lightpink: 0xffb6c1,
  lightsalmon: 0xffa07a,
  lightseagreen: 0x20b2aa,
  lightskyblue: 0x87cefa,
  lightslategray: 0x778899,
  lightslategrey: 0x778899,
  lightsteelblue: 0xb0c4de,
  lightyellow: 0xffffe0,
  lime: 0x00ff00,
  limegreen: 0x32cd32,
  linen: 0xfaf0e6,
  magenta: 0xff00ff,
  maroon: 0x800000,
  mediumaquamarine: 0x66cdaa,
  mediumblue: 0x0000cd,
  mediumorchid: 0xba55d3,
  mediumpurple: 0x9370db,
  mediumseagreen: 0x3cb371,
  mediumslateblue: 0x7b68ee,
  mediumspringgreen: 0x00fa9a,
  mediumturquoise: 0x48d1cc,
  mediumvioletred: 0xc71585,
  midnightblue: 0x191970,
  mintcream: 0xf5fffa,
  mistyrose: 0xffe4e1,
  moccasin: 0xffe4b5,
  navajowhite: 0xffdead,
  navy: 0x000080,
  oldlace: 0xfdf5e6,
  olive: 0x808000,
  olivedrab: 0x6b8e23,
  orange: 0xffa500,
  orangered: 0xff4500,
  orchid: 0xda70d6,
  palegoldenrod: 0xeee8aa,
  palegreen: 0x98fb98,
  paleturquoise: 0xafeeee,
  palevioletred: 0xdb7093,
  papayawhip: 0xffefd5,
  peachpuff: 0xffdab9,
  peru: 0xcd853f,
  pink: 0xffc0cb,
  plum: 0xdda0dd,
  powderblue: 0xb0e0e6,
  purple: 0x800080,
  rebeccapurple: 0x663399,
  red: 0xff0000,
  rosybrown: 0xbc8f8f,
  royalblue: 0x4169e1,
  saddlebrown: 0x8b4513,
  salmon: 0xfa8072,
  sandybrown: 0xf4a460,
  seagreen: 0x2e8b57,
  seashell: 0xfff5ee,
  sienna: 0xa0522d,
  silver: 0xc0c0c0,
  skyblue: 0x87ceeb,
  slateblue: 0x6a5acd,
  slategray: 0x708090,
  slategrey: 0x708090,
  snow: 0xfffafa,
  springgreen: 0x00ff7f,
  steelblue: 0x4682b4,
  tan: 0xd2b48c,
  teal: 0x008080,
  thistle: 0xd8bfd8,
  tomato: 0xff6347,
  turquoise: 0x40e0d0,
  violet: 0xee82ee,
  wheat: 0xf5deb3,
  white: 0xffffff,
  whitesmoke: 0xf5f5f5,
  yellow: 0xffff00,
  yellowgreen: 0x9acd32
};

Object(__WEBPACK_IMPORTED_MODULE_0__define__["a" /* default */])(Color, color, {
  displayable: function() {
    return this.rgb().displayable();
  },
  toString: function() {
    return this.rgb() + "";
  }
});

function color(format) {
  var m;
  format = (format + "").trim().toLowerCase();
  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00
      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000
      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)
      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)
      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)
      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)
      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)
      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)
      : named.hasOwnProperty(format) ? rgbn(named[format])
      : format === "transparent" ? new Rgb(NaN, NaN, NaN, 0)
      : null;
}

function rgbn(n) {
  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);
}

function rgba(r, g, b, a) {
  if (a <= 0) r = g = b = NaN;
  return new Rgb(r, g, b, a);
}

function rgbConvert(o) {
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Rgb;
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}

function rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}

function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}

Object(__WEBPACK_IMPORTED_MODULE_0__define__["a" /* default */])(Rgb, rgb, Object(__WEBPACK_IMPORTED_MODULE_0__define__["b" /* extend */])(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb: function() {
    return this;
  },
  displayable: function() {
    return (0 <= this.r && this.r <= 255)
        && (0 <= this.g && this.g <= 255)
        && (0 <= this.b && this.b <= 255)
        && (0 <= this.opacity && this.opacity <= 1);
  },
  toString: function() {
    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));
    return (a === 1 ? "rgb(" : "rgba(")
        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", "
        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", "
        + Math.max(0, Math.min(255, Math.round(this.b) || 0))
        + (a === 1 ? ")" : ", " + a + ")");
  }
}));

function hsla(h, s, l, a) {
  if (a <= 0) h = s = l = NaN;
  else if (l <= 0 || l >= 1) h = s = NaN;
  else if (s <= 0) h = NaN;
  return new Hsl(h, s, l, a);
}

function hslConvert(o) {
  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color)) o = color(o);
  if (!o) return new Hsl;
  if (o instanceof Hsl) return o;
  o = o.rgb();
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      min = Math.min(r, g, b),
      max = Math.max(r, g, b),
      h = NaN,
      s = max - min,
      l = (max + min) / 2;
  if (s) {
    if (r === max) h = (g - b) / s + (g < b) * 6;
    else if (g === max) h = (b - r) / s + 2;
    else h = (r - g) / s + 4;
    s /= l < 0.5 ? max + min : 2 - max - min;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }
  return new Hsl(h, s, l, o.opacity);
}

function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}

function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

Object(__WEBPACK_IMPORTED_MODULE_0__define__["a" /* default */])(Hsl, hsl, Object(__WEBPACK_IMPORTED_MODULE_0__define__["b" /* extend */])(Color, {
  brighter: function(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function() {
    var h = this.h % 360 + (this.h < 0) * 360,
        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,
        l = this.l,
        m2 = l + (l < 0.5 ? l : 1 - l) * s,
        m1 = 2 * l - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  displayable: function() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s))
        && (0 <= this.l && this.l <= 1)
        && (0 <= this.opacity && this.opacity <= 1);
  }
}));

/* From FvD 13.37, CSS Color Module Level 3 */
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60
      : h < 180 ? m2
      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60
      : m1) * 255;
}


/***/ }),
/* 50 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = extend;
/* harmony default export */ __webpack_exports__["a"] = (function(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
});

function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition) prototype[key] = definition[key];
  return prototype;
}


/***/ }),
/* 51 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = basis;
function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1, t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0
      + (4 - 6 * t2 + 3 * t3) * v1
      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2
      + t3 * v3) / 6;
}

/* harmony default export */ __webpack_exports__["b"] = (function(values) {
  var n = values.length - 1;
  return function(t) {
    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),
        v1 = values[i],
        v2 = values[i + 1],
        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,
        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
});


/***/ }),
/* 52 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = now;
/* harmony export (immutable) */ __webpack_exports__["a"] = Timer;
/* harmony export (immutable) */ __webpack_exports__["c"] = timer;
/* unused harmony export timerFlush */
var frame = 0, // is an animation frame pending?
    timeout = 0, // is a timeout pending?
    interval = 0, // are any timers active?
    pokeDelay = 1000, // how frequently we check for clock skew
    taskHead,
    taskTail,
    clockLast = 0,
    clockNow = 0,
    clockSkew = 0,
    clock = typeof performance === "object" && performance.now ? performance : Date,
    setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };

function now() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}

function clearNow() {
  clockNow = 0;
}

function Timer() {
  this._call =
  this._time =
  this._next = null;
}

Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function(callback, delay, time) {
    if (typeof callback !== "function") throw new TypeError("callback is not a function");
    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);
    if (!this._next && taskTail !== this) {
      if (taskTail) taskTail._next = this;
      else taskHead = this;
      taskTail = this;
    }
    this._call = callback;
    this._time = time;
    sleep();
  },
  stop: function() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};

function timer(callback, delay, time) {
  var t = new Timer;
  t.restart(callback, delay, time);
  return t;
}

function timerFlush() {
  now(); // Get the current time, if not already set.
  ++frame; // Pretend we’ve set an alarm, if we haven’t already.
  var t = taskHead, e;
  while (t) {
    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);
    t = t._next;
  }
  --frame;
}

function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  frame = timeout = 0;
  try {
    timerFlush();
  } finally {
    frame = 0;
    nap();
    clockNow = 0;
  }
}

function poke() {
  var now = clock.now(), delay = now - clockLast;
  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;
}

function nap() {
  var t0, t1 = taskHead, t2, time = Infinity;
  while (t1) {
    if (t1._call) {
      if (time > t1._time) time = t1._time;
      t0 = t1, t1 = t1._next;
    } else {
      t2 = t1._next, t1._next = null;
      t1 = t0 ? t0._next = t2 : taskHead = t2;
    }
  }
  taskTail = t0;
  sleep(time);
}

function sleep(time) {
  if (frame) return; // Soonest alarm already set, or will be.
  if (timeout) timeout = clearTimeout(timeout);
  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.
  if (delay > 24) {
    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);
    if (interval) interval = clearInterval(interval);
  } else {
    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    frame = 1, setFrame(wake);
  }
}


/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * build
 *
 * Functions for building new reactions.
 */

var utils = __webpack_require__(1);
var _ = __webpack_require__(2);

module.exports = {
  get_met_label_loc: get_met_label_loc,
  new_reaction: new_reaction,
  rotate_nodes: rotate_nodes,
  move_node_and_dependents: move_node_and_dependents,
  new_text_label: new_text_label,
  bezier_id_for_segment_id: bezier_id_for_segment_id,
  bezier_ids_for_reaction_ids: bezier_ids_for_reaction_ids,
  new_beziers_for_segments: new_beziers_for_segments,
  new_beziers_for_reactions: new_beziers_for_reactions
};

function _get_label_loc(angle) {
  if (Math.abs(angle) > Math.PI) {
    throw new Error('Angle must be between -PI and PI');
  }
  if (Math.abs(angle) < Math.PI / 7 || Math.abs(angle - Math.PI) < Math.PI / 7) {
    // Close to 0 or PI
    return { x: -50, y: -40 };
  } else if (angle > 0) {
    // Bottom quadrants
    return {
      x: 15 * (1 - Math.abs(angle - Math.PI / 2) / (Math.PI / 2)),
      y: 10 + (angle - Math.PI / 2) * 50
    };
  } else {
    // Top quadrants
    return {
      x: 15 * (1 - Math.abs(angle + Math.PI / 2) / (Math.PI / 2)),
      y: 10 - (Math.abs(angle) - Math.PI / 2) * 50
    };
  }
}

function get_met_label_loc(angle, index, count, is_primary, bigg_id, primary_index) {
  var width = bigg_id.length * 18;
  var left_right = index - (index > primary_index) - count / 2 >= -1;
  if (Math.abs(angle) < Math.PI / 7) {
    // Close to 0
    if (is_primary || left_right) {
      // Primary or bottom
      return { x: -width * 0.3, y: 40 };
    } else {
      // Top
      return { x: -width * 0.3, y: -20 };
    }
  } else if (Math.abs(angle - Math.PI) < Math.PI / 7) {
    // Close to PI
    if (is_primary || !left_right) {
      // Primary or bottom
      return { x: -width * 0.3, y: 40 };
    } else {
      // Top
      return { x: -width * 0.3, y: -20 };
    }
  } else {
    if (is_primary) {
      // Primary
      return {
        x: 25 - 38 * Math.abs(Math.abs(angle) - Math.PI / 2),
        y: (Math.abs(angle) - Math.PI / 2) * ((angle > 0) * 2 - 1) * 50
      };
    } else if (angle < 0 && left_right || angle > 0 && !left_right) {
      // Right
      return { x: 15, y: 0 };
    } else {
      // Left
      return { x: -width * 0.5, y: 30 };
    }
  }
}

/**
 * New reaction.
 * @param {Number} angle - clockwise from 'right', in degrees
 */
function new_reaction(bigg_id, cobra_reaction, cobra_metabolites, selected_node_id, selected_node, largest_ids, cofactors, angle) {
  // Convert to radians, and force to domain - PI/2 to PI/2
  angle = utils.to_radians_norm(angle);

  // Generate a new integer id
  var new_reaction_id = String(++largest_ids.reactions);

  // Calculate coordinates of reaction
  var selected_node_coords = { x: selected_node.x,
    y: selected_node.y

    // Rotate main axis around angle with distance
  };var reaction_length = 350;
  var main_axis = [selected_node_coords, utils.c_plus_c(selected_node_coords, { x: reaction_length, y: 0 })];
  var center = {
    x: (main_axis[0].x + main_axis[1].x) / 2,
    y: (main_axis[0].y + main_axis[1].y) / 2

    // Relative label location
  };var label_d = _get_label_loc(angle);

  // Relative anchor node distance
  var anchor_distance = 20;

  // New reaction structure
  var new_reaction = {
    name: cobra_reaction.name,
    bigg_id: cobra_reaction.bigg_id,
    reversibility: cobra_reaction.reversibility,
    gene_reaction_rule: cobra_reaction.gene_reaction_rule,
    genes: utils.clone(cobra_reaction.genes),
    metabolites: utils.clone(cobra_reaction.metabolites)
  };
  utils.extend(new_reaction, {
    label_x: center.x + label_d.x,
    label_y: center.y + label_d.y,
    segments: {}
  });

  // Set primary metabolites and count reactants/products

  // Look for the selected metabolite, and record the indices
  var reactant_ranks = [];
  var product_ranks = [];
  var reactant_count = 0;
  var product_count = 0;
  var reaction_is_reversed = false;
  for (var met_bigg_id in new_reaction.metabolites) {
    // Make the metabolites into objects
    var metabolite = cobra_metabolites[met_bigg_id];
    var coefficient = new_reaction.metabolites[met_bigg_id];
    var formula = metabolite.formula;
    var new_metabolite = {
      coefficient: coefficient,
      bigg_id: met_bigg_id,
      name: metabolite.name
    };
    if (coefficient < 0) {
      new_metabolite.index = reactant_count;
      // score the metabolites. Infinity == selected, >= 1 == carbon containing
      var carbons = /C([0-9]+)/.exec(formula);
      if (selected_node.bigg_id === new_metabolite.bigg_id) {
        reactant_ranks.push([new_metabolite.index, Infinity]);
      } else if (carbons && cofactors.indexOf(utils.decompartmentalize(new_metabolite.bigg_id)[0]) === -1) {
        reactant_ranks.push([new_metabolite.index, parseInt(carbons[1])]);
      }
      reactant_count++;
    } else {
      new_metabolite.index = product_count;
      var carbons = /C([0-9]+)/.exec(formula);
      if (selected_node.bigg_id === new_metabolite.bigg_id) {
        product_ranks.push([new_metabolite.index, Infinity]);
        reaction_is_reversed = true;
      } else if (carbons && cofactors.indexOf(utils.decompartmentalize(new_metabolite.bigg_id)[0]) === -1) {
        product_ranks.push([new_metabolite.index, parseInt(carbons[1])]);
      }
      product_count++;
    }
    new_reaction.metabolites[met_bigg_id] = new_metabolite;
  }

  // get the rank with the highest score
  var max_rank = function max_rank(old, current) {
    return current[1] > old[1] ? current : old;
  };
  var primary_reactant_index = reactant_ranks.reduce(max_rank, [0, 0])[0];
  var primary_product_index = product_ranks.reduce(max_rank, [0, 0])[0];

  // set primary metabolites, and keep track of the total counts
  for (var met_bigg_id in new_reaction.metabolites) {
    var metabolite = new_reaction.metabolites[met_bigg_id];
    if (metabolite.coefficient < 0) {
      metabolite.is_primary = metabolite.index === primary_reactant_index;
      metabolite.count = reactant_count;
    } else {
      metabolite.is_primary = metabolite.index === primary_product_index;
      metabolite.count = product_count;
    }
  }

  // generate anchor nodes
  var new_anchors = {};
  var anchors = [{ node_type: 'anchor_reactants',
    dis: { x: anchor_distance * (reaction_is_reversed ? 1 : -1), y: 0 } }, { node_type: 'center',
    dis: { x: 0, y: 0 } }, { node_type: 'anchor_products',
    dis: { x: anchor_distance * (reaction_is_reversed ? -1 : 1), y: 0 } }],
      anchor_ids = {};
  anchors.map(function (n) {
    var new_id = String(++largest_ids.nodes);
    var general_node_type = n.node_type === 'center' ? 'midmarker' : 'multimarker';
    new_anchors[new_id] = {
      node_type: general_node_type,
      x: center.x + n.dis.x,
      y: center.y + n.dis.y,
      connected_segments: [],
      name: null,
      bigg_id: null,
      label_x: null,
      label_y: null,
      node_is_primary: null,
      data: null
    };
    anchor_ids[n.node_type] = new_id;
  });

  // add the segments, outside to inside
  var new_anchor_groups = [[anchor_ids['anchor_reactants'], anchor_ids['center'], 'reactants'], [anchor_ids['anchor_products'], anchor_ids['center'], 'products']];
  new_anchor_groups.map(function (l) {
    var from_id = l[0];
    var to_id = l[1];
    var new_segment_id = String(++largest_ids.segments);
    var unconnected_seg = reactant_count === 0 && l[2] === 'reactants' && new_reaction.reversibility || product_count === 0 && l[2] === 'products';
    new_reaction.segments[new_segment_id] = {
      b1: null,
      b2: null,
      from_node_id: from_id,
      to_node_id: to_id,
      from_node_coefficient: null,
      to_node_coefficient: null,
      reversibility: new_reaction.reversibility,
      data: new_reaction.data,
      reverse_flux: new_reaction.reverse_flux,
      unconnected_segment_with_arrow: unconnected_seg
    };
    new_anchors[from_id].connected_segments.push({ segment_id: new_segment_id,
      reaction_id: new_reaction_id });
    new_anchors[to_id].connected_segments.push({ segment_id: new_segment_id,
      reaction_id: new_reaction_id });
  });

  // Add the metabolites, keeping track of total reactants and products.
  var new_nodes = new_anchors;
  for (var met_bigg_id in new_reaction.metabolites) {
    var metabolite = new_reaction.metabolites[met_bigg_id];
    var primary_index;
    var from_node_id;
    if (metabolite.coefficient < 0) {
      primary_index = primary_reactant_index;
      from_node_id = anchor_ids['anchor_reactants'];
    } else {
      primary_index = primary_product_index;
      from_node_id = anchor_ids['anchor_products'];
    }

    // calculate coordinates of metabolite components
    var met_loc = calculate_new_metabolite_coordinates(metabolite, primary_index, main_axis, center, reaction_length, reaction_is_reversed);

    // if this is the existing metabolite
    if (selected_node.bigg_id === metabolite.bigg_id) {
      var new_segment_id = String(++largest_ids.segments);
      new_reaction.segments[new_segment_id] = {
        b1: met_loc.b1,
        b2: met_loc.b2,
        from_node_id: from_node_id,
        to_node_id: selected_node_id,
        from_node_coefficient: null,
        to_node_coefficient: metabolite.coefficient,
        reversibility: new_reaction.reversibility
        // Update the existing node
      };selected_node.connected_segments.push({
        segment_id: new_segment_id,
        reaction_id: new_reaction_id
      });
      new_nodes[from_node_id].connected_segments.push({
        segment_id: new_segment_id,
        reaction_id: new_reaction_id
      });
    } else {
      // save new metabolite
      var new_segment_id = String(++largest_ids.segments);
      var new_node_id = String(++largest_ids.nodes);
      new_reaction.segments[new_segment_id] = {
        b1: met_loc.b1,
        b2: met_loc.b2,
        from_node_id: from_node_id,
        to_node_id: new_node_id,
        from_node_coefficient: null,
        to_node_coefficient: metabolite.coefficient,
        reversibility: new_reaction.reversibility
        // save new node
      };var met_label_d = get_met_label_loc(angle, metabolite.index, metabolite.count, metabolite.is_primary, metabolite.bigg_id, primary_index);
      new_nodes[new_node_id] = {
        connected_segments: [{ segment_id: new_segment_id,
          reaction_id: new_reaction_id }],
        x: met_loc.circle.x,
        y: met_loc.circle.y,
        node_is_primary: metabolite.is_primary,
        label_x: met_loc.circle.x + met_label_d.x,
        label_y: met_loc.circle.y + met_label_d.y,
        name: metabolite.name,
        bigg_id: metabolite.bigg_id,
        node_type: 'metabolite'
      };
      new_nodes[from_node_id].connected_segments.push({
        segment_id: new_segment_id,
        reaction_id: new_reaction_id
      });
    }
  }

  // now take out the extra reaction details
  var metabolites_array = [];
  for (var bigg_id in new_reaction.metabolites) {
    metabolites_array.push({
      bigg_id: bigg_id,
      coefficient: new_reaction.metabolites[bigg_id].coefficient
    });
  }
  new_reaction.metabolites = metabolites_array;

  // new_reactions object
  var new_reactions = {};
  new_reactions[new_reaction_id] = new_reaction;

  // new_beziers object
  var new_beziers = new_beziers_for_reactions(new_reactions);

  // add the selected node for rotation, and return it as a new (updated) node
  new_nodes[selected_node_id] = selected_node;
  rotate_nodes(new_nodes, new_reactions, new_beziers, angle, selected_node_coords);

  return { new_reactions: new_reactions,
    new_beziers: new_beziers,
    new_nodes: new_nodes };
}

/**
 * Rotate the nodes around center.
 * selected_nodes: Nodes to rotate.
 * reactions: Only updates beziers for these reactions.
 * beziers: Also update the bezier points.
 * angle: Angle to rotate in radians.
 * center: Point to rotate around.
 */
function rotate_nodes(selected_nodes, reactions, beziers, angle, center) {
  var rotate_around = function rotate_around(coord) {
    if (coord === null) {
      return null;
    }
    return utils.rotate_coords(coord, angle, center);
  };

  // recalculate: node
  var updated_node_ids = [],
      updated_reaction_ids = [];
  for (var node_id in selected_nodes) {
    var node = selected_nodes[node_id],

    // rotation distance
    displacement = rotate_around({ x: node.x, y: node.y }),

    // move the node
    updated = move_node_and_labels(node, reactions, displacement);
    // move the bezier points
    node.connected_segments.map(function (segment_obj) {
      var reaction = reactions[segment_obj.reaction_id];
      // If the reaction was not passed in the reactions argument, then ignore
      if (reaction === undefined) return;

      // rotate the beziers
      var segment_id = segment_obj.segment_id;
      var segment = reaction.segments[segment_id];
      if (segment.to_node_id == node_id && segment.b2) {
        var displacement = rotate_around(segment.b2);
        var bez_id = bezier_id_for_segment_id(segment_id, 'b2');
        segment.b2 = utils.c_plus_c(segment.b2, displacement);
        beziers[bez_id].x = segment.b2.x;
        beziers[bez_id].y = segment.b2.y;
      } else if (segment.from_node_id == node_id && segment.b1) {
        var displacement = rotate_around(segment.b1);
        var bez_id = bezier_id_for_segment_id(segment_id, 'b1');
        segment.b1 = utils.c_plus_c(segment.b1, displacement);
        beziers[bez_id].x = segment.b1.x;
        beziers[bez_id].y = segment.b1.y;
      }
    });

    updated_reaction_ids = utils.unique_concat([updated_reaction_ids, updated.reaction_ids]);
    updated_node_ids.push(node_id);
  }

  return { node_ids: updated_node_ids,
    reaction_ids: updated_reaction_ids };
}

/**
 * Move the node and its labels and beziers.
 */
function move_node_and_dependents(node, node_id, reactions, beziers, displacement) {
  var updated = move_node_and_labels(node, reactions, displacement);

  // move beziers
  node.connected_segments.map(function (segment_obj) {
    var reaction = reactions[segment_obj.reaction_id];
    // If the reaction was not passed in the reactions argument, then ignore
    if (_.isUndefined(reaction)) return;

    // Update beziers
    var segment_id = segment_obj.segment_id;
    var segment = reaction.segments[segment_id];
    var cs = [['b1', 'from_node_id'], ['b2', 'to_node_id']];
    cs.forEach(function (c) {
      var bez = c[0];
      var node = c[1];
      if (segment[node] === node_id && segment[bez]) {
        segment[bez] = utils.c_plus_c(segment[bez], displacement);
        var tbez = beziers[bezier_id_for_segment_id(segment_id, bez)];
        tbez.x = segment[bez].x;
        tbez.y = segment[bez].y;
      }
    });

    // add to list of updated reaction ids if it isn't already there
    if (updated.reaction_ids.indexOf(segment_obj.reaction_id) < 0) {
      updated.reaction_ids.push(segment_obj.reaction_id);
    }
  });
  return updated;
}

function move_node_and_labels(node, reactions, displacement) {
  node.x = node.x + displacement.x;
  node.y = node.y + displacement.y;

  // recalculate: node label
  node.label_x = node.label_x + displacement.x;
  node.label_y = node.label_y + displacement.y;

  // recalculate: reaction label
  var updated_reaction_ids = [];
  node.connected_segments.map(function (segment_obj) {
    var reaction = reactions[segment_obj.reaction_id];
    // add to list of updated reaction ids if it isn't already there
    if (updated_reaction_ids.indexOf(segment_obj.reaction_id) < 0) {
      updated_reaction_ids.push(segment_obj.reaction_id);

      // update reaction label (but only once per reaction
      if (node.node_type == 'midmarker') {
        reaction.label_x = reaction.label_x + displacement.x;
        reaction.label_y = reaction.label_y + displacement.y;
      }
    }
  });
  return { reaction_ids: updated_reaction_ids };
}

/**
 * Calculate the distance of mets from main reaction axis.
 * @param {Number} w - Scaling factor
 * @param {Number} draw_at_index - Index of metabolite
 * @param {Number} num_slots - Number of metabolites
 */
function _met_index_disp(w, draw_at_index, num_slots) {
  var half = Math.floor(num_slots / 2);
  return w * (draw_at_index - half + (draw_at_index >= half));
}

function _met_secondary_disp(secondary_w, secondary_dis, draw_at_index, num_slots) {
  var half = Math.floor(num_slots / 2);
  return secondary_dis + Math.abs(draw_at_index - half + (draw_at_index >= half)) * secondary_w;
}

/**
 * Calculate metabolite coordinates for a new reaction metabolite.
 */
function calculate_new_metabolite_coordinates(met, primary_index, main_axis, center, dis, is_reversed) {
  // new local coordinate system
  var displacement = main_axis[0];
  main_axis = [utils.c_minus_c(main_axis[0], displacement), utils.c_minus_c(main_axis[1], displacement)];
  center = utils.c_minus_c(center, displacement);

  // Curve parameters
  var w = 80; // distance between reactants and between products
  var b1_strength = 0.4;
  var b2_strength = 0.25;
  var w2 = w * 0.3; // bezier target poin
  var secondary_dis = 50; // y distance of first secondary mets
  var secondary_w = 20; // y distance of each other secondary met

  // Secondary mets
  var num_slots = met.count - 1;

  // Size and spacing for primary and secondary metabolites
  var ds;
  var draw_at_index;
  var r;
  if (met.is_primary) {
    // primary
    ds = 20;
  } else {
    // secondary
    ds = 10;
    // don't use center slot
    if (met.index > primary_index) draw_at_index = met.index - 1;else draw_at_index = met.index;
  }

  var de = dis - ds; // distance between ends of line axis
  var reaction_axis = [{ x: ds, y: 0 }, { x: de, y: 0 }];

  // Define line parameters and axis.
  // Begin with unrotated coordinate system. +y = Down, +x = Right.
  var end;
  var circle;
  var b1;
  var b2;

  // Reactants
  if (met.coefficient < 0 !== is_reversed && met.is_primary) {
    // Ali == BADASS
    end = {
      x: reaction_axis[0].x,
      y: reaction_axis[0].y
    };
    b1 = {
      x: center.x * (1 - b1_strength) + reaction_axis[0].x * b1_strength,
      y: center.y * (1 - b1_strength) + reaction_axis[0].y * b1_strength
    };
    b2 = {
      x: center.x * b2_strength + end.x * (1 - b2_strength),
      y: center.y * b2_strength + end.y * (1 - b2_strength)
    };
    circle = {
      x: main_axis[0].x,
      y: main_axis[0].y
    };
  } else if (met.coefficient < 0 !== is_reversed) {
    end = {
      x: reaction_axis[0].x + _met_secondary_disp(secondary_w, secondary_dis, draw_at_index, num_slots),
      y: reaction_axis[0].y + _met_index_disp(w2, draw_at_index, num_slots)
    };
    b1 = {
      x: center.x * (1 - b1_strength) + reaction_axis[0].x * b1_strength,
      y: center.y * (1 - b1_strength) + reaction_axis[0].y * b1_strength
    };
    b2 = {
      x: center.x * b2_strength + end.x * (1 - b2_strength),
      y: center.y * b2_strength + end.y * (1 - b2_strength)
    };
    circle = {
      x: main_axis[0].x + _met_secondary_disp(secondary_w, secondary_dis, draw_at_index, num_slots),
      y: main_axis[0].y + _met_index_disp(w, draw_at_index, num_slots)
    };
  } else if (met.coefficient > 0 !== is_reversed && met.is_primary) {
    // products
    end = {
      x: reaction_axis[1].x,
      y: reaction_axis[1].y
    };
    b1 = {
      x: center.x * (1 - b1_strength) + reaction_axis[1].x * b1_strength,
      y: center.y * (1 - b1_strength) + reaction_axis[1].y * b1_strength
    };
    b2 = {
      x: center.x * b2_strength + end.x * (1 - b2_strength),
      y: center.y * b2_strength + end.y * (1 - b2_strength)
    };
    circle = {
      x: main_axis[1].x,
      y: main_axis[1].y
    };
  } else if (met.coefficient > 0 !== is_reversed) {
    end = {
      x: reaction_axis[1].x - _met_secondary_disp(secondary_w, secondary_dis, draw_at_index, num_slots),
      y: reaction_axis[1].y + _met_index_disp(w2, draw_at_index, num_slots)
    };
    b1 = {
      x: center.x * (1 - b1_strength) + reaction_axis[1].x * b1_strength,
      y: center.y * (1 - b1_strength) + reaction_axis[1].y * b1_strength
    };
    b2 = {
      x: center.x * b2_strength + end.x * (1 - b2_strength),
      y: center.y * b2_strength + end.y * (1 - b2_strength)
    };
    circle = {
      x: main_axis[1].x - _met_secondary_disp(secondary_w, secondary_dis, draw_at_index, num_slots),
      y: main_axis[1].y + _met_index_disp(w, draw_at_index, num_slots)
    };
  }

  return {
    b1: utils.c_plus_c(displacement, b1),
    b2: utils.c_plus_c(displacement, b2),
    circle: utils.c_plus_c(displacement, circle)
  };
}

function new_text_label(largest_ids, text, coords) {
  var new_id = String(++largest_ids.text_labels);
  var new_label = { text: text, x: coords.x, y: coords.y };
  return { id: new_id, label: new_label };
}

function bezier_id_for_segment_id(segment_id, bez) {
  return segment_id + '_' + bez;
}

/**
 * Return an array of beziers ids for the array of reaction ids.
 * @param {Object} reactions - A reactions object, e.g. a subset of
 * *escher.Map.reactions*.
 */
function bezier_ids_for_reaction_ids(reactions) {
  var bezier_ids = [];
  for (var reaction_id in reactions) {
    var reaction = reactions[reaction_id];

    for (var segment_id in reaction.segments) {
      var segment = reaction.segments[segment_id];

      var bezs = ['b1', 'b2'];
      bezs.forEach(function (bez) {
        var seg_bez = segment[bez];
        if (seg_bez !== null) {
          bezier_ids.push(bezier_id_for_segment_id(segment_id, bez));
        }
      });
    }
  }
  return bezier_ids;
}

/**
 * Return an object containing beziers for the segments object.
 * segments: A segments object, e.g. *escher.Map.segments*.
 * reaction_id: The reaction id for the segments.
 */
function new_beziers_for_segments(segments, reaction_id) {
  var beziers = {};
  for (var segment_id in segments) {
    var segment = segments[segment_id];['b1', 'b2'].forEach(function (bez) {
      var seg_bez = segment[bez];
      if (seg_bez !== null) {
        var bezier_id = bezier_id_for_segment_id(segment_id, bez);
        beziers[bezier_id] = {
          bezier: bez,
          x: seg_bez.x,
          y: seg_bez.y,
          reaction_id: reaction_id,
          segment_id: segment_id
        };
      }
    });
  }
  return beziers;
}

/**
 * Return an object containing beziers for the reactions object.
 * @param {Object} reactions - A reactions object, e.g. *escher.Map.reactions*.
 */
function new_beziers_for_reactions(reactions) {
  var beziers = {};
  for (var reaction_id in reactions) {
    var reaction = reactions[reaction_id];

    var these = new_beziers_for_segments(reaction.segments, reaction_id);
    utils.extend(beziers, these);
  }
  return beziers;
}

/***/ }),
/* 54 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(23);


/* harmony default export */ __webpack_exports__["a"] = (function(values, p, valueof) {
  if (valueof == null) valueof = __WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */];
  if (!(n = values.length)) return;
  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);
  if (p >= 1) return +valueof(values[n - 1], n - 1, values);
  var n,
      i = (n - 1) * p,
      i0 = Math.floor(i),
      value0 = +valueof(values[i0], i0, values),
      value1 = +valueof(values[i0 + 1], i0 + 1, values);
  return value0 + (value1 - value0) * (i - i0);
});


/***/ }),
/* 55 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return function() {
    return x;
  };
});


/***/ }),
/* 56 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_interval__ = __webpack_require__(4);
/* unused harmony reexport timeInterval */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_millisecond__ = __webpack_require__(314);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return __WEBPACK_IMPORTED_MODULE_1__src_millisecond__["a"]; });
/* unused harmony reexport timeMilliseconds */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return __WEBPACK_IMPORTED_MODULE_1__src_millisecond__["a"]; });
/* unused harmony reexport utcMilliseconds */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_second__ = __webpack_require__(315);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return __WEBPACK_IMPORTED_MODULE_2__src_second__["a"]; });
/* unused harmony reexport timeSeconds */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return __WEBPACK_IMPORTED_MODULE_2__src_second__["a"]; });
/* unused harmony reexport utcSeconds */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_minute__ = __webpack_require__(316);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return __WEBPACK_IMPORTED_MODULE_3__src_minute__["a"]; });
/* unused harmony reexport timeMinutes */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_hour__ = __webpack_require__(317);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_4__src_hour__["a"]; });
/* unused harmony reexport timeHours */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_day__ = __webpack_require__(318);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_5__src_day__["a"]; });
/* unused harmony reexport timeDays */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_week__ = __webpack_require__(319);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return __WEBPACK_IMPORTED_MODULE_6__src_week__["b"]; });
/* unused harmony reexport timeWeeks */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return __WEBPACK_IMPORTED_MODULE_6__src_week__["b"]; });
/* unused harmony reexport timeSundays */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return __WEBPACK_IMPORTED_MODULE_6__src_week__["a"]; });
/* unused harmony reexport timeMondays */
/* unused harmony reexport timeTuesday */
/* unused harmony reexport timeTuesdays */
/* unused harmony reexport timeWednesday */
/* unused harmony reexport timeWednesdays */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return __WEBPACK_IMPORTED_MODULE_6__src_week__["c"]; });
/* unused harmony reexport timeThursdays */
/* unused harmony reexport timeFriday */
/* unused harmony reexport timeFridays */
/* unused harmony reexport timeSaturday */
/* unused harmony reexport timeSaturdays */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__src_month__ = __webpack_require__(320);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return __WEBPACK_IMPORTED_MODULE_7__src_month__["a"]; });
/* unused harmony reexport timeMonths */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__src_year__ = __webpack_require__(321);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return __WEBPACK_IMPORTED_MODULE_8__src_year__["a"]; });
/* unused harmony reexport timeYears */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__src_utcMinute__ = __webpack_require__(322);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return __WEBPACK_IMPORTED_MODULE_9__src_utcMinute__["a"]; });
/* unused harmony reexport utcMinutes */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__src_utcHour__ = __webpack_require__(323);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return __WEBPACK_IMPORTED_MODULE_10__src_utcHour__["a"]; });
/* unused harmony reexport utcHours */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__src_utcDay__ = __webpack_require__(324);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return __WEBPACK_IMPORTED_MODULE_11__src_utcDay__["a"]; });
/* unused harmony reexport utcDays */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__ = __webpack_require__(325);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__["b"]; });
/* unused harmony reexport utcWeeks */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__["b"]; });
/* unused harmony reexport utcSundays */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__["a"]; });
/* unused harmony reexport utcMondays */
/* unused harmony reexport utcTuesday */
/* unused harmony reexport utcTuesdays */
/* unused harmony reexport utcWednesday */
/* unused harmony reexport utcWednesdays */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return __WEBPACK_IMPORTED_MODULE_12__src_utcWeek__["c"]; });
/* unused harmony reexport utcThursdays */
/* unused harmony reexport utcFriday */
/* unused harmony reexport utcFridays */
/* unused harmony reexport utcSaturday */
/* unused harmony reexport utcSaturdays */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__src_utcMonth__ = __webpack_require__(326);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return __WEBPACK_IMPORTED_MODULE_13__src_utcMonth__["a"]; });
/* unused harmony reexport utcMonths */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__src_utcYear__ = __webpack_require__(327);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return __WEBPACK_IMPORTED_MODULE_14__src_utcYear__["a"]; });
/* unused harmony reexport utcYears */































/***/ }),
/* 57 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return timeFormat; });
/* unused harmony export timeParse */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return utcFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return utcParse; });
/* unused harmony export default */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__locale__ = __webpack_require__(115);


var locale;
var timeFormat;
var timeParse;
var utcFormat;
var utcParse;

defaultLocale({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});

function defaultLocale(definition) {
  locale = Object(__WEBPACK_IMPORTED_MODULE_0__locale__["a" /* default */])(definition);
  timeFormat = locale.format;
  timeParse = locale.parse;
  utcFormat = locale.utcFormat;
  utcParse = locale.utcParse;
  return locale;
}


/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, module) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function() {
var _slice = Array.prototype.slice;
var Bacon = {
  toString: function () {
    return "Bacon";
  }
};

Bacon.version = '0.7.95';

var Exception = (typeof global !== "undefined" && global !== null ? global : this).Error;
var nop = function () {};
var latter = function (_, x) {
  return x;
};
var former = function (x, _) {
  return x;
};
var cloneArray = function (xs) {
  return xs.slice(0);
};
var assert = function (message, condition) {
  if (!condition) {
    throw new Exception(message);
  }
};
var assertObservableIsProperty = function (x) {
  if ((x != null ? x._isObservable : void 0) && !(x != null ? x._isProperty : void 0)) {
    throw new Exception("Observable is not a Property : " + x);
  }
};
var assertEventStream = function (event) {
  if (!(event != null ? event._isEventStream : void 0)) {
    throw new Exception("not an EventStream : " + event);
  }
};

var assertObservable = function (event) {
  if (!(event != null ? event._isObservable : void 0)) {
    throw new Exception("not an Observable : " + event);
  }
};
var assertFunction = function (f) {
  return assert("not a function : " + f, _.isFunction(f));
};
var isArray = Array.isArray || function (xs) {
  return xs instanceof Array;
};
var isObservable = function (x) {
  return x && x._isObservable;
};
var assertArray = function (xs) {
  if (!isArray(xs)) {
    throw new Exception("not an array : " + xs);
  }
};
var assertNoArguments = function (args) {
  return assert("no arguments supported", args.length === 0);
};
var assertString = function (x) {
  if (typeof x === "string") {
    throw new Exception("not a string : " + x);
  }
};

var extend = function (target) {
  var length = arguments.length;
  for (var i = 1; 1 < length ? i < length : i > length; 1 < length ? i++ : i--) {
    for (var prop in arguments[i]) {
      target[prop] = arguments[i][prop];
    }
  }
  return target;
};

var inherit = function (child, parent) {
  var hasProp = ({}).hasOwnProperty;
  var ctor = function () {};
  ctor.prototype = parent.prototype;
  child.prototype = new ctor();
  for (var key in parent) {
    if (hasProp.call(parent, key)) {
      child[key] = parent[key];
    }
  }
  return child;
};

var symbol = function (key) {
  if (typeof Symbol !== "undefined" && Symbol[key]) {
    return Symbol[key];
  } else if (typeof Symbol !== "undefined" && typeof Symbol["for"] === "function") {
    return Symbol[key] = Symbol["for"](key);
  } else {
    return "@@" + key;
  }
};

var _ = {
  indexOf: (function () {
    if (Array.prototype.indexOf) {
      return function (xs, x) {
        return xs.indexOf(x);
      };
    } else {
      return function (xs, x) {
        for (var i = 0, y; i < xs.length; i++) {
          y = xs[i];
          if (x === y) {
            return i;
          }
        }
        return -1;
      };
    }
  })(),
  indexWhere: function (xs, f) {
    for (var i = 0, y; i < xs.length; i++) {
      y = xs[i];
      if (f(y)) {
        return i;
      }
    }
    return -1;
  },
  head: function (xs) {
    return xs[0];
  },
  always: function (x) {
    return function () {
      return x;
    };
  },
  negate: function (f) {
    return function (x) {
      return !f(x);
    };
  },
  empty: function (xs) {
    return xs.length === 0;
  },
  tail: function (xs) {
    return xs.slice(1, xs.length);
  },
  filter: function (f, xs) {
    var filtered = [];
    for (var i = 0, x; i < xs.length; i++) {
      x = xs[i];
      if (f(x)) {
        filtered.push(x);
      }
    }
    return filtered;
  },
  map: function (f, xs) {
    return (function () {
      var result = [];
      for (var i = 0, x; i < xs.length; i++) {
        x = xs[i];
        result.push(f(x));
      }
      return result;
    })();
  },
  each: function (xs, f) {
    for (var key in xs) {
      if (Object.prototype.hasOwnProperty.call(xs, key)) {
        var value = xs[key];
        f(key, value);
      }
    }
  },
  toArray: function (xs) {
    return isArray(xs) ? xs : [xs];
  },
  contains: function (xs, x) {
    return _.indexOf(xs, x) !== -1;
  },
  id: function (x) {
    return x;
  },
  last: function (xs) {
    return xs[xs.length - 1];
  },
  all: function (xs) {
    var f = arguments.length <= 1 || arguments[1] === undefined ? _.id : arguments[1];

    for (var i = 0, x; i < xs.length; i++) {
      x = xs[i];
      if (!f(x)) {
        return false;
      }
    }
    return true;
  },
  any: function (xs) {
    var f = arguments.length <= 1 || arguments[1] === undefined ? _.id : arguments[1];

    for (var i = 0, x; i < xs.length; i++) {
      x = xs[i];
      if (f(x)) {
        return true;
      }
    }
    return false;
  },
  without: function (x, xs) {
    return _.filter(function (y) {
      return y !== x;
    }, xs);
  },
  remove: function (x, xs) {
    var i = _.indexOf(xs, x);
    if (i >= 0) {
      return xs.splice(i, 1);
    }
  },
  fold: function (xs, seed, f) {
    for (var i = 0, x; i < xs.length; i++) {
      x = xs[i];
      seed = f(seed, x);
    }
    return seed;
  },
  flatMap: function (f, xs) {
    return _.fold(xs, [], function (ys, x) {
      return ys.concat(f(x));
    });
  },
  cached: function (f) {
    var value = None;
    return function () {
      if (typeof value !== "undefined" && value !== null ? value._isNone : undefined) {
        value = f();
        f = undefined;
      }
      return value;
    };
  },
  bind: function (fn, me) {
    return function () {
      return fn.apply(me, arguments);
    };
  },
  isFunction: function (f) {
    return typeof f === "function";
  },
  toString: function (obj) {
    var internals, key, value;
    var hasProp = ({}).hasOwnProperty;
    try {
      recursionDepth++;
      if (obj == null) {
        return "undefined";
      } else if (_.isFunction(obj)) {
        return "function";
      } else if (isArray(obj)) {
        if (recursionDepth > 5) {
          return "[..]";
        }
        return "[" + _.map(_.toString, obj).toString() + "]";
      } else if ((obj != null ? obj.toString : void 0) != null && obj.toString !== Object.prototype.toString) {
        return obj.toString();
      } else if (typeof obj === "object") {
        if (recursionDepth > 5) {
          return "{..}";
        }
        internals = (function () {
          var results = [];
          for (key in obj) {
            if (!hasProp.call(obj, key)) continue;
            value = (function () {
              var error;
              try {
                return obj[key];
              } catch (error) {
                return error;
              }
            })();
            results.push(_.toString(key) + ":" + _.toString(value));
          }
          return results;
        })();
        return "{" + internals + "}";
      } else {
        return obj;
      }
    } finally {
      recursionDepth--;
    }
  }
};

var recursionDepth = 0;

Bacon._ = _;

var UpdateBarrier = Bacon.UpdateBarrier = (function () {
  var rootEvent;
  var waiterObs = [];
  var waiters = {};
  var aftersStack = [];
  var aftersStackHeight = 0;
  var flushed = {};

  function ensureStackHeight(h) {
    if (h <= aftersStackHeight) return;
    if (!aftersStack[h - 1]) {
      aftersStack[h - 1] = [[], 0];
    }
    aftersStackHeight = h;
  }

  var afterTransaction = function (obs, f) {
    if (rootEvent || aftersStack.length) {
      ensureStackHeight(1);
      var stackIndexForThisObs = 0;
      while (stackIndexForThisObs < aftersStackHeight - 1) {
        if (containsObs(obs, aftersStack[stackIndexForThisObs][0])) {
          break;
        }
        stackIndexForThisObs++;
      }
      var listFromStack = aftersStack[stackIndexForThisObs][0];
      listFromStack.push([obs, f]);
      if (!rootEvent) {
        processAfters();
      }
    } else {
        return f();
      }
  };

  function containsObs(obs, aftersList) {
    for (var i = 0; i < aftersList.length; i++) {
      if (aftersList[i][0].id == obs.id) return true;
    }
    return false;
  }

  function processAfters() {
    var stackSizeAtStart = aftersStackHeight;
    if (!stackSizeAtStart) return;
    while (aftersStackHeight >= stackSizeAtStart) {
      var topOfStack = aftersStack[aftersStackHeight - 1];
      if (!topOfStack) throw new Error("Unexpected stack top: " + topOfStack);
      var topAfters = topOfStack[0];
      var index = topOfStack[1];

      if (index < topAfters.length) {
        var _topAfters$index = topAfters[index];
        var obs = _topAfters$index[0];
        var after = _topAfters$index[1];

        topOfStack[1]++;
        ensureStackHeight(aftersStackHeight + 1);
        var callSuccess = false;
        try {
          after();
          callSuccess = true;
          while (aftersStackHeight > stackSizeAtStart && aftersStack[aftersStackHeight - 1][0].length == 0) {
            aftersStackHeight--;
          }
        } finally {
          if (!callSuccess) {
            aftersStack = [];
            aftersStackHeight = 0;
          }
        }
      } else {
          topOfStack[0] = [];
          topOfStack[1] = 0;
          break;
        }
    }
  }

  var whenDoneWith = function (obs, f) {
    if (rootEvent) {
      var obsWaiters = waiters[obs.id];
      if (!(typeof obsWaiters !== "undefined" && obsWaiters !== null)) {
        obsWaiters = waiters[obs.id] = [f];
        return waiterObs.push(obs);
      } else {
        return obsWaiters.push(f);
      }
    } else {
      return f();
    }
  };

  var flush = function () {
    while (waiterObs.length > 0) {
      flushWaiters(0, true);
    }
    flushed = {};
  };

  var flushWaiters = function (index, deps) {
    var obs = waiterObs[index];
    var obsId = obs.id;
    var obsWaiters = waiters[obsId];
    waiterObs.splice(index, 1);
    delete waiters[obsId];
    if (deps && waiterObs.length > 0) {
      flushDepsOf(obs);
    }
    for (var i = 0, f; i < obsWaiters.length; i++) {
      f = obsWaiters[i];
      f();
    }
  };

  var flushDepsOf = function (obs) {
    if (flushed[obs.id]) return;
    var deps = obs.internalDeps();
    for (var i = 0, dep; i < deps.length; i++) {
      dep = deps[i];
      flushDepsOf(dep);
      if (waiters[dep.id]) {
        var index = _.indexOf(waiterObs, dep);
        flushWaiters(index, false);
      }
    }
    flushed[obs.id] = true;
  };

  var inTransaction = function (event, context, f, args) {
    if (rootEvent) {
      return f.apply(context, args);
    } else {
      rootEvent = event;
      try {
        var result = f.apply(context, args);

        flush();
      } finally {
        rootEvent = undefined;
        processAfters();
      }
      return result;
    }
  };

  var currentEventId = function () {
    return rootEvent ? rootEvent.id : undefined;
  };

  var wrappedSubscribe = function (obs, sink) {
    var unsubd = false;
    var shouldUnsub = false;
    var doUnsub = function () {
      shouldUnsub = true;
      return shouldUnsub;
    };
    var unsub = function () {
      unsubd = true;
      return doUnsub();
    };
    doUnsub = obs.dispatcher.subscribe(function (event) {
      return afterTransaction(obs, function () {
        if (!unsubd) {
          var reply = sink(event);
          if (reply === Bacon.noMore) {
            return unsub();
          }
        }
      });
    });
    if (shouldUnsub) {
      doUnsub();
    }
    return unsub;
  };

  var hasWaiters = function () {
    return waiterObs.length > 0;
  };

  return { whenDoneWith: whenDoneWith, hasWaiters: hasWaiters, inTransaction: inTransaction, currentEventId: currentEventId, wrappedSubscribe: wrappedSubscribe, afterTransaction: afterTransaction };
})();

function Source(obs, sync) {
  var lazy = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];

  this.obs = obs;
  this.sync = sync;
  this.lazy = lazy;
  this.queue = [];
}

extend(Source.prototype, {
  _isSource: true,

  subscribe: function (sink) {
    return this.obs.dispatcher.subscribe(sink);
  },
  toString: function () {
    return this.obs.toString();
  },
  markEnded: function () {
    this.ended = true;
    return true;
  },
  consume: function () {
    if (this.lazy) {
      return { value: _.always(this.queue[0]) };
    } else {
      return this.queue[0];
    }
  },
  push: function (x) {
    this.queue = [x];
    return [x];
  },
  mayHave: function () {
    return true;
  },
  hasAtLeast: function () {
    return this.queue.length;
  },
  flatten: true
});

function ConsumingSource() {
  Source.apply(this, arguments);
}

inherit(ConsumingSource, Source);
extend(ConsumingSource.prototype, {
  consume: function () {
    return this.queue.shift();
  },
  push: function (x) {
    return this.queue.push(x);
  },
  mayHave: function (c) {
    return !this.ended || this.queue.length >= c;
  },
  hasAtLeast: function (c) {
    return this.queue.length >= c;
  },
  flatten: false
});

function BufferingSource(obs) {
  Source.call(this, obs, true);
}

inherit(BufferingSource, Source);
extend(BufferingSource.prototype, {
  consume: function () {
    var values = this.queue;
    this.queue = [];
    return {
      value: function () {
        return values;
      }
    };
  },
  push: function (x) {
    return this.queue.push(x.value());
  },
  hasAtLeast: function () {
    return true;
  }
});

Source.isTrigger = function (s) {
  if (s != null ? s._isSource : void 0) {
    return s.sync;
  } else {
    return s != null ? s._isEventStream : void 0;
  }
};

Source.fromObservable = function (s) {
  if (s != null ? s._isSource : void 0) {
    return s;
  } else if (s != null ? s._isProperty : void 0) {
    return new Source(s, false);
  } else {
    return new ConsumingSource(s, true);
  }
};

function Desc(context, method, args) {
  this.context = context;
  this.method = method;
  this.args = args;
}

extend(Desc.prototype, {
  _isDesc: true,
  deps: function () {
    if (!this.cached) {
      this.cached = findDeps([this.context].concat(this.args));
    }
    return this.cached;
  },
  toString: function () {
    return _.toString(this.context) + "." + _.toString(this.method) + "(" + _.map(_.toString, this.args) + ")";
  }
});

var describe = function (context, method) {
  var ref = context || method;
  if (ref && ref._isDesc) {
    return context || method;
  } else {
    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      args[_key - 2] = arguments[_key];
    }

    return new Desc(context, method, args);
  }
};

var withDesc = function (desc, obs) {
  obs.desc = desc;
  return obs;
};

var findDeps = function (x) {
  if (isArray(x)) {
    return _.flatMap(findDeps, x);
  } else if (isObservable(x)) {
    return [x];
  } else if (typeof x !== "undefined" && x !== null ? x._isSource : undefined) {
    return [x.obs];
  } else {
    return [];
  }
};

Bacon.Desc = Desc;
Bacon.Desc.empty = new Bacon.Desc("", "", []);

var withMethodCallSupport = function (wrapped) {
  return function (f) {
    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      args[_key2 - 1] = arguments[_key2];
    }

    if (typeof f === "object" && args.length) {
      var context = f;
      var methodName = args[0];
      f = function () {
        return context[methodName].apply(context, arguments);
      };
      args = args.slice(1);
    }
    return wrapped.apply(undefined, [f].concat(args));
  };
};

var makeFunctionArgs = function (args) {
  args = Array.prototype.slice.call(args);
  return makeFunction_.apply(undefined, args);
};

var partiallyApplied = function (f, applied) {
  return function () {
    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }

    return f.apply(undefined, applied.concat(args));
  };
};

var toSimpleExtractor = function (args) {
  return function (key) {
    return function (value) {
      if (!(typeof value !== "undefined" && value !== null)) {
        return;
      } else {
        var fieldValue = value[key];
        if (_.isFunction(fieldValue)) {
          return fieldValue.apply(value, args);
        } else {
          return fieldValue;
        }
      }
    };
  };
};

var toFieldExtractor = function (f, args) {
  var parts = f.slice(1).split(".");
  var partFuncs = _.map(toSimpleExtractor(args), parts);
  return function (value) {
    for (var i = 0, f; i < partFuncs.length; i++) {
      f = partFuncs[i];
      value = f(value);
    }
    return value;
  };
};

var isFieldKey = function (f) {
  return typeof f === "string" && f.length > 1 && f.charAt(0) === ".";
};

var makeFunction_ = withMethodCallSupport(function (f) {
  for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
    args[_key4 - 1] = arguments[_key4];
  }

  if (_.isFunction(f)) {
    if (args.length) {
      return partiallyApplied(f, args);
    } else {
      return f;
    }
  } else if (isFieldKey(f)) {
    return toFieldExtractor(f, args);
  } else {
    return _.always(f);
  }
});

var makeFunction = function (f, args) {
  return makeFunction_.apply(undefined, [f].concat(args));
};

var convertArgsToFunction = function (obs, f, args, method) {
  if (typeof f !== "undefined" && f !== null ? f._isProperty : undefined) {
    var sampled = f.sampledBy(obs, function (p, s) {
      return [p, s];
    });
    return method.call(sampled, function (_ref) {
      var p = _ref[0];
      var s = _ref[1];
      return p;
    }).map(function (_ref2) {
      var p = _ref2[0];
      var s = _ref2[1];
      return s;
    });
  } else {
    f = makeFunction(f, args);
    return method.call(obs, f);
  }
};

var toCombinator = function (f) {
  if (_.isFunction(f)) {
    return f;
  } else if (isFieldKey(f)) {
    var key = toFieldKey(f);
    return function (left, right) {
      return left[key](right);
    };
  } else {
    throw new Exception("not a function or a field key: " + f);
  }
};

var toFieldKey = function (f) {
  return f.slice(1);
};

function Some(value) {
  this.value = value;
}

extend(Some.prototype, {
  _isSome: true,
  getOrElse: function () {
    return this.value;
  },
  get: function () {
    return this.value;
  },
  filter: function (f) {
    if (f(this.value)) {
      return new Some(this.value);
    } else {
      return None;
    }
  },
  map: function (f) {
    return new Some(f(this.value));
  },
  forEach: function (f) {
    return f(this.value);
  },
  isDefined: true,
  toArray: function () {
    return [this.value];
  },
  inspect: function () {
    return "Some(" + this.value + ")";
  },
  toString: function () {
    return this.inspect();
  }
});

var None = {
  _isNone: true,
  getOrElse: function (value) {
    return value;
  },
  filter: function () {
    return None;
  },
  map: function () {
    return None;
  },
  forEach: function () {},
  isDefined: false,
  toArray: function () {
    return [];
  },
  inspect: function () {
    return "None";
  },
  toString: function () {
    return this.inspect();
  }
};

var toOption = function (v) {
  if ((typeof v !== "undefined" && v !== null ? v._isSome : undefined) || (typeof v !== "undefined" && v !== null ? v._isNone : undefined)) {
    return v;
  } else {
    return new Some(v);
  }
};

Bacon.noMore = "<no-more>";
Bacon.more = "<more>";

var eventIdCounter = 0;

function Event() {
  this.id = ++eventIdCounter;
}

Event.prototype._isEvent = true;
Event.prototype.isEvent = function () {
  return true;
};
Event.prototype.isEnd = function () {
  return false;
};
Event.prototype.isInitial = function () {
  return false;
};
Event.prototype.isNext = function () {
  return false;
};
Event.prototype.isError = function () {
  return false;
};
Event.prototype.hasValue = function () {
  return false;
};
Event.prototype.filter = function () {
  return true;
};
Event.prototype.inspect = function () {
  return this.toString();
};
Event.prototype.log = function () {
  return this.toString();
};

function Next(valueF, eager) {
  if (!(this instanceof Next)) {
    return new Next(valueF, eager);
  }

  Event.call(this);

  if (!eager && _.isFunction(valueF) || (valueF != null ? valueF._isNext : void 0)) {
    this.valueF = valueF;
    this.valueInternal = void 0;
  } else {
    this.valueF = void 0;
    this.valueInternal = valueF;
  }
}

inherit(Next, Event);

Next.prototype.isNext = function () {
  return true;
};
Next.prototype.hasValue = function () {
  return true;
};
Next.prototype.value = function () {
  var ref;
  if ((ref = this.valueF) != null ? ref._isNext : void 0) {
    this.valueInternal = this.valueF.value();
    this.valueF = void 0;
  } else if (this.valueF) {
    this.valueInternal = this.valueF();
    this.valueF = void 0;
  }
  return this.valueInternal;
};

Next.prototype.fmap = function (f) {
  var event, value;
  if (this.valueInternal) {
    value = this.valueInternal;
    return this.apply(function () {
      return f(value);
    });
  } else {
    event = this;
    return this.apply(function () {
      return f(event.value());
    });
  }
};

Next.prototype.apply = function (value) {
  return new Next(value);
};
Next.prototype.filter = function (f) {
  return f(this.value());
};
Next.prototype.toString = function () {
  return _.toString(this.value());
};
Next.prototype.log = function () {
  return this.value();
};
Next.prototype._isNext = true;

function Initial(valueF, eager) {
  if (!(this instanceof Initial)) {
    return new Initial(valueF, eager);
  }
  Next.call(this, valueF, eager);
}

inherit(Initial, Next);
Initial.prototype._isInitial = true;
Initial.prototype.isInitial = function () {
  return true;
};
Initial.prototype.isNext = function () {
  return false;
};
Initial.prototype.apply = function (value) {
  return new Initial(value);
};
Initial.prototype.toNext = function () {
  return new Next(this);
};

function End() {
  if (!(this instanceof End)) {
    return new End();
  }
  Event.call(this);
}

inherit(End, Event);
End.prototype.isEnd = function () {
  return true;
};
End.prototype.fmap = function () {
  return this;
};
End.prototype.apply = function () {
  return this;
};
End.prototype.toString = function () {
  return "<end>";
};

function Error(error) {
  if (!(this instanceof Error)) {
    return new Error(error);
  }
  this.error = error;
  Event.call(this);
}

inherit(Error, Event);
Error.prototype.isError = function () {
  return true;
};
Error.prototype.fmap = function () {
  return this;
};
Error.prototype.apply = function () {
  return this;
};
Error.prototype.toString = function () {
  return "<error> " + _.toString(this.error);
};

Bacon.Event = Event;
Bacon.Initial = Initial;
Bacon.Next = Next;
Bacon.End = End;
Bacon.Error = Error;

var initialEvent = function (value) {
  return new Initial(value, true);
};
var nextEvent = function (value) {
  return new Next(value, true);
};
var endEvent = function () {
  return new End();
};
var toEvent = function (x) {
  if (x && x._isEvent) {
    return x;
  } else {
    return nextEvent(x);
  }
};

var idCounter = 0;
var registerObs = function () {};

function Observable(desc) {
  this.desc = desc;
  this.id = ++idCounter;
  this.initialDesc = this.desc;
}

extend(Observable.prototype, {
  _isObservable: true,

  subscribe: function (sink) {
    return UpdateBarrier.wrappedSubscribe(this, sink);
  },

  subscribeInternal: function (sink) {
    return this.dispatcher.subscribe(sink);
  },

  onValue: function () {
    var f = makeFunctionArgs(arguments);
    return this.subscribe(function (event) {
      if (event.hasValue()) {
        return f(event.value());
      }
    });
  },

  onValues: function (f) {
    return this.onValue(function (args) {
      return f.apply(undefined, args);
    });
  },

  onError: function () {
    var f = makeFunctionArgs(arguments);
    return this.subscribe(function (event) {
      if (event.isError()) {
        return f(event.error);
      }
    });
  },

  onEnd: function () {
    var f = makeFunctionArgs(arguments);
    return this.subscribe(function (event) {
      if (event.isEnd()) {
        return f();
      }
    });
  },

  name: function (name) {
    this._name = name;
    return this;
  },

  withDescription: function () {
    this.desc = describe.apply(undefined, arguments);
    return this;
  },

  toString: function () {
    if (this._name) {
      return this._name;
    } else {
      return this.desc.toString();
    }
  },

  deps: function () {
    return this.desc.deps();
  },

  internalDeps: function () {
    return this.initialDesc.deps();
  }
});

Observable.prototype.assign = Observable.prototype.onValue;
Observable.prototype.forEach = Observable.prototype.onValue;
Observable.prototype.inspect = Observable.prototype.toString;

Bacon.Observable = Observable;

function CompositeUnsubscribe() {
  var ss = arguments.length <= 0 || arguments[0] === undefined ? [] : arguments[0];

  this.unsubscribe = _.bind(this.unsubscribe, this);
  this.unsubscribed = false;
  this.subscriptions = [];
  this.starting = [];
  for (var i = 0, s; i < ss.length; i++) {
    s = ss[i];
    this.add(s);
  }
}

extend(CompositeUnsubscribe.prototype, {
  add: function (subscription) {
    var _this2 = this;

    if (this.unsubscribed) {
      return;
    }
    var ended = false;
    var unsub = nop;
    this.starting.push(subscription);
    var unsubMe = function () {
      if (_this2.unsubscribed) {
        return;
      }
      ended = true;
      _this2.remove(unsub);
      return _.remove(subscription, _this2.starting);
    };
    unsub = subscription(this.unsubscribe, unsubMe);
    if (!(this.unsubscribed || ended)) {
      this.subscriptions.push(unsub);
    } else {
      unsub();
    }
    _.remove(subscription, this.starting);
    return unsub;
  },

  remove: function (unsub) {
    if (this.unsubscribed) {
      return;
    }
    if (_.remove(unsub, this.subscriptions) !== undefined) {
      return unsub();
    }
  },

  unsubscribe: function () {
    if (this.unsubscribed) {
      return;
    }
    this.unsubscribed = true;
    var iterable = this.subscriptions;
    for (var i = 0; i < iterable.length; i++) {
      iterable[i]();
    }
    this.subscriptions = [];
    this.starting = [];
    return [];
  },

  count: function () {
    if (this.unsubscribed) {
      return 0;
    }
    return this.subscriptions.length + this.starting.length;
  },

  empty: function () {
    return this.count() === 0;
  }
});

Bacon.CompositeUnsubscribe = CompositeUnsubscribe;

function Dispatcher(_subscribe, _handleEvent) {
  this._subscribe = _subscribe;
  this._handleEvent = _handleEvent;
  this.subscribe = _.bind(this.subscribe, this);
  this.handleEvent = _.bind(this.handleEvent, this);
  this.pushing = false;
  this.ended = false;
  this.prevError = undefined;
  this.unsubSrc = undefined;
  this.subscriptions = [];
  this.queue = [];
}

Dispatcher.prototype.hasSubscribers = function () {
  return this.subscriptions.length > 0;
};

Dispatcher.prototype.removeSub = function (subscription) {
  this.subscriptions = _.without(subscription, this.subscriptions);
  return this.subscriptions;
};

Dispatcher.prototype.push = function (event) {
  if (event.isEnd()) {
    this.ended = true;
  }
  return UpdateBarrier.inTransaction(event, this, this.pushIt, [event]);
};

Dispatcher.prototype.pushToSubscriptions = function (event) {
  try {
    var tmp = this.subscriptions;
    var len = tmp.length;
    for (var i = 0; i < len; i++) {
      var sub = tmp[i];
      var reply = sub.sink(event);
      if (reply === Bacon.noMore || event.isEnd()) {
        this.removeSub(sub);
      }
    }
    return true;
  } catch (error) {
    this.pushing = false;
    this.queue = [];
    throw error;
  }
};

Dispatcher.prototype.pushIt = function (event) {
  if (!this.pushing) {
    if (event === this.prevError) {
      return;
    }
    if (event.isError()) {
      this.prevError = event;
    }
    this.pushing = true;
    this.pushToSubscriptions(event);
    this.pushing = false;
    while (this.queue.length) {
      event = this.queue.shift();
      this.push(event);
    }
    if (this.hasSubscribers()) {
      return Bacon.more;
    } else {
      this.unsubscribeFromSource();
      return Bacon.noMore;
    }
  } else {
    this.queue.push(event);
    return Bacon.more;
  }
};

Dispatcher.prototype.handleEvent = function (event) {
  if (this._handleEvent) {
    return this._handleEvent(event);
  } else {
    return this.push(event);
  }
};

Dispatcher.prototype.unsubscribeFromSource = function () {
  if (this.unsubSrc) {
    this.unsubSrc();
  }
  this.unsubSrc = undefined;
};

Dispatcher.prototype.subscribe = function (sink) {
  var subscription;
  if (this.ended) {
    sink(endEvent());
    return nop;
  } else {
    assertFunction(sink);
    subscription = {
      sink: sink
    };
    this.subscriptions.push(subscription);
    if (this.subscriptions.length === 1) {
      this.unsubSrc = this._subscribe(this.handleEvent);
      assertFunction(this.unsubSrc);
    }
    return (function (_this) {
      return function () {
        _this.removeSub(subscription);
        if (!_this.hasSubscribers()) {
          return _this.unsubscribeFromSource();
        }
      };
    })(this);
  }
};

Bacon.Dispatcher = Dispatcher;

function EventStream(desc, subscribe, handler) {
  if (!(this instanceof EventStream)) {
    return new EventStream(desc, subscribe, handler);
  }
  if (_.isFunction(desc)) {
    handler = subscribe;
    subscribe = desc;
    desc = Desc.empty;
  }
  Observable.call(this, desc);
  assertFunction(subscribe);
  this.dispatcher = new Dispatcher(subscribe, handler);
  registerObs(this);
}

inherit(EventStream, Observable);
extend(EventStream.prototype, {
  _isEventStream: true,

  toProperty: function (initValue_) {
    var initValue = arguments.length === 0 ? None : toOption(function () {
      return initValue_;
    });
    var disp = this.dispatcher;
    var desc = new Bacon.Desc(this, "toProperty", [initValue_]);
    return new Property(desc, function (sink) {
      var initSent = false;
      var subbed = false;
      var unsub = nop;
      var reply = Bacon.more;
      var sendInit = function () {
        if (!initSent) {
          return initValue.forEach(function (value) {
            initSent = true;
            reply = sink(new Initial(value));
            if (reply === Bacon.noMore) {
              unsub();
              unsub = nop;
              return nop;
            }
          });
        }
      };

      unsub = disp.subscribe(function (event) {
        if (event.hasValue()) {
          if (event.isInitial() && !subbed) {
            initValue = new Some(function () {
              return event.value();
            });
            return Bacon.more;
          } else {
            if (!event.isInitial()) {
              sendInit();
            }
            initSent = true;
            initValue = new Some(event);
            return sink(event);
          }
        } else {
          if (event.isEnd()) {
            reply = sendInit();
          }
          if (reply !== Bacon.noMore) {
            return sink(event);
          }
        }
      });
      subbed = true;
      sendInit();
      return unsub;
    });
  },

  toEventStream: function () {
    return this;
  },

  withHandler: function (handler) {
    return new EventStream(new Bacon.Desc(this, "withHandler", [handler]), this.dispatcher.subscribe, handler);
  }
});

Bacon.EventStream = EventStream;

Bacon.never = function () {
  return new EventStream(describe(Bacon, "never"), function (sink) {
    sink(endEvent());
    return nop;
  });
};

Bacon.when = function () {
  if (arguments.length === 0) {
    return Bacon.never();
  }
  var len = arguments.length;
  var usage = "when: expecting arguments in the form (Observable+,function)+";

  assert(usage, len % 2 === 0);
  var sources = [];
  var pats = [];
  var i = 0;
  var patterns = [];
  while (i < len) {
    patterns[i] = arguments[i];
    patterns[i + 1] = arguments[i + 1];
    var patSources = _.toArray(arguments[i]);
    var f = constantToFunction(arguments[i + 1]);
    var pat = { f: f, ixs: [] };
    var triggerFound = false;
    for (var j = 0, s; j < patSources.length; j++) {
      s = patSources[j];
      var index = _.indexOf(sources, s);
      if (!triggerFound) {
        triggerFound = Source.isTrigger(s);
      }
      if (index < 0) {
        sources.push(s);
        index = sources.length - 1;
      }
      for (var k = 0, ix; k < pat.ixs.length; k++) {
        ix = pat.ixs[k];
        if (ix.index === index) {
          ix.count++;
        }
      }
      pat.ixs.push({ index: index, count: 1 });
    }

    assert("At least one EventStream required", triggerFound || !patSources.length);

    if (patSources.length > 0) {
      pats.push(pat);
    }
    i = i + 2;
  }

  if (!sources.length) {
    return Bacon.never();
  }

  sources = _.map(Source.fromObservable, sources);
  var needsBarrier = _.any(sources, function (s) {
    return s.flatten;
  }) && containsDuplicateDeps(_.map(function (s) {
    return s.obs;
  }, sources));

  var desc = new Bacon.Desc(Bacon, "when", patterns);
  var resultStream = new EventStream(desc, function (sink) {
    var triggers = [];
    var ends = false;
    var match = function (p) {
      for (var i1 = 0, i; i1 < p.ixs.length; i1++) {
        i = p.ixs[i1];
        if (!sources[i.index].hasAtLeast(i.count)) {
          return false;
        }
      }
      return true;
    };
    var cannotSync = function (source) {
      return !source.sync || source.ended;
    };
    var cannotMatch = function (p) {
      for (var i1 = 0, i; i1 < p.ixs.length; i1++) {
        i = p.ixs[i1];
        if (!sources[i.index].mayHave(i.count)) {
          return true;
        }
      }
    };
    var nonFlattened = function (trigger) {
      return !trigger.source.flatten;
    };
    var part = function (source) {
      return function (unsubAll) {
        var flushLater = function () {
          return UpdateBarrier.whenDoneWith(resultStream, flush);
        };
        var flushWhileTriggers = function () {
          if (triggers.length > 0) {
            var reply = Bacon.more;
            var trigger = triggers.pop();
            for (var i1 = 0, p; i1 < pats.length; i1++) {
              p = pats[i1];
              if (match(p)) {
                var events = (function () {
                  var result = [];
                  for (var i2 = 0, i; i2 < p.ixs.length; i2++) {
                    i = p.ixs[i2];
                    result.push(sources[i.index].consume());
                  }
                  return result;
                })();
                reply = sink(trigger.e.apply(function () {
                  var _p;

                  var values = (function () {
                    var result = [];
                    for (var i2 = 0, event; i2 < events.length; i2++) {
                      event = events[i2];
                      result.push(event.value());
                    }
                    return result;
                  })();

                  return (_p = p).f.apply(_p, values);
                }));
                if (triggers.length) {
                  triggers = _.filter(nonFlattened, triggers);
                }
                if (reply === Bacon.noMore) {
                  return reply;
                } else {
                  return flushWhileTriggers();
                }
              }
            }
          } else {
            return Bacon.more;
          }
        };
        var flush = function () {
          var reply = flushWhileTriggers();
          if (ends) {
            if (_.all(sources, cannotSync) || _.all(pats, cannotMatch)) {
              reply = Bacon.noMore;
              sink(endEvent());
            }
          }
          if (reply === Bacon.noMore) {
            unsubAll();
          }

          return reply;
        };
        return source.subscribe(function (e) {
          if (e.isEnd()) {
            ends = true;
            source.markEnded();
            flushLater();
          } else if (e.isError()) {
            var reply = sink(e);
          } else {
            source.push(e);
            if (source.sync) {
              triggers.push({ source: source, e: e });
              if (needsBarrier || UpdateBarrier.hasWaiters()) {
                flushLater();
              } else {
                flush();
              }
            }
          }
          if (reply === Bacon.noMore) {
            unsubAll();
          }
          return reply || Bacon.more;
        });
      };
    };

    return new Bacon.CompositeUnsubscribe((function () {
      var result = [];
      for (var i1 = 0, s; i1 < sources.length; i1++) {
        s = sources[i1];
        result.push(part(s));
      }
      return result;
    })()).unsubscribe;
  });
  return resultStream;
};

var containsDuplicateDeps = function (observables) {
  var state = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];

  var checkObservable = function (obs) {
    if (_.contains(state, obs)) {
      return true;
    } else {
      var deps = obs.internalDeps();
      if (deps.length) {
        state.push(obs);
        return _.any(deps, checkObservable);
      } else {
        state.push(obs);
        return false;
      }
    }
  };

  return _.any(observables, checkObservable);
};

var constantToFunction = function (f) {
  if (_.isFunction(f)) {
    return f;
  } else {
    return _.always(f);
  }
};

Bacon.groupSimultaneous = function () {
  for (var _len5 = arguments.length, streams = Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
    streams[_key5] = arguments[_key5];
  }

  if (streams.length === 1 && isArray(streams[0])) {
    streams = streams[0];
  }
  var sources = (function () {
    var result = [];
    for (var i = 0, s; i < streams.length; i++) {
      s = streams[i];
      result.push(new BufferingSource(s));
    }
    return result;
  })();
  return withDesc(new Bacon.Desc(Bacon, "groupSimultaneous", streams), Bacon.when(sources, function () {
    for (var _len6 = arguments.length, xs = Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
      xs[_key6] = arguments[_key6];
    }

    return xs;
  }));
};

function PropertyDispatcher(property, subscribe, handleEvent) {
  Dispatcher.call(this, subscribe, handleEvent);
  this.property = property;
  this.subscribe = _.bind(this.subscribe, this);
  this.current = None;
  this.currentValueRootId = undefined;
  this.propertyEnded = false;
}

inherit(PropertyDispatcher, Dispatcher);
extend(PropertyDispatcher.prototype, {
  push: function (event) {
    if (event.isEnd()) {
      this.propertyEnded = true;
    }
    if (event.hasValue()) {
      this.current = new Some(event);
      this.currentValueRootId = UpdateBarrier.currentEventId();
    }
    return Dispatcher.prototype.push.call(this, event);
  },

  maybeSubSource: function (sink, reply) {
    if (reply === Bacon.noMore) {
      return nop;
    } else if (this.propertyEnded) {
      sink(endEvent());
      return nop;
    } else {
      return Dispatcher.prototype.subscribe.call(this, sink);
    }
  },

  subscribe: function (sink) {
    var _this3 = this;

    var initSent = false;

    var reply = Bacon.more;

    if (this.current.isDefined && (this.hasSubscribers() || this.propertyEnded)) {
      var dispatchingId = UpdateBarrier.currentEventId();
      var valId = this.currentValueRootId;
      if (!this.propertyEnded && valId && dispatchingId && dispatchingId !== valId) {
        UpdateBarrier.whenDoneWith(this.property, function () {
          if (_this3.currentValueRootId === valId) {
            return sink(initialEvent(_this3.current.get().value()));
          }
        });

        return this.maybeSubSource(sink, reply);
      } else {
        UpdateBarrier.inTransaction(undefined, this, function () {
          reply = sink(initialEvent(this.current.get().value()));
          return reply;
        }, []);
        return this.maybeSubSource(sink, reply);
      }
    } else {
      return this.maybeSubSource(sink, reply);
    }
  }
});

function Property(desc, subscribe, handler) {
  Observable.call(this, desc);
  assertFunction(subscribe);
  this.dispatcher = new PropertyDispatcher(this, subscribe, handler);
  registerObs(this);
}

inherit(Property, Observable);
extend(Property.prototype, {
  _isProperty: true,

  changes: function () {
    var _this4 = this;

    return new EventStream(new Bacon.Desc(this, "changes", []), function (sink) {
      return _this4.dispatcher.subscribe(function (event) {
        if (!event.isInitial()) {
          return sink(event);
        }
      });
    });
  },

  withHandler: function (handler) {
    return new Property(new Bacon.Desc(this, "withHandler", [handler]), this.dispatcher.subscribe, handler);
  },

  toProperty: function () {
    assertNoArguments(arguments);
    return this;
  },

  toEventStream: function () {
    var _this5 = this;

    return new EventStream(new Bacon.Desc(this, "toEventStream", []), function (sink) {
      return _this5.dispatcher.subscribe(function (event) {
        if (event.isInitial()) {
          event = event.toNext();
        }
        return sink(event);
      });
    });
  }
});

Bacon.Property = Property;

Bacon.constant = function (value) {
  return new Property(new Bacon.Desc(Bacon, "constant", [value]), function (sink) {
    sink(initialEvent(value));
    sink(endEvent());
    return nop;
  });
};

Bacon.fromBinder = function (binder) {
  var eventTransformer = arguments.length <= 1 || arguments[1] === undefined ? _.id : arguments[1];

  var desc = new Bacon.Desc(Bacon, "fromBinder", [binder, eventTransformer]);
  return new EventStream(desc, function (sink) {
    var unbound = false;
    var shouldUnbind = false;
    var unbind = function () {
      if (!unbound) {
        if (typeof unbinder !== "undefined" && unbinder !== null) {
          unbinder();
          return unbound = true;
        } else {
          return shouldUnbind = true;
        }
      }
    };
    var unbinder = binder(function () {
      var ref;

      for (var _len7 = arguments.length, args = Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
        args[_key7] = arguments[_key7];
      }

      var value = eventTransformer.apply(this, args);
      if (!(isArray(value) && ((ref = _.last(value)) != null ? ref._isEvent : undefined))) {
        value = [value];
      }
      var reply = Bacon.more;
      for (var i = 0, event; i < value.length; i++) {
        event = value[i];
        reply = sink(event = toEvent(event));
        if (reply === Bacon.noMore || event.isEnd()) {
          unbind();
          return reply;
        }
      }
      return reply;
    });
    if (shouldUnbind) {
      unbind();
    }
    return unbind;
  });
};

Bacon.Observable.prototype.map = function (p) {
  for (var _len8 = arguments.length, args = Array(_len8 > 1 ? _len8 - 1 : 0), _key8 = 1; _key8 < _len8; _key8++) {
    args[_key8 - 1] = arguments[_key8];
  }

  return convertArgsToFunction(this, p, args, function (f) {
    return withDesc(new Bacon.Desc(this, "map", [f]), this.withHandler(function (event) {
      return this.push(event.fmap(f));
    }));
  });
};

var argumentsToObservables = function (args) {
  if (isArray(args[0])) {
    return args[0];
  } else {
    return Array.prototype.slice.call(args);
  }
};

var argumentsToObservablesAndFunction = function (args) {
  if (_.isFunction(args[0])) {
    return [argumentsToObservables(Array.prototype.slice.call(args, 1)), args[0]];
  } else {
    return [argumentsToObservables(Array.prototype.slice.call(args, 0, args.length - 1)), _.last(args)];
  }
};

Bacon.combineAsArray = function () {
  var streams = argumentsToObservables(arguments);
  if (streams.length) {
    var sources = [];
    for (var i = 0; i < streams.length; i++) {
      var stream = isObservable(streams[i]) ? streams[i] : Bacon.constant(streams[i]);
      sources.push(new Source(stream, true));
    }
    return withDesc(new Bacon.Desc(Bacon, "combineAsArray", streams), Bacon.when(sources, function () {
      for (var _len9 = arguments.length, xs = Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
        xs[_key9] = arguments[_key9];
      }

      return xs;
    }).toProperty());
  } else {
    return Bacon.constant([]);
  }
};

Bacon.onValues = function () {
  return Bacon.combineAsArray(Array.prototype.slice.call(arguments, 0, arguments.length - 1)).onValues(arguments[arguments.length - 1]);
};

Bacon.combineWith = function () {
  var _argumentsToObservablesAndFunction = argumentsToObservablesAndFunction(arguments);

  var streams = _argumentsToObservablesAndFunction[0];
  var f = _argumentsToObservablesAndFunction[1];

  var desc = new Bacon.Desc(Bacon, "combineWith", [f].concat(streams));
  return withDesc(desc, Bacon.combineAsArray(streams).map(function (values) {
    return f.apply(undefined, values);
  }));
};

Bacon.Observable.prototype.combine = function (other, f) {
  var combinator = toCombinator(f);
  var desc = new Bacon.Desc(this, "combine", [other, f]);
  return withDesc(desc, Bacon.combineAsArray(this, other).map(function (values) {
    return combinator(values[0], values[1]);
  }));
};

Bacon.Observable.prototype.withStateMachine = function (initState, f) {
  var state = initState;
  var desc = new Bacon.Desc(this, "withStateMachine", [initState, f]);
  return withDesc(desc, this.withHandler(function (event) {
    var fromF = f(state, event);
    var newState = fromF[0];
    var outputs = fromF[1];

    state = newState;
    var reply = Bacon.more;
    for (var i = 0, output; i < outputs.length; i++) {
      output = outputs[i];
      reply = this.push(output);
      if (reply === Bacon.noMore) {
        return reply;
      }
    }
    return reply;
  }));
};

var equals = function (a, b) {
  return a === b;
};

var isNone = function (object) {
  return typeof object !== "undefined" && object !== null ? object._isNone : false;
};

Bacon.Observable.prototype.skipDuplicates = function () {
  var isEqual = arguments.length <= 0 || arguments[0] === undefined ? equals : arguments[0];

  var desc = new Bacon.Desc(this, "skipDuplicates", []);
  return withDesc(desc, this.withStateMachine(None, function (prev, event) {
    if (!event.hasValue()) {
      return [prev, [event]];
    } else if (event.isInitial() || isNone(prev) || !isEqual(prev.get(), event.value())) {
      return [new Some(event.value()), [event]];
    } else {
      return [prev, []];
    }
  }));
};

Bacon.Observable.prototype.awaiting = function (other) {
  var desc = new Bacon.Desc(this, "awaiting", [other]);
  return withDesc(desc, Bacon.groupSimultaneous(this, other).map(function (values) {
    return values[1].length === 0;
  }).toProperty(false).skipDuplicates());
};

Bacon.Observable.prototype.not = function () {
  return withDesc(new Bacon.Desc(this, "not", []), this.map(function (x) {
    return !x;
  }));
};

Bacon.Property.prototype.and = function (other) {
  return withDesc(new Bacon.Desc(this, "and", [other]), this.combine(other, function (x, y) {
    return x && y;
  }));
};

Bacon.Property.prototype.or = function (other) {
  return withDesc(new Bacon.Desc(this, "or", [other]), this.combine(other, function (x, y) {
    return x || y;
  }));
};

Bacon.scheduler = {
  setTimeout: function (f, d) {
    return setTimeout(f, d);
  },
  setInterval: function (f, i) {
    return setInterval(f, i);
  },
  clearInterval: function (id) {
    return clearInterval(id);
  },
  clearTimeout: function (id) {
    return clearTimeout(id);
  },
  now: function () {
    return new Date().getTime();
  }
};

Bacon.EventStream.prototype.bufferWithTime = function (delay) {
  return withDesc(new Bacon.Desc(this, "bufferWithTime", [delay]), this.bufferWithTimeOrCount(delay, Number.MAX_VALUE));
};

Bacon.EventStream.prototype.bufferWithCount = function (count) {
  return withDesc(new Bacon.Desc(this, "bufferWithCount", [count]), this.bufferWithTimeOrCount(undefined, count));
};

Bacon.EventStream.prototype.bufferWithTimeOrCount = function (delay, count) {
  var flushOrSchedule = function (buffer) {
    if (buffer.values.length === count) {
      return buffer.flush();
    } else if (delay !== undefined) {
      return buffer.schedule();
    }
  };
  var desc = new Bacon.Desc(this, "bufferWithTimeOrCount", [delay, count]);
  return withDesc(desc, this.buffer(delay, flushOrSchedule, flushOrSchedule));
};

Bacon.EventStream.prototype.buffer = function (delay) {
  var onInput = arguments.length <= 1 || arguments[1] === undefined ? nop : arguments[1];
  var onFlush = arguments.length <= 2 || arguments[2] === undefined ? nop : arguments[2];

  var buffer = {
    scheduled: null,
    end: undefined,
    values: [],
    flush: function () {
      if (this.scheduled) {
        Bacon.scheduler.clearTimeout(this.scheduled);
        this.scheduled = null;
      }
      if (this.values.length > 0) {
        var valuesToPush = this.values;
        this.values = [];
        var reply = this.push(nextEvent(valuesToPush));
        if (this.end != null) {
          return this.push(this.end);
        } else if (reply !== Bacon.noMore) {
          return onFlush(this);
        }
      } else {
        if (this.end != null) {
          return this.push(this.end);
        }
      }
    },
    schedule: function () {
      var _this6 = this;

      if (!this.scheduled) {
        return this.scheduled = delay(function () {
          return _this6.flush();
        });
      }
    }
  };
  var reply = Bacon.more;
  if (!_.isFunction(delay)) {
    var delayMs = delay;
    delay = function (f) {
      return Bacon.scheduler.setTimeout(f, delayMs);
    };
  }
  return withDesc(new Bacon.Desc(this, "buffer", []), this.withHandler(function (event) {
    var _this7 = this;

    buffer.push = function (event) {
      return _this7.push(event);
    };
    if (event.isError()) {
      reply = this.push(event);
    } else if (event.isEnd()) {
      buffer.end = event;
      if (!buffer.scheduled) {
        buffer.flush();
      }
    } else {
      buffer.values.push(event.value());

      onInput(buffer);
    }
    return reply;
  }));
};

Bacon.Observable.prototype.filter = function (f) {
  assertObservableIsProperty(f);

  for (var _len10 = arguments.length, args = Array(_len10 > 1 ? _len10 - 1 : 0), _key10 = 1; _key10 < _len10; _key10++) {
    args[_key10 - 1] = arguments[_key10];
  }

  return convertArgsToFunction(this, f, args, function (f) {
    return withDesc(new Bacon.Desc(this, "filter", [f]), this.withHandler(function (event) {
      if (event.filter(f)) {
        return this.push(event);
      } else {
        return Bacon.more;
      }
    }));
  });
};

Bacon.once = function (value) {
  return new EventStream(new Desc(Bacon, "once", [value]), function (sink) {
    sink(toEvent(value));
    sink(endEvent());
    return nop;
  });
};

Bacon.EventStream.prototype.concat = function (right) {
  var left = this;
  return new EventStream(new Bacon.Desc(left, "concat", [right]), function (sink) {
    var unsubRight = nop;
    var unsubLeft = left.dispatcher.subscribe(function (e) {
      if (e.isEnd()) {
        unsubRight = right.toEventStream().dispatcher.subscribe(sink);
        return unsubRight;
      } else {
        return sink(e);
      }
    });
    return function () {
      return unsubLeft(), unsubRight();
    };
  });
};

Bacon.Property.prototype.concat = function (right) {
  return addPropertyInitValueToStream(this, this.changes().concat(right));
};

Bacon.concatAll = function () {
  var streams = argumentsToObservables(arguments);
  if (streams.length) {
    return withDesc(new Bacon.Desc(Bacon, "concatAll", streams), _.fold(_.tail(streams), _.head(streams).toEventStream(), function (a, b) {
      return a.concat(b);
    }));
  } else {
    return Bacon.never();
  }
};

var addPropertyInitValueToStream = function (property, stream) {
  var justInitValue = new EventStream(describe(property, "justInitValue"), function (sink) {
    var value = undefined;
    var unsub = property.dispatcher.subscribe(function (event) {
      if (!event.isEnd()) {
        value = event;
      }
      return Bacon.noMore;
    });
    UpdateBarrier.whenDoneWith(justInitValue, function () {
      if (typeof value !== "undefined" && value !== null) {
        sink(value);
      }
      return sink(endEvent());
    });
    return unsub;
  });
  return justInitValue.concat(stream).toProperty();
};

Bacon.Observable.prototype.flatMap = function () {
  return flatMap_(this, makeSpawner(arguments));
};

Bacon.Observable.prototype.flatMapFirst = function () {
  return flatMap_(this, makeSpawner(arguments), true);
};

var makeSpawner = function (args) {
  if (args.length === 1 && isObservable(args[0])) {
    return _.always(args[0]);
  } else {
    return makeFunctionArgs(args);
  }
};

var makeObservable = function (x) {
  if (isObservable(x)) {
    return x;
  } else {
    return Bacon.once(x);
  }
};

var flatMap_ = function (root, f, firstOnly, limit) {
  var rootDep = [root];
  var childDeps = [];
  var desc = new Bacon.Desc(root, "flatMap" + (firstOnly ? "First" : ""), [f]);
  var result = new EventStream(desc, function (sink) {
    var composite = new CompositeUnsubscribe();
    var queue = [];
    var spawn = function (event) {
      var child = makeObservable(f(event.value()));
      childDeps.push(child);
      return composite.add(function (unsubAll, unsubMe) {
        return child.dispatcher.subscribe(function (event) {
          if (event.isEnd()) {
            _.remove(child, childDeps);
            checkQueue();
            checkEnd(unsubMe);
            return Bacon.noMore;
          } else {
            if (typeof event !== "undefined" && event !== null ? event._isInitial : undefined) {
              event = event.toNext();
            }
            var reply = sink(event);
            if (reply === Bacon.noMore) {
              unsubAll();
            }
            return reply;
          }
        });
      });
    };
    var checkQueue = function () {
      var event = queue.shift();
      if (event) {
        return spawn(event);
      }
    };
    var checkEnd = function (unsub) {
      unsub();
      if (composite.empty()) {
        return sink(endEvent());
      }
    };
    composite.add(function (__, unsubRoot) {
      return root.dispatcher.subscribe(function (event) {
        if (event.isEnd()) {
          return checkEnd(unsubRoot);
        } else if (event.isError()) {
          return sink(event);
        } else if (firstOnly && composite.count() > 1) {
          return Bacon.more;
        } else {
          if (composite.unsubscribed) {
            return Bacon.noMore;
          }
          if (limit && composite.count() > limit) {
            return queue.push(event);
          } else {
            return spawn(event);
          }
        }
      });
    });
    return composite.unsubscribe;
  });
  result.internalDeps = function () {
    if (childDeps.length) {
      return rootDep.concat(childDeps);
    } else {
      return rootDep;
    }
  };
  return result;
};

Bacon.Observable.prototype.flatMapWithConcurrencyLimit = function (limit) {
  for (var _len11 = arguments.length, args = Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {
    args[_key11 - 1] = arguments[_key11];
  }

  var desc = new Bacon.Desc(this, "flatMapWithConcurrencyLimit", [limit].concat(args));
  return withDesc(desc, flatMap_(this, makeSpawner(args), false, limit));
};

Bacon.Observable.prototype.flatMapConcat = function () {
  var desc = new Bacon.Desc(this, "flatMapConcat", Array.prototype.slice.call(arguments, 0));
  return withDesc(desc, this.flatMapWithConcurrencyLimit.apply(this, [1].concat(_slice.call(arguments))));
};

Bacon.later = function (delay, value) {
  return withDesc(new Bacon.Desc(Bacon, "later", [delay, value]), Bacon.fromBinder(function (sink) {
    var sender = function () {
      return sink([value, endEvent()]);
    };
    var id = Bacon.scheduler.setTimeout(sender, delay);
    return function () {
      return Bacon.scheduler.clearTimeout(id);
    };
  }));
};

Bacon.Observable.prototype.bufferingThrottle = function (minimumInterval) {
  var desc = new Bacon.Desc(this, "bufferingThrottle", [minimumInterval]);
  return withDesc(desc, this.flatMapConcat(function (x) {
    return Bacon.once(x).concat(Bacon.later(minimumInterval).filter(false));
  }));
};

Bacon.Property.prototype.bufferingThrottle = function () {
  return Bacon.Observable.prototype.bufferingThrottle.apply(this, arguments).toProperty();
};

function Bus() {
  if (!(this instanceof Bus)) {
    return new Bus();
  }

  this.unsubAll = _.bind(this.unsubAll, this);
  this.subscribeAll = _.bind(this.subscribeAll, this);
  this.guardedSink = _.bind(this.guardedSink, this);

  this.sink = undefined;
  this.subscriptions = [];
  this.ended = false;
  EventStream.call(this, new Bacon.Desc(Bacon, "Bus", []), this.subscribeAll);
}

inherit(Bus, EventStream);
extend(Bus.prototype, {
  unsubAll: function () {
    var iterable = this.subscriptions;
    for (var i = 0, sub; i < iterable.length; i++) {
      sub = iterable[i];
      if (typeof sub.unsub === "function") {
        sub.unsub();
      }
    }
  },

  subscribeAll: function (newSink) {
    if (this.ended) {
      newSink(endEvent());
    } else {
      this.sink = newSink;
      var iterable = cloneArray(this.subscriptions);
      for (var i = 0, subscription; i < iterable.length; i++) {
        subscription = iterable[i];
        this.subscribeInput(subscription);
      }
    }
    return this.unsubAll;
  },

  guardedSink: function (input) {
    var _this8 = this;

    return function (event) {
      if (event.isEnd()) {
        _this8.unsubscribeInput(input);
        return Bacon.noMore;
      } else {
        return _this8.sink(event);
      }
    };
  },

  subscribeInput: function (subscription) {
    subscription.unsub = subscription.input.dispatcher.subscribe(this.guardedSink(subscription.input));
    return subscription.unsub;
  },

  unsubscribeInput: function (input) {
    var iterable = this.subscriptions;
    for (var i = 0, sub; i < iterable.length; i++) {
      sub = iterable[i];
      if (sub.input === input) {
        if (typeof sub.unsub === "function") {
          sub.unsub();
        }
        this.subscriptions.splice(i, 1);
        return;
      }
    }
  },

  plug: function (input) {
    var _this9 = this;

    assertObservable(input);
    if (this.ended) {
      return;
    }
    var sub = { input: input };
    this.subscriptions.push(sub);
    if (typeof this.sink !== "undefined") {
      this.subscribeInput(sub);
    }
    return function () {
      return _this9.unsubscribeInput(input);
    };
  },

  end: function () {
    this.ended = true;
    this.unsubAll();
    if (typeof this.sink === "function") {
      return this.sink(endEvent());
    }
  },

  push: function (value) {
    if (!this.ended && typeof this.sink === "function") {
      var rootPush = !this.pushing;
      if (!rootPush) {
        if (!this.pushQueue) this.pushQueue = [];
        this.pushQueue.push(value);

        return;
      }
      this.pushing = true;
      try {
        return this.sink(nextEvent(value));
      } finally {
        if (rootPush && this.pushQueue) {
          var i = 0;
          while (i < this.pushQueue.length) {
            var value = this.pushQueue[i];
            this.sink(nextEvent(value));
            i++;
          }
          this.pushQueue = null;
        }
        this.pushing = false;
      }
    }
  },

  error: function (error) {
    if (typeof this.sink === "function") {
      return this.sink(new Error(error));
    }
  }
});

Bacon.Bus = Bus;

var liftCallback = function (desc, wrapped) {
  return withMethodCallSupport(function (f) {
    var stream = partiallyApplied(wrapped, [function (values, callback) {
      return f.apply(undefined, values.concat([callback]));
    }]);

    for (var _len12 = arguments.length, args = Array(_len12 > 1 ? _len12 - 1 : 0), _key12 = 1; _key12 < _len12; _key12++) {
      args[_key12 - 1] = arguments[_key12];
    }

    return withDesc(new Bacon.Desc(Bacon, desc, [f].concat(args)), Bacon.combineAsArray(args).flatMap(stream));
  });
};

Bacon.fromCallback = liftCallback("fromCallback", function (f) {
  for (var _len13 = arguments.length, args = Array(_len13 > 1 ? _len13 - 1 : 0), _key13 = 1; _key13 < _len13; _key13++) {
    args[_key13 - 1] = arguments[_key13];
  }

  return Bacon.fromBinder(function (handler) {
    makeFunction(f, args)(handler);
    return nop;
  }, function (value) {
    return [value, endEvent()];
  });
});

Bacon.fromNodeCallback = liftCallback("fromNodeCallback", function (f) {
  for (var _len14 = arguments.length, args = Array(_len14 > 1 ? _len14 - 1 : 0), _key14 = 1; _key14 < _len14; _key14++) {
    args[_key14 - 1] = arguments[_key14];
  }

  return Bacon.fromBinder(function (handler) {
    makeFunction(f, args)(handler);
    return nop;
  }, function (error, value) {
    if (error) {
      return [new Error(error), endEvent()];
    }
    return [value, endEvent()];
  });
});

Bacon.combineTemplate = function (template) {
  function current(ctxStack) {
    return ctxStack[ctxStack.length - 1];
  }
  function setValue(ctxStack, key, value) {
    current(ctxStack)[key] = value;
    return value;
  }
  function applyStreamValue(key, index) {
    return function (ctxStack, values) {
      setValue(ctxStack, key, values[index]);
    };
  }
  function constantValue(key, value) {
    return function (ctxStack) {
      setValue(ctxStack, key, value);
    };
  }

  function mkContext(template) {
    return isArray(template) ? [] : {};
  }

  function pushContext(key, value) {
    return function (ctxStack) {
      var newContext = mkContext(value);
      setValue(ctxStack, key, newContext);
      ctxStack.push(newContext);
    };
  }

  function containsObservables(value) {
    if (isObservable(value)) {
      return true;
    } else if (value && (value.constructor == Object || value.constructor == Array)) {
      for (var key in value) {
        if (Object.prototype.hasOwnProperty.call(value, key)) {
          var child = value[key];
          if (containsObservables(child)) return true;
        }
      }
    }
  }

  function compile(key, value) {
    if (isObservable(value)) {
      streams.push(value);
      funcs.push(applyStreamValue(key, streams.length - 1));
    } else if (containsObservables(value)) {
      var popContext = function (ctxStack) {
        ctxStack.pop();
      };
      funcs.push(pushContext(key, value));
      compileTemplate(value);
      funcs.push(popContext);
    } else {
      funcs.push(constantValue(key, value));
    }
  }

  function combinator(values) {
    var rootContext = mkContext(template);
    var ctxStack = [rootContext];
    for (var i = 0, f; i < funcs.length; i++) {
      f = funcs[i];
      f(ctxStack, values);
    }
    return rootContext;
  }

  function compileTemplate(template) {
    _.each(template, compile);
  }

  var funcs = [];
  var streams = [];

  var resultProperty = containsObservables(template) ? (compileTemplate(template), Bacon.combineAsArray(streams).map(combinator)) : Bacon.constant(template);

  return withDesc(new Bacon.Desc(Bacon, "combineTemplate", [template]), resultProperty);
};

Bacon.Observable.prototype.mapEnd = function () {
  var f = makeFunctionArgs(arguments);
  return withDesc(new Bacon.Desc(this, "mapEnd", [f]), this.withHandler(function (event) {
    if (event.isEnd()) {
      this.push(nextEvent(f(event)));
      this.push(endEvent());
      return Bacon.noMore;
    } else {
      return this.push(event);
    }
  }));
};

Bacon.Observable.prototype.skipErrors = function () {
  return withDesc(new Bacon.Desc(this, "skipErrors", []), this.withHandler(function (event) {
    if (event.isError()) {
      return Bacon.more;
    } else {
      return this.push(event);
    }
  }));
};

Bacon.EventStream.prototype.takeUntil = function (stopper) {
  var endMarker = {};
  return withDesc(new Bacon.Desc(this, "takeUntil", [stopper]), Bacon.groupSimultaneous(this.mapEnd(endMarker), stopper.skipErrors()).withHandler(function (event) {
    if (!event.hasValue()) {
      return this.push(event);
    } else {
      var _event$value = event.value();

      var data = _event$value[0];
      var stopper = _event$value[1];

      if (stopper.length) {
        return this.push(endEvent());
      } else {
        var reply = Bacon.more;
        for (var i = 0, value; i < data.length; i++) {
          value = data[i];
          if (value === endMarker) {
            reply = this.push(endEvent());
          } else {
            reply = this.push(nextEvent(value));
          }
        }
        return reply;
      }
    }
  }));
};

Bacon.Property.prototype.takeUntil = function (stopper) {
  var changes = this.changes().takeUntil(stopper);
  return withDesc(new Bacon.Desc(this, "takeUntil", [stopper]), addPropertyInitValueToStream(this, changes));
};

Bacon.Observable.prototype.flatMapLatest = function () {
  var f = makeSpawner(arguments);
  var stream = this.toEventStream();
  return withDesc(new Bacon.Desc(this, "flatMapLatest", [f]), stream.flatMap(function (value) {
    return makeObservable(f(value)).takeUntil(stream);
  }));
};

Bacon.Property.prototype.delayChanges = function (desc, f) {
  return withDesc(desc, addPropertyInitValueToStream(this, f(this.changes())));
};

Bacon.EventStream.prototype.delayChanges = function (desc, f) {
  return withDesc(desc, f(this));
};

Bacon.Observable.prototype.delay = function (delay) {
  return this.delayChanges(new Bacon.Desc(this, "delay", [delay]), function (changes) {
    return changes.flatMap(function (value) {
      return Bacon.later(delay, value);
    });
  });
};

Bacon.Observable.prototype.debounce = function (delay) {
  return this.delayChanges(new Bacon.Desc(this, "debounce", [delay]), function (changes) {
    return changes.flatMapLatest(function (value) {
      return Bacon.later(delay, value);
    });
  });
};

Bacon.Observable.prototype.debounceImmediate = function (delay) {
  return this.delayChanges(new Bacon.Desc(this, "debounceImmediate", [delay]), function (changes) {
    return changes.flatMapFirst(function (value) {
      return Bacon.once(value).concat(Bacon.later(delay).filter(false));
    });
  });
};

Bacon.Observable.prototype.decode = function (cases) {
  return withDesc(new Bacon.Desc(this, "decode", [cases]), this.combine(Bacon.combineTemplate(cases), function (key, values) {
    return values[key];
  }));
};

Bacon.Observable.prototype.scan = function (seed, f) {
  var _this10 = this;

  var resultProperty;
  f = toCombinator(f);
  var acc = toOption(seed);
  var initHandled = false;
  var subscribe = function (sink) {
    var initSent = false;
    var unsub = nop;
    var reply = Bacon.more;
    var sendInit = function () {
      if (!initSent) {
        return acc.forEach(function (value) {
          initSent = initHandled = true;
          reply = sink(new Initial(function () {
            return value;
          }));
          if (reply === Bacon.noMore) {
            unsub();
            unsub = nop;
            return unsub;
          }
        });
      }
    };
    unsub = _this10.dispatcher.subscribe(function (event) {
      if (event.hasValue()) {
        if (initHandled && event.isInitial()) {
          return Bacon.more;
        } else {
            if (!event.isInitial()) {
              sendInit();
            }
            initSent = initHandled = true;
            var prev = acc.getOrElse(undefined);
            var next = f(prev, event.value());

            acc = new Some(next);
            return sink(event.apply(function () {
              return next;
            }));
          }
      } else {
        if (event.isEnd()) {
          reply = sendInit();
        }
        if (reply !== Bacon.noMore) {
          return sink(event);
        }
      }
    });
    UpdateBarrier.whenDoneWith(resultProperty, sendInit);
    return unsub;
  };
  resultProperty = new Property(new Bacon.Desc(this, "scan", [seed, f]), subscribe);
  return resultProperty;
};

Bacon.Observable.prototype.diff = function (start, f) {
  f = toCombinator(f);
  return withDesc(new Bacon.Desc(this, "diff", [start, f]), this.scan([start], function (prevTuple, next) {
    return [next, f(prevTuple[0], next)];
  }).filter(function (tuple) {
    return tuple.length === 2;
  }).map(function (tuple) {
    return tuple[1];
  }));
};

Bacon.Observable.prototype.doAction = function () {
  var f = makeFunctionArgs(arguments);
  return withDesc(new Bacon.Desc(this, "doAction", [f]), this.withHandler(function (event) {
    if (event.hasValue()) {
      f(event.value());
    }
    return this.push(event);
  }));
};

Bacon.Observable.prototype.doEnd = function () {
  var f = makeFunctionArgs(arguments);
  return withDesc(new Bacon.Desc(this, "doEnd", [f]), this.withHandler(function (event) {
    if (event.isEnd()) {
      f();
    }
    return this.push(event);
  }));
};

Bacon.Observable.prototype.doError = function () {
  var f = makeFunctionArgs(arguments);
  return withDesc(new Bacon.Desc(this, "doError", [f]), this.withHandler(function (event) {
    if (event.isError()) {
      f(event.error);
    }
    return this.push(event);
  }));
};

Bacon.Observable.prototype.doLog = function () {
  for (var _len15 = arguments.length, args = Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {
    args[_key15] = arguments[_key15];
  }

  return withDesc(new Bacon.Desc(this, "doLog", args), this.withHandler(function (event) {
    if (typeof console !== "undefined" && console !== null && typeof console.log === "function") {
      console.log.apply(console, args.concat([event.log()]));
    }
    return this.push(event);
  }));
};

Bacon.Observable.prototype.endOnError = function (f) {
  if (!(typeof f !== "undefined" && f !== null)) {
    f = true;
  }

  for (var _len16 = arguments.length, args = Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {
    args[_key16 - 1] = arguments[_key16];
  }

  return convertArgsToFunction(this, f, args, function (f) {
    return withDesc(new Bacon.Desc(this, "endOnError", []), this.withHandler(function (event) {
      if (event.isError() && f(event.error)) {
        this.push(event);
        return this.push(endEvent());
      } else {
        return this.push(event);
      }
    }));
  });
};

Observable.prototype.errors = function () {
  return withDesc(new Bacon.Desc(this, "errors", []), this.filter(function () {
    return false;
  }));
};

Bacon.Observable.prototype.take = function (count) {
  if (count <= 0) {
    return Bacon.never();
  }
  return withDesc(new Bacon.Desc(this, "take", [count]), this.withHandler(function (event) {
    if (!event.hasValue()) {
      return this.push(event);
    } else {
      count--;
      if (count > 0) {
        return this.push(event);
      } else {
        if (count === 0) {
          this.push(event);
        }
        this.push(endEvent());
        return Bacon.noMore;
      }
    }
  }));
};

Bacon.Observable.prototype.first = function () {
  return withDesc(new Bacon.Desc(this, "first", []), this.take(1));
};

Bacon.Observable.prototype.mapError = function () {
  var f = makeFunctionArgs(arguments);
  return withDesc(new Bacon.Desc(this, "mapError", [f]), this.withHandler(function (event) {
    if (event.isError()) {
      return this.push(nextEvent(f(event.error)));
    } else {
      return this.push(event);
    }
  }));
};

Bacon.Observable.prototype.flatMapError = function (fn) {
  var desc = new Bacon.Desc(this, "flatMapError", [fn]);
  return withDesc(desc, this.mapError(function (err) {
    return new Error(err);
  }).flatMap(function (x) {
    if (x instanceof Error) {
      return fn(x.error);
    } else {
      return Bacon.once(x);
    }
  }));
};

Bacon.EventStream.prototype.flatScan = function (seed, f) {
  var current = seed;
  return this.flatMapConcat(function (next) {
    return makeObservable(f(current, next)).doAction(function (updated) {
      return current = updated;
    });
  }).toProperty(seed);
};

Bacon.EventStream.prototype.sampledBy = function (sampler, combinator) {
  return withDesc(new Bacon.Desc(this, "sampledBy", [sampler, combinator]), this.toProperty().sampledBy(sampler, combinator));
};

Bacon.Property.prototype.sampledBy = function (sampler, combinator) {
  var lazy = false;
  if (typeof combinator !== "undefined" && combinator !== null) {
    combinator = toCombinator(combinator);
  } else {
    lazy = true;
    combinator = function (f) {
      return f.value();
    };
  }
  var thisSource = new Source(this, false, lazy);
  var samplerSource = new Source(sampler, true, lazy);
  var stream = Bacon.when([thisSource, samplerSource], combinator);
  var result = sampler._isProperty ? stream.toProperty() : stream;
  return withDesc(new Bacon.Desc(this, "sampledBy", [sampler, combinator]), result);
};

Bacon.Property.prototype.sample = function (interval) {
  return withDesc(new Bacon.Desc(this, "sample", [interval]), this.sampledBy(Bacon.interval(interval, {})));
};

Bacon.Observable.prototype.map = function (p) {
  if (p && p._isProperty) {
    return p.sampledBy(this, former);
  } else {
    for (var _len17 = arguments.length, args = Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {
      args[_key17 - 1] = arguments[_key17];
    }

    return convertArgsToFunction(this, p, args, function (f) {
      return withDesc(new Bacon.Desc(this, "map", [f]), this.withHandler(function (event) {
        return this.push(event.fmap(f));
      }));
    });
  }
};

Bacon.Observable.prototype.fold = function (seed, f) {
  return withDesc(new Bacon.Desc(this, "fold", [seed, f]), this.scan(seed, f).sampledBy(this.filter(false).mapEnd().toProperty()));
};

Observable.prototype.reduce = Observable.prototype.fold;

var eventMethods = [["addEventListener", "removeEventListener"], ["addListener", "removeListener"], ["on", "off"], ["bind", "unbind"]];

var findHandlerMethods = function (target) {
  var pair;
  for (var i = 0; i < eventMethods.length; i++) {
    pair = eventMethods[i];
    var methodPair = [target[pair[0]], target[pair[1]]];
    if (methodPair[0] && methodPair[1]) {
      return methodPair;
    }
  }
  for (var j = 0; j < eventMethods.length; j++) {
    pair = eventMethods[j];
    var addListener = target[pair[0]];
    if (addListener) {
      return [addListener, function () {}];
    }
  }
  throw new Error("No suitable event methods in " + target);
};

Bacon.fromEventTarget = function (target, eventName, eventTransformer) {
  var _findHandlerMethods = findHandlerMethods(target);

  var sub = _findHandlerMethods[0];
  var unsub = _findHandlerMethods[1];

  var desc = new Bacon.Desc(Bacon, "fromEvent", [target, eventName]);
  return withDesc(desc, Bacon.fromBinder(function (handler) {
    sub.call(target, eventName, handler);
    return function () {
      return unsub.call(target, eventName, handler);
    };
  }, eventTransformer));
};

Bacon.fromEvent = Bacon.fromEventTarget;

Bacon.fromPoll = function (delay, poll) {
  var desc = new Bacon.Desc(Bacon, "fromPoll", [delay, poll]);
  return withDesc(desc, Bacon.fromBinder(function (handler) {
    var id = Bacon.scheduler.setInterval(handler, delay);
    return function () {
      return Bacon.scheduler.clearInterval(id);
    };
  }, poll));
};

function valueAndEnd(value) {
  return [value, endEvent()];
}

Bacon.fromPromise = function (promise, abort) {
  var eventTransformer = arguments.length <= 2 || arguments[2] === undefined ? valueAndEnd : arguments[2];

  return withDesc(new Bacon.Desc(Bacon, "fromPromise", [promise]), Bacon.fromBinder(function (handler) {
    var bound = promise.then(handler, function (e) {
      return handler(new Error(e));
    });
    if (bound && typeof bound.done === "function") {
      bound.done();
    }

    if (abort) {
      return function () {
        if (typeof promise.abort === "function") {
          return promise.abort();
        }
      };
    } else {
      return function () {};
    }
  }, eventTransformer));
};

Bacon.Observable.prototype.groupBy = function (keyF) {
  var limitF = arguments.length <= 1 || arguments[1] === undefined ? Bacon._.id : arguments[1];

  var streams = {};
  var src = this;
  return src.filter(function (x) {
    return !streams[keyF(x)];
  }).map(function (x) {
    var key = keyF(x);
    var similar = src.filter(function (x) {
      return keyF(x) === key;
    });
    var data = Bacon.once(x).concat(similar);
    var limited = limitF(data, x).withHandler(function (event) {
      this.push(event);
      if (event.isEnd()) {
        return delete streams[key];
      }
    });
    streams[key] = limited;
    return limited;
  });
};

Bacon.fromArray = function (values) {
  assertArray(values);
  if (!values.length) {
    return withDesc(new Bacon.Desc(Bacon, "fromArray", values), Bacon.never());
  } else {
    var i = 0;
    var stream = new EventStream(new Bacon.Desc(Bacon, "fromArray", [values]), function (sink) {
      var unsubd = false;
      var reply = Bacon.more;
      var pushing = false;
      var pushNeeded = false;
      function push() {
        pushNeeded = true;
        if (pushing) {
          return;
        }
        pushing = true;
        while (pushNeeded) {
          pushNeeded = false;
          if (reply !== Bacon.noMore && !unsubd) {
            var value = values[i++];
            reply = sink(toEvent(value));
            if (reply !== Bacon.noMore) {
              if (i === values.length) {
                sink(endEvent());
              } else {
                UpdateBarrier.afterTransaction(stream, push);
              }
            }
          }
        }
        pushing = false;
        return pushing;
      };

      push();
      return function () {
        unsubd = true;
        return unsubd;
      };
    });
    return stream;
  }
};

Bacon.EventStream.prototype.holdWhen = function (valve) {
  var onHold = false;
  var bufferedValues = [];
  var src = this;
  var srcIsEnded = false;
  return new EventStream(new Bacon.Desc(this, "holdWhen", [valve]), function (sink) {
    var composite = new CompositeUnsubscribe();
    var subscribed = false;
    var endIfBothEnded = function (unsub) {
      if (typeof unsub === "function") {
        unsub();
      }
      if (composite.empty() && subscribed) {
        return sink(endEvent());
      }
    };
    composite.add(function (unsubAll, unsubMe) {
      return valve.subscribeInternal(function (event) {
        if (event.hasValue()) {
          onHold = event.value();
          if (!onHold) {
            var toSend = bufferedValues;
            bufferedValues = [];
            return (function () {
              var result = [];
              for (var i = 0, value; i < toSend.length; i++) {
                value = toSend[i];
                result.push(sink(nextEvent(value)));
              }
              if (srcIsEnded) {
                result.push(sink(endEvent()));
                unsubMe();
              }
              return result;
            })();
          }
        } else if (event.isEnd()) {
          return endIfBothEnded(unsubMe);
        } else {
          return sink(event);
        }
      });
    });
    composite.add(function (unsubAll, unsubMe) {
      return src.subscribeInternal(function (event) {
        if (onHold && event.hasValue()) {
          return bufferedValues.push(event.value());
        } else if (event.isEnd() && bufferedValues.length) {
          srcIsEnded = true;
          return endIfBothEnded(unsubMe);
        } else {
          return sink(event);
        }
      });
    });
    subscribed = true;
    endIfBothEnded();
    return composite.unsubscribe;
  });
};

Bacon.interval = function (delay) {
  var value = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

  return withDesc(new Bacon.Desc(Bacon, "interval", [delay, value]), Bacon.fromPoll(delay, function () {
    return nextEvent(value);
  }));
};

Bacon.$ = {};
Bacon.$.asEventStream = function (eventName, selector, eventTransformer) {
  var _this11 = this;

  if (_.isFunction(selector)) {
    eventTransformer = selector;
    selector = undefined;
  }

  return withDesc(new Bacon.Desc(this.selector || this, "asEventStream", [eventName]), Bacon.fromBinder(function (handler) {
    _this11.on(eventName, selector, handler);
    return function () {
      return _this11.off(eventName, selector, handler);
    };
  }, eventTransformer));
};

if (typeof jQuery !== "undefined" && jQuery) {
  jQuery.fn.asEventStream = Bacon.$.asEventStream;
}

if (typeof Zepto !== "undefined" && Zepto) {
  Zepto.fn.asEventStream = Bacon.$.asEventStream;
}

Bacon.Observable.prototype.last = function () {
  var lastEvent;

  return withDesc(new Bacon.Desc(this, "last", []), this.withHandler(function (event) {
    if (event.isEnd()) {
      if (lastEvent) {
        this.push(lastEvent);
      }
      this.push(endEvent());
      return Bacon.noMore;
    } else {
      lastEvent = event;
    }
  }));
};

Bacon.Observable.prototype.log = function () {
  for (var _len18 = arguments.length, args = Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {
    args[_key18] = arguments[_key18];
  }

  this.subscribe(function (event) {
    if (typeof console !== "undefined" && typeof console.log === "function") {
      console.log.apply(console, args.concat([event.log()]));
    }
  });
  return this;
};

Bacon.EventStream.prototype.merge = function (right) {
  assertEventStream(right);
  var left = this;
  return withDesc(new Bacon.Desc(left, "merge", [right]), Bacon.mergeAll(this, right));
};

Bacon.mergeAll = function () {
  var streams = argumentsToObservables(arguments);
  if (streams.length) {
    return new EventStream(new Bacon.Desc(Bacon, "mergeAll", streams), function (sink) {
      var ends = 0;
      var smartSink = function (obs) {
        return function (unsubBoth) {
          return obs.dispatcher.subscribe(function (event) {
            if (event.isEnd()) {
              ends++;
              if (ends === streams.length) {
                return sink(endEvent());
              } else {
                return Bacon.more;
              }
            } else {
              var reply = sink(event);
              if (reply === Bacon.noMore) {
                unsubBoth();
              }
              return reply;
            }
          });
        };
      };
      var sinks = _.map(smartSink, streams);
      return new Bacon.CompositeUnsubscribe(sinks).unsubscribe;
    });
  } else {
    return Bacon.never();
  }
};

Bacon.repeatedly = function (delay, values) {
  var index = 0;
  return withDesc(new Bacon.Desc(Bacon, "repeatedly", [delay, values]), Bacon.fromPoll(delay, function () {
    return values[index++ % values.length];
  }));
};

Bacon.repeat = function (generator) {
  var index = 0;
  return Bacon.fromBinder(function (sink) {
    var flag = false;
    var reply = Bacon.more;
    var unsub = function () {};
    function handleEvent(event) {
      if (event.isEnd()) {
        if (!flag) {
          return flag = true;
        } else {
          return subscribeNext();
        }
      } else {
        return reply = sink(event);
      }
    };
    function subscribeNext() {
      var next;
      flag = true;
      while (flag && reply !== Bacon.noMore) {
        next = generator(index++);
        flag = false;
        if (next) {
          unsub = next.subscribeInternal(handleEvent);
        } else {
          sink(endEvent());
        }
      }
      return flag = true;
    };
    subscribeNext();
    return function () {
      return unsub();
    };
  });
};

Bacon.retry = function (options) {
  if (!_.isFunction(options.source)) {
    throw new Exception("'source' option has to be a function");
  }
  var source = options.source;
  var retries = options.retries || 0;
  var retriesDone = 0;
  var delay = options.delay || function () {
    return 0;
  };
  var isRetryable = options.isRetryable || function () {
    return true;
  };
  var finished = false;
  var error = null;

  return withDesc(new Bacon.Desc(Bacon, "retry", [options]), Bacon.repeat(function (count) {
    function valueStream() {
      return source(count).endOnError().withHandler(function (event) {
        if (event.isError()) {
          error = event;
          if (!(isRetryable(error.error) && (retries === 0 || retriesDone < retries))) {
            finished = true;
            return this.push(event);
          }
        } else {
          if (event.hasValue()) {
            error = null;
            finished = true;
          }
          return this.push(event);
        }
      });
    }

    if (finished) {
      return null;
    } else if (error) {
      var context = {
        error: error.error,
        retriesDone: retriesDone
      };
      var pause = Bacon.later(delay(context)).filter(false);
      retriesDone++;
      return pause.concat(Bacon.once().flatMap(valueStream));
    } else {
      return valueStream();
    }
  }));
};

Bacon.sequentially = function (delay, values) {
  var index = 0;
  return withDesc(new Bacon.Desc(Bacon, "sequentially", [delay, values]), Bacon.fromPoll(delay, function () {
    var value = values[index++];
    if (index < values.length) {
      return value;
    } else if (index === values.length) {
      return [value, endEvent()];
    } else {
      return endEvent();
    }
  }));
};

Bacon.Observable.prototype.skip = function (count) {
  return withDesc(new Bacon.Desc(this, "skip", [count]), this.withHandler(function (event) {
    if (!event.hasValue()) {
      return this.push(event);
    } else if (count > 0) {
      count--;
      return Bacon.more;
    } else {
      return this.push(event);
    }
  }));
};

Bacon.EventStream.prototype.skipUntil = function (starter) {
  var started = starter.take(1).map(true).toProperty(false);
  return withDesc(new Bacon.Desc(this, "skipUntil", [starter]), this.filter(started));
};

Bacon.EventStream.prototype.skipWhile = function (f) {
  assertObservableIsProperty(f);
  var ok = false;

  for (var _len19 = arguments.length, args = Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) {
    args[_key19 - 1] = arguments[_key19];
  }

  return convertArgsToFunction(this, f, args, function (f) {
    return withDesc(new Bacon.Desc(this, "skipWhile", [f]), this.withHandler(function (event) {
      if (ok || !event.hasValue() || !f(event.value())) {
        if (event.hasValue()) {
          ok = true;
        }
        return this.push(event);
      } else {
        return Bacon.more;
      }
    }));
  });
};

Bacon.Observable.prototype.slidingWindow = function (n) {
  var minValues = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];

  return withDesc(new Bacon.Desc(this, "slidingWindow", [n, minValues]), this.scan([], function (window, value) {
    return window.concat([value]).slice(-n);
  }).filter(function (values) {
    return values.length >= minValues;
  }));
};

var spies = [];
var registerObs = function (obs) {
  if (spies.length) {
    if (!registerObs.running) {
      try {
        registerObs.running = true;
        spies.forEach(function (spy) {
          spy(obs);
        });
      } finally {
        delete registerObs.running;
      }
    }
  }
};

Bacon.spy = function (spy) {
  return spies.push(spy);
};

Bacon.Property.prototype.startWith = function (seed) {
  return withDesc(new Bacon.Desc(this, "startWith", [seed]), this.scan(seed, function (prev, next) {
    return next;
  }));
};

Bacon.EventStream.prototype.startWith = function (seed) {
  return withDesc(new Bacon.Desc(this, "startWith", [seed]), Bacon.once(seed).concat(this));
};

Bacon.Observable.prototype.takeWhile = function (f) {
  assertObservableIsProperty(f);

  for (var _len20 = arguments.length, args = Array(_len20 > 1 ? _len20 - 1 : 0), _key20 = 1; _key20 < _len20; _key20++) {
    args[_key20 - 1] = arguments[_key20];
  }

  return convertArgsToFunction(this, f, args, function (f) {
    return withDesc(new Bacon.Desc(this, "takeWhile", [f]), this.withHandler(function (event) {
      if (event.filter(f)) {
        return this.push(event);
      } else {
        this.push(endEvent());
        return Bacon.noMore;
      }
    }));
  });
};

Bacon.Observable.prototype.throttle = function (delay) {
  return this.delayChanges(new Bacon.Desc(this, "throttle", [delay]), function (changes) {
    return changes.bufferWithTime(delay).map(function (values) {
      return values[values.length - 1];
    });
  });
};

Observable.prototype.firstToPromise = function (PromiseCtr) {
  var _this12 = this;

  if (typeof PromiseCtr !== "function") {
    if (typeof Promise === "function") {
      PromiseCtr = Promise;
    } else {
      throw new Exception("There isn't default Promise, use shim or parameter");
    }
  }

  return new PromiseCtr(function (resolve, reject) {
    return _this12.subscribe(function (event) {
      if (event.hasValue()) {
        resolve(event.value());
      }
      if (event.isError()) {
        reject(event.error);
      }

      return Bacon.noMore;
    });
  });
};

Observable.prototype.toPromise = function (PromiseCtr) {
  return this.last().firstToPromise(PromiseCtr);
};

Bacon["try"] = function (f) {
  return function (value) {
    try {
      return Bacon.once(f(value));
    } catch (e) {
      return new Bacon.Error(e);
    }
  };
};

Bacon.update = function (initial) {
  function lateBindFirst(f) {
    return function () {
      for (var _len22 = arguments.length, args = Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {
        args[_key22] = arguments[_key22];
      }

      return function (i) {
        return f.apply(undefined, [i].concat(args));
      };
    };
  }

  for (var _len21 = arguments.length, patterns = Array(_len21 > 1 ? _len21 - 1 : 0), _key21 = 1; _key21 < _len21; _key21++) {
    patterns[_key21 - 1] = arguments[_key21];
  }

  var i = patterns.length - 1;
  while (i > 0) {
    if (!(patterns[i] instanceof Function)) {
      patterns[i] = _.always(patterns[i]);
    }
    patterns[i] = lateBindFirst(patterns[i]);
    i = i - 2;
  }
  return withDesc(new Bacon.Desc(Bacon, "update", [initial].concat(patterns)), Bacon.when.apply(Bacon, patterns).scan(initial, function (x, f) {
    return f(x);
  }));
};

Bacon.zipAsArray = function () {
  for (var _len23 = arguments.length, args = Array(_len23), _key23 = 0; _key23 < _len23; _key23++) {
    args[_key23] = arguments[_key23];
  }

  var streams = argumentsToObservables(args);
  return withDesc(new Bacon.Desc(Bacon, "zipAsArray", streams), Bacon.zipWith(streams, function () {
    for (var _len24 = arguments.length, xs = Array(_len24), _key24 = 0; _key24 < _len24; _key24++) {
      xs[_key24] = arguments[_key24];
    }

    return xs;
  }));
};

Bacon.zipWith = function () {
  for (var _len25 = arguments.length, args = Array(_len25), _key25 = 0; _key25 < _len25; _key25++) {
    args[_key25] = arguments[_key25];
  }

  var observablesAndFunction = argumentsToObservablesAndFunction(args);
  var streams = observablesAndFunction[0];
  var f = observablesAndFunction[1];

  streams = _.map(function (s) {
    return s.toEventStream();
  }, streams);
  return withDesc(new Bacon.Desc(Bacon, "zipWith", [f].concat(streams)), Bacon.when(streams, f));
};

Bacon.Observable.prototype.zip = function (other, f) {
  return withDesc(new Bacon.Desc(this, "zip", [other]), Bacon.zipWith([this, other], f || Array));
};

function ESObservable(observable) {
  this.observable = observable;
}

ESObservable.prototype.subscribe = function (observerOrOnNext, onError, onComplete) {
  var observer = typeof observerOrOnNext === 'function' ? { next: observerOrOnNext, error: onError, complete: onComplete } : observerOrOnNext;
  var subscription = {
    closed: false,
    unsubscribe: function () {
      subscription.closed = true;
      cancel();
    }
  };

  var cancel = this.observable.subscribe(function (event) {
    if (event.isError()) {
      if (observer.error) observer.error(event.error);
      subscription.unsubscribe();
    } else if (event.isEnd()) {
      subscription.closed = true;
      if (observer.complete) observer.complete();
    } else if (observer.next) {
      observer.next(event.value());
    }
  });
  return subscription;
};

ESObservable.prototype[symbol('observable')] = function () {
  return this;
};

Bacon.Observable.prototype.toESObservable = function () {
  return new ESObservable(this);
};

Bacon.Observable.prototype[symbol('observable')] = Bacon.Observable.prototype.toESObservable;

Bacon.fromESObservable = function (_observable) {
  var observable;
  if (_observable[symbol("observable")]) {
    observable = _observable[symbol("observable")]();
  } else {
    observable = _observable;
  }

  var desc = new Bacon.Desc(Bacon, "fromESObservable", [observable]);
  return new Bacon.EventStream(desc, function (sink) {
    var cancel = observable.subscribe({
      error: function () {
        sink(new Bacon.Error());
        sink(new Bacon.End());
      },
      next: function (value) {
        sink(new Bacon.Next(value, true));
      },
      complete: function () {
        sink(new Bacon.End());
      }
    });

    if (cancel.unsubscribe) {
      return function () {
        cancel.unsubscribe();
      };
    } else {
      return cancel;
    }
  });
};

if ("function" !== "undefined" && __webpack_require__(74) !== null && __webpack_require__(75) != null) {
  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
    return Bacon;
  }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  if (typeof this !== "undefined" && this !== null) {
    this.Bacon = Bacon;
  }
} else if (typeof module !== "undefined" && module !== null && module.exports != null) {
  module.exports = Bacon;
  Bacon.Bacon = Bacon;
} else {
    this.Bacon = Bacon;
  }
}).call(this);

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(33), __webpack_require__(59)(module)))

/***/ }),
/* 59 */
/***/ (function(module, exports) {

module.exports = function(module) {
	if(!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if(!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),
/* 60 */
/***/ (function(module, exports) {

var ENTITIES = [['Aacute', [193]], ['aacute', [225]], ['Abreve', [258]], ['abreve', [259]], ['ac', [8766]], ['acd', [8767]], ['acE', [8766, 819]], ['Acirc', [194]], ['acirc', [226]], ['acute', [180]], ['Acy', [1040]], ['acy', [1072]], ['AElig', [198]], ['aelig', [230]], ['af', [8289]], ['Afr', [120068]], ['afr', [120094]], ['Agrave', [192]], ['agrave', [224]], ['alefsym', [8501]], ['aleph', [8501]], ['Alpha', [913]], ['alpha', [945]], ['Amacr', [256]], ['amacr', [257]], ['amalg', [10815]], ['amp', [38]], ['AMP', [38]], ['andand', [10837]], ['And', [10835]], ['and', [8743]], ['andd', [10844]], ['andslope', [10840]], ['andv', [10842]], ['ang', [8736]], ['ange', [10660]], ['angle', [8736]], ['angmsdaa', [10664]], ['angmsdab', [10665]], ['angmsdac', [10666]], ['angmsdad', [10667]], ['angmsdae', [10668]], ['angmsdaf', [10669]], ['angmsdag', [10670]], ['angmsdah', [10671]], ['angmsd', [8737]], ['angrt', [8735]], ['angrtvb', [8894]], ['angrtvbd', [10653]], ['angsph', [8738]], ['angst', [197]], ['angzarr', [9084]], ['Aogon', [260]], ['aogon', [261]], ['Aopf', [120120]], ['aopf', [120146]], ['apacir', [10863]], ['ap', [8776]], ['apE', [10864]], ['ape', [8778]], ['apid', [8779]], ['apos', [39]], ['ApplyFunction', [8289]], ['approx', [8776]], ['approxeq', [8778]], ['Aring', [197]], ['aring', [229]], ['Ascr', [119964]], ['ascr', [119990]], ['Assign', [8788]], ['ast', [42]], ['asymp', [8776]], ['asympeq', [8781]], ['Atilde', [195]], ['atilde', [227]], ['Auml', [196]], ['auml', [228]], ['awconint', [8755]], ['awint', [10769]], ['backcong', [8780]], ['backepsilon', [1014]], ['backprime', [8245]], ['backsim', [8765]], ['backsimeq', [8909]], ['Backslash', [8726]], ['Barv', [10983]], ['barvee', [8893]], ['barwed', [8965]], ['Barwed', [8966]], ['barwedge', [8965]], ['bbrk', [9141]], ['bbrktbrk', [9142]], ['bcong', [8780]], ['Bcy', [1041]], ['bcy', [1073]], ['bdquo', [8222]], ['becaus', [8757]], ['because', [8757]], ['Because', [8757]], ['bemptyv', [10672]], ['bepsi', [1014]], ['bernou', [8492]], ['Bernoullis', [8492]], ['Beta', [914]], ['beta', [946]], ['beth', [8502]], ['between', [8812]], ['Bfr', [120069]], ['bfr', [120095]], ['bigcap', [8898]], ['bigcirc', [9711]], ['bigcup', [8899]], ['bigodot', [10752]], ['bigoplus', [10753]], ['bigotimes', [10754]], ['bigsqcup', [10758]], ['bigstar', [9733]], ['bigtriangledown', [9661]], ['bigtriangleup', [9651]], ['biguplus', [10756]], ['bigvee', [8897]], ['bigwedge', [8896]], ['bkarow', [10509]], ['blacklozenge', [10731]], ['blacksquare', [9642]], ['blacktriangle', [9652]], ['blacktriangledown', [9662]], ['blacktriangleleft', [9666]], ['blacktriangleright', [9656]], ['blank', [9251]], ['blk12', [9618]], ['blk14', [9617]], ['blk34', [9619]], ['block', [9608]], ['bne', [61, 8421]], ['bnequiv', [8801, 8421]], ['bNot', [10989]], ['bnot', [8976]], ['Bopf', [120121]], ['bopf', [120147]], ['bot', [8869]], ['bottom', [8869]], ['bowtie', [8904]], ['boxbox', [10697]], ['boxdl', [9488]], ['boxdL', [9557]], ['boxDl', [9558]], ['boxDL', [9559]], ['boxdr', [9484]], ['boxdR', [9554]], ['boxDr', [9555]], ['boxDR', [9556]], ['boxh', [9472]], ['boxH', [9552]], ['boxhd', [9516]], ['boxHd', [9572]], ['boxhD', [9573]], ['boxHD', [9574]], ['boxhu', [9524]], ['boxHu', [9575]], ['boxhU', [9576]], ['boxHU', [9577]], ['boxminus', [8863]], ['boxplus', [8862]], ['boxtimes', [8864]], ['boxul', [9496]], ['boxuL', [9563]], ['boxUl', [9564]], ['boxUL', [9565]], ['boxur', [9492]], ['boxuR', [9560]], ['boxUr', [9561]], ['boxUR', [9562]], ['boxv', [9474]], ['boxV', [9553]], ['boxvh', [9532]], ['boxvH', [9578]], ['boxVh', [9579]], ['boxVH', [9580]], ['boxvl', [9508]], ['boxvL', [9569]], ['boxVl', [9570]], ['boxVL', [9571]], ['boxvr', [9500]], ['boxvR', [9566]], ['boxVr', [9567]], ['boxVR', [9568]], ['bprime', [8245]], ['breve', [728]], ['Breve', [728]], ['brvbar', [166]], ['bscr', [119991]], ['Bscr', [8492]], ['bsemi', [8271]], ['bsim', [8765]], ['bsime', [8909]], ['bsolb', [10693]], ['bsol', [92]], ['bsolhsub', [10184]], ['bull', [8226]], ['bullet', [8226]], ['bump', [8782]], ['bumpE', [10926]], ['bumpe', [8783]], ['Bumpeq', [8782]], ['bumpeq', [8783]], ['Cacute', [262]], ['cacute', [263]], ['capand', [10820]], ['capbrcup', [10825]], ['capcap', [10827]], ['cap', [8745]], ['Cap', [8914]], ['capcup', [10823]], ['capdot', [10816]], ['CapitalDifferentialD', [8517]], ['caps', [8745, 65024]], ['caret', [8257]], ['caron', [711]], ['Cayleys', [8493]], ['ccaps', [10829]], ['Ccaron', [268]], ['ccaron', [269]], ['Ccedil', [199]], ['ccedil', [231]], ['Ccirc', [264]], ['ccirc', [265]], ['Cconint', [8752]], ['ccups', [10828]], ['ccupssm', [10832]], ['Cdot', [266]], ['cdot', [267]], ['cedil', [184]], ['Cedilla', [184]], ['cemptyv', [10674]], ['cent', [162]], ['centerdot', [183]], ['CenterDot', [183]], ['cfr', [120096]], ['Cfr', [8493]], ['CHcy', [1063]], ['chcy', [1095]], ['check', [10003]], ['checkmark', [10003]], ['Chi', [935]], ['chi', [967]], ['circ', [710]], ['circeq', [8791]], ['circlearrowleft', [8634]], ['circlearrowright', [8635]], ['circledast', [8859]], ['circledcirc', [8858]], ['circleddash', [8861]], ['CircleDot', [8857]], ['circledR', [174]], ['circledS', [9416]], ['CircleMinus', [8854]], ['CirclePlus', [8853]], ['CircleTimes', [8855]], ['cir', [9675]], ['cirE', [10691]], ['cire', [8791]], ['cirfnint', [10768]], ['cirmid', [10991]], ['cirscir', [10690]], ['ClockwiseContourIntegral', [8754]], ['clubs', [9827]], ['clubsuit', [9827]], ['colon', [58]], ['Colon', [8759]], ['Colone', [10868]], ['colone', [8788]], ['coloneq', [8788]], ['comma', [44]], ['commat', [64]], ['comp', [8705]], ['compfn', [8728]], ['complement', [8705]], ['complexes', [8450]], ['cong', [8773]], ['congdot', [10861]], ['Congruent', [8801]], ['conint', [8750]], ['Conint', [8751]], ['ContourIntegral', [8750]], ['copf', [120148]], ['Copf', [8450]], ['coprod', [8720]], ['Coproduct', [8720]], ['copy', [169]], ['COPY', [169]], ['copysr', [8471]], ['CounterClockwiseContourIntegral', [8755]], ['crarr', [8629]], ['cross', [10007]], ['Cross', [10799]], ['Cscr', [119966]], ['cscr', [119992]], ['csub', [10959]], ['csube', [10961]], ['csup', [10960]], ['csupe', [10962]], ['ctdot', [8943]], ['cudarrl', [10552]], ['cudarrr', [10549]], ['cuepr', [8926]], ['cuesc', [8927]], ['cularr', [8630]], ['cularrp', [10557]], ['cupbrcap', [10824]], ['cupcap', [10822]], ['CupCap', [8781]], ['cup', [8746]], ['Cup', [8915]], ['cupcup', [10826]], ['cupdot', [8845]], ['cupor', [10821]], ['cups', [8746, 65024]], ['curarr', [8631]], ['curarrm', [10556]], ['curlyeqprec', [8926]], ['curlyeqsucc', [8927]], ['curlyvee', [8910]], ['curlywedge', [8911]], ['curren', [164]], ['curvearrowleft', [8630]], ['curvearrowright', [8631]], ['cuvee', [8910]], ['cuwed', [8911]], ['cwconint', [8754]], ['cwint', [8753]], ['cylcty', [9005]], ['dagger', [8224]], ['Dagger', [8225]], ['daleth', [8504]], ['darr', [8595]], ['Darr', [8609]], ['dArr', [8659]], ['dash', [8208]], ['Dashv', [10980]], ['dashv', [8867]], ['dbkarow', [10511]], ['dblac', [733]], ['Dcaron', [270]], ['dcaron', [271]], ['Dcy', [1044]], ['dcy', [1076]], ['ddagger', [8225]], ['ddarr', [8650]], ['DD', [8517]], ['dd', [8518]], ['DDotrahd', [10513]], ['ddotseq', [10871]], ['deg', [176]], ['Del', [8711]], ['Delta', [916]], ['delta', [948]], ['demptyv', [10673]], ['dfisht', [10623]], ['Dfr', [120071]], ['dfr', [120097]], ['dHar', [10597]], ['dharl', [8643]], ['dharr', [8642]], ['DiacriticalAcute', [180]], ['DiacriticalDot', [729]], ['DiacriticalDoubleAcute', [733]], ['DiacriticalGrave', [96]], ['DiacriticalTilde', [732]], ['diam', [8900]], ['diamond', [8900]], ['Diamond', [8900]], ['diamondsuit', [9830]], ['diams', [9830]], ['die', [168]], ['DifferentialD', [8518]], ['digamma', [989]], ['disin', [8946]], ['div', [247]], ['divide', [247]], ['divideontimes', [8903]], ['divonx', [8903]], ['DJcy', [1026]], ['djcy', [1106]], ['dlcorn', [8990]], ['dlcrop', [8973]], ['dollar', [36]], ['Dopf', [120123]], ['dopf', [120149]], ['Dot', [168]], ['dot', [729]], ['DotDot', [8412]], ['doteq', [8784]], ['doteqdot', [8785]], ['DotEqual', [8784]], ['dotminus', [8760]], ['dotplus', [8724]], ['dotsquare', [8865]], ['doublebarwedge', [8966]], ['DoubleContourIntegral', [8751]], ['DoubleDot', [168]], ['DoubleDownArrow', [8659]], ['DoubleLeftArrow', [8656]], ['DoubleLeftRightArrow', [8660]], ['DoubleLeftTee', [10980]], ['DoubleLongLeftArrow', [10232]], ['DoubleLongLeftRightArrow', [10234]], ['DoubleLongRightArrow', [10233]], ['DoubleRightArrow', [8658]], ['DoubleRightTee', [8872]], ['DoubleUpArrow', [8657]], ['DoubleUpDownArrow', [8661]], ['DoubleVerticalBar', [8741]], ['DownArrowBar', [10515]], ['downarrow', [8595]], ['DownArrow', [8595]], ['Downarrow', [8659]], ['DownArrowUpArrow', [8693]], ['DownBreve', [785]], ['downdownarrows', [8650]], ['downharpoonleft', [8643]], ['downharpoonright', [8642]], ['DownLeftRightVector', [10576]], ['DownLeftTeeVector', [10590]], ['DownLeftVectorBar', [10582]], ['DownLeftVector', [8637]], ['DownRightTeeVector', [10591]], ['DownRightVectorBar', [10583]], ['DownRightVector', [8641]], ['DownTeeArrow', [8615]], ['DownTee', [8868]], ['drbkarow', [10512]], ['drcorn', [8991]], ['drcrop', [8972]], ['Dscr', [119967]], ['dscr', [119993]], ['DScy', [1029]], ['dscy', [1109]], ['dsol', [10742]], ['Dstrok', [272]], ['dstrok', [273]], ['dtdot', [8945]], ['dtri', [9663]], ['dtrif', [9662]], ['duarr', [8693]], ['duhar', [10607]], ['dwangle', [10662]], ['DZcy', [1039]], ['dzcy', [1119]], ['dzigrarr', [10239]], ['Eacute', [201]], ['eacute', [233]], ['easter', [10862]], ['Ecaron', [282]], ['ecaron', [283]], ['Ecirc', [202]], ['ecirc', [234]], ['ecir', [8790]], ['ecolon', [8789]], ['Ecy', [1069]], ['ecy', [1101]], ['eDDot', [10871]], ['Edot', [278]], ['edot', [279]], ['eDot', [8785]], ['ee', [8519]], ['efDot', [8786]], ['Efr', [120072]], ['efr', [120098]], ['eg', [10906]], ['Egrave', [200]], ['egrave', [232]], ['egs', [10902]], ['egsdot', [10904]], ['el', [10905]], ['Element', [8712]], ['elinters', [9191]], ['ell', [8467]], ['els', [10901]], ['elsdot', [10903]], ['Emacr', [274]], ['emacr', [275]], ['empty', [8709]], ['emptyset', [8709]], ['EmptySmallSquare', [9723]], ['emptyv', [8709]], ['EmptyVerySmallSquare', [9643]], ['emsp13', [8196]], ['emsp14', [8197]], ['emsp', [8195]], ['ENG', [330]], ['eng', [331]], ['ensp', [8194]], ['Eogon', [280]], ['eogon', [281]], ['Eopf', [120124]], ['eopf', [120150]], ['epar', [8917]], ['eparsl', [10723]], ['eplus', [10865]], ['epsi', [949]], ['Epsilon', [917]], ['epsilon', [949]], ['epsiv', [1013]], ['eqcirc', [8790]], ['eqcolon', [8789]], ['eqsim', [8770]], ['eqslantgtr', [10902]], ['eqslantless', [10901]], ['Equal', [10869]], ['equals', [61]], ['EqualTilde', [8770]], ['equest', [8799]], ['Equilibrium', [8652]], ['equiv', [8801]], ['equivDD', [10872]], ['eqvparsl', [10725]], ['erarr', [10609]], ['erDot', [8787]], ['escr', [8495]], ['Escr', [8496]], ['esdot', [8784]], ['Esim', [10867]], ['esim', [8770]], ['Eta', [919]], ['eta', [951]], ['ETH', [208]], ['eth', [240]], ['Euml', [203]], ['euml', [235]], ['euro', [8364]], ['excl', [33]], ['exist', [8707]], ['Exists', [8707]], ['expectation', [8496]], ['exponentiale', [8519]], ['ExponentialE', [8519]], ['fallingdotseq', [8786]], ['Fcy', [1060]], ['fcy', [1092]], ['female', [9792]], ['ffilig', [64259]], ['fflig', [64256]], ['ffllig', [64260]], ['Ffr', [120073]], ['ffr', [120099]], ['filig', [64257]], ['FilledSmallSquare', [9724]], ['FilledVerySmallSquare', [9642]], ['fjlig', [102, 106]], ['flat', [9837]], ['fllig', [64258]], ['fltns', [9649]], ['fnof', [402]], ['Fopf', [120125]], ['fopf', [120151]], ['forall', [8704]], ['ForAll', [8704]], ['fork', [8916]], ['forkv', [10969]], ['Fouriertrf', [8497]], ['fpartint', [10765]], ['frac12', [189]], ['frac13', [8531]], ['frac14', [188]], ['frac15', [8533]], ['frac16', [8537]], ['frac18', [8539]], ['frac23', [8532]], ['frac25', [8534]], ['frac34', [190]], ['frac35', [8535]], ['frac38', [8540]], ['frac45', [8536]], ['frac56', [8538]], ['frac58', [8541]], ['frac78', [8542]], ['frasl', [8260]], ['frown', [8994]], ['fscr', [119995]], ['Fscr', [8497]], ['gacute', [501]], ['Gamma', [915]], ['gamma', [947]], ['Gammad', [988]], ['gammad', [989]], ['gap', [10886]], ['Gbreve', [286]], ['gbreve', [287]], ['Gcedil', [290]], ['Gcirc', [284]], ['gcirc', [285]], ['Gcy', [1043]], ['gcy', [1075]], ['Gdot', [288]], ['gdot', [289]], ['ge', [8805]], ['gE', [8807]], ['gEl', [10892]], ['gel', [8923]], ['geq', [8805]], ['geqq', [8807]], ['geqslant', [10878]], ['gescc', [10921]], ['ges', [10878]], ['gesdot', [10880]], ['gesdoto', [10882]], ['gesdotol', [10884]], ['gesl', [8923, 65024]], ['gesles', [10900]], ['Gfr', [120074]], ['gfr', [120100]], ['gg', [8811]], ['Gg', [8921]], ['ggg', [8921]], ['gimel', [8503]], ['GJcy', [1027]], ['gjcy', [1107]], ['gla', [10917]], ['gl', [8823]], ['glE', [10898]], ['glj', [10916]], ['gnap', [10890]], ['gnapprox', [10890]], ['gne', [10888]], ['gnE', [8809]], ['gneq', [10888]], ['gneqq', [8809]], ['gnsim', [8935]], ['Gopf', [120126]], ['gopf', [120152]], ['grave', [96]], ['GreaterEqual', [8805]], ['GreaterEqualLess', [8923]], ['GreaterFullEqual', [8807]], ['GreaterGreater', [10914]], ['GreaterLess', [8823]], ['GreaterSlantEqual', [10878]], ['GreaterTilde', [8819]], ['Gscr', [119970]], ['gscr', [8458]], ['gsim', [8819]], ['gsime', [10894]], ['gsiml', [10896]], ['gtcc', [10919]], ['gtcir', [10874]], ['gt', [62]], ['GT', [62]], ['Gt', [8811]], ['gtdot', [8919]], ['gtlPar', [10645]], ['gtquest', [10876]], ['gtrapprox', [10886]], ['gtrarr', [10616]], ['gtrdot', [8919]], ['gtreqless', [8923]], ['gtreqqless', [10892]], ['gtrless', [8823]], ['gtrsim', [8819]], ['gvertneqq', [8809, 65024]], ['gvnE', [8809, 65024]], ['Hacek', [711]], ['hairsp', [8202]], ['half', [189]], ['hamilt', [8459]], ['HARDcy', [1066]], ['hardcy', [1098]], ['harrcir', [10568]], ['harr', [8596]], ['hArr', [8660]], ['harrw', [8621]], ['Hat', [94]], ['hbar', [8463]], ['Hcirc', [292]], ['hcirc', [293]], ['hearts', [9829]], ['heartsuit', [9829]], ['hellip', [8230]], ['hercon', [8889]], ['hfr', [120101]], ['Hfr', [8460]], ['HilbertSpace', [8459]], ['hksearow', [10533]], ['hkswarow', [10534]], ['hoarr', [8703]], ['homtht', [8763]], ['hookleftarrow', [8617]], ['hookrightarrow', [8618]], ['hopf', [120153]], ['Hopf', [8461]], ['horbar', [8213]], ['HorizontalLine', [9472]], ['hscr', [119997]], ['Hscr', [8459]], ['hslash', [8463]], ['Hstrok', [294]], ['hstrok', [295]], ['HumpDownHump', [8782]], ['HumpEqual', [8783]], ['hybull', [8259]], ['hyphen', [8208]], ['Iacute', [205]], ['iacute', [237]], ['ic', [8291]], ['Icirc', [206]], ['icirc', [238]], ['Icy', [1048]], ['icy', [1080]], ['Idot', [304]], ['IEcy', [1045]], ['iecy', [1077]], ['iexcl', [161]], ['iff', [8660]], ['ifr', [120102]], ['Ifr', [8465]], ['Igrave', [204]], ['igrave', [236]], ['ii', [8520]], ['iiiint', [10764]], ['iiint', [8749]], ['iinfin', [10716]], ['iiota', [8489]], ['IJlig', [306]], ['ijlig', [307]], ['Imacr', [298]], ['imacr', [299]], ['image', [8465]], ['ImaginaryI', [8520]], ['imagline', [8464]], ['imagpart', [8465]], ['imath', [305]], ['Im', [8465]], ['imof', [8887]], ['imped', [437]], ['Implies', [8658]], ['incare', [8453]], ['in', [8712]], ['infin', [8734]], ['infintie', [10717]], ['inodot', [305]], ['intcal', [8890]], ['int', [8747]], ['Int', [8748]], ['integers', [8484]], ['Integral', [8747]], ['intercal', [8890]], ['Intersection', [8898]], ['intlarhk', [10775]], ['intprod', [10812]], ['InvisibleComma', [8291]], ['InvisibleTimes', [8290]], ['IOcy', [1025]], ['iocy', [1105]], ['Iogon', [302]], ['iogon', [303]], ['Iopf', [120128]], ['iopf', [120154]], ['Iota', [921]], ['iota', [953]], ['iprod', [10812]], ['iquest', [191]], ['iscr', [119998]], ['Iscr', [8464]], ['isin', [8712]], ['isindot', [8949]], ['isinE', [8953]], ['isins', [8948]], ['isinsv', [8947]], ['isinv', [8712]], ['it', [8290]], ['Itilde', [296]], ['itilde', [297]], ['Iukcy', [1030]], ['iukcy', [1110]], ['Iuml', [207]], ['iuml', [239]], ['Jcirc', [308]], ['jcirc', [309]], ['Jcy', [1049]], ['jcy', [1081]], ['Jfr', [120077]], ['jfr', [120103]], ['jmath', [567]], ['Jopf', [120129]], ['jopf', [120155]], ['Jscr', [119973]], ['jscr', [119999]], ['Jsercy', [1032]], ['jsercy', [1112]], ['Jukcy', [1028]], ['jukcy', [1108]], ['Kappa', [922]], ['kappa', [954]], ['kappav', [1008]], ['Kcedil', [310]], ['kcedil', [311]], ['Kcy', [1050]], ['kcy', [1082]], ['Kfr', [120078]], ['kfr', [120104]], ['kgreen', [312]], ['KHcy', [1061]], ['khcy', [1093]], ['KJcy', [1036]], ['kjcy', [1116]], ['Kopf', [120130]], ['kopf', [120156]], ['Kscr', [119974]], ['kscr', [120000]], ['lAarr', [8666]], ['Lacute', [313]], ['lacute', [314]], ['laemptyv', [10676]], ['lagran', [8466]], ['Lambda', [923]], ['lambda', [955]], ['lang', [10216]], ['Lang', [10218]], ['langd', [10641]], ['langle', [10216]], ['lap', [10885]], ['Laplacetrf', [8466]], ['laquo', [171]], ['larrb', [8676]], ['larrbfs', [10527]], ['larr', [8592]], ['Larr', [8606]], ['lArr', [8656]], ['larrfs', [10525]], ['larrhk', [8617]], ['larrlp', [8619]], ['larrpl', [10553]], ['larrsim', [10611]], ['larrtl', [8610]], ['latail', [10521]], ['lAtail', [10523]], ['lat', [10923]], ['late', [10925]], ['lates', [10925, 65024]], ['lbarr', [10508]], ['lBarr', [10510]], ['lbbrk', [10098]], ['lbrace', [123]], ['lbrack', [91]], ['lbrke', [10635]], ['lbrksld', [10639]], ['lbrkslu', [10637]], ['Lcaron', [317]], ['lcaron', [318]], ['Lcedil', [315]], ['lcedil', [316]], ['lceil', [8968]], ['lcub', [123]], ['Lcy', [1051]], ['lcy', [1083]], ['ldca', [10550]], ['ldquo', [8220]], ['ldquor', [8222]], ['ldrdhar', [10599]], ['ldrushar', [10571]], ['ldsh', [8626]], ['le', [8804]], ['lE', [8806]], ['LeftAngleBracket', [10216]], ['LeftArrowBar', [8676]], ['leftarrow', [8592]], ['LeftArrow', [8592]], ['Leftarrow', [8656]], ['LeftArrowRightArrow', [8646]], ['leftarrowtail', [8610]], ['LeftCeiling', [8968]], ['LeftDoubleBracket', [10214]], ['LeftDownTeeVector', [10593]], ['LeftDownVectorBar', [10585]], ['LeftDownVector', [8643]], ['LeftFloor', [8970]], ['leftharpoondown', [8637]], ['leftharpoonup', [8636]], ['leftleftarrows', [8647]], ['leftrightarrow', [8596]], ['LeftRightArrow', [8596]], ['Leftrightarrow', [8660]], ['leftrightarrows', [8646]], ['leftrightharpoons', [8651]], ['leftrightsquigarrow', [8621]], ['LeftRightVector', [10574]], ['LeftTeeArrow', [8612]], ['LeftTee', [8867]], ['LeftTeeVector', [10586]], ['leftthreetimes', [8907]], ['LeftTriangleBar', [10703]], ['LeftTriangle', [8882]], ['LeftTriangleEqual', [8884]], ['LeftUpDownVector', [10577]], ['LeftUpTeeVector', [10592]], ['LeftUpVectorBar', [10584]], ['LeftUpVector', [8639]], ['LeftVectorBar', [10578]], ['LeftVector', [8636]], ['lEg', [10891]], ['leg', [8922]], ['leq', [8804]], ['leqq', [8806]], ['leqslant', [10877]], ['lescc', [10920]], ['les', [10877]], ['lesdot', [10879]], ['lesdoto', [10881]], ['lesdotor', [10883]], ['lesg', [8922, 65024]], ['lesges', [10899]], ['lessapprox', [10885]], ['lessdot', [8918]], ['lesseqgtr', [8922]], ['lesseqqgtr', [10891]], ['LessEqualGreater', [8922]], ['LessFullEqual', [8806]], ['LessGreater', [8822]], ['lessgtr', [8822]], ['LessLess', [10913]], ['lesssim', [8818]], ['LessSlantEqual', [10877]], ['LessTilde', [8818]], ['lfisht', [10620]], ['lfloor', [8970]], ['Lfr', [120079]], ['lfr', [120105]], ['lg', [8822]], ['lgE', [10897]], ['lHar', [10594]], ['lhard', [8637]], ['lharu', [8636]], ['lharul', [10602]], ['lhblk', [9604]], ['LJcy', [1033]], ['ljcy', [1113]], ['llarr', [8647]], ['ll', [8810]], ['Ll', [8920]], ['llcorner', [8990]], ['Lleftarrow', [8666]], ['llhard', [10603]], ['lltri', [9722]], ['Lmidot', [319]], ['lmidot', [320]], ['lmoustache', [9136]], ['lmoust', [9136]], ['lnap', [10889]], ['lnapprox', [10889]], ['lne', [10887]], ['lnE', [8808]], ['lneq', [10887]], ['lneqq', [8808]], ['lnsim', [8934]], ['loang', [10220]], ['loarr', [8701]], ['lobrk', [10214]], ['longleftarrow', [10229]], ['LongLeftArrow', [10229]], ['Longleftarrow', [10232]], ['longleftrightarrow', [10231]], ['LongLeftRightArrow', [10231]], ['Longleftrightarrow', [10234]], ['longmapsto', [10236]], ['longrightarrow', [10230]], ['LongRightArrow', [10230]], ['Longrightarrow', [10233]], ['looparrowleft', [8619]], ['looparrowright', [8620]], ['lopar', [10629]], ['Lopf', [120131]], ['lopf', [120157]], ['loplus', [10797]], ['lotimes', [10804]], ['lowast', [8727]], ['lowbar', [95]], ['LowerLeftArrow', [8601]], ['LowerRightArrow', [8600]], ['loz', [9674]], ['lozenge', [9674]], ['lozf', [10731]], ['lpar', [40]], ['lparlt', [10643]], ['lrarr', [8646]], ['lrcorner', [8991]], ['lrhar', [8651]], ['lrhard', [10605]], ['lrm', [8206]], ['lrtri', [8895]], ['lsaquo', [8249]], ['lscr', [120001]], ['Lscr', [8466]], ['lsh', [8624]], ['Lsh', [8624]], ['lsim', [8818]], ['lsime', [10893]], ['lsimg', [10895]], ['lsqb', [91]], ['lsquo', [8216]], ['lsquor', [8218]], ['Lstrok', [321]], ['lstrok', [322]], ['ltcc', [10918]], ['ltcir', [10873]], ['lt', [60]], ['LT', [60]], ['Lt', [8810]], ['ltdot', [8918]], ['lthree', [8907]], ['ltimes', [8905]], ['ltlarr', [10614]], ['ltquest', [10875]], ['ltri', [9667]], ['ltrie', [8884]], ['ltrif', [9666]], ['ltrPar', [10646]], ['lurdshar', [10570]], ['luruhar', [10598]], ['lvertneqq', [8808, 65024]], ['lvnE', [8808, 65024]], ['macr', [175]], ['male', [9794]], ['malt', [10016]], ['maltese', [10016]], ['Map', [10501]], ['map', [8614]], ['mapsto', [8614]], ['mapstodown', [8615]], ['mapstoleft', [8612]], ['mapstoup', [8613]], ['marker', [9646]], ['mcomma', [10793]], ['Mcy', [1052]], ['mcy', [1084]], ['mdash', [8212]], ['mDDot', [8762]], ['measuredangle', [8737]], ['MediumSpace', [8287]], ['Mellintrf', [8499]], ['Mfr', [120080]], ['mfr', [120106]], ['mho', [8487]], ['micro', [181]], ['midast', [42]], ['midcir', [10992]], ['mid', [8739]], ['middot', [183]], ['minusb', [8863]], ['minus', [8722]], ['minusd', [8760]], ['minusdu', [10794]], ['MinusPlus', [8723]], ['mlcp', [10971]], ['mldr', [8230]], ['mnplus', [8723]], ['models', [8871]], ['Mopf', [120132]], ['mopf', [120158]], ['mp', [8723]], ['mscr', [120002]], ['Mscr', [8499]], ['mstpos', [8766]], ['Mu', [924]], ['mu', [956]], ['multimap', [8888]], ['mumap', [8888]], ['nabla', [8711]], ['Nacute', [323]], ['nacute', [324]], ['nang', [8736, 8402]], ['nap', [8777]], ['napE', [10864, 824]], ['napid', [8779, 824]], ['napos', [329]], ['napprox', [8777]], ['natural', [9838]], ['naturals', [8469]], ['natur', [9838]], ['nbsp', [160]], ['nbump', [8782, 824]], ['nbumpe', [8783, 824]], ['ncap', [10819]], ['Ncaron', [327]], ['ncaron', [328]], ['Ncedil', [325]], ['ncedil', [326]], ['ncong', [8775]], ['ncongdot', [10861, 824]], ['ncup', [10818]], ['Ncy', [1053]], ['ncy', [1085]], ['ndash', [8211]], ['nearhk', [10532]], ['nearr', [8599]], ['neArr', [8663]], ['nearrow', [8599]], ['ne', [8800]], ['nedot', [8784, 824]], ['NegativeMediumSpace', [8203]], ['NegativeThickSpace', [8203]], ['NegativeThinSpace', [8203]], ['NegativeVeryThinSpace', [8203]], ['nequiv', [8802]], ['nesear', [10536]], ['nesim', [8770, 824]], ['NestedGreaterGreater', [8811]], ['NestedLessLess', [8810]], ['nexist', [8708]], ['nexists', [8708]], ['Nfr', [120081]], ['nfr', [120107]], ['ngE', [8807, 824]], ['nge', [8817]], ['ngeq', [8817]], ['ngeqq', [8807, 824]], ['ngeqslant', [10878, 824]], ['nges', [10878, 824]], ['nGg', [8921, 824]], ['ngsim', [8821]], ['nGt', [8811, 8402]], ['ngt', [8815]], ['ngtr', [8815]], ['nGtv', [8811, 824]], ['nharr', [8622]], ['nhArr', [8654]], ['nhpar', [10994]], ['ni', [8715]], ['nis', [8956]], ['nisd', [8954]], ['niv', [8715]], ['NJcy', [1034]], ['njcy', [1114]], ['nlarr', [8602]], ['nlArr', [8653]], ['nldr', [8229]], ['nlE', [8806, 824]], ['nle', [8816]], ['nleftarrow', [8602]], ['nLeftarrow', [8653]], ['nleftrightarrow', [8622]], ['nLeftrightarrow', [8654]], ['nleq', [8816]], ['nleqq', [8806, 824]], ['nleqslant', [10877, 824]], ['nles', [10877, 824]], ['nless', [8814]], ['nLl', [8920, 824]], ['nlsim', [8820]], ['nLt', [8810, 8402]], ['nlt', [8814]], ['nltri', [8938]], ['nltrie', [8940]], ['nLtv', [8810, 824]], ['nmid', [8740]], ['NoBreak', [8288]], ['NonBreakingSpace', [160]], ['nopf', [120159]], ['Nopf', [8469]], ['Not', [10988]], ['not', [172]], ['NotCongruent', [8802]], ['NotCupCap', [8813]], ['NotDoubleVerticalBar', [8742]], ['NotElement', [8713]], ['NotEqual', [8800]], ['NotEqualTilde', [8770, 824]], ['NotExists', [8708]], ['NotGreater', [8815]], ['NotGreaterEqual', [8817]], ['NotGreaterFullEqual', [8807, 824]], ['NotGreaterGreater', [8811, 824]], ['NotGreaterLess', [8825]], ['NotGreaterSlantEqual', [10878, 824]], ['NotGreaterTilde', [8821]], ['NotHumpDownHump', [8782, 824]], ['NotHumpEqual', [8783, 824]], ['notin', [8713]], ['notindot', [8949, 824]], ['notinE', [8953, 824]], ['notinva', [8713]], ['notinvb', [8951]], ['notinvc', [8950]], ['NotLeftTriangleBar', [10703, 824]], ['NotLeftTriangle', [8938]], ['NotLeftTriangleEqual', [8940]], ['NotLess', [8814]], ['NotLessEqual', [8816]], ['NotLessGreater', [8824]], ['NotLessLess', [8810, 824]], ['NotLessSlantEqual', [10877, 824]], ['NotLessTilde', [8820]], ['NotNestedGreaterGreater', [10914, 824]], ['NotNestedLessLess', [10913, 824]], ['notni', [8716]], ['notniva', [8716]], ['notnivb', [8958]], ['notnivc', [8957]], ['NotPrecedes', [8832]], ['NotPrecedesEqual', [10927, 824]], ['NotPrecedesSlantEqual', [8928]], ['NotReverseElement', [8716]], ['NotRightTriangleBar', [10704, 824]], ['NotRightTriangle', [8939]], ['NotRightTriangleEqual', [8941]], ['NotSquareSubset', [8847, 824]], ['NotSquareSubsetEqual', [8930]], ['NotSquareSuperset', [8848, 824]], ['NotSquareSupersetEqual', [8931]], ['NotSubset', [8834, 8402]], ['NotSubsetEqual', [8840]], ['NotSucceeds', [8833]], ['NotSucceedsEqual', [10928, 824]], ['NotSucceedsSlantEqual', [8929]], ['NotSucceedsTilde', [8831, 824]], ['NotSuperset', [8835, 8402]], ['NotSupersetEqual', [8841]], ['NotTilde', [8769]], ['NotTildeEqual', [8772]], ['NotTildeFullEqual', [8775]], ['NotTildeTilde', [8777]], ['NotVerticalBar', [8740]], ['nparallel', [8742]], ['npar', [8742]], ['nparsl', [11005, 8421]], ['npart', [8706, 824]], ['npolint', [10772]], ['npr', [8832]], ['nprcue', [8928]], ['nprec', [8832]], ['npreceq', [10927, 824]], ['npre', [10927, 824]], ['nrarrc', [10547, 824]], ['nrarr', [8603]], ['nrArr', [8655]], ['nrarrw', [8605, 824]], ['nrightarrow', [8603]], ['nRightarrow', [8655]], ['nrtri', [8939]], ['nrtrie', [8941]], ['nsc', [8833]], ['nsccue', [8929]], ['nsce', [10928, 824]], ['Nscr', [119977]], ['nscr', [120003]], ['nshortmid', [8740]], ['nshortparallel', [8742]], ['nsim', [8769]], ['nsime', [8772]], ['nsimeq', [8772]], ['nsmid', [8740]], ['nspar', [8742]], ['nsqsube', [8930]], ['nsqsupe', [8931]], ['nsub', [8836]], ['nsubE', [10949, 824]], ['nsube', [8840]], ['nsubset', [8834, 8402]], ['nsubseteq', [8840]], ['nsubseteqq', [10949, 824]], ['nsucc', [8833]], ['nsucceq', [10928, 824]], ['nsup', [8837]], ['nsupE', [10950, 824]], ['nsupe', [8841]], ['nsupset', [8835, 8402]], ['nsupseteq', [8841]], ['nsupseteqq', [10950, 824]], ['ntgl', [8825]], ['Ntilde', [209]], ['ntilde', [241]], ['ntlg', [8824]], ['ntriangleleft', [8938]], ['ntrianglelefteq', [8940]], ['ntriangleright', [8939]], ['ntrianglerighteq', [8941]], ['Nu', [925]], ['nu', [957]], ['num', [35]], ['numero', [8470]], ['numsp', [8199]], ['nvap', [8781, 8402]], ['nvdash', [8876]], ['nvDash', [8877]], ['nVdash', [8878]], ['nVDash', [8879]], ['nvge', [8805, 8402]], ['nvgt', [62, 8402]], ['nvHarr', [10500]], ['nvinfin', [10718]], ['nvlArr', [10498]], ['nvle', [8804, 8402]], ['nvlt', [60, 8402]], ['nvltrie', [8884, 8402]], ['nvrArr', [10499]], ['nvrtrie', [8885, 8402]], ['nvsim', [8764, 8402]], ['nwarhk', [10531]], ['nwarr', [8598]], ['nwArr', [8662]], ['nwarrow', [8598]], ['nwnear', [10535]], ['Oacute', [211]], ['oacute', [243]], ['oast', [8859]], ['Ocirc', [212]], ['ocirc', [244]], ['ocir', [8858]], ['Ocy', [1054]], ['ocy', [1086]], ['odash', [8861]], ['Odblac', [336]], ['odblac', [337]], ['odiv', [10808]], ['odot', [8857]], ['odsold', [10684]], ['OElig', [338]], ['oelig', [339]], ['ofcir', [10687]], ['Ofr', [120082]], ['ofr', [120108]], ['ogon', [731]], ['Ograve', [210]], ['ograve', [242]], ['ogt', [10689]], ['ohbar', [10677]], ['ohm', [937]], ['oint', [8750]], ['olarr', [8634]], ['olcir', [10686]], ['olcross', [10683]], ['oline', [8254]], ['olt', [10688]], ['Omacr', [332]], ['omacr', [333]], ['Omega', [937]], ['omega', [969]], ['Omicron', [927]], ['omicron', [959]], ['omid', [10678]], ['ominus', [8854]], ['Oopf', [120134]], ['oopf', [120160]], ['opar', [10679]], ['OpenCurlyDoubleQuote', [8220]], ['OpenCurlyQuote', [8216]], ['operp', [10681]], ['oplus', [8853]], ['orarr', [8635]], ['Or', [10836]], ['or', [8744]], ['ord', [10845]], ['order', [8500]], ['orderof', [8500]], ['ordf', [170]], ['ordm', [186]], ['origof', [8886]], ['oror', [10838]], ['orslope', [10839]], ['orv', [10843]], ['oS', [9416]], ['Oscr', [119978]], ['oscr', [8500]], ['Oslash', [216]], ['oslash', [248]], ['osol', [8856]], ['Otilde', [213]], ['otilde', [245]], ['otimesas', [10806]], ['Otimes', [10807]], ['otimes', [8855]], ['Ouml', [214]], ['ouml', [246]], ['ovbar', [9021]], ['OverBar', [8254]], ['OverBrace', [9182]], ['OverBracket', [9140]], ['OverParenthesis', [9180]], ['para', [182]], ['parallel', [8741]], ['par', [8741]], ['parsim', [10995]], ['parsl', [11005]], ['part', [8706]], ['PartialD', [8706]], ['Pcy', [1055]], ['pcy', [1087]], ['percnt', [37]], ['period', [46]], ['permil', [8240]], ['perp', [8869]], ['pertenk', [8241]], ['Pfr', [120083]], ['pfr', [120109]], ['Phi', [934]], ['phi', [966]], ['phiv', [981]], ['phmmat', [8499]], ['phone', [9742]], ['Pi', [928]], ['pi', [960]], ['pitchfork', [8916]], ['piv', [982]], ['planck', [8463]], ['planckh', [8462]], ['plankv', [8463]], ['plusacir', [10787]], ['plusb', [8862]], ['pluscir', [10786]], ['plus', [43]], ['plusdo', [8724]], ['plusdu', [10789]], ['pluse', [10866]], ['PlusMinus', [177]], ['plusmn', [177]], ['plussim', [10790]], ['plustwo', [10791]], ['pm', [177]], ['Poincareplane', [8460]], ['pointint', [10773]], ['popf', [120161]], ['Popf', [8473]], ['pound', [163]], ['prap', [10935]], ['Pr', [10939]], ['pr', [8826]], ['prcue', [8828]], ['precapprox', [10935]], ['prec', [8826]], ['preccurlyeq', [8828]], ['Precedes', [8826]], ['PrecedesEqual', [10927]], ['PrecedesSlantEqual', [8828]], ['PrecedesTilde', [8830]], ['preceq', [10927]], ['precnapprox', [10937]], ['precneqq', [10933]], ['precnsim', [8936]], ['pre', [10927]], ['prE', [10931]], ['precsim', [8830]], ['prime', [8242]], ['Prime', [8243]], ['primes', [8473]], ['prnap', [10937]], ['prnE', [10933]], ['prnsim', [8936]], ['prod', [8719]], ['Product', [8719]], ['profalar', [9006]], ['profline', [8978]], ['profsurf', [8979]], ['prop', [8733]], ['Proportional', [8733]], ['Proportion', [8759]], ['propto', [8733]], ['prsim', [8830]], ['prurel', [8880]], ['Pscr', [119979]], ['pscr', [120005]], ['Psi', [936]], ['psi', [968]], ['puncsp', [8200]], ['Qfr', [120084]], ['qfr', [120110]], ['qint', [10764]], ['qopf', [120162]], ['Qopf', [8474]], ['qprime', [8279]], ['Qscr', [119980]], ['qscr', [120006]], ['quaternions', [8461]], ['quatint', [10774]], ['quest', [63]], ['questeq', [8799]], ['quot', [34]], ['QUOT', [34]], ['rAarr', [8667]], ['race', [8765, 817]], ['Racute', [340]], ['racute', [341]], ['radic', [8730]], ['raemptyv', [10675]], ['rang', [10217]], ['Rang', [10219]], ['rangd', [10642]], ['range', [10661]], ['rangle', [10217]], ['raquo', [187]], ['rarrap', [10613]], ['rarrb', [8677]], ['rarrbfs', [10528]], ['rarrc', [10547]], ['rarr', [8594]], ['Rarr', [8608]], ['rArr', [8658]], ['rarrfs', [10526]], ['rarrhk', [8618]], ['rarrlp', [8620]], ['rarrpl', [10565]], ['rarrsim', [10612]], ['Rarrtl', [10518]], ['rarrtl', [8611]], ['rarrw', [8605]], ['ratail', [10522]], ['rAtail', [10524]], ['ratio', [8758]], ['rationals', [8474]], ['rbarr', [10509]], ['rBarr', [10511]], ['RBarr', [10512]], ['rbbrk', [10099]], ['rbrace', [125]], ['rbrack', [93]], ['rbrke', [10636]], ['rbrksld', [10638]], ['rbrkslu', [10640]], ['Rcaron', [344]], ['rcaron', [345]], ['Rcedil', [342]], ['rcedil', [343]], ['rceil', [8969]], ['rcub', [125]], ['Rcy', [1056]], ['rcy', [1088]], ['rdca', [10551]], ['rdldhar', [10601]], ['rdquo', [8221]], ['rdquor', [8221]], ['CloseCurlyDoubleQuote', [8221]], ['rdsh', [8627]], ['real', [8476]], ['realine', [8475]], ['realpart', [8476]], ['reals', [8477]], ['Re', [8476]], ['rect', [9645]], ['reg', [174]], ['REG', [174]], ['ReverseElement', [8715]], ['ReverseEquilibrium', [8651]], ['ReverseUpEquilibrium', [10607]], ['rfisht', [10621]], ['rfloor', [8971]], ['rfr', [120111]], ['Rfr', [8476]], ['rHar', [10596]], ['rhard', [8641]], ['rharu', [8640]], ['rharul', [10604]], ['Rho', [929]], ['rho', [961]], ['rhov', [1009]], ['RightAngleBracket', [10217]], ['RightArrowBar', [8677]], ['rightarrow', [8594]], ['RightArrow', [8594]], ['Rightarrow', [8658]], ['RightArrowLeftArrow', [8644]], ['rightarrowtail', [8611]], ['RightCeiling', [8969]], ['RightDoubleBracket', [10215]], ['RightDownTeeVector', [10589]], ['RightDownVectorBar', [10581]], ['RightDownVector', [8642]], ['RightFloor', [8971]], ['rightharpoondown', [8641]], ['rightharpoonup', [8640]], ['rightleftarrows', [8644]], ['rightleftharpoons', [8652]], ['rightrightarrows', [8649]], ['rightsquigarrow', [8605]], ['RightTeeArrow', [8614]], ['RightTee', [8866]], ['RightTeeVector', [10587]], ['rightthreetimes', [8908]], ['RightTriangleBar', [10704]], ['RightTriangle', [8883]], ['RightTriangleEqual', [8885]], ['RightUpDownVector', [10575]], ['RightUpTeeVector', [10588]], ['RightUpVectorBar', [10580]], ['RightUpVector', [8638]], ['RightVectorBar', [10579]], ['RightVector', [8640]], ['ring', [730]], ['risingdotseq', [8787]], ['rlarr', [8644]], ['rlhar', [8652]], ['rlm', [8207]], ['rmoustache', [9137]], ['rmoust', [9137]], ['rnmid', [10990]], ['roang', [10221]], ['roarr', [8702]], ['robrk', [10215]], ['ropar', [10630]], ['ropf', [120163]], ['Ropf', [8477]], ['roplus', [10798]], ['rotimes', [10805]], ['RoundImplies', [10608]], ['rpar', [41]], ['rpargt', [10644]], ['rppolint', [10770]], ['rrarr', [8649]], ['Rrightarrow', [8667]], ['rsaquo', [8250]], ['rscr', [120007]], ['Rscr', [8475]], ['rsh', [8625]], ['Rsh', [8625]], ['rsqb', [93]], ['rsquo', [8217]], ['rsquor', [8217]], ['CloseCurlyQuote', [8217]], ['rthree', [8908]], ['rtimes', [8906]], ['rtri', [9657]], ['rtrie', [8885]], ['rtrif', [9656]], ['rtriltri', [10702]], ['RuleDelayed', [10740]], ['ruluhar', [10600]], ['rx', [8478]], ['Sacute', [346]], ['sacute', [347]], ['sbquo', [8218]], ['scap', [10936]], ['Scaron', [352]], ['scaron', [353]], ['Sc', [10940]], ['sc', [8827]], ['sccue', [8829]], ['sce', [10928]], ['scE', [10932]], ['Scedil', [350]], ['scedil', [351]], ['Scirc', [348]], ['scirc', [349]], ['scnap', [10938]], ['scnE', [10934]], ['scnsim', [8937]], ['scpolint', [10771]], ['scsim', [8831]], ['Scy', [1057]], ['scy', [1089]], ['sdotb', [8865]], ['sdot', [8901]], ['sdote', [10854]], ['searhk', [10533]], ['searr', [8600]], ['seArr', [8664]], ['searrow', [8600]], ['sect', [167]], ['semi', [59]], ['seswar', [10537]], ['setminus', [8726]], ['setmn', [8726]], ['sext', [10038]], ['Sfr', [120086]], ['sfr', [120112]], ['sfrown', [8994]], ['sharp', [9839]], ['SHCHcy', [1065]], ['shchcy', [1097]], ['SHcy', [1064]], ['shcy', [1096]], ['ShortDownArrow', [8595]], ['ShortLeftArrow', [8592]], ['shortmid', [8739]], ['shortparallel', [8741]], ['ShortRightArrow', [8594]], ['ShortUpArrow', [8593]], ['shy', [173]], ['Sigma', [931]], ['sigma', [963]], ['sigmaf', [962]], ['sigmav', [962]], ['sim', [8764]], ['simdot', [10858]], ['sime', [8771]], ['simeq', [8771]], ['simg', [10910]], ['simgE', [10912]], ['siml', [10909]], ['simlE', [10911]], ['simne', [8774]], ['simplus', [10788]], ['simrarr', [10610]], ['slarr', [8592]], ['SmallCircle', [8728]], ['smallsetminus', [8726]], ['smashp', [10803]], ['smeparsl', [10724]], ['smid', [8739]], ['smile', [8995]], ['smt', [10922]], ['smte', [10924]], ['smtes', [10924, 65024]], ['SOFTcy', [1068]], ['softcy', [1100]], ['solbar', [9023]], ['solb', [10692]], ['sol', [47]], ['Sopf', [120138]], ['sopf', [120164]], ['spades', [9824]], ['spadesuit', [9824]], ['spar', [8741]], ['sqcap', [8851]], ['sqcaps', [8851, 65024]], ['sqcup', [8852]], ['sqcups', [8852, 65024]], ['Sqrt', [8730]], ['sqsub', [8847]], ['sqsube', [8849]], ['sqsubset', [8847]], ['sqsubseteq', [8849]], ['sqsup', [8848]], ['sqsupe', [8850]], ['sqsupset', [8848]], ['sqsupseteq', [8850]], ['square', [9633]], ['Square', [9633]], ['SquareIntersection', [8851]], ['SquareSubset', [8847]], ['SquareSubsetEqual', [8849]], ['SquareSuperset', [8848]], ['SquareSupersetEqual', [8850]], ['SquareUnion', [8852]], ['squarf', [9642]], ['squ', [9633]], ['squf', [9642]], ['srarr', [8594]], ['Sscr', [119982]], ['sscr', [120008]], ['ssetmn', [8726]], ['ssmile', [8995]], ['sstarf', [8902]], ['Star', [8902]], ['star', [9734]], ['starf', [9733]], ['straightepsilon', [1013]], ['straightphi', [981]], ['strns', [175]], ['sub', [8834]], ['Sub', [8912]], ['subdot', [10941]], ['subE', [10949]], ['sube', [8838]], ['subedot', [10947]], ['submult', [10945]], ['subnE', [10955]], ['subne', [8842]], ['subplus', [10943]], ['subrarr', [10617]], ['subset', [8834]], ['Subset', [8912]], ['subseteq', [8838]], ['subseteqq', [10949]], ['SubsetEqual', [8838]], ['subsetneq', [8842]], ['subsetneqq', [10955]], ['subsim', [10951]], ['subsub', [10965]], ['subsup', [10963]], ['succapprox', [10936]], ['succ', [8827]], ['succcurlyeq', [8829]], ['Succeeds', [8827]], ['SucceedsEqual', [10928]], ['SucceedsSlantEqual', [8829]], ['SucceedsTilde', [8831]], ['succeq', [10928]], ['succnapprox', [10938]], ['succneqq', [10934]], ['succnsim', [8937]], ['succsim', [8831]], ['SuchThat', [8715]], ['sum', [8721]], ['Sum', [8721]], ['sung', [9834]], ['sup1', [185]], ['sup2', [178]], ['sup3', [179]], ['sup', [8835]], ['Sup', [8913]], ['supdot', [10942]], ['supdsub', [10968]], ['supE', [10950]], ['supe', [8839]], ['supedot', [10948]], ['Superset', [8835]], ['SupersetEqual', [8839]], ['suphsol', [10185]], ['suphsub', [10967]], ['suplarr', [10619]], ['supmult', [10946]], ['supnE', [10956]], ['supne', [8843]], ['supplus', [10944]], ['supset', [8835]], ['Supset', [8913]], ['supseteq', [8839]], ['supseteqq', [10950]], ['supsetneq', [8843]], ['supsetneqq', [10956]], ['supsim', [10952]], ['supsub', [10964]], ['supsup', [10966]], ['swarhk', [10534]], ['swarr', [8601]], ['swArr', [8665]], ['swarrow', [8601]], ['swnwar', [10538]], ['szlig', [223]], ['Tab', [9]], ['target', [8982]], ['Tau', [932]], ['tau', [964]], ['tbrk', [9140]], ['Tcaron', [356]], ['tcaron', [357]], ['Tcedil', [354]], ['tcedil', [355]], ['Tcy', [1058]], ['tcy', [1090]], ['tdot', [8411]], ['telrec', [8981]], ['Tfr', [120087]], ['tfr', [120113]], ['there4', [8756]], ['therefore', [8756]], ['Therefore', [8756]], ['Theta', [920]], ['theta', [952]], ['thetasym', [977]], ['thetav', [977]], ['thickapprox', [8776]], ['thicksim', [8764]], ['ThickSpace', [8287, 8202]], ['ThinSpace', [8201]], ['thinsp', [8201]], ['thkap', [8776]], ['thksim', [8764]], ['THORN', [222]], ['thorn', [254]], ['tilde', [732]], ['Tilde', [8764]], ['TildeEqual', [8771]], ['TildeFullEqual', [8773]], ['TildeTilde', [8776]], ['timesbar', [10801]], ['timesb', [8864]], ['times', [215]], ['timesd', [10800]], ['tint', [8749]], ['toea', [10536]], ['topbot', [9014]], ['topcir', [10993]], ['top', [8868]], ['Topf', [120139]], ['topf', [120165]], ['topfork', [10970]], ['tosa', [10537]], ['tprime', [8244]], ['trade', [8482]], ['TRADE', [8482]], ['triangle', [9653]], ['triangledown', [9663]], ['triangleleft', [9667]], ['trianglelefteq', [8884]], ['triangleq', [8796]], ['triangleright', [9657]], ['trianglerighteq', [8885]], ['tridot', [9708]], ['trie', [8796]], ['triminus', [10810]], ['TripleDot', [8411]], ['triplus', [10809]], ['trisb', [10701]], ['tritime', [10811]], ['trpezium', [9186]], ['Tscr', [119983]], ['tscr', [120009]], ['TScy', [1062]], ['tscy', [1094]], ['TSHcy', [1035]], ['tshcy', [1115]], ['Tstrok', [358]], ['tstrok', [359]], ['twixt', [8812]], ['twoheadleftarrow', [8606]], ['twoheadrightarrow', [8608]], ['Uacute', [218]], ['uacute', [250]], ['uarr', [8593]], ['Uarr', [8607]], ['uArr', [8657]], ['Uarrocir', [10569]], ['Ubrcy', [1038]], ['ubrcy', [1118]], ['Ubreve', [364]], ['ubreve', [365]], ['Ucirc', [219]], ['ucirc', [251]], ['Ucy', [1059]], ['ucy', [1091]], ['udarr', [8645]], ['Udblac', [368]], ['udblac', [369]], ['udhar', [10606]], ['ufisht', [10622]], ['Ufr', [120088]], ['ufr', [120114]], ['Ugrave', [217]], ['ugrave', [249]], ['uHar', [10595]], ['uharl', [8639]], ['uharr', [8638]], ['uhblk', [9600]], ['ulcorn', [8988]], ['ulcorner', [8988]], ['ulcrop', [8975]], ['ultri', [9720]], ['Umacr', [362]], ['umacr', [363]], ['uml', [168]], ['UnderBar', [95]], ['UnderBrace', [9183]], ['UnderBracket', [9141]], ['UnderParenthesis', [9181]], ['Union', [8899]], ['UnionPlus', [8846]], ['Uogon', [370]], ['uogon', [371]], ['Uopf', [120140]], ['uopf', [120166]], ['UpArrowBar', [10514]], ['uparrow', [8593]], ['UpArrow', [8593]], ['Uparrow', [8657]], ['UpArrowDownArrow', [8645]], ['updownarrow', [8597]], ['UpDownArrow', [8597]], ['Updownarrow', [8661]], ['UpEquilibrium', [10606]], ['upharpoonleft', [8639]], ['upharpoonright', [8638]], ['uplus', [8846]], ['UpperLeftArrow', [8598]], ['UpperRightArrow', [8599]], ['upsi', [965]], ['Upsi', [978]], ['upsih', [978]], ['Upsilon', [933]], ['upsilon', [965]], ['UpTeeArrow', [8613]], ['UpTee', [8869]], ['upuparrows', [8648]], ['urcorn', [8989]], ['urcorner', [8989]], ['urcrop', [8974]], ['Uring', [366]], ['uring', [367]], ['urtri', [9721]], ['Uscr', [119984]], ['uscr', [120010]], ['utdot', [8944]], ['Utilde', [360]], ['utilde', [361]], ['utri', [9653]], ['utrif', [9652]], ['uuarr', [8648]], ['Uuml', [220]], ['uuml', [252]], ['uwangle', [10663]], ['vangrt', [10652]], ['varepsilon', [1013]], ['varkappa', [1008]], ['varnothing', [8709]], ['varphi', [981]], ['varpi', [982]], ['varpropto', [8733]], ['varr', [8597]], ['vArr', [8661]], ['varrho', [1009]], ['varsigma', [962]], ['varsubsetneq', [8842, 65024]], ['varsubsetneqq', [10955, 65024]], ['varsupsetneq', [8843, 65024]], ['varsupsetneqq', [10956, 65024]], ['vartheta', [977]], ['vartriangleleft', [8882]], ['vartriangleright', [8883]], ['vBar', [10984]], ['Vbar', [10987]], ['vBarv', [10985]], ['Vcy', [1042]], ['vcy', [1074]], ['vdash', [8866]], ['vDash', [8872]], ['Vdash', [8873]], ['VDash', [8875]], ['Vdashl', [10982]], ['veebar', [8891]], ['vee', [8744]], ['Vee', [8897]], ['veeeq', [8794]], ['vellip', [8942]], ['verbar', [124]], ['Verbar', [8214]], ['vert', [124]], ['Vert', [8214]], ['VerticalBar', [8739]], ['VerticalLine', [124]], ['VerticalSeparator', [10072]], ['VerticalTilde', [8768]], ['VeryThinSpace', [8202]], ['Vfr', [120089]], ['vfr', [120115]], ['vltri', [8882]], ['vnsub', [8834, 8402]], ['vnsup', [8835, 8402]], ['Vopf', [120141]], ['vopf', [120167]], ['vprop', [8733]], ['vrtri', [8883]], ['Vscr', [119985]], ['vscr', [120011]], ['vsubnE', [10955, 65024]], ['vsubne', [8842, 65024]], ['vsupnE', [10956, 65024]], ['vsupne', [8843, 65024]], ['Vvdash', [8874]], ['vzigzag', [10650]], ['Wcirc', [372]], ['wcirc', [373]], ['wedbar', [10847]], ['wedge', [8743]], ['Wedge', [8896]], ['wedgeq', [8793]], ['weierp', [8472]], ['Wfr', [120090]], ['wfr', [120116]], ['Wopf', [120142]], ['wopf', [120168]], ['wp', [8472]], ['wr', [8768]], ['wreath', [8768]], ['Wscr', [119986]], ['wscr', [120012]], ['xcap', [8898]], ['xcirc', [9711]], ['xcup', [8899]], ['xdtri', [9661]], ['Xfr', [120091]], ['xfr', [120117]], ['xharr', [10231]], ['xhArr', [10234]], ['Xi', [926]], ['xi', [958]], ['xlarr', [10229]], ['xlArr', [10232]], ['xmap', [10236]], ['xnis', [8955]], ['xodot', [10752]], ['Xopf', [120143]], ['xopf', [120169]], ['xoplus', [10753]], ['xotime', [10754]], ['xrarr', [10230]], ['xrArr', [10233]], ['Xscr', [119987]], ['xscr', [120013]], ['xsqcup', [10758]], ['xuplus', [10756]], ['xutri', [9651]], ['xvee', [8897]], ['xwedge', [8896]], ['Yacute', [221]], ['yacute', [253]], ['YAcy', [1071]], ['yacy', [1103]], ['Ycirc', [374]], ['ycirc', [375]], ['Ycy', [1067]], ['ycy', [1099]], ['yen', [165]], ['Yfr', [120092]], ['yfr', [120118]], ['YIcy', [1031]], ['yicy', [1111]], ['Yopf', [120144]], ['yopf', [120170]], ['Yscr', [119988]], ['yscr', [120014]], ['YUcy', [1070]], ['yucy', [1102]], ['yuml', [255]], ['Yuml', [376]], ['Zacute', [377]], ['zacute', [378]], ['Zcaron', [381]], ['zcaron', [382]], ['Zcy', [1047]], ['zcy', [1079]], ['Zdot', [379]], ['zdot', [380]], ['zeetrf', [8488]], ['ZeroWidthSpace', [8203]], ['Zeta', [918]], ['zeta', [950]], ['zfr', [120119]], ['Zfr', [8488]], ['ZHcy', [1046]], ['zhcy', [1078]], ['zigrarr', [8669]], ['zopf', [120171]], ['Zopf', [8484]], ['Zscr', [119989]], ['zscr', [120015]], ['zwj', [8205]], ['zwnj', [8204]]];

var alphaIndex = {};
var charIndex = {};

createIndexes(alphaIndex, charIndex);

/**
 * @constructor
 */
function Html5Entities() {}

/**
 * @param {String} str
 * @returns {String}
 */
Html5Entities.prototype.decode = function(str) {
    if (!str || !str.length) {
        return '';
    }
    return str.replace(/&(#?[\w\d]+);?/g, function(s, entity) {
        var chr;
        if (entity.charAt(0) === "#") {
            var code = entity.charAt(1) === 'x' ?
                parseInt(entity.substr(2).toLowerCase(), 16) :
                parseInt(entity.substr(1));

            if (!(isNaN(code) || code < -32768 || code > 65535)) {
                chr = String.fromCharCode(code);
            }
        } else {
            chr = alphaIndex[entity];
        }
        return chr || s;
    });
};

/**
 * @param {String} str
 * @returns {String}
 */
 Html5Entities.decode = function(str) {
    return new Html5Entities().decode(str);
 };

/**
 * @param {String} str
 * @returns {String}
 */
Html5Entities.prototype.encode = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLength = str.length;
    var result = '';
    var i = 0;
    while (i < strLength) {
        var charInfo = charIndex[str.charCodeAt(i)];
        if (charInfo) {
            var alpha = charInfo[str.charCodeAt(i + 1)];
            if (alpha) {
                i++;
            } else {
                alpha = charInfo[''];
            }
            if (alpha) {
                result += "&" + alpha + ";";
                i++;
                continue;
            }
        }
        result += str.charAt(i);
        i++;
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
 Html5Entities.encode = function(str) {
    return new Html5Entities().encode(str);
 };

/**
 * @param {String} str
 * @returns {String}
 */
Html5Entities.prototype.encodeNonUTF = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLength = str.length;
    var result = '';
    var i = 0;
    while (i < strLength) {
        var c = str.charCodeAt(i);
        var charInfo = charIndex[c];
        if (charInfo) {
            var alpha = charInfo[str.charCodeAt(i + 1)];
            if (alpha) {
                i++;
            } else {
                alpha = charInfo[''];
            }
            if (alpha) {
                result += "&" + alpha + ";";
                i++;
                continue;
            }
        }
        if (c < 32 || c > 126) {
            result += '&#' + c + ';';
        } else {
            result += str.charAt(i);
        }
        i++;
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
 Html5Entities.encodeNonUTF = function(str) {
    return new Html5Entities().encodeNonUTF(str);
 };

/**
 * @param {String} str
 * @returns {String}
 */
Html5Entities.prototype.encodeNonASCII = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLength = str.length;
    var result = '';
    var i = 0;
    while (i < strLength) {
        var c = str.charCodeAt(i);
        if (c <= 255) {
            result += str[i++];
            continue;
        }
        result += '&#' + c + ';';
        i++
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
 Html5Entities.encodeNonASCII = function(str) {
    return new Html5Entities().encodeNonASCII(str);
 };

/**
 * @param {Object} alphaIndex Passed by reference.
 * @param {Object} charIndex Passed by reference.
 */
function createIndexes(alphaIndex, charIndex) {
    var i = ENTITIES.length;
    var _results = [];
    while (i--) {
        var e = ENTITIES[i];
        var alpha = e[0];
        var chars = e[1];
        var chr = chars[0];
        var addChar = (chr < 32 || chr > 126) || chr === 62 || chr === 60 || chr === 38 || chr === 34 || chr === 39;
        var charInfo;
        if (addChar) {
            charInfo = charIndex[chr] = charIndex[chr] || {};
        }
        if (chars[1]) {
            var chr2 = chars[1];
            alphaIndex[alpha] = String.fromCharCode(chr) + String.fromCharCode(chr2);
            _results.push(addChar && (charInfo[chr2] = alpha));
        } else {
            alphaIndex[alpha] = String.fromCharCode(chr);
            _results.push(addChar && (charInfo[''] = alpha));
        }
    }
}

module.exports = Html5Entities;


/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _preact = __webpack_require__(3);

var _underscore = __webpack_require__(2);

var _ = _interopRequireWildcard(_underscore);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */


/**
 * Wrapper class for better integration of Preact components with Escher.
 * In order to use the ref pass an arrow function to whatever is going to call the ref function
 * i.e. functionThatWillUseRef( () => refProp )
 */

var ReactWrapper = function (_Component) {
  _inherits(ReactWrapper, _Component);

  function ReactWrapper(props) {
    _classCallCheck(this, ReactWrapper);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {};
    return _this;
  }

  ReactWrapper.prototype.componentDidMount = function componentDidMount() {
    this.props.callbackManager.set('setState', this.setState.bind(this));
  };

  ReactWrapper.prototype.render = function render() {
    if (!_.isEmpty(this.state)) {
      return (0, _preact.h)(this.props.component, _extends({}, this.state, {
        ref: this.props.refProp,
        closeMenu: this.props.closeMenu
      }));
    } else {
      return null;
    }
  };

  return ReactWrapper;
}(_preact.Component);

exports.default = ReactWrapper;

/***/ }),
/* 62 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__selection_index__ = __webpack_require__(5);


/* harmony default export */ __webpack_exports__["a"] = (function(selector) {
  return typeof selector === "string"
      ? new __WEBPACK_IMPORTED_MODULE_0__selection_index__["a" /* Selection */]([[document.querySelector(selector)]], [document.documentElement])
      : new __WEBPACK_IMPORTED_MODULE_0__selection_index__["a" /* Selection */]([[selector]], __WEBPACK_IMPORTED_MODULE_0__selection_index__["c" /* root */]);
});


/***/ }),
/* 63 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function empty() {
  return [];
}

/* harmony default export */ __webpack_exports__["a"] = (function(selector) {
  return selector == null ? empty : function() {
    return this.querySelectorAll(selector);
  };
});


/***/ }),
/* 64 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var matcher = function(selector) {
  return function() {
    return this.matches(selector);
  };
};

if (typeof document !== "undefined") {
  var element = document.documentElement;
  if (!element.matches) {
    var vendorMatches = element.webkitMatchesSelector
        || element.msMatchesSelector
        || element.mozMatchesSelector
        || element.oMatchesSelector;
    matcher = function(selector) {
      return function() {
        return vendorMatches.call(this, selector);
      };
    };
  }
}

/* harmony default export */ __webpack_exports__["a"] = (matcher);


/***/ }),
/* 65 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = EnterNode;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sparse__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index__ = __webpack_require__(5);



/* harmony default export */ __webpack_exports__["b"] = (function() {
  return new __WEBPACK_IMPORTED_MODULE_1__index__["a" /* Selection */](this._enter || this._groups.map(__WEBPACK_IMPORTED_MODULE_0__sparse__["a" /* default */]), this._parents);
});

function EnterNode(parent, datum) {
  this.ownerDocument = parent.ownerDocument;
  this.namespaceURI = parent.namespaceURI;
  this._next = null;
  this._parent = parent;
  this.__data__ = datum;
}

EnterNode.prototype = {
  constructor: EnterNode,
  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },
  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },
  querySelector: function(selector) { return this._parent.querySelector(selector); },
  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }
};


/***/ }),
/* 66 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(update) {
  return new Array(update.length);
});


/***/ }),
/* 67 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = styleValue;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__window__ = __webpack_require__(37);


function styleRemove(name) {
  return function() {
    this.style.removeProperty(name);
  };
}

function styleConstant(name, value, priority) {
  return function() {
    this.style.setProperty(name, value, priority);
  };
}

function styleFunction(name, value, priority) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.style.removeProperty(name);
    else this.style.setProperty(name, v, priority);
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value, priority) {
  return arguments.length > 1
      ? this.each((value == null
            ? styleRemove : typeof value === "function"
            ? styleFunction
            : styleConstant)(name, value, priority == null ? "" : priority))
      : styleValue(this.node(), name);
});

function styleValue(node, name) {
  return node.style.getPropertyValue(name)
      || Object(__WEBPACK_IMPORTED_MODULE_0__window__["a" /* default */])(node).getComputedStyle(node, null).getPropertyValue(name);
}


/***/ }),
/* 68 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = yesdrag;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__noevent__ = __webpack_require__(69);



/* harmony default export */ __webpack_exports__["a"] = (function(view) {
  var root = view.document.documentElement,
      selection = Object(__WEBPACK_IMPORTED_MODULE_0_d3_selection__["select"])(view).on("dragstart.drag", __WEBPACK_IMPORTED_MODULE_1__noevent__["a" /* default */], true);
  if ("onselectstart" in root) {
    selection.on("selectstart.drag", __WEBPACK_IMPORTED_MODULE_1__noevent__["a" /* default */], true);
  } else {
    root.__noselect = root.style.MozUserSelect;
    root.style.MozUserSelect = "none";
  }
});

function yesdrag(view, noclick) {
  var root = view.document.documentElement,
      selection = Object(__WEBPACK_IMPORTED_MODULE_0_d3_selection__["select"])(view).on("dragstart.drag", null);
  if (noclick) {
    selection.on("click.drag", __WEBPACK_IMPORTED_MODULE_1__noevent__["a" /* default */], true);
    setTimeout(function() { selection.on("click.drag", null); }, 0);
  }
  if ("onselectstart" in root) {
    selection.on("selectstart.drag", null);
  } else {
    root.style.MozUserSelect = root.__noselect;
    delete root.__noselect;
  }
}


/***/ }),
/* 69 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = nopropagation;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);


function nopropagation() {
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].stopImmediatePropagation();
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].preventDefault();
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].stopImmediatePropagation();
});


/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

var invariant = __webpack_require__(195);

var hasOwnProperty = Object.prototype.hasOwnProperty;
var splice = Array.prototype.splice;

var toString = Object.prototype.toString
var type = function(obj) {
  return toString.call(obj).slice(8, -1);
}

var assign = Object.assign || /* istanbul ignore next */ function assign(target, source) {
  getAllKeys(source).forEach(function(key) {
    if (hasOwnProperty.call(source, key)) {
      target[key] = source[key];
    }
  });
  return target;
};

var getAllKeys = typeof Object.getOwnPropertySymbols === 'function' ?
  function(obj) { return Object.keys(obj).concat(Object.getOwnPropertySymbols(obj)) } :
  /* istanbul ignore next */ function(obj) { return Object.keys(obj) };

/* istanbul ignore next */
function copy(object) {
  if (Array.isArray(object)) {
    return assign(object.constructor(object.length), object)
  } else if (type(object) === 'Map') {
    return new Map(object)
  } else if (type(object) === 'Set') {
    return new Set(object)
  } else if (object && typeof object === 'object') {
    var prototype = object.constructor && object.constructor.prototype
    return assign(Object.create(prototype || null), object);
  } else {
    return object;
  }
}

function newContext() {
  var commands = assign({}, defaultCommands);
  update.extend = function(directive, fn) {
    commands[directive] = fn;
  };
  update.isEquals = function(a, b) { return a === b; };

  return update;

  function update(object, spec) {
    if (typeof spec === 'function') {
      return spec(object);
    }

    if (!(Array.isArray(object) && Array.isArray(spec))) {
      invariant(
        !Array.isArray(spec),
        'update(): You provided an invalid spec to update(). The spec may ' +
        'not contain an array except as the value of $set, $push, $unshift, ' +
        '$splice or any custom command allowing an array value.'
      );
    }

    invariant(
      typeof spec === 'object' && spec !== null,
      'update(): You provided an invalid spec to update(). The spec and ' +
      'every included key path must be plain objects containing one of the ' +
      'following commands: %s.',
      Object.keys(commands).join(', ')
    );

    var nextObject = object;
    var index, key;
    getAllKeys(spec).forEach(function(key) {
      if (hasOwnProperty.call(commands, key)) {
        var objectWasNextObject = object === nextObject;
        nextObject = commands[key](spec[key], nextObject, spec, object);
        if (objectWasNextObject && update.isEquals(nextObject, object)) {
          nextObject = object;
        }
      } else {
        var nextValueForKey = update(object[key], spec[key]);
        if (!update.isEquals(nextValueForKey, nextObject[key]) || typeof nextValueForKey === 'undefined' && !hasOwnProperty.call(object, key)) {
          if (nextObject === object) {
            nextObject = copy(object);
          }
          nextObject[key] = nextValueForKey;
        }
      }
    })
    return nextObject;
  }

}

var defaultCommands = {
  $push: function(value, nextObject, spec) {
    invariantPushAndUnshift(nextObject, spec, '$push');
    return value.length ? nextObject.concat(value) : nextObject;
  },
  $unshift: function(value, nextObject, spec) {
    invariantPushAndUnshift(nextObject, spec, '$unshift');
    return value.length ? value.concat(nextObject) : nextObject;
  },
  $splice: function(value, nextObject, spec, originalObject) {
    invariantSplices(nextObject, spec);
    value.forEach(function(args) {
      invariantSplice(args);
      if (nextObject === originalObject && args.length) nextObject = copy(originalObject);
      splice.apply(nextObject, args);
    });
    return nextObject;
  },
  $set: function(value, nextObject, spec) {
    invariantSet(spec);
    return value;
  },
  $toggle: function(targets, nextObject) {
    invariantSpecArray(targets, '$toggle');
    var nextObjectCopy = targets.length ? copy(nextObject) : nextObject;

    targets.forEach(function(target) {
      nextObjectCopy[target] = !nextObject[target];
    });

    return nextObjectCopy;
  },
  $unset: function(value, nextObject, spec, originalObject) {
    invariantSpecArray(value, '$unset');
    value.forEach(function(key) {
      if (Object.hasOwnProperty.call(nextObject, key)) {
        if (nextObject === originalObject) nextObject = copy(originalObject);
        delete nextObject[key];
      }
    });
    return nextObject;
  },
  $add: function(value, nextObject, spec, originalObject) {
    invariantMapOrSet(nextObject, '$add');
    invariantSpecArray(value, '$add');
    if (type(nextObject) === 'Map') {
      value.forEach(function(pair) {
        var key = pair[0];
        var value = pair[1];
        if (nextObject === originalObject && nextObject.get(key) !== value) nextObject = copy(originalObject);
        nextObject.set(key, value);
      });
    } else {
      value.forEach(function(value) {
        if (nextObject === originalObject && !nextObject.has(value)) nextObject = copy(originalObject);
        nextObject.add(value);
      });
    }
    return nextObject;
  },
  $remove: function(value, nextObject, spec, originalObject) {
    invariantMapOrSet(nextObject, '$remove');
    invariantSpecArray(value, '$remove');
    value.forEach(function(key) {
      if (nextObject === originalObject && nextObject.has(key)) nextObject = copy(originalObject);
      nextObject.delete(key);
    });
    return nextObject;
  },
  $merge: function(value, nextObject, spec, originalObject) {
    invariantMerge(nextObject, value);
    getAllKeys(value).forEach(function(key) {
      if (value[key] !== nextObject[key]) {
        if (nextObject === originalObject) nextObject = copy(originalObject);
        nextObject[key] = value[key];
      }
    });
    return nextObject;
  },
  $apply: function(value, original) {
    invariantApply(value);
    return value(original);
  }
};

module.exports = newContext();
module.exports.newContext = newContext;

// invariants

function invariantPushAndUnshift(value, spec, command) {
  invariant(
    Array.isArray(value),
    'update(): expected target of %s to be an array; got %s.',
    command,
    value
  );
  invariantSpecArray(spec[command], command)
}

function invariantSpecArray(spec, command) {
  invariant(
    Array.isArray(spec),
    'update(): expected spec of %s to be an array; got %s. ' +
    'Did you forget to wrap your parameter in an array?',
    command,
    spec
  );
}

function invariantSplices(value, spec) {
  invariant(
    Array.isArray(value),
    'Expected $splice target to be an array; got %s',
    value
  );
  invariantSplice(spec['$splice']);
}

function invariantSplice(value) {
  invariant(
    Array.isArray(value),
    'update(): expected spec of $splice to be an array of arrays; got %s. ' +
    'Did you forget to wrap your parameters in an array?',
    value
  );
}

function invariantApply(fn) {
  invariant(
    typeof fn === 'function',
    'update(): expected spec of $apply to be a function; got %s.',
    fn
  );
}

function invariantSet(spec) {
  invariant(
    Object.keys(spec).length === 1,
    'Cannot have more than one key in an object with $set'
  );
}

function invariantMerge(target, specValue) {
  invariant(
    specValue && typeof specValue === 'object',
    'update(): $merge expects a spec of type \'object\'; got %s',
    specValue
  );
  invariant(
    target && typeof target === 'object',
    'update(): $merge expects a target of type \'object\'; got %s',
    target
  );
}

function invariantMapOrSet(target, command) {
  var typeOfTarget = type(target);
  invariant(
    typeOfTarget === 'Map' || typeOfTarget === 'Set',
    'update(): %s expects a target of type Set or Map; got %s',
    command,
    typeOfTarget
  );
}


/***/ }),
/* 71 */
/***/ (function(module, exports) {

/**
* vkBeautify - javascript plugin to pretty-print or minify text in XML, JSON, CSS and SQL formats.
*
* Copyright (c) 2012 Vadim Kiryukhin
* vkiryukhin @ gmail.com
* http://www.eslinstructor.net/vkbeautify/
*
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
*   Pretty print
*
*        vkbeautify.xml(text [,indent_pattern]);
*        vkbeautify.json(text [,indent_pattern]);
*        vkbeautify.css(text [,indent_pattern]);
*        vkbeautify.sql(text [,indent_pattern]);
*
*        @text - String; text to beatufy;
*        @indent_pattern - Integer | String;
*                Integer:  number of white spaces;
*                String:   character string to visualize indentation ( can also be a set of white spaces )
*   Minify
*
*        vkbeautify.xmlmin(text [,preserve_comments]);
*        vkbeautify.jsonmin(text);
*        vkbeautify.cssmin(text [,preserve_comments]);
*        vkbeautify.sqlmin(text);
*
*        @text - String; text to minify;
*        @preserve_comments - Bool; [optional];
*                Set this flag to true to prevent removing comments from @text ( minxml and mincss functions only. )
*
*   Examples:
*        vkbeautify.xml(text); // pretty print XML
*        vkbeautify.json(text, 4 ); // pretty print JSON
*        vkbeautify.css(text, '. . . .'); // pretty print CSS
*        vkbeautify.sql(text, '----'); // pretty print SQL
*
*        vkbeautify.xmlmin(text, true);// minify XML, preserve comments
*        vkbeautify.jsonmin(text);// minify JSON
*        vkbeautify.cssmin(text);// minify CSS, remove comments ( default )
*        vkbeautify.sqlmin(text);// minify SQL
*
*/
function createShiftArr(step) {

	var space = '    ';

	if ( isNaN(parseInt(step)) ) {  // argument is string
		space = step;
	} else { // argument is integer
		switch(step) {
			case 1: space = ' '; break;
			case 2: space = '  '; break;
			case 3: space = '   '; break;
			case 4: space = '    '; break;
			case 5: space = '     '; break;
			case 6: space = '      '; break;
			case 7: space = '       '; break;
			case 8: space = '        '; break;
			case 9: space = '         '; break;
			case 10: space = '          '; break;
			case 11: space = '           '; break;
			case 12: space = '            '; break;
		}
	}

	var shift = ['\n']; // array of shifts
	for(var ix=0;ix<100;ix++) {
		shift.push(shift[ix]+space);
	}
	return shift;
}

function vkbeautify(){
	this.step = '    '; // 4 spaces
	this.shift = createShiftArr(this.step);
};

vkbeautify.prototype.xml = function(text,step) {

	var ar = text.replace(/>\s{0,}</g,"><")
				 .replace(/</g,"~::~<")
				 .replace(/\s*xmlns\:/g,"~::~xmlns:")
				 .replace(/\s*xmlns\=/g,"~::~xmlns=")
				 .split('~::~'),
		len = ar.length,
		inComment = false,
		deep = 0,
		str = '',
		ix = 0,
		shift = step ? createShiftArr(step) : this.shift;

		for(ix=0;ix<len;ix++) {
			// start comment or <![CDATA[...]]> or <!DOCTYPE //
			if(ar[ix].search(/<!/) > -1) {
				str += shift[deep]+ar[ix];
				inComment = true;
				// end comment  or <![CDATA[...]]> //
				if(ar[ix].search(/-->/) > -1 || ar[ix].search(/\]>/) > -1 || ar[ix].search(/!DOCTYPE/) > -1 ) {
					inComment = false;
				}
			} else
			// end comment  or <![CDATA[...]]> //
			if(ar[ix].search(/-->/) > -1 || ar[ix].search(/\]>/) > -1) {
				str += ar[ix];
				inComment = false;
			} else
			// <elm></elm> //
			if( /^<\w/.exec(ar[ix-1]) && /^<\/\w/.exec(ar[ix]) &&
				/^<[\w:\-\.\,]+/.exec(ar[ix-1]) == /^<\/[\w:\-\.\,]+/.exec(ar[ix])[0].replace('/','')) {
				str += ar[ix];
				if(!inComment) deep--;
			} else
			 // <elm> //
			if(ar[ix].search(/<\w/) > -1 && ar[ix].search(/<\//) == -1 && ar[ix].search(/\/>/) == -1 ) {
				str = !inComment ? str += shift[deep++]+ar[ix] : str += ar[ix];
			} else
			 // <elm>...</elm> //
			if(ar[ix].search(/<\w/) > -1 && ar[ix].search(/<\//) > -1) {
				str = !inComment ? str += shift[deep]+ar[ix] : str += ar[ix];
			} else
			// </elm> //
			if(ar[ix].search(/<\//) > -1) {
				str = !inComment ? str += shift[--deep]+ar[ix] : str += ar[ix];
			} else
			// <elm/> //
			if(ar[ix].search(/\/>/) > -1 ) {
				str = !inComment ? str += shift[deep]+ar[ix] : str += ar[ix];
			} else
			// <? xml ... ?> //
			if(ar[ix].search(/<\?/) > -1) {
				str += shift[deep]+ar[ix];
			} else
			// xmlns //
			if( ar[ix].search(/xmlns\:/) > -1  || ar[ix].search(/xmlns\=/) > -1) {
				str += shift[deep]+ar[ix];
			}

			else {
				str += ar[ix];
			}
		}

	return  (str[0] == '\n') ? str.slice(1) : str;
}

vkbeautify.prototype.json = function(text,step) {

	var step = step ? step : this.step;

	if (typeof JSON === 'undefined' ) return text;

	if ( typeof text === "string" ) return JSON.stringify(JSON.parse(text), null, step);
	if ( typeof text === "object" ) return JSON.stringify(text, null, step);

	return text; // text is not string nor object
}

vkbeautify.prototype.css = function(text, step) {

	var ar = text.replace(/\s{1,}/g,' ')
				.replace(/\{/g,"{~::~")
				.replace(/\}/g,"~::~}~::~")
				.replace(/\;/g,";~::~")
				.replace(/\/\*/g,"~::~/*")
				.replace(/\*\//g,"*/~::~")
				.replace(/~::~\s{0,}~::~/g,"~::~")
				.split('~::~'),
		len = ar.length,
		deep = 0,
		str = '',
		ix = 0,
		shift = step ? createShiftArr(step) : this.shift;

		for(ix=0;ix<len;ix++) {

			if( /\{/.exec(ar[ix]))  {
				str += shift[deep++]+ar[ix];
			} else
			if( /\}/.exec(ar[ix]))  {
				str += shift[--deep]+ar[ix];
			} else
			if( /\*\\/.exec(ar[ix]))  {
				str += shift[deep]+ar[ix];
			}
			else {
				str += shift[deep]+ar[ix];
			}
		}
		return str.replace(/^\n{1,}/,'');
}

//----------------------------------------------------------------------------

function isSubquery(str, parenthesisLevel) {
	return  parenthesisLevel - (str.replace(/\(/g,'').length - str.replace(/\)/g,'').length )
}

function split_sql(str, tab) {

	return str.replace(/\s{1,}/g," ")

				.replace(/ AND /ig,"~::~"+tab+tab+"AND ")
				.replace(/ BETWEEN /ig,"~::~"+tab+"BETWEEN ")
				.replace(/ CASE /ig,"~::~"+tab+"CASE ")
				.replace(/ ELSE /ig,"~::~"+tab+"ELSE ")
				.replace(/ END /ig,"~::~"+tab+"END ")
				.replace(/ FROM /ig,"~::~FROM ")
				.replace(/ GROUP\s{1,}BY/ig,"~::~GROUP BY ")
				.replace(/ HAVING /ig,"~::~HAVING ")
				//.replace(/ SET /ig," SET~::~")
				.replace(/ IN /ig," IN ")

				.replace(/ JOIN /ig,"~::~JOIN ")
				.replace(/ CROSS~::~{1,}JOIN /ig,"~::~CROSS JOIN ")
				.replace(/ INNER~::~{1,}JOIN /ig,"~::~INNER JOIN ")
				.replace(/ LEFT~::~{1,}JOIN /ig,"~::~LEFT JOIN ")
				.replace(/ RIGHT~::~{1,}JOIN /ig,"~::~RIGHT JOIN ")

				.replace(/ ON /ig,"~::~"+tab+"ON ")
				.replace(/ OR /ig,"~::~"+tab+tab+"OR ")
				.replace(/ ORDER\s{1,}BY/ig,"~::~ORDER BY ")
				.replace(/ OVER /ig,"~::~"+tab+"OVER ")

				.replace(/\(\s{0,}SELECT /ig,"~::~(SELECT ")
				.replace(/\)\s{0,}SELECT /ig,")~::~SELECT ")

				.replace(/ THEN /ig," THEN~::~"+tab+"")
				.replace(/ UNION /ig,"~::~UNION~::~")
				.replace(/ USING /ig,"~::~USING ")
				.replace(/ WHEN /ig,"~::~"+tab+"WHEN ")
				.replace(/ WHERE /ig,"~::~WHERE ")
				.replace(/ WITH /ig,"~::~WITH ")

				//.replace(/\,\s{0,}\(/ig,",~::~( ")
				//.replace(/\,/ig,",~::~"+tab+tab+"")

				.replace(/ ALL /ig," ALL ")
				.replace(/ AS /ig," AS ")
				.replace(/ ASC /ig," ASC ")
				.replace(/ DESC /ig," DESC ")
				.replace(/ DISTINCT /ig," DISTINCT ")
				.replace(/ EXISTS /ig," EXISTS ")
				.replace(/ NOT /ig," NOT ")
				.replace(/ NULL /ig," NULL ")
				.replace(/ LIKE /ig," LIKE ")
				.replace(/\s{0,}SELECT /ig,"SELECT ")
				.replace(/\s{0,}UPDATE /ig,"UPDATE ")
				.replace(/ SET /ig," SET ")

				.replace(/~::~{1,}/g,"~::~")
				.split('~::~');
}

vkbeautify.prototype.sql = function(text,step) {

	var ar_by_quote = text.replace(/\s{1,}/g," ")
							.replace(/\'/ig,"~::~\'")
							.split('~::~'),
		len = ar_by_quote.length,
		ar = [],
		deep = 0,
		tab = this.step,//+this.step,
		inComment = true,
		inQuote = false,
		parenthesisLevel = 0,
		str = '',
		ix = 0,
		shift = step ? createShiftArr(step) : this.shift;;

		for(ix=0;ix<len;ix++) {
			if(ix%2) {
				ar = ar.concat(ar_by_quote[ix]);
			} else {
				ar = ar.concat(split_sql(ar_by_quote[ix], tab) );
			}
		}

		len = ar.length;
		for(ix=0;ix<len;ix++) {

			parenthesisLevel = isSubquery(ar[ix], parenthesisLevel);

			if( /\s{0,}\s{0,}SELECT\s{0,}/.exec(ar[ix]))  {
				ar[ix] = ar[ix].replace(/\,/g,",\n"+tab+tab+"")
			}

			if( /\s{0,}\s{0,}SET\s{0,}/.exec(ar[ix]))  {
				ar[ix] = ar[ix].replace(/\,/g,",\n"+tab+tab+"")
			}

			if( /\s{0,}\(\s{0,}SELECT\s{0,}/.exec(ar[ix]))  {
				deep++;
				str += shift[deep]+ar[ix];
			} else
			if( /\'/.exec(ar[ix]) )  {
				if(parenthesisLevel<1 && deep) {
					deep--;
				}
				str += ar[ix];
			}
			else  {
				str += shift[deep]+ar[ix];
				if(parenthesisLevel<1 && deep) {
					deep--;
				}
			}
			var junk = 0;
		}

		str = str.replace(/^\n{1,}/,'').replace(/\n{1,}/g,"\n");
		return str;
}


vkbeautify.prototype.xmlmin = function(text, preserveComments) {

	var str = preserveComments ? text
							   : text.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"")
									 .replace(/[ \r\n\t]{1,}xmlns/g, ' xmlns');
	return  str.replace(/>\s{0,}</g,"><");
}

vkbeautify.prototype.jsonmin = function(text) {

	if (typeof JSON === 'undefined' ) return text;

	return JSON.stringify(JSON.parse(text), null, 0);

}

vkbeautify.prototype.cssmin = function(text, preserveComments) {

	var str = preserveComments ? text
							   : text.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"") ;

	return str.replace(/\s{1,}/g,' ')
			  .replace(/\{\s{1,}/g,"{")
			  .replace(/\}\s{1,}/g,"}")
			  .replace(/\;\s{1,}/g,";")
			  .replace(/\/\*\s{1,}/g,"/*")
			  .replace(/\*\/\s{1,}/g,"*/");
}

vkbeautify.prototype.sqlmin = function(text) {
	return text.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")");
}

module.exports = new vkbeautify();


/***/ }),
/* 72 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_nest__ = __webpack_require__(214);
/* unused harmony reexport nest */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_set__ = __webpack_require__(215);
/* unused harmony reexport set */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_map__ = __webpack_require__(41);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_2__src_map__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_keys__ = __webpack_require__(216);
/* unused harmony reexport keys */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_values__ = __webpack_require__(217);
/* unused harmony reexport values */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_entries__ = __webpack_require__(218);
/* unused harmony reexport entries */








/***/ }),
/* 73 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__request__ = __webpack_require__(40);


/* harmony default export */ __webpack_exports__["a"] = (function(defaultMimeType, parse) {
  return function(url, row, callback) {
    if (arguments.length < 3) callback = row, row = null;
    var r = Object(__WEBPACK_IMPORTED_MODULE_0__request__["a" /* default */])(url).mimeType(defaultMimeType);
    r.row = function(_) { return arguments.length ? r.response(responseOf(parse, row = _)) : row; };
    r.row(row);
    return callback ? r.get(callback) : r;
  };
});

function responseOf(parse, row) {
  return function(request) {
    return parse(request.responseText, row);
  };
}


/***/ }),
/* 74 */
/***/ (function(module, exports) {

module.exports = function() {
	throw new Error("define cannot be used indirect");
};


/***/ }),
/* 75 */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(exports, {}))

/***/ }),
/* 76 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__exponent__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__formatGroup__ = __webpack_require__(232);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__formatNumerals__ = __webpack_require__(233);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__formatSpecifier__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__formatTypes__ = __webpack_require__(78);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__formatPrefixAuto__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__identity__ = __webpack_require__(236);








var prefixes = ["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];

/* harmony default export */ __webpack_exports__["a"] = (function(locale) {
  var group = locale.grouping && locale.thousands ? Object(__WEBPACK_IMPORTED_MODULE_1__formatGroup__["a" /* default */])(locale.grouping, locale.thousands) : __WEBPACK_IMPORTED_MODULE_6__identity__["a" /* default */],
      currency = locale.currency,
      decimal = locale.decimal,
      numerals = locale.numerals ? Object(__WEBPACK_IMPORTED_MODULE_2__formatNumerals__["a" /* default */])(locale.numerals) : __WEBPACK_IMPORTED_MODULE_6__identity__["a" /* default */],
      percent = locale.percent || "%";

  function newFormat(specifier) {
    specifier = Object(__WEBPACK_IMPORTED_MODULE_3__formatSpecifier__["a" /* default */])(specifier);

    var fill = specifier.fill,
        align = specifier.align,
        sign = specifier.sign,
        symbol = specifier.symbol,
        zero = specifier.zero,
        width = specifier.width,
        comma = specifier.comma,
        precision = specifier.precision,
        type = specifier.type;

    // Compute the prefix and suffix.
    // For SI-prefix, the suffix is lazily computed.
    var prefix = symbol === "$" ? currency[0] : symbol === "#" && /[boxX]/.test(type) ? "0" + type.toLowerCase() : "",
        suffix = symbol === "$" ? currency[1] : /[%p]/.test(type) ? percent : "";

    // What format function should we use?
    // Is this an integer type?
    // Can this type generate exponential notation?
    var formatType = __WEBPACK_IMPORTED_MODULE_4__formatTypes__["a" /* default */][type],
        maybeSuffix = !type || /[defgprs%]/.test(type);

    // Set the default precision if not specified,
    // or clamp the specified precision to the supported range.
    // For significant precision, it must be in [1, 21].
    // For fixed precision, it must be in [0, 20].
    precision = precision == null ? (type ? 6 : 12)
        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))
        : Math.max(0, Math.min(20, precision));

    function format(value) {
      var valuePrefix = prefix,
          valueSuffix = suffix,
          i, n, c;

      if (type === "c") {
        valueSuffix = formatType(value) + valueSuffix;
        value = "";
      } else {
        value = +value;

        // Perform the initial formatting.
        var valueNegative = value < 0;
        value = formatType(Math.abs(value), precision);

        // If a negative value rounds to zero during formatting, treat as positive.
        if (valueNegative && +value === 0) valueNegative = false;

        // Compute the prefix and suffix.
        valuePrefix = (valueNegative ? (sign === "(" ? sign : "-") : sign === "-" || sign === "(" ? "" : sign) + valuePrefix;
        valueSuffix = (type === "s" ? prefixes[8 + __WEBPACK_IMPORTED_MODULE_5__formatPrefixAuto__["b" /* prefixExponent */] / 3] : "") + valueSuffix + (valueNegative && sign === "(" ? ")" : "");

        // Break the formatted value into the integer “value” part that can be
        // grouped, and fractional or exponential “suffix” part that is not.
        if (maybeSuffix) {
          i = -1, n = value.length;
          while (++i < n) {
            if (c = value.charCodeAt(i), 48 > c || c > 57) {
              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;
              value = value.slice(0, i);
              break;
            }
          }
        }
      }

      // If the fill character is not "0", grouping is applied before padding.
      if (comma && !zero) value = group(value, Infinity);

      // Compute the padding.
      var length = valuePrefix.length + value.length + valueSuffix.length,
          padding = length < width ? new Array(width - length + 1).join(fill) : "";

      // If the fill character is "0", grouping is applied after padding.
      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = "";

      // Reconstruct the final output based on the desired alignment.
      switch (align) {
        case "<": value = valuePrefix + value + valueSuffix + padding; break;
        case "=": value = valuePrefix + padding + value + valueSuffix; break;
        case "^": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;
        default: value = padding + valuePrefix + value + valueSuffix; break;
      }

      return numerals(value);
    }

    format.toString = function() {
      return specifier + "";
    };

    return format;
  }

  function formatPrefix(specifier, value) {
    var f = newFormat((specifier = Object(__WEBPACK_IMPORTED_MODULE_3__formatSpecifier__["a" /* default */])(specifier), specifier.type = "f", specifier)),
        e = Math.max(-8, Math.min(8, Math.floor(Object(__WEBPACK_IMPORTED_MODULE_0__exponent__["a" /* default */])(value) / 3))) * 3,
        k = Math.pow(10, -e),
        prefix = prefixes[8 + e / 3];
    return function(value) {
      return f(k * value) + prefix;
    };
  }

  return {
    format: newFormat,
    formatPrefix: formatPrefix
  };
});


/***/ }),
/* 77 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = formatSpecifier;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__formatTypes__ = __webpack_require__(78);


// [[fill]align][sign][symbol][0][width][,][.precision][type]
var re = /^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;

function formatSpecifier(specifier) {
  return new FormatSpecifier(specifier);
}

formatSpecifier.prototype = FormatSpecifier.prototype; // instanceof

function FormatSpecifier(specifier) {
  if (!(match = re.exec(specifier))) throw new Error("invalid format: " + specifier);

  var match,
      fill = match[1] || " ",
      align = match[2] || ">",
      sign = match[3] || "-",
      symbol = match[4] || "",
      zero = !!match[5],
      width = match[6] && +match[6],
      comma = !!match[7],
      precision = match[8] && +match[8].slice(1),
      type = match[9] || "";

  // The "n" type is an alias for ",g".
  if (type === "n") comma = true, type = "g";

  // Map invalid types to the default format.
  else if (!__WEBPACK_IMPORTED_MODULE_0__formatTypes__["a" /* default */][type]) type = "";

  // If zero fill is specified, padding goes after sign and before digits.
  if (zero || (fill === "0" && align === "=")) zero = true, fill = "0", align = "=";

  this.fill = fill;
  this.align = align;
  this.sign = sign;
  this.symbol = symbol;
  this.zero = zero;
  this.width = width;
  this.comma = comma;
  this.precision = precision;
  this.type = type;
}

FormatSpecifier.prototype.toString = function() {
  return this.fill
      + this.align
      + this.sign
      + this.symbol
      + (this.zero ? "0" : "")
      + (this.width == null ? "" : Math.max(1, this.width | 0))
      + (this.comma ? "," : "")
      + (this.precision == null ? "" : "." + Math.max(0, this.precision | 0))
      + this.type;
};


/***/ }),
/* 78 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__formatDefault__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__formatPrefixAuto__ = __webpack_require__(79);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__formatRounded__ = __webpack_require__(235);




/* harmony default export */ __webpack_exports__["a"] = ({
  "": __WEBPACK_IMPORTED_MODULE_0__formatDefault__["a" /* default */],
  "%": function(x, p) { return (x * 100).toFixed(p); },
  "b": function(x) { return Math.round(x).toString(2); },
  "c": function(x) { return x + ""; },
  "d": function(x) { return Math.round(x).toString(10); },
  "e": function(x, p) { return x.toExponential(p); },
  "f": function(x, p) { return x.toFixed(p); },
  "g": function(x, p) { return x.toPrecision(p); },
  "o": function(x) { return Math.round(x).toString(8); },
  "p": function(x, p) { return Object(__WEBPACK_IMPORTED_MODULE_2__formatRounded__["a" /* default */])(x * 100, p); },
  "r": __WEBPACK_IMPORTED_MODULE_2__formatRounded__["a" /* default */],
  "s": __WEBPACK_IMPORTED_MODULE_1__formatPrefixAuto__["a" /* default */],
  "X": function(x) { return Math.round(x).toString(16).toUpperCase(); },
  "x": function(x) { return Math.round(x).toString(16); }
});


/***/ }),
/* 79 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return prefixExponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__formatDecimal__ = __webpack_require__(46);


var prefixExponent;

/* harmony default export */ __webpack_exports__["a"] = (function(x, p) {
  var d = Object(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a" /* default */])(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1],
      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,
      n = coefficient.length;
  return i === n ? coefficient
      : i > n ? coefficient + new Array(i - n + 1).join("0")
      : i > 0 ? coefficient.slice(0, i) + "." + coefficient.slice(i)
      : "0." + new Array(1 - i).join("0") + Object(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a" /* default */])(x, Math.max(0, p + i - 1))[0]; // less than 1y!
});


/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * ZoomContainer
 */

var utils = __webpack_require__(1);
var CallbackManager = __webpack_require__(17);
var _ = __webpack_require__(2);
var d3_zoom = __webpack_require__(47).zoom;
var d3_zoomTransform = __webpack_require__(47).zoomTransform;
var d3_zoomIdentity = __webpack_require__(47).zoomIdentity;
var d3_select = __webpack_require__(0).select;
var d3_selection = __webpack_require__(0);

var ZoomContainer = utils.make_class();
ZoomContainer.prototype = {
  init: init,
  set_scroll_behavior: set_scroll_behavior,
  set_use_3d_transform: set_use_3d_transform,
  _update_scroll: _update_scroll,
  toggle_pan_drag: toggle_pan_drag,
  go_to: go_to,
  _go_to_callback: _go_to_callback,
  _go_to_3d: _go_to_3d,
  _clear_3d: _clear_3d,
  _go_to_svg: _go_to_svg,
  zoom_by: zoom_by,
  zoom_in: zoom_in,
  zoom_out: zoom_out,
  get_size: get_size,
  translate_off_screen: translate_off_screen
};
module.exports = ZoomContainer;

/**
 * Make a container that will manage panning and zooming. Creates a new SVG
 * element, with a parent div for CSS3 3D transforms.
 *
 * @param {D3 Selection} selection - A d3 selection of a HTML node to put the
 * zoom container in. Should have a defined width and height.
 *
 * @param {String} scroll_behavior - Either 'zoom' or 'pan'.
 *
 * @param {Boolean} use_3d_transform - If true, then use CSS3 3D transform to
 * speed up pan and zoom.
 *
 * @param {Boolean} fill_screen - If true, then apply styles to body and
 * selection that fill the screen. The styled classes are 'fill-screen-body' and
 * 'fill-screen-div'.
 */
function init(selection, scroll_behavior, use_3d_transform, fill_screen) {
  // set the selection class
  selection.classed('escher-container', true);

  // Stop scrolling on mobile
  // Only necessary for Safari because touch-action CSS is supported by all other browsers
  // TODO Zak needs to figure out why this doesn't work on Safari
  if (navigator && navigator.userAgent && navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Mozilla') === -1) {
    selection.on('touchstart touchmove', function () {
      d3_selection.event.stopPropagation();
    });
  }

  // fill screen classes
  if (fill_screen) {
    d3_select('html').classed('fill-screen', true);
    d3_select('body').classed('fill-screen', true);
    selection.classed('fill-screen-div', true);
  }

  // make the svg
  var zoom_container = selection.append('div').attr('class', 'escher-zoom-container');

  var css3_transform_container = zoom_container.append('div').attr('class', 'escher-3d-transform-container');

  var svg = css3_transform_container.append('svg').attr('class', 'escher-svg').attr('xmlns', 'http://www.w3.org/2000/svg');

  // set up the zoom container
  svg.select('.zoom-g').remove();
  var zoomed_sel = svg.append('g').attr('class', 'zoom-g');

  // attributes
  this.selection = selection;
  this.zoom_container = zoom_container;
  this.css3_transform_container = css3_transform_container;
  this.svg = svg;
  this.zoomed_sel = zoomed_sel;
  this.window_translate = { x: 0, y: 0 };
  this.window_scale = 1.0;

  this._scroll_behavior = scroll_behavior;
  this._use_3d_transform = use_3d_transform;
  this._pan_drag_on = true;
  this._zoom_behavior = null;
  this._zoom_timeout = null;
  this._svg_scale = this.window_scale;
  this._svg_translate = this.window_translate;
  // this._last_svg_ms = null

  // set up the callbacks
  this.callback_manager = new CallbackManager();

  // update the scroll behavior
  this._update_scroll();
}

/**
 * Set up pan or zoom on scroll.
 * @param {String} scroll_behavior - 'none', 'pan' or 'zoom'.
 */
function set_scroll_behavior(scroll_behavior) {
  this._scroll_behavior = scroll_behavior;
  this._update_scroll();
}

/**
 * Set the option use_3d_transform
 */
function set_use_3d_transform(use_3d_transform) {
  this._use_3d_transform = use_3d_transform;
}

/**
 * Toggle the zoom drag and the cursor UI for it.
 */
function toggle_pan_drag(on_off) {
  if (_.isUndefined(on_off)) {
    this._pan_drag_on = !this._pan_drag_on;
  } else {
    this._pan_drag_on = on_off;
  }

  if (this._pan_drag_on) {
    // turn on the hand
    this.zoomed_sel.classed('cursor-grab', true).classed('cursor-grabbing', false);
  } else {
    // turn off the hand
    this.zoomed_sel.style('cursor', null).classed('cursor-grab', false).classed('cursor-grabbing', false);
  }

  // update the behaviors
  this._update_scroll();
}

/**
 * Update the pan and zoom behaviors. The behaviors are applied to the
 * css3_transform_container node.
 */
function _update_scroll() {
  if (!_.contains(['zoom', 'pan', 'none'], this._scroll_behavior)) {
    throw Error('Bad value for scroll_behavior: ' + this._scroll_behavior);
  }

  // clear all behaviors
  this.zoom_container.on('mousewheel.zoom', null) // zoom scroll behaviors
  .on('DOMMouseScroll.zoom', null) // disables older versions of Firefox
  .on('wheel.zoom', null) // disables newer versions of Firefox
  .on('dblclick.zoom', null).on('mousewheel.escher', null) // pan scroll behaviors
  .on('DOMMouseScroll.escher', null).on('wheel.escher', null).on('mousedown.zoom', null) // drag behaviors
  .on('touchstart.zoom', null).on('touchmove.zoom', null).on('touchend.zoom', null);

  // This handles dragging to pan, and touch events (in any scroll mode). It
  // also handles scrolling to zoom (only 'zoom' mode). It also raises an
  // exception in node, so catch that during testing. This may be a bug with
  // d3 related to d3 using the global this.document. TODO look into this.
  this._zoom_behavior = d3_zoom().on('start', function () {
    if (d3_selection.event.sourceEvent && d3_selection.event.sourceEvent.type === 'mousedown') {
      this.zoomed_sel.classed('cursor-grab', false).classed('cursor-grabbing', true);
    }
    // Prevent default zoom behavior, specifically for mobile pinch zoom
    if (d3_selection.event.sourceEvent !== null) {
      d3_selection.event.sourceEvent.stopPropagation();
      d3_selection.event.sourceEvent.preventDefault();
    }
  }.bind(this)).on('zoom', function () {
    this._go_to_callback(d3_selection.event.transform.k, {
      x: d3_selection.event.transform.x,
      y: d3_selection.event.transform.y
    });
  }.bind(this)).on('end', function () {
    if (d3_selection.event.sourceEvent && d3_selection.event.sourceEvent.type === 'mouseup') {
      this.zoomed_sel.classed('cursor-grab', true).classed('cursor-grabbing', false);
    }
  }.bind(this));

  // Set it up
  this.zoom_container.call(this._zoom_behavior);

  // Always turn off double-clicking to zoom
  this.zoom_container.on('dblclick.zoom', null);

  // If panning is off, then turn off these listeners
  if (!this._pan_drag_on) {
    this.zoom_container.on('mousedown.zoom', null).on('touchstart.zoom', null).on('touchmove.zoom', null).on('touchend.zoom', null);
  }

  // If scroll to zoom is off, then turn off these listeners
  if (this._scroll_behavior !== 'zoom') {
    this.zoom_container.on('mousewheel.zoom', null) // zoom scroll behaviors
    .on('DOMMouseScroll.zoom', null) // disables older versions of Firefox
    .on('wheel.zoom', null); // disables newer versions of Firefox
  }

  // add listeners for scrolling to pan
  if (this._scroll_behavior === 'pan') {
    // Add the wheel listener
    var wheel_fn = function () {
      var ev = d3_selection.event;
      var sensitivity = 0.5;
      // stop scroll in parent elements
      ev.stopPropagation();
      ev.preventDefault();
      ev.returnValue = false;
      // change the location
      var get_directional_disp = function get_directional_disp(wheel_delta, delta) {
        var the_delt = _.isUndefined(wheel_delta) ? delta : -wheel_delta / 1.5;
        return the_delt * sensitivity;
      };
      var new_translate = {
        x: this.window_translate.x - get_directional_disp(ev.wheelDeltaX, ev.deltaX),
        y: this.window_translate.y - get_directional_disp(ev.wheelDeltaY, ev.deltaY)
      };
      this.go_to(this.window_scale, new_translate);
    }.bind(this);

    // apply it
    this.zoom_container.on('mousewheel.escher', wheel_fn);
    this.zoom_container.on('DOMMouseScroll.escher', wheel_fn);
    this.zoom_container.on('wheel.escher', wheel_fn);
  }

  // Set current location
  this.go_to(this.window_scale, this.window_translate);
}

// ------------------------------------------------------------
// Functions to scale and translate
// ------------------------------------------------------------

/**
 * Zoom the container to a specified location.
 * @param {Number} scale - The scale, between 0 and 1.
 * @param {Object} translate - The location, of the form {x: 2.0, y: 3.0}.
 */
function go_to(scale, translate) {
  utils.check_undefined(arguments, ['scale', 'translate']);

  // Check inputs
  if (!scale) {
    throw new Error('Bad scale value');
  }
  if (!translate || !('x' in translate) || !('y' in translate) || _.isNaN(translate.x) || _.isNaN(translate.y)) {
    throw new Error('Bad translate value');
  }

  // Save to zoom behavior, which will call _go_to_callback
  var new_zoom = d3_zoomIdentity.translate(translate.x, translate.y).scale(scale);
  this.zoom_container.call(this._zoom_behavior.transform, new_zoom);
}

/**
 * Execute the zoom called by the d3 zoom behavior.
 * @param {Number} scale - The scale, between 0 and 1
 * @param {Object} translate - The location, of the form { x: 2.0, y: 3.0 }
 */
function _go_to_callback(scale, translate) {
  this.window_scale = scale;
  this.window_translate = translate;

  var use_3d_transform = this._use_3d_transform;

  if (use_3d_transform) {
    // 3d tranform
    // cancel all timeouts
    if (!_.isNull(this._zoom_timeout)) {
      clearTimeout(this._zoom_timeout);
    }

    // set the 3d transform
    this._go_to_3d(scale, translate, this._svg_scale, this._svg_translate);

    // if another go_to does not happen within the delay time, then
    // redraw the svg
    this._zoom_timeout = _.delay(function () {
      // redraw the svg
      this._go_to_svg(scale, translate);
    }.bind(this), 100); // between 100 and 600 seems to be usable
  } else {
    // no 3d transform
    this._go_to_svg(scale, translate);
  }

  this.callback_manager.run('go_to');
}

/**
 * Zoom & pan the CSS 3D transform container
 */
function _go_to_3d(scale, translate, svg_scale, svg_translate) {
  var n_scale = scale / svg_scale;
  var n_translate = utils.c_minus_c(translate, utils.c_times_scalar(svg_translate, n_scale));
  var transform = 'translate(' + n_translate.x + 'px,' + n_translate.y + 'px) ' + 'scale(' + n_scale + ')';
  this.css3_transform_container.style('transform', transform);
  this.css3_transform_container.style('-webkit-transform', transform);
  this.css3_transform_container.style('transform-origin', '0 0');
  this.css3_transform_container.style('-webkit-transform-origin', '0 0');
}

function _clear_3d() {
  this.css3_transform_container.style('transform', null);
  this.css3_transform_container.style('-webkit-transform', null);
  this.css3_transform_container.style('transform-origin', null);
  this.css3_transform_container.style('-webkit-transform-origin', null);
}

/**
 * Zoom & pan the svg element. Also runs the svg_start and svg_finish callbacks.
 * @param {Number} scale - The scale, between 0 and 1.
 * @param {Object} translate - The location, of the form {x: 2.0, y: 3.0}.
 * @param {Function} callback - (optional) A callback to run after scaling.
 */
function _go_to_svg(scale, translate, callback) {
  this.callback_manager.run('svg_start');

  // defer to update callbacks
  _.defer(function () {

    // start time
    // var start = new Date().getTime()

    // reset the 3d transform
    this._clear_3d();

    // redraw the svg
    this.zoomed_sel.attr('transform', 'translate(' + translate.x + ',' + translate.y + ') ' + 'scale(' + scale + ')');
    // save svg location
    this._svg_scale = scale;
    this._svg_translate = translate;

    _.defer(function () {
      // defer for callback after draw
      this.callback_manager.run('svg_finish');

      if (!_.isUndefined(callback)) callback();

      // wait a few ms to get a reliable end time
      // _.delay(function () {
      //     // end time
      //     var t = new Date().getTime() - start
      //     this._last_svg_ms = t
      // }.bind(this), 20)
    }.bind(this));
  }.bind(this));
}

/**
 * Zoom by a specified multiplier.
 * @param {Number} amount - A multiplier for the zoom. Greater than 1 zooms in
 * and less than 1 zooms out.
 */
function zoom_by(amount) {
  var size = this.get_size();
  var shift = {
    x: size.width / 2 - ((size.width / 2 - this.window_translate.x) * amount + this.window_translate.x),
    y: size.height / 2 - ((size.height / 2 - this.window_translate.y) * amount + this.window_translate.y)
  };
  this.go_to(this.window_scale * amount, utils.c_plus_c(this.window_translate, shift));
}

/**
 * Zoom in by the default amount with the default options.
 */
function zoom_in() {
  this.zoom_by(1.5);
}

/**
 * Zoom out by the default amount with the default options.
 */
function zoom_out() {
  this.zoom_by(0.667);
}

/**
 * Return the size of the zoom container as coordinates. Throws an error if
 * width or height is not defined.
 * @returns {Object} The size coordinates, e.g. { x: 2, y: 3 }.
 */
function get_size() {
  var width = parseInt(this.selection.style('width'), 10);
  var height = parseInt(this.selection.style('height'), 10);
  if (_.isNaN(width) || _.isNaN(height)) {
    throw new Error('Size not defined for ZoomContainer element.');
  }
  return { width: width, height: height };
}

/**
 * Shift window if new reaction will draw off the screen.
 */
function translate_off_screen(coords) {
  // TODO BUG not accounting for scale correctly

  var margin = 120; // pixels
  var size = this.get_size();
  var current = {
    x: {
      min: -this.window_translate.x / this.window_scale + margin / this.window_scale,
      max: -this.window_translate.x / this.window_scale + (size.width - margin) / this.window_scale
    },
    y: {
      min: -this.window_translate.y / this.window_scale + margin / this.window_scale,
      max: -this.window_translate.y / this.window_scale + (size.height - margin) / this.window_scale
    }
  };

  if (coords.x < current.x.min) {
    this.window_translate.x = this.window_translate.x - (coords.x - current.x.min) * this.window_scale;
    this.go_to(this.window_scale, this.window_translate);
  } else if (coords.x > current.x.max) {
    this.window_translate.x = this.window_translate.x - (coords.x - current.x.max) * this.window_scale;
    this.go_to(this.window_scale, this.window_translate);
  }
  if (coords.y < current.y.min) {
    this.window_translate.y = this.window_translate.y - (coords.y - current.y.min) * this.window_scale;
    this.go_to(this.window_scale, this.window_translate);
  } else if (coords.y > current.y.max) {
    this.window_translate.y = this.window_translate.y - (coords.y - current.y.max) * this.window_scale;
    this.go_to(this.window_scale, this.window_translate);
  }
}

/***/ }),
/* 81 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return deg2rad; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return rad2deg; });
var deg2rad = Math.PI / 180;
var rad2deg = 180 / Math.PI;


/***/ }),
/* 82 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export rgbBasis */
/* unused harmony export rgbBasisClosed */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basis__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__basisClosed__ = __webpack_require__(83);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__color__ = __webpack_require__(22);





/* harmony default export */ __webpack_exports__["a"] = ((function rgbGamma(y) {
  var color = Object(__WEBPACK_IMPORTED_MODULE_3__color__["b" /* gamma */])(y);

  function rgb(start, end) {
    var r = color((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["f" /* rgb */])(start)).r, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["f" /* rgb */])(end)).r),
        g = color(start.g, end.g),
        b = color(start.b, end.b),
        opacity = Object(__WEBPACK_IMPORTED_MODULE_3__color__["a" /* default */])(start.opacity, end.opacity);
    return function(t) {
      start.r = r(t);
      start.g = g(t);
      start.b = b(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }

  rgb.gamma = rgbGamma;

  return rgb;
})(1));

function rgbSpline(spline) {
  return function(colors) {
    var n = colors.length,
        r = new Array(n),
        g = new Array(n),
        b = new Array(n),
        i, color;
    for (i = 0; i < n; ++i) {
      color = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["f" /* rgb */])(colors[i]);
      r[i] = color.r || 0;
      g[i] = color.g || 0;
      b[i] = color.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color.opacity = 1;
    return function(t) {
      color.r = r(t);
      color.g = g(t);
      color.b = b(t);
      return color + "";
    };
  };
}

var rgbBasis = rgbSpline(__WEBPACK_IMPORTED_MODULE_1__basis__["b" /* default */]);
var rgbBasisClosed = rgbSpline(__WEBPACK_IMPORTED_MODULE_2__basisClosed__["a" /* default */]);


/***/ }),
/* 83 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basis__ = __webpack_require__(51);


/* harmony default export */ __webpack_exports__["a"] = (function(values) {
  var n = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),
        v0 = values[(i + n - 1) % n],
        v1 = values[i % n],
        v2 = values[(i + 1) % n],
        v3 = values[(i + 2) % n];
    return Object(__WEBPACK_IMPORTED_MODULE_0__basis__["a" /* basis */])((t - i / n) * n, v0, v1, v2, v3);
  };
});


/***/ }),
/* 84 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return function() {
    return x;
  };
});


/***/ }),
/* 85 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(48);


/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  var nb = b ? b.length : 0,
      na = a ? Math.min(nb, a.length) : 0,
      x = new Array(na),
      c = new Array(nb),
      i;

  for (i = 0; i < na; ++i) x[i] = Object(__WEBPACK_IMPORTED_MODULE_0__value__["a" /* default */])(a[i], b[i]);
  for (; i < nb; ++i) c[i] = b[i];

  return function(t) {
    for (i = 0; i < na; ++i) c[i] = x[i](t);
    return c;
  };
});


/***/ }),
/* 86 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  var d = new Date;
  return a = +a, b -= a, function(t) {
    return d.setTime(a + b * t), d;
  };
});


/***/ }),
/* 87 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(48);


/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  var i = {},
      c = {},
      k;

  if (a === null || typeof a !== "object") a = {};
  if (b === null || typeof b !== "object") b = {};

  for (k in b) {
    if (k in a) {
      i[k] = Object(__WEBPACK_IMPORTED_MODULE_0__value__["a" /* default */])(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }

  return function(t) {
    for (k in i) c[k] = i[k](t);
    return c;
  };
});


/***/ }),
/* 88 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(30);


var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
    reB = new RegExp(reA.source, "g");

function zero(b) {
  return function() {
    return b;
  };
}

function one(b) {
  return function(t) {
    return b(t) + "";
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b
      am, // current match in a
      bm, // current match in b
      bs, // string preceding current number in b, if any
      i = -1, // index in s
      s = [], // string constants and placeholders
      q = []; // number interpolators

  // Coerce inputs to strings.
  a = a + "", b = b + "";

  // Interpolate pairs of numbers in a & b.
  while ((am = reA.exec(a))
      && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) { // a string precedes the next number in b
      bs = b.slice(bi, bs);
      if (s[i]) s[i] += bs; // coalesce with previous string
      else s[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match
      if (s[i]) s[i] += bm; // coalesce with previous string
      else s[++i] = bm;
    } else { // interpolate non-matching numbers
      s[++i] = null;
      q.push({i: i, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(am, bm)});
    }
    bi = reB.lastIndex;
  }

  // Add remains of b.
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i]) s[i] += bs; // coalesce with previous string
    else s[++i] = bs;
  }

  // Special optimization for only a single match.
  // Otherwise, interpolate each of the numbers and rejoin the string.
  return s.length < 2 ? (q[0]
      ? one(q[0].x)
      : zero(b))
      : (b = q.length, function(t) {
          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);
          return s.join("");
        });
});


/***/ }),
/* 89 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_selection_index__ = __webpack_require__(253);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_transition_index__ = __webpack_require__(13);
/* unused harmony reexport transition */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_active__ = __webpack_require__(284);
/* unused harmony reexport active */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_interrupt__ = __webpack_require__(90);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_3__src_interrupt__["a"]; });






/***/ }),
/* 90 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__transition_schedule__ = __webpack_require__(6);


/* harmony default export */ __webpack_exports__["a"] = (function(node, name) {
  var schedules = node.__transition,
      schedule,
      active,
      empty = true,
      i;

  if (!schedules) return;

  name = name == null ? null : name + "";

  for (i in schedules) {
    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }
    active = schedule.state > __WEBPACK_IMPORTED_MODULE_0__transition_schedule__["d" /* STARTING */] && schedule.state < __WEBPACK_IMPORTED_MODULE_0__transition_schedule__["b" /* ENDING */];
    schedule.state = __WEBPACK_IMPORTED_MODULE_0__transition_schedule__["a" /* ENDED */];
    schedule.timer.stop();
    if (active) schedule.on.call("interrupt", node, node.__data__, schedule.index, schedule.group);
    delete schedules[i];
  }

  if (empty) delete node.__transition;
});


/***/ }),
/* 91 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_timer__ = __webpack_require__(52);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__src_timer__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return __WEBPACK_IMPORTED_MODULE_0__src_timer__["c"]; });
/* unused harmony reexport timerFlush */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_timeout__ = __webpack_require__(255);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_1__src_timeout__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_interval__ = __webpack_require__(256);
/* unused harmony reexport interval */







/***/ }),
/* 92 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(9);



/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  var c;
  return (typeof b === "number" ? __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["c" /* interpolateNumber */]
      : b instanceof __WEBPACK_IMPORTED_MODULE_0_d3_color__["a" /* color */] ? __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["d" /* interpolateRgb */]
      : (c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["a" /* color */])(b)) ? (b = c, __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["d" /* interpolateRgb */])
      : __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["f" /* interpolateString */])(a, b);
});


/***/ }),
/* 93 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_linear__ = __webpack_require__(274);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeLinear", function() { return __WEBPACK_IMPORTED_MODULE_0__src_linear__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_quad__ = __webpack_require__(275);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeQuad", function() { return __WEBPACK_IMPORTED_MODULE_1__src_quad__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeQuadIn", function() { return __WEBPACK_IMPORTED_MODULE_1__src_quad__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeQuadOut", function() { return __WEBPACK_IMPORTED_MODULE_1__src_quad__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeQuadInOut", function() { return __WEBPACK_IMPORTED_MODULE_1__src_quad__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_cubic__ = __webpack_require__(276);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCubic", function() { return __WEBPACK_IMPORTED_MODULE_2__src_cubic__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCubicIn", function() { return __WEBPACK_IMPORTED_MODULE_2__src_cubic__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCubicOut", function() { return __WEBPACK_IMPORTED_MODULE_2__src_cubic__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCubicInOut", function() { return __WEBPACK_IMPORTED_MODULE_2__src_cubic__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_poly__ = __webpack_require__(277);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easePoly", function() { return __WEBPACK_IMPORTED_MODULE_3__src_poly__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easePolyIn", function() { return __WEBPACK_IMPORTED_MODULE_3__src_poly__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easePolyOut", function() { return __WEBPACK_IMPORTED_MODULE_3__src_poly__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easePolyInOut", function() { return __WEBPACK_IMPORTED_MODULE_3__src_poly__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_sin__ = __webpack_require__(278);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeSin", function() { return __WEBPACK_IMPORTED_MODULE_4__src_sin__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeSinIn", function() { return __WEBPACK_IMPORTED_MODULE_4__src_sin__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeSinOut", function() { return __WEBPACK_IMPORTED_MODULE_4__src_sin__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeSinInOut", function() { return __WEBPACK_IMPORTED_MODULE_4__src_sin__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_exp__ = __webpack_require__(279);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeExp", function() { return __WEBPACK_IMPORTED_MODULE_5__src_exp__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeExpIn", function() { return __WEBPACK_IMPORTED_MODULE_5__src_exp__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeExpOut", function() { return __WEBPACK_IMPORTED_MODULE_5__src_exp__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeExpInOut", function() { return __WEBPACK_IMPORTED_MODULE_5__src_exp__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_circle__ = __webpack_require__(280);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCircle", function() { return __WEBPACK_IMPORTED_MODULE_6__src_circle__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCircleIn", function() { return __WEBPACK_IMPORTED_MODULE_6__src_circle__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCircleOut", function() { return __WEBPACK_IMPORTED_MODULE_6__src_circle__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeCircleInOut", function() { return __WEBPACK_IMPORTED_MODULE_6__src_circle__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__src_bounce__ = __webpack_require__(281);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBounce", function() { return __WEBPACK_IMPORTED_MODULE_7__src_bounce__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBounceIn", function() { return __WEBPACK_IMPORTED_MODULE_7__src_bounce__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBounceOut", function() { return __WEBPACK_IMPORTED_MODULE_7__src_bounce__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBounceInOut", function() { return __WEBPACK_IMPORTED_MODULE_7__src_bounce__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__src_back__ = __webpack_require__(282);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBack", function() { return __WEBPACK_IMPORTED_MODULE_8__src_back__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBackIn", function() { return __WEBPACK_IMPORTED_MODULE_8__src_back__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBackOut", function() { return __WEBPACK_IMPORTED_MODULE_8__src_back__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeBackInOut", function() { return __WEBPACK_IMPORTED_MODULE_8__src_back__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__src_elastic__ = __webpack_require__(283);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeElastic", function() { return __WEBPACK_IMPORTED_MODULE_9__src_elastic__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeElasticIn", function() { return __WEBPACK_IMPORTED_MODULE_9__src_elastic__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeElasticOut", function() { return __WEBPACK_IMPORTED_MODULE_9__src_elastic__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "easeElasticInOut", function() { return __WEBPACK_IMPORTED_MODULE_9__src_elastic__["b"]; });





















/***/ }),
/* 94 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = Transform;
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return identity; });
/* harmony export (immutable) */ __webpack_exports__["b"] = transform;
function Transform(k, x, y) {
  this.k = k;
  this.x = x;
  this.y = y;
}

Transform.prototype = {
  constructor: Transform,
  scale: function(k) {
    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);
  },
  translate: function(x, y) {
    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);
  },
  apply: function(point) {
    return [point[0] * this.k + this.x, point[1] * this.k + this.y];
  },
  applyX: function(x) {
    return x * this.k + this.x;
  },
  applyY: function(y) {
    return y * this.k + this.y;
  },
  invert: function(location) {
    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];
  },
  invertX: function(x) {
    return (x - this.x) / this.k;
  },
  invertY: function(y) {
    return (y - this.y) / this.k;
  },
  rescaleX: function(x) {
    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));
  },
  rescaleY: function(y) {
    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};

var identity = new Transform(1, 0, 0);

transform.prototype = Transform.prototype;

function transform(node) {
  return node.__zoom || identity;
}


/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** Map

    Defines the metabolic map data, and manages drawing and building.

    Arguments
    ---------

    svg: The parent SVG container for the map.

    css:

    selection: A d3 selection for a node to place the map inside.

    selection:

    zoom_container:

    settings:

    cobra_model:

    canvas_size_and_loc:

    enable_search:

    map_name: (Optional, Default: 'new map')

    map_id: (Optional, Default: A string of random characters.)

    map_description: (Optional, Default: '')

    Callbacks
    ---------

    map.callback_manager.run('set_status', null, status)
    map.callback_manager.run('toggle_beziers', null, beziers_enabled)
    map.callback_manager.run('select_metabolite_with_id', null, selected_node, coords)
    map.callback_manager.run('select_selectable', null, node_count, selected_node, coords)
    map.callback_manager.run('deselect_nodes')
    map.callback_manager.run('select_text_label')
    map.callback_manager.run('before_svg_export')
    map.callback_manager.run('after_svg_export')
    map.callback_manager.run('before_png_export')
    map.callback_manager.run('after_png_export')
    map.callback_manager.run('before_convert_map')
    map.callback_manager.run('after_convert_map')
    this.callback_manager.run('calc_data_stats__reaction', null, changed)
    this.callback_manager.run('calc_data_stats__metabolite', null, changed)

*/

var utils = __webpack_require__(1);
var Draw = __webpack_require__(288);
var Behavior = __webpack_require__(96);
var Scale = __webpack_require__(289);
var build = __webpack_require__(53);
var UndoStack = __webpack_require__(117);
var CallbackManager = __webpack_require__(17);
var KeyManager = __webpack_require__(118);
var Canvas = __webpack_require__(338);
var data_styles = __webpack_require__(20);
var SearchIndex = __webpack_require__(120);

var bacon = __webpack_require__(58);
var _ = __webpack_require__(2);
var d3_select = __webpack_require__(0).select;

var Map = utils.make_class();
// class methods
Map.from_data = from_data;
// instance methods
Map.prototype = {
  // setup
  init: init,
  // more setup
  setup_containers: setup_containers,
  reset_containers: reset_containers,
  // appearance
  set_status: set_status,
  clear_map: clear_map,
  // selection
  select_all: select_all,
  select_none: select_none,
  invert_selection: invert_selection,
  select_selectable: select_selectable,
  select_metabolite_with_id: select_metabolite_with_id,
  select_single_node: select_single_node,
  deselect_nodes: deselect_nodes,
  select_text_label: select_text_label,
  deselect_text_labels: deselect_text_labels,
  // build
  new_reaction_from_scratch: new_reaction_from_scratch,
  extend_nodes: extend_nodes,
  extend_reactions: extend_reactions,
  new_reaction_for_metabolite: new_reaction_for_metabolite,
  cycle_primary_node: cycle_primary_node,
  toggle_selected_node_primary: toggle_selected_node_primary,
  add_label_to_search_index: add_label_to_search_index,
  new_text_label: new_text_label,
  edit_text_label: edit_text_label,
  // delete
  delete_selected: delete_selected,
  delete_selectable: delete_selectable,
  delete_node_data: delete_node_data,
  delete_segment_data: delete_segment_data,
  delete_reaction_data: delete_reaction_data,
  delete_text_label_data: delete_text_label_data,
  // find
  get_selected_node_ids: get_selected_node_ids,
  get_selected_nodes: get_selected_nodes,
  get_selected_text_label_ids: get_selected_text_label_ids,
  get_selected_text_labels: get_selected_text_labels,
  segments_and_reactions_for_nodes: segments_and_reactions_for_nodes,
  // draw
  draw_everything: draw_everything,
  // draw reactions
  draw_all_reactions: draw_all_reactions,
  draw_these_reactions: draw_these_reactions,
  clear_deleted_reactions: clear_deleted_reactions,
  // draw nodes
  draw_all_nodes: draw_all_nodes,
  draw_these_nodes: draw_these_nodes,
  clear_deleted_nodes: clear_deleted_nodes,
  // draw text_labels
  draw_all_text_labels: draw_all_text_labels,
  draw_these_text_labels: draw_these_text_labels,
  clear_deleted_text_labels: clear_deleted_text_labels,
  // draw beziers
  draw_all_beziers: draw_all_beziers,
  draw_these_beziers: draw_these_beziers,
  clear_deleted_beziers: clear_deleted_beziers,
  toggle_beziers: toggle_beziers,
  hide_beziers: hide_beziers,
  show_beziers: show_beziers,
  // data
  has_cobra_model: has_cobra_model,
  apply_reaction_data_to_map: apply_reaction_data_to_map,
  apply_metabolite_data_to_map: apply_metabolite_data_to_map,
  apply_gene_data_to_map: apply_gene_data_to_map,
  // data statistics
  get_data_statistics: get_data_statistics,
  calc_data_stats: calc_data_stats,
  set_reactions_for_data_scales: set_reactions_for_data_scales,
  set_nodes_for_data_scales: set_nodes_for_data_scales,
  // zoom
  zoom_extent_nodes: zoom_extent_nodes,
  zoom_extent_canvas: zoom_extent_canvas,
  _zoom_extent: _zoom_extent,
  get_size: get_size,
  zoom_to_reaction: zoom_to_reaction,
  zoom_to_node: zoom_to_node,
  zoom_to_text_label: zoom_to_text_label,
  highlight_reaction: highlight_reaction,
  highlight_node: highlight_node,
  highlight_text_label: highlight_text_label,
  highlight: highlight,
  // full screen
  listen_for_full_screen: listen_for_full_screen,
  unlisten_for_full_screen: unlisten_for_full_screen,
  full_screen: full_screen,
  // io
  save: save,
  map_for_export: map_for_export,
  save_svg: save_svg,
  save_png: save_png,
  convert_map: convert_map
};
module.exports = Map;

// -------------------------------------------------------------------------
// Setup
// -------------------------------------------------------------------------

function init(svg, css, selection, zoom_container, settings, cobra_model, canvas_size_and_loc, enable_search, map_name, map_id, map_description) {
  if (canvas_size_and_loc === null) {
    var size = zoom_container.get_size();
    canvas_size_and_loc = {
      x: -size.width,
      y: -size.height,
      width: size.width * 3,
      height: size.height * 3
    };
  }

  if (_.isUndefined(map_name) || map_name === null || map_name === '') {
    map_name = 'new_map';
  } else {
    map_name = String(map_name);
  }

  if (_.isUndefined(map_id) || map_id === null || map_id === '') {
    map_id = utils.generate_map_id();
  } else {
    map_id = String(map_id);
  }

  if (_.isUndefined(map_description) || map_description === null) {
    map_description = '';
  } else {
    map_description = String(map_description);
  }

  // set up the callbacks
  this.callback_manager = new CallbackManager();

  // set up the defs
  this.svg = svg;
  this.defs = utils.setup_defs(svg, css);

  // make the canvas
  this.canvas = new Canvas(selection, canvas_size_and_loc);

  this.setup_containers(selection);
  this.sel = selection;
  this.zoom_container = zoom_container;

  this.settings = settings;

  // set the model AFTER loading the datasets
  this.cobra_model = cobra_model;

  this.largest_ids = {
    reactions: -1,
    nodes: -1,
    segments: -1,
    text_labels: -1

    // make the scales
  };this.scale = new Scale();
  // initialize stats
  this.nodes_for_data_scales = [];
  this.reactions_for_data_scales = [];

  this.calc_data_stats('reaction');
  this.calc_data_stats('metabolite');
  this.scale.connect_to_settings(this.settings, this, get_data_statistics.bind(this));

  // time series animation
  this.transition_duration = 2000;

  // make the undo/redo stack
  this.undo_stack = new UndoStack();

  // make a behavior object
  this.behavior = new Behavior(this, this.undo_stack);

  // draw manager
  this.draw = new Draw(this.behavior, this.settings, this);

  // make a key manager
  this.key_manager = new KeyManager();
  this.key_manager.ctrl_equals_cmd = true;

  // make the search index
  this.enable_search = enable_search;
  this.search_index = new SearchIndex();

  // map properties
  this.map_name = map_name;
  this.map_id = map_id;
  this.map_description = map_description;

  // deal with the window
  var window_translate = { x: 0, y: 0 };
  var window_scale = 1;

  // hide beziers
  this.beziers_enabled = false;

  // data
  this.has_data_on_reactions = false;
  this.has_data_on_nodes = false;
  this.imported_reaction_data = null;
  this.imported_metabolite_data = null;
  this.imported_gene_data = null;

  this.nodes = {};
  this.reactions = {};
  this.beziers = {};
  this.text_labels = {};

  // update data with null to populate data-specific attributes
  this.apply_reaction_data_to_map(null);
  this.apply_metabolite_data_to_map(null);
  this.apply_gene_data_to_map(null);

  // rotation mode off
  this.rotation_on = false;

  // set up full screen listener
  this.listen_for_full_screen(function () {
    setTimeout(function () {
      this.zoom_extent_canvas();
    }.bind(this), 50);
  }.bind(this));
}

// -------------------------------------------------------------------------
// Import
// -------------------------------------------------------------------------

/**
 * Load a json map and add necessary fields for rendering.
 */
function from_data(map_data, svg, css, selection, zoom_container, settings, cobra_model, enable_search) {
  var canvas = map_data[1].canvas;
  var map_name = map_data[0].map_name;
  var map_id = map_data[0].map_id;
  var map_description = map_data[0].map_description.replace(/(\nLast Modified.*)+$/g, '') + '\nLast Modified ' + Date(Date.now()).toString();
  var map = new Map(svg, css, selection, zoom_container, settings, cobra_model, canvas, enable_search, map_name, map_id, map_description);

  map.reactions = map_data[1].reactions;
  map.nodes = map_data[1].nodes;
  map.text_labels = map_data[1].text_labels;

  for (var n_id in map.nodes) {
    var node = map.nodes[n_id];

    // clear all the connected segments
    node.connected_segments = [];

    //  populate the nodes search index.
    if (enable_search) {
      if (node.node_type !== 'metabolite') continue;
      map.search_index.insert('n' + n_id, { name: node.bigg_id,
        data: { type: 'metabolite',
          node_id: n_id } });
      map.search_index.insert('n_name' + n_id, { name: node.name,
        data: { type: 'metabolite',
          node_id: n_id } });
    }
  }

  // Propagate coefficients and reversibility, build the connected
  // segments, add bezier points, and populate the reaction search index.
  for (var r_id in map.reactions) {
    var reaction = map.reactions[r_id];

    // reaction search index
    if (enable_search) {
      map.search_index.insert('r' + r_id, { 'name': reaction.bigg_id,
        'data': { type: 'reaction',
          reaction_id: r_id } });
      map.search_index.insert('r_name' + r_id, { 'name': reaction.name,
        'data': { type: 'reaction',
          reaction_id: r_id } });
      for (var g_id in reaction.genes) {
        var gene = reaction.genes[g_id];
        map.search_index.insert('r' + r_id + '_g' + g_id, { 'name': gene.bigg_id,
          'data': { type: 'reaction',
            reaction_id: r_id } });
        map.search_index.insert('r' + r_id + '_g_name' + g_id, { 'name': gene.name,
          'data': { type: 'reaction',
            reaction_id: r_id } });
      }
    }

    // keep track of any bad segments
    var segments_to_delete = [];
    for (var s_id in reaction.segments) {
      var segment = reaction.segments[s_id];

      // propagate reversibility
      segment.reversibility = reaction.reversibility;

      // if there is an error with to_ or from_ nodes, remove this segment
      if (!(segment.from_node_id in map.nodes) || !(segment.to_node_id in map.nodes)) {
        console.warn('Bad node references in segment ' + s_id + '. Deleting segment.');
        segments_to_delete.push(s_id);
        continue;
      }

      var from_node = map.nodes[segment.from_node_id],
          to_node = map.nodes[segment.to_node_id];

      // propagate coefficients
      reaction.metabolites.forEach(function (met) {
        if (met.bigg_id == from_node.bigg_id) {
          segment.from_node_coefficient = met.coefficient;
        } else if (met.bigg_id == to_node.bigg_id) {
          segment.to_node_coefficient = met.coefficient;
        }
      })

      // build connected segments
      ;[from_node, to_node].forEach(function (node) {
        node.connected_segments.push({ segment_id: s_id,
          reaction_id: r_id });
      });

      // If the metabolite has no bezier points, then add them.
      var start = map.nodes[segment.from_node_id],
          end = map.nodes[segment.to_node_id];
      if (start['node_type'] == 'metabolite' || end['node_type'] == 'metabolite') {
        var midpoint = utils.c_plus_c(start, utils.c_times_scalar(utils.c_minus_c(end, start), 0.5));
        if (segment.b1 === null) segment.b1 = midpoint;
        if (segment.b2 === null) segment.b2 = midpoint;
      }
    }
    // delete the bad segments
    segments_to_delete.forEach(function (s_id) {
      delete reaction.segments[s_id];
    });
  }

  // add text_labels to the search index
  if (enable_search) {
    for (var label_id in map.text_labels) {
      var label = map.text_labels[label_id];
      map.search_index.insert('l' + label_id, { 'name': label.text,
        'data': { type: 'text_label',
          text_label_id: label_id } });
    }
  }

  // populate the beziers
  map.beziers = build.new_beziers_for_reactions(map.reactions);

  // get largest ids for adding new reactions, nodes, text labels, and
  // segments
  map.largest_ids.reactions = get_largest_id(map.reactions);
  map.largest_ids.nodes = get_largest_id(map.nodes);
  map.largest_ids.text_labels = get_largest_id(map.text_labels);

  var largest_segment_id = 0;
  for (var id in map.reactions) {
    largest_segment_id = get_largest_id(map.reactions[id].segments, largest_segment_id);
  }
  map.largest_ids.segments = largest_segment_id;

  // update data with null to populate data-specific attributes
  map.apply_reaction_data_to_map(null);
  map.apply_metabolite_data_to_map(null);
  map.apply_gene_data_to_map(null);

  return map;

  /**
   * Return the largest integer key in obj, or current_largest, whichever is
   * bigger.
   */
  function get_largest_id(obj, current_largest) {
    if (_.isUndefined(current_largest)) current_largest = 0;
    if (_.isUndefined(obj)) return current_largest;
    return Math.max.apply(null, Object.keys(obj).map(function (x) {
      return parseInt(x);
    }).concat([current_largest]));
  }
}

// ---------------------------------------------------------------------
// more setup

function setup_containers(sel) {
  sel.append('g').attr('id', 'reactions');
  sel.append('g').attr('id', 'nodes');
  sel.append('g').attr('id', 'beziers');
  sel.append('g').attr('id', 'text-labels');
}
function reset_containers() {
  this.sel.select('#reactions').selectAll('.reaction').remove();
  this.sel.select('#nodes').selectAll('.node').remove();
  this.sel.select('#beziers').selectAll('.bezier').remove();
  this.sel.select('#text-labels').selectAll('.text-label').remove();
}

// -------------------------------------------------------------------------
// Appearance
// -------------------------------------------------------------------------

function set_status(status, time) {
  /** Set the status of the map, with an optional expiration
      time. Rendering the status is taken care of by the Builder.
       Arguments
      ---------
       status: The status string.
       time: An optional time, in ms, after which the status is set to ''.
   */

  this.callback_manager.run('set_status', null, status);
  // clear any other timers on the status bar
  clearTimeout(this._status_timer);
  this._status_timer = null;

  if (time !== undefined) {
    this._status_timer = setTimeout(function () {
      this.callback_manager.run('set_status', null, '');
    }.bind(this), time);
  }
}
function clear_map() {
  this.reactions = {};
  this.beziers = {};
  this.nodes = {};
  this.nodes_for_data_scales = [];
  this.reactions_for_data_scales = [];
  this.text_labels = {};
  this.map_name = 'new_map';
  this.map_id = utils.generate_map_id();
  this.map_description = '';
  // reaction_data onto existing map reactions
  this.apply_reaction_data_to_map(null);
  this.apply_metabolite_data_to_map(null);
  this.apply_gene_data_to_map(null);
  this.draw_everything();
}
function has_cobra_model() {
  return this.cobra_model !== null;
}
function draw_everything() {
  /** Draw the all reactions, nodes, & text labels.
    */
  this.draw_all_reactions(true, true); // also draw beziers
  this.draw_all_nodes(true);
  this.draw_all_text_labels();
}

function draw_all_reactions(draw_beziers, clear_deleted) {
  /** Draw all reactions, and clear deleted reactions.
       Arguments
      ---------
       draw_beziers: (Boolean, default True) Whether to also draw the bezier
      control points.
       clear_deleted: (Optional, Default: true) Boolean, if true, then also
      clear deleted nodes.
   */
  if (_.isUndefined(draw_beziers)) draw_beziers = true;
  if (_.isUndefined(clear_deleted)) clear_deleted = true;

  // Draw all reactions.
  var reaction_ids = [];
  for (var reaction_id in this.reactions) {
    reaction_ids.push(reaction_id);
  }
  // If draw_beziers is true, just draw them all, rather than deciding
  // which ones to draw.
  this.draw_these_reactions(reaction_ids, false);
  if (draw_beziers && this.beziers_enabled) this.draw_all_beziers();

  // Clear all deleted reactions.
  if (clear_deleted) this.clear_deleted_reactions(draw_beziers);
}

/**
 * Draw specific reactions. Does nothing with exit selection. Use
 * clear_deleted_reactions to remove reactions from the DOM.
 * reactions_ids: An array of reaction_ids to update.
 * draw_beziers: (Boolean, default True) Whether to also draw the bezier control
 * points.
 */
function draw_these_reactions(reaction_ids, draw_beziers) {
  if (_.isUndefined(draw_beziers)) draw_beziers = true;

  // find reactions for reaction_ids
  var reaction_subset = utils.object_slice_for_ids_ref(this.reactions, reaction_ids);

  // function to update reactions
  var update_fn = function (sel) {
    return this.draw.update_reaction(sel, this.scale, this.cobra_model, this.nodes, this.defs, this.has_data_on_reactions, this.interpolation, this.transition_duration);
  }.bind(this);

  // draw the reactions
  utils.draw_an_object(this.sel, '#reactions', '.reaction', reaction_subset, 'reaction_id', this.draw.create_reaction.bind(this.draw), update_fn);

  if (draw_beziers) {
    // particular beziers to draw
    var bezier_ids = build.bezier_ids_for_reaction_ids(reaction_subset);
    this.draw_these_beziers(bezier_ids);
  }
}

/**
 * Remove any reactions that are not in *this.reactions*.
 * draw_beziers: (Boolean, default True) Whether to also clear deleted bezier
 * control points.
 */
function clear_deleted_reactions(draw_beziers) {
  if (_.isUndefined(draw_beziers)) draw_beziers = true;

  // Remove deleted reactions and segments
  utils.draw_an_object(this.sel, '#reactions', '.reaction', this.reactions, 'reaction_id', null, function (update_selection) {
    // Draw segments
    utils.draw_a_nested_object(update_selection, '.segment-group', 'segments', 'segment_id', null, null, function (sel) {
      sel.remove();
    });
  }, function (sel) {
    sel.remove();
  });

  if (draw_beziers === true) {
    this.clear_deleted_beziers();
  }
}

function draw_all_nodes(clear_deleted) {
  /** Draw all nodes, and clear deleted nodes.
       Arguments
      ---------
       clear_deleted: (Optional, Default: true) Boolean, if true, then also
      clear deleted nodes.
   */
  if (clear_deleted === undefined) clear_deleted = true;

  var node_ids = [];
  for (var node_id in this.nodes) {
    node_ids.push(node_id);
  }
  this.draw_these_nodes(node_ids);

  // clear the deleted nodes
  if (clear_deleted) this.clear_deleted_nodes();
}

function draw_these_nodes(node_ids) {
  /** Draw specific nodes.
       Does nothing with exit selection. Use clear_deleted_nodes to remove
      nodes from the DOM.
       Arguments
      ---------
       nodes_ids: An array of node_ids to update.
   */
  // find reactions for reaction_ids
  var node_subset = utils.object_slice_for_ids_ref(this.nodes, node_ids);

  // functions to create and update nodes
  var create_fn = function (sel) {
    return this.draw.create_node(sel, this.nodes, this.reactions);
  }.bind(this);
  var update_fn = function (sel) {
    return this.draw.update_node(sel, this.scale, this.has_data_on_nodes, this.behavior.selectable_mousedown, this.behavior.selectable_click, this.behavior.node_mouseover, this.behavior.node_mouseout, this.behavior.selectable_drag, this.behavior.node_label_drag, this.interpolation, this.transition_duration);
  }.bind(this);

  // draw the nodes
  utils.draw_an_object(this.sel, '#nodes', '.node', node_subset, 'node_id', create_fn, update_fn);
}

/**
 * Remove any nodes that are not in *this.nodes*.
 */
function clear_deleted_nodes() {
  // Run remove for exit selection
  utils.draw_an_object(this.sel, '#nodes', '.node', this.nodes, 'node_id', null, null, function (sel) {
    sel.remove();
  });
}

/**
 * Draw all text_labels.
 */
function draw_all_text_labels() {
  this.draw_these_text_labels(Object.keys(this.text_labels));

  // Clear all deleted text_labels
  this.clear_deleted_text_labels();
}

/**
 * Draw specific text_labels. Does nothing with exit selection. Use
 * clear_deleted_text_labels to remove text_labels from the DOM.
 * @param {Array} text_labels_ids - An array of text_label_ids to update.
 */
function draw_these_text_labels(text_label_ids) {
  // Find reactions for reaction_ids
  var text_label_subset = utils.object_slice_for_ids_ref(this.text_labels, text_label_ids);

  // Draw the text_labels
  utils.draw_an_object(this.sel, '#text-labels', '.text-label', text_label_subset, 'text_label_id', this.draw.create_text_label.bind(this.draw), this.draw.update_text_label.bind(this.draw));
}

/**
 * Remove any text_labels that are not in *this.text_labels*.
 */
function clear_deleted_text_labels() {
  utils.draw_an_object(this.sel, '#text-labels', '.text-label', this.text_labels, 'text_label_id', null, null, function (sel) {
    sel.remove();
  });
}

/**
 * Draw all beziers, and clear deleted reactions.
 */
function draw_all_beziers() {
  var bezier_ids = [];
  for (var bezier_id in this.beziers) {
    bezier_ids.push(bezier_id);
  }
  this.draw_these_beziers(bezier_ids);

  // clear delete beziers
  this.clear_deleted_beziers();
}

function draw_these_beziers(bezier_ids) {
  /** Draw specific beziers.
       Does nothing with exit selection. Use clear_deleted_beziers to remove
      beziers from the DOM.
       Arguments
      ---------
       beziers_ids: An array of bezier_ids to update.
   */
  // find reactions for reaction_ids
  var bezier_subset = utils.object_slice_for_ids_ref(this.beziers, bezier_ids);

  // function to update beziers
  var update_fn = function (sel) {
    return this.draw.update_bezier(sel, this.beziers_enabled, this.behavior.bezier_drag, this.behavior.bezier_mouseover, this.behavior.bezier_mouseout, this.nodes, this.reactions);
  }.bind(this);

  // draw the beziers
  utils.draw_an_object(this.sel, '#beziers', '.bezier', bezier_subset, 'bezier_id', this.draw.create_bezier.bind(this.draw), update_fn);
}

function clear_deleted_beziers() {
  /** Remove any beziers that are not in *this.beziers*.
    */
  // remove deleted
  utils.draw_an_object(this.sel, '#beziers', '.bezier', this.beziers, 'bezier_id', null, null, function (sel) {
    sel.remove();
  });
}

function show_beziers() {
  this.toggle_beziers(true);
}

function hide_beziers() {
  this.toggle_beziers(false);
}

function toggle_beziers(on_off) {
  if (_.isUndefined(on_off)) this.beziers_enabled = !this.beziers_enabled;else this.beziers_enabled = on_off;
  this.draw_all_beziers();
  this.callback_manager.run('toggle_beziers', null, this.beziers_enabled);
}

/**
 * Returns True if the scale has changed.
 * @param {Array} keys - (Optional) The keys in reactions to apply data to.
 */
function apply_reaction_data_to_map(data, keys) {
  var styles = this.settings.get_option('reaction_styles'),
      compare_style = this.settings.get_option('reaction_compare_style');
  var has_data = data_styles.apply_reaction_data_to_reactions(this.reactions, data, styles, compare_style, keys);
  this.has_data_on_reactions = has_data;
  this.imported_reaction_data = has_data ? data : null;

  return this.calc_data_stats('reaction');
}

/**
 * Returns True if the scale has changed.
 * @param {Array} keys - (Optional) The keys in nodes to apply data to.
 */
function apply_metabolite_data_to_map(data, keys) {
  var styles = this.settings.get_option('metabolite_styles');
  var compare_style = this.settings.get_option('metabolite_compare_style');

  var has_data = data_styles.apply_metabolite_data_to_nodes(this.nodes, data, styles, compare_style, keys);
  this.has_data_on_nodes = has_data;
  this.imported_metabolite_data = has_data ? data : null;

  return this.calc_data_stats('metabolite');
}

/**
 * Returns True if the scale has changed.
 * gene_data_obj: The gene data object, with the following style:
 * { reaction_id: { rule: 'rule_string', genes: { gene_id: value } } }
 * @param {Array} keys - (Optional) The keys in reactions to apply data to.
 */
function apply_gene_data_to_map(gene_data_obj, keys) {
  var styles = this.settings.get_option('reaction_styles'),
      compare_style = this.settings.get_option('reaction_compare_style'),
      identifiers_on_map = this.settings.get_option('identifiers_on_map'),
      and_method_in_gene_reaction_rule = this.settings.get_option('and_method_in_gene_reaction_rule');

  var has_data = data_styles.apply_gene_data_to_reactions(this.reactions, gene_data_obj, styles, identifiers_on_map, compare_style, and_method_in_gene_reaction_rule, keys);
  this.has_data_on_reactions = has_data;
  this.imported_gene_data = has_data ? gene_data_obj : null;

  return this.calc_data_stats('reaction');
}

// ------------------------------------------------
// Data domains
// ------------------------------------------------

function get_data_statistics() {
  return this.data_statistics;
}

function _on_array(fn) {
  return function (array) {
    return fn.apply(null, array);
  };
}

/**
 * Returns True if the stats have changed.
 * @param {String} type - Either 'metabolite' or 'reaction'
 */
function calc_data_stats(type) {
  if (['reaction', 'metabolite'].indexOf(type) === -1) {
    throw new Error('Bad type ' + type);
  }

  // make the data structure
  if (!('data_statistics' in this)) {
    this.data_statistics = {};
    this.data_statistics[type] = {};
  } else if (!(type in this.data_statistics)) {
    this.data_statistics[type] = {};
  }

  var same = true;
  // default min and max
  var vals = [];

  if (this.nodes_for_data_scales.length !== 0 || this.reactions_for_data_scales.length !== 0) {

    if (type === 'metabolite') {
      for (var node_id in this.nodes_for_data_scales) {
        var node = parseFloat(this.nodes_for_data_scales[node_id]);
        // check number
        if (_.isUndefined(node)) {
          console.error('metabolite missing ');
        } else if (node !== null) {
          vals.push(node);
        }
      }
    } else if (type == 'reaction') {
      for (var reaction_id in this.reactions_for_data_scales) {
        var reaction = parseFloat(this.reactions_for_data_scales[reaction_id]);
        // check number
        if (_.isUndefined(reaction)) {
          console.error('reaction data missing ');
        } else if (reaction !== null) {
          vals.push(reaction);
        }
      }
    }
  } else {
    if (type === 'metabolite') {
      for (var node_id in this.nodes) {
        var node = this.nodes[node_id];
        // check number
        if (_.isUndefined(node.data)) {
          console.error('metabolite missing ');
        } else if (node.data !== null) {
          vals.push(node.data);
        }
      }
    } else if (type == 'reaction') {
      for (var reaction_id in this.reactions) {
        var reaction = this.reactions[reaction_id];
        // check number
        if (_.isUndefined(reaction.data)) {
          console.error('reaction data missing ');
        } else if (reaction.data !== null) {
          vals.push(reaction.data);
        }
      }
    }
  }

  // calculate these statistics
  var quartiles = utils.quartiles(vals);
  var funcs = [['min', _on_array(Math.min)], ['max', _on_array(Math.max)], ['mean', utils.mean], ['Q1', function () {
    return quartiles[0];
  }], ['median', function () {
    return quartiles[1];
  }], ['Q3', function () {
    return quartiles[2];
  }]];
  funcs.forEach(function (ar) {
    var new_val;
    var name = ar[0];
    if (vals.length === 0) {
      new_val = null;
    } else {
      var fn = ar[1];
      new_val = fn(vals);
    }
    if (new_val != this.data_statistics[type][name]) {
      same = false;
    }
    this.data_statistics[type][name] = new_val;
  }.bind(this));

  // Deal with max === min
  if (this.data_statistics[type]['min'] === this.data_statistics[type]['max'] && this.data_statistics[type]['min'] !== null) {
    var min = this.data_statistics[type]['min'];
    var max = this.data_statistics[type]['max'];
    this.data_statistics[type]['min'] = min - 1 - Math.abs(min) * 0.1;
    this.data_statistics[type]['max'] = max + 1 + Math.abs(max) * 0.1;
  }

  if (type === 'reaction') {
    this.callback_manager.run('calc_data_stats__reaction', null, !same);
  } else {
    this.callback_manager.run('calc_data_stats__metabolite', null, !same);
  }
  return !same;
}

// ---------------------------------------------------------------------
// Node interaction
// ---------------------------------------------------------------------

function get_coords_for_node(node_id) {
  var node = this.nodes[node_id],
      coords = { x: node.x, y: node.y };
  return coords;
}

function get_selected_node_ids() {
  var selected_node_ids = [];
  this.sel.select('#nodes').selectAll('.selected').each(function (d) {
    selected_node_ids.push(d.node_id);
  });
  return selected_node_ids;
}

function get_selected_nodes() {
  var selected_nodes = {};
  this.sel.select('#nodes').selectAll('.selected').each(function (d) {
    selected_nodes[d.node_id] = this.nodes[d.node_id];
  }.bind(this));
  return selected_nodes;
}

function get_selected_text_label_ids() {
  var selected_text_label_ids = [];
  this.sel.select('#text-labels').selectAll('.selected').each(function (d) {
    selected_text_label_ids.push(d.text_label_id);
  });
  return selected_text_label_ids;
}

function get_selected_text_labels() {
  var selected_text_labels = {};
  this.sel.select('#text-labels').selectAll('.selected').each(function (d) {
    selected_text_labels[d.text_label_id] = this.text_labels[d.text_label_id];
  }.bind(this));
  return selected_text_labels;
}

function select_all() {
  /** Select all nodes and text labels.
    */
  this.sel.selectAll('#nodes,#text-labels').selectAll('.node,.text-label').classed('selected', true);
}

function select_none() {
  /** Deselect all nodes and text labels.
    */
  this.sel.selectAll('.selected').classed('selected', false);
}

function invert_selection() {
  /** Invert selection of nodes and text labels.
    */
  var selection = this.sel.selectAll('#nodes,#text-labels').selectAll('.node,.text-label');
  selection.classed('selected', function () {
    return !d3_select(this).classed('selected');
  });
}

function select_metabolite_with_id(node_id) {
  /** Select a metabolite with the given id, and turn off the reaction
      target.
   */
  // deselect all text labels
  this.deselect_text_labels();

  var node_selection = this.sel.select('#nodes').selectAll('.node'),
      coords,
      selected_node;
  node_selection.classed('selected', function (d) {
    var selected = String(d.node_id) == String(node_id);
    if (selected) {
      selected_node = d;
      coords = { x: d.x, y: d.y };
    }
    return selected;
  });
  this.sel.selectAll('.start-reaction-target').style('visibility', 'hidden');
  this.callback_manager.run('select_metabolite_with_id', null, selected_node, coords);
}

function select_selectable(node, d, shift_key_on) {
  /** Select a metabolite or text label, and manage the shift key. */
  shift_key_on = _.isUndefined(shift_key_on) ? false : shift_key_on;
  var classable_selection = this.sel.selectAll('#nodes,#text-labels').selectAll('.node,.text-label'),
      classable_node;
  if (d3_select(node).attr('class').indexOf('text-label') == -1) {
    // node
    classable_node = node.parentNode;
  } else {
    // text-label
    classable_node = node;
  }
  // toggle selection
  if (shift_key_on) {
    // toggle this node
    d3_select(classable_node).classed('selected', !d3_select(classable_node).classed('selected'));
  } else {
    // unselect all other nodes, and select this one
    classable_selection.classed('selected', false);
    d3_select(classable_node).classed('selected', true);
  }
  // run the select_metabolite callback
  var selected_nodes = this.sel.select('#nodes').selectAll('.selected'),
      node_count = 0,
      coords,
      selected_node;
  selected_nodes.each(function (d) {
    selected_node = d;
    coords = { x: d.x, y: d.y };
    node_count++;
  });
  this.callback_manager.run('select_selectable', null, node_count, selected_node, coords);
}

/**
 * Unselect all but one selected node, and return the node. If no nodes are
 * selected, return null.
 */
function select_single_node() {
  var out = null;
  var node_selection = this.sel.select('#nodes').selectAll('.selected');
  node_selection.classed('selected', function (d, i) {
    if (i === 0) {
      out = d;
      return true;
    } else {
      return false;
    }
  });
  return out;
}

function deselect_nodes() {
  var node_selection = this.sel.select('#nodes').selectAll('.node');
  node_selection.classed('selected', false);
  this.callback_manager.run('deselect_nodes');
}

function select_text_label(sel, d) {
  // deselect all nodes
  this.deselect_nodes();
  // Find the new selection. Ignore shift key and only allow single selection
  // for now.
  var text_label_selection = this.sel.select('#text-labels').selectAll('.text-label');
  text_label_selection.classed('selected', function (p) {
    return d === p;
  });
  var selected_text_labels = this.sel.select('#text-labels').selectAll('.selected'),
      coords;
  selected_text_labels.each(function (d) {
    coords = { x: d.x, y: d.y };
  });
  this.callback_manager.run('select_text_label');
}

function deselect_text_labels() {
  var text_label_selection = this.sel.select('#text-labels').selectAll('.text-label');
  text_label_selection.classed('selected', false);
}

// ---------------------------------------------------------------------
// Delete
// ---------------------------------------------------------------------

/**
 * Delete the selected nodes and associated segments and reactions, and selected
 * labels. Undoable.
 */
function delete_selected() {
  var selected_nodes = this.get_selected_nodes(),
      selected_text_labels = this.get_selected_text_labels();
  if (Object.keys(selected_nodes).length >= 1 || Object.keys(selected_text_labels).length >= 1) this.delete_selectable(selected_nodes, selected_text_labels, true);
}

/**
 * Delete the nodes and associated segments and reactions. Undoable.
 * selected_nodes: An object that is a subset of map.nodes.
 * selected_text_labels: An object that is a subset of map.text_labels.
 * should_draw: A boolean argument to determine whether to draw the changes to
 * the map.
 */
function delete_selectable(selected_nodes, selected_text_labels, should_draw) {
  var out = this.segments_and_reactions_for_nodes(selected_nodes);
  var segment_objs_w_segments = out.segment_objs_w_segments; // TODO repeated values here
  var reactions = out.reactions;

  // copy nodes to undelete
  var saved_nodes = utils.clone(selected_nodes);
  var saved_segment_objs_w_segments = utils.clone(segment_objs_w_segments);
  var saved_reactions = utils.clone(reactions);
  var saved_text_labels = utils.clone(selected_text_labels);
  var delete_and_draw = function (nodes, reactions, segment_objs, selected_text_labels) {
    // delete nodes, segments, and reactions with no segments
    this.delete_node_data(Object.keys(selected_nodes));
    this.delete_segment_data(segment_objs); // also deletes beziers
    this.delete_reaction_data(Object.keys(reactions));
    this.delete_text_label_data(Object.keys(selected_text_labels));

    // apply the reaction and node data
    var changed_r_scale = false;
    var changed_m_scale = false;
    if (this.has_data_on_reactions) {
      changed_r_scale = this.calc_data_stats('reaction');
    }
    if (this.has_data_on_nodes) {
      changed_m_scale = this.calc_data_stats('metabolite');
    }

    // redraw
    if (should_draw) {
      if (changed_r_scale) this.draw_all_reactions(true, true);else this.clear_deleted_reactions(); // also clears segments and beziers
      if (changed_m_scale) this.draw_all_nodes(true);else this.clear_deleted_nodes();
      this.clear_deleted_text_labels();
    }
  }.bind(this);

  // delete
  delete_and_draw(selected_nodes, reactions, segment_objs_w_segments, selected_text_labels);

  // add to undo/redo stack
  this.undo_stack.push(function () {
    // undo
    // redraw the saved nodes, reactions, and segments

    this.extend_nodes(saved_nodes);
    this.extend_reactions(saved_reactions);
    var reaction_ids_to_draw = Object.keys(saved_reactions);
    for (var segment_id in saved_segment_objs_w_segments) {
      var segment_obj = saved_segment_objs_w_segments[segment_id];

      var segment = segment_obj.segment;
      this.reactions[segment_obj.reaction_id].segments[segment_obj.segment_id] = segment;

      // updated connected nodes
      var to_from = [segment.from_node_id, segment.to_node_id];
      to_from.forEach(function (node_id) {
        // not necessary for the deleted nodes
        if (node_id in saved_nodes) return;
        var node = this.nodes[node_id];
        node.connected_segments.push({ reaction_id: segment_obj.reaction_id,
          segment_id: segment_obj.segment_id });
      }.bind(this));

      // extend the beziers
      var seg_id = segment_obj.segment_id,
          r_id = segment_obj.reaction_id,
          seg_o = {};
      seg_o[seg_id] = segment_obj.segment;
      utils.extend(this.beziers, build.new_beziers_for_segments(seg_o, r_id));

      if (reaction_ids_to_draw.indexOf(segment_obj.reaction_id) === -1) {
        reaction_ids_to_draw.push(segment_obj.reaction_id);
      }
    }

    // Apply the reaction and node data. If the scale changes, redraw
    // everything.
    if (this.has_data_on_reactions) {
      var scale_changed = this.calc_data_stats('reaction');
      if (scale_changed) this.draw_all_reactions(true, false);else this.draw_these_reactions(reaction_ids_to_draw);
    } else {
      if (should_draw) this.draw_these_reactions(reaction_ids_to_draw);
    }
    if (this.has_data_on_nodes) {
      var scale_changed = this.calc_data_stats('metabolite');
      if (should_draw) {
        if (scale_changed) this.draw_all_nodes(false);else this.draw_these_nodes(Object.keys(saved_nodes));
      }
    } else {
      if (should_draw) this.draw_these_nodes(Object.keys(saved_nodes));
    }

    // redraw the saved text_labels
    utils.extend(this.text_labels, saved_text_labels);
    if (should_draw) this.draw_these_text_labels(Object.keys(saved_text_labels));
    // copy text_labels to re-delete
    selected_text_labels = utils.clone(saved_text_labels);

    // copy nodes to re-delete
    selected_nodes = utils.clone(saved_nodes);
    segment_objs_w_segments = utils.clone(saved_segment_objs_w_segments);
    reactions = utils.clone(saved_reactions);
  }.bind(this), function () {
    // redo
    // clone the nodes and reactions, to redo this action later
    delete_and_draw(selected_nodes, reactions, segment_objs_w_segments, selected_text_labels);
  }.bind(this));
}

/**
 * Delete nodes, and remove from search index.
 */
function delete_node_data(node_ids) {
  node_ids.forEach(function (node_id) {
    if (this.enable_search && this.nodes[node_id].node_type == 'metabolite') {
      var found = this.search_index.remove('n' + node_id) && this.search_index.remove('n_name' + node_id);
      if (!found) console.warn('Could not find deleted metabolite in search index');
    }
    delete this.nodes[node_id];
  }.bind(this));
}

/**
 * Delete segments, update connected_segments in nodes, and delete bezier
 * points.
 * @param {Object} segment_objs - Object with values like
 *                                { reaction_id: '123', segment_id: '456' }
 */
function delete_segment_data(segment_objs) {
  for (var segment_id in segment_objs) {
    var segment_obj = segment_objs[segment_id];
    var reaction = this.reactions[segment_obj.reaction_id];

    // segment already deleted
    if (!(segment_obj.segment_id in reaction.segments)) return;

    var segment = reaction.segments[segment_obj.segment_id]
    // updated connected nodes
    ;[segment.from_node_id, segment.to_node_id].forEach(function (node_id) {
      if (!(node_id in this.nodes)) return;
      var node = this.nodes[node_id];
      node.connected_segments = node.connected_segments.filter(function (so) {
        return so.segment_id != segment_obj.segment_id;
      });
    }.bind(this))

    // remove beziers
    ;['b1', 'b2'].forEach(function (bez) {
      var bez_id = build.bezier_id_for_segment_id(segment_obj.segment_id, bez);
      delete this.beziers[bez_id];
    }.bind(this));

    delete reaction.segments[segment_obj.segment_id];
  }
}

/**
 * Delete reactions, segments, and beziers, and remove reaction from search
 * index.
 */
function delete_reaction_data(reaction_ids) {
  reaction_ids.forEach(function (reaction_id) {
    // remove beziers
    var reaction = this.reactions[reaction_id];
    for (var segment_id in reaction.segments) {
      ;['b1', 'b2'].forEach(function (bez) {
        var bez_id = build.bezier_id_for_segment_id(segment_id, bez);
        delete this.beziers[bez_id];
      }.bind(this));
    }
    // delete reaction
    delete this.reactions[reaction_id];
    // remove from search index
    var found = this.search_index.remove('r' + reaction_id) && this.search_index.remove('r_name' + reaction_id);
    if (!found) console.warn('Could not find deleted reaction ' + reaction_id + ' in search index');
    for (var g_id in reaction.genes) {
      var found = this.search_index.remove('r' + reaction_id + '_g' + g_id) && this.search_index.remove('r' + reaction_id + '_g_name' + g_id);
      if (!found) console.warn('Could not find deleted gene ' + g_id + ' in search index');
    }
  }.bind(this));
}

/**
 * Delete text labels for an array of IDs
 */
function delete_text_label_data(text_label_ids) {
  text_label_ids.forEach(function (text_label_id) {
    // delete label
    delete this.text_labels[text_label_id];
    // remove from search index
    var found = this.search_index.remove('l' + text_label_id);
    if (!found) {
      console.warn('Could not find deleted text label in search index');
    }
  }.bind(this));
}

// ---------------------------------------------------------------------
// Building
// ---------------------------------------------------------------------

function _extend_and_draw_metabolite(new_nodes, selected_node_id) {
  this.extend_nodes(new_nodes);
  var keys = [selected_node_id];
  if (this.has_data_on_nodes) {
    if (this.imported_metabolite_data === null) {
      throw new Error('imported_metabolite_data should not be null');
    }
    var scale_changed = this.apply_metabolite_data_to_map(this.imported_metabolite_data, keys);
    if (scale_changed) {
      this.draw_all_nodes(false);
    } else {
      this.draw_these_nodes(keys);
    }
  } else {
    this.draw_these_nodes(keys);
  }
}

/**
 * Draw a reaction on a blank canvas.
 * @param {String} starting_reaction - bigg_id for a reaction to draw.
 * @param {Coords} coords - coordinates to start drawing
 */
function new_reaction_from_scratch(starting_reaction, coords, direction) {
  // If there is no cobra model, error
  if (!this.cobra_model) {
    console.error('No CobraModel. Cannot build new reaction');
    return;
  }

  // Set reaction coordinates and angle. Be sure to clone the reaction.
  var cobra_reaction = utils.clone(this.cobra_model.reactions[starting_reaction]);

  // check for empty reactions
  if (_.size(cobra_reaction.metabolites) === 0) {
    throw Error('No metabolites in reaction ' + cobra_reaction.bigg_id);
  }

  // create the first node
  var reactant_ids = _.map(cobra_reaction.metabolites, function (coeff, met_id) {
    return [coeff, met_id];
  }).filter(function (x) {
    return x[0] < 0;
  }) // coeff < 0
  .map(function (x) {
    return x[1];
  }); // metabolite id
  // get the first reactant or else the first product
  var metabolite_id = reactant_ids.length > 0 ? reactant_ids[0] : Object.keys(cobra_reaction.metabolites)[0];
  var metabolite = this.cobra_model.metabolites[metabolite_id];
  var selected_node_id = String(++this.largest_ids.nodes);
  var label_d = build.get_met_label_loc(Math.PI / 180 * direction, 0, 1, true, metabolite_id);
  var selected_node = {
    connected_segments: [],
    x: coords.x,
    y: coords.y,
    node_is_primary: true,
    label_x: coords.x + label_d.x,
    label_y: coords.y + label_d.y,
    name: metabolite.name,
    bigg_id: metabolite_id,
    node_type: 'metabolite'
  };
  var new_nodes = {};
  new_nodes[selected_node_id] = selected_node;

  // draw
  _extend_and_draw_metabolite.apply(this, [new_nodes, selected_node_id]);

  // clone the nodes and reactions, to redo this action later
  var saved_nodes = utils.clone(new_nodes);

  // draw the reaction
  var out = this.new_reaction_for_metabolite(starting_reaction, selected_node_id, direction, false);
  var reaction_redo = out.redo;
  var reaction_undo = out.undo;

  // add to undo/redo stack
  this.undo_stack.push(function () {
    // Undo. First undo the reaction.
    reaction_undo();
    // Get the nodes to delete
    this.delete_node_data(Object.keys(new_nodes));
    // Save the nodes and reactions again, for redo
    new_nodes = utils.clone(saved_nodes);
    // Draw
    this.clear_deleted_nodes();
    // Deselect
    this.deselect_nodes();
  }.bind(this), function () {
    // Redo. Clone the nodes and reactions, to redo this action later.
    _extend_and_draw_metabolite.apply(this, [new_nodes, selected_node_id]);
    // Now redo the reaction
    reaction_redo();
  }.bind(this));

  return;
}

/**
 * Add new nodes to data and search index.
 */
function extend_nodes(new_nodes) {
  if (this.enable_search) {
    for (var node_id in new_nodes) {
      var node = new_nodes[node_id];
      if (node.node_type != 'metabolite') continue;
      this.search_index.insert('n' + node_id, { 'name': node.bigg_id,
        'data': { type: 'metabolite',
          node_id: node_id } });
      this.search_index.insert('n_name' + node_id, { 'name': node.name,
        'data': { type: 'metabolite',
          node_id: node_id } });
    }
  }
  utils.extend(this.nodes, new_nodes);
}

/**
 * Add new reactions to data and search index.
 */
function extend_reactions(new_reactions) {
  if (this.enable_search) {
    for (var r_id in new_reactions) {
      var reaction = new_reactions[r_id];
      this.search_index.insert('r' + r_id, { 'name': reaction.bigg_id,
        'data': { type: 'reaction',
          reaction_id: r_id } });
      this.search_index.insert('r_name' + r_id, { 'name': reaction.name,
        'data': { type: 'reaction',
          reaction_id: r_id } });
      for (var g_id in reaction.genes) {
        var gene = reaction.genes[g_id];
        this.search_index.insert('r' + r_id + '_g' + g_id, { 'name': gene.bigg_id,
          'data': { type: 'reaction',
            reaction_id: r_id } });
        this.search_index.insert('r' + r_id + '_g_name' + g_id, { 'name': gene.name,
          'data': { type: 'reaction',
            reaction_id: r_id } });
      }
    }
  }
  utils.extend(this.reactions, new_reactions);
}

function _extend_and_draw_reaction(new_nodes, new_reactions, new_beziers, selected_node_id) {
  this.extend_reactions(new_reactions);
  utils.extend(this.beziers, new_beziers);
  // Remove the selected node so it can be updated
  this.delete_node_data([selected_node_id]); // TODO this is a hack. fix
  this.extend_nodes(new_nodes);

  // Apply the reaction and node data to the scales. If the scale changes,
  // redraw everything.
  var keys = Object.keys(new_reactions);
  if (this.has_data_on_reactions) {
    var scale_changed = false;
    if (this.imported_reaction_data) {
      scale_changed = this.apply_reaction_data_to_map(this.imported_reaction_data, keys);
    } else if (this.imported_gene_data) {
      scale_changed = this.apply_gene_data_to_map(this.imported_gene_data, keys);
    } else {
      throw new Error('imported_gene_data or imported_reaction_data should ' + 'not be null');
    }
    if (scale_changed) {
      this.draw_all_reactions(true, false);
    } else {
      this.draw_these_reactions(keys);
    }
  } else {
    this.draw_these_reactions(keys);
  }

  var node_keys = Object.keys(new_nodes);
  if (this.has_data_on_nodes) {
    if (this.imported_metabolite_data === null) {
      throw new Error('imported_metabolite_data should not be null');
    }
    var scale_changed = this.apply_metabolite_data_to_map(this.imported_metabolite_data, node_keys);
    if (scale_changed) {
      this.draw_all_nodes(false);
    } else {
      this.draw_these_nodes(node_keys);
    }
  } else {
    this.draw_these_nodes(node_keys);
  }

  // select new primary metabolite
  for (var node_id in new_nodes) {
    var node = new_nodes[node_id];
    if (node.node_is_primary && node_id != selected_node_id) {
      this.select_metabolite_with_id(node_id);
      var new_coords = { x: node.x, y: node.y };
      if (this.zoom_container) {
        this.zoom_container.translate_off_screen(new_coords);
      }
    }
  }
}

/**
 * Build a new reaction starting with selected_met. Undoable.
 * @param {String} reaction_bigg_id - The BiGG ID of the reaction to draw.
 * @param {String} selected_node_id - The ID of the node to begin drawing with.
 * @param {Number} direction - The direction to draw in.
 * @param {Boolean} [apply_undo_redo=true] - If true, then add to the undo
 * stack. Otherwise, just return the undo and redo functions.
 * @return An object of undo and redo functions:
 *   { undo: undo_function, redo: redo_function }
 */
function new_reaction_for_metabolite(reaction_bigg_id, selected_node_id, direction, apply_undo_redo) {
  // default args
  if (apply_undo_redo === undefined) apply_undo_redo = true;

  // get the metabolite node
  var selected_node = this.nodes[selected_node_id];

  // Set reaction coordinates and angle. Be sure to copy the reaction
  // recursively.
  var cobra_reaction = this.cobra_model.reactions[reaction_bigg_id];

  // build the new reaction
  var out = build.new_reaction(reaction_bigg_id, cobra_reaction, this.cobra_model.metabolites, selected_node_id, utils.clone(selected_node), this.largest_ids, this.settings.get_option('cofactors'), direction);
  var new_nodes = out.new_nodes;
  var new_reactions = out.new_reactions;
  var new_beziers = out.new_beziers;

  // Draw
  _extend_and_draw_reaction.apply(this, [new_nodes, new_reactions, new_beziers, selected_node_id]);

  // Clone the nodes and reactions, to redo this action later
  var saved_nodes = utils.clone(new_nodes);
  var saved_reactions = utils.clone(new_reactions);
  var saved_beziers = utils.clone(new_beziers);

  // Add to undo/redo stack
  var undo_fn = function () {
    // Undo. Get the nodes to delete.
    delete new_nodes[selected_node_id];
    this.delete_node_data(Object.keys(new_nodes));
    this.delete_reaction_data(Object.keys(new_reactions)); // also deletes beziers
    select_metabolite_with_id.apply(this, [selected_node_id]);
    // Save the nodes and reactions again, for redo
    new_nodes = utils.clone(saved_nodes);
    new_reactions = utils.clone(saved_reactions);
    new_beziers = utils.clone(saved_beziers);
    // Draw
    if (this.has_data_on_reactions) {
      var scale_changed = this.calc_data_stats('reaction');
      if (scale_changed) {
        this.draw_all_reactions(true, true);
      } else {
        // Also clears segments and beziers
        this.clear_deleted_reactions(true);
      }
    } else {
      // Also clears segments and beziers
      this.clear_deleted_reactions(true);
    }
    if (this.has_data_on_nodes) {
      var scale_changed = this.calc_data_stats('metabolite');
      if (scale_changed) {
        this.draw_all_nodes(true);
      } else {
        this.clear_deleted_nodes();
      }
    } else {
      this.clear_deleted_nodes();
    }
  }.bind(this);
  var redo_fn = function () {
    // redo
    // clone the nodes and reactions, to redo this action later
    _extend_and_draw_reaction.apply(this, [new_nodes, new_reactions, new_beziers, selected_node_id]);
  }.bind(this);

  if (apply_undo_redo) {
    this.undo_stack.push(undo_fn, redo_fn);
  }

  return { undo: undo_fn, redo: redo_fn };
}

function cycle_primary_node() {
  var selected_nodes = this.get_selected_nodes();
  if (_.isEmpty(selected_nodes)) {
    return;
  }
  // Get the first node
  var node_id = Object.keys(selected_nodes)[0];
  var node = selected_nodes[node_id];
  var reactions = this.reactions;
  var nodes = this.nodes;
  // make the other reactants or products secondary
  // 1. Get the connected anchor nodes for the node
  var connected_anchor_ids = [],
      reactions_to_draw;
  nodes[node_id].connected_segments.forEach(function (segment_info) {
    reactions_to_draw = [segment_info.reaction_id];
    var segment;
    try {
      segment = reactions[segment_info.reaction_id].segments[segment_info.segment_id];
      if (segment === undefined) throw new Error('undefined segment');
    } catch (e) {
      console.warn('Could not find connected segment ' + segment_info.segment_id);
      return;
    }
    connected_anchor_ids.push(segment.from_node_id == node_id ? segment.to_node_id : segment.from_node_id);
  });
  // can only be connected to one anchor
  if (connected_anchor_ids.length != 1) {
    console.error('Only connected nodes with a single reaction can be selected');
    return;
  }
  var connected_anchor_id = connected_anchor_ids[0];
  // 2. find nodes connected to the anchor that are metabolites
  var related_node_ids = [node_id];
  var segments = [];
  nodes[connected_anchor_id].connected_segments.forEach(function (segment_info) {
    // deterministic order
    var segment;
    try {
      segment = reactions[segment_info.reaction_id].segments[segment_info.segment_id];
      if (segment === undefined) throw new Error('undefined segment');
    } catch (e) {
      console.warn('Could not find connected segment ' + segment_info.segment_id);
      return;
    }
    var conn_met_id = segment.from_node_id == connected_anchor_id ? segment.to_node_id : segment.from_node_id,
        conn_node = nodes[conn_met_id];
    if (conn_node.node_type == 'metabolite' && conn_met_id != node_id) {
      related_node_ids.push(String(conn_met_id));
    }
  });
  // 3. make sure they only have 1 reaction connection, and check if
  // they match the other selected nodes
  for (var i = 0; i < related_node_ids.length; i++) {
    if (nodes[related_node_ids[i]].connected_segments.length > 1) {
      console.error('Only connected nodes with a single reaction can be selected');
      return;
    }
  }
  for (var a_selected_node_id in selected_nodes) {
    if (a_selected_node_id != node_id && related_node_ids.indexOf(a_selected_node_id) == -1) {
      console.warn('Selected nodes are not on the same reaction');
      return;
    }
  }
  // 4. change the primary node, and change coords, label coords, and beziers
  var nodes_to_draw = [],
      last_i = related_node_ids.length - 1,
      last_node = nodes[related_node_ids[last_i]],
      last_is_primary = last_node.node_is_primary,
      last_coords = { x: last_node.x, y: last_node.y,
    label_x: last_node.label_x, label_y: last_node.label_y };
  if (last_node.connected_segments.length > 1) console.warn('Too many connected segments for node ' + last_node.node_id);
  var last_segment_info = last_node.connected_segments[0],
      // guaranteed above to have only one
  last_segment;
  try {
    last_segment = reactions[last_segment_info.reaction_id].segments[last_segment_info.segment_id];
    if (last_segment === undefined) throw new Error('undefined segment');
  } catch (e) {
    console.error('Could not find connected segment ' + last_segment_info.segment_id);
    return;
  }
  var last_bezier = { b1: last_segment.b1, b2: last_segment.b2 },
      primary_node_id;
  related_node_ids.forEach(function (related_node_id) {
    var node = nodes[related_node_id],
        this_is_primary = node.node_is_primary,
        these_coords = { x: node.x, y: node.y,
      label_x: node.label_x, label_y: node.label_y },
        this_segment_info = node.connected_segments[0],
        this_segment = reactions[this_segment_info.reaction_id].segments[this_segment_info.segment_id],
        this_bezier = { b1: this_segment.b1, b2: this_segment.b2 };
    node.node_is_primary = last_is_primary;
    node.x = last_coords.x;node.y = last_coords.y;
    node.label_x = last_coords.label_x;node.label_y = last_coords.label_y;
    this_segment.b1 = last_bezier.b1;this_segment.b2 = last_bezier.b2;
    last_is_primary = this_is_primary;
    last_coords = these_coords;
    last_bezier = this_bezier;
    if (node.node_is_primary) primary_node_id = related_node_id;
    nodes_to_draw.push(related_node_id);
  });
  // 5. cycle the connected_segments array so the next time, it cycles differently
  var old_connected_segments = nodes[connected_anchor_id].connected_segments,
      last_i = old_connected_segments.length - 1,
      new_connected_segments = [old_connected_segments[last_i]];
  old_connected_segments.forEach(function (segment, i) {
    if (last_i == i) return;
    new_connected_segments.push(segment);
  });
  nodes[connected_anchor_id].connected_segments = new_connected_segments;
  // 6. draw the nodes
  this.draw_these_nodes(nodes_to_draw);
  this.draw_these_reactions(reactions_to_draw);
  // 7. select the primary node
  this.select_metabolite_with_id(primary_node_id);
  return;
}

function toggle_selected_node_primary() {
  /** Toggle the primary/secondary status of each selected node.
       Undoable.
   */
  var selected_node_ids = this.get_selected_node_ids(),
      go = function (ids) {
    var nodes_to_draw = {},
        hide_secondary_metabolites = this.settings.get_option('hide_secondary_metabolites');
    ids.forEach(function (id) {
      if (!(id in this.nodes)) {
        console.warn('Could not find node: ' + id);
        return;
      }
      var node = this.nodes[id];
      if (node.node_type == 'metabolite') {
        node.node_is_primary = !node.node_is_primary;
        nodes_to_draw[id] = node;
      }
    }.bind(this));
    // draw the nodes
    this.draw_these_nodes(Object.keys(nodes_to_draw));
    // draw associated reactions
    if (hide_secondary_metabolites) {
      var out = this.segments_and_reactions_for_nodes(nodes_to_draw),
          reaction_ids_to_draw_o = {};
      for (var id in out.segment_objs_w_segments) {
        var r_id = out.segment_objs_w_segments[id].reaction_id;
        reaction_ids_to_draw_o[r_id] = true;
      }
      this.draw_these_reactions(Object.keys(reaction_ids_to_draw_o));
    }
  }.bind(this);

  // go
  go(selected_node_ids);

  // add to the undo stack
  this.undo_stack.push(function () {
    go(selected_node_ids);
  }, function () {
    go(selected_node_ids);
  });
}

function segments_and_reactions_for_nodes(nodes) {
  /** Get segments and reactions that should be deleted with node deletions
    */
  var segment_objs_w_segments = {},
      these_reactions = {},
      segment_ids_for_reactions = {},
      reactions = this.reactions;
  // for each node
  for (var node_id in nodes) {
    var node = nodes[node_id];
    // find associated segments and reactions
    node.connected_segments.forEach(function (segment_obj) {
      var segment;
      try {
        segment = reactions[segment_obj.reaction_id].segments[segment_obj.segment_id];
        if (segment === undefined) throw new Error('undefined segment');
      } catch (e) {
        console.warn('Could not find connected segments for node');
        return;
      }
      var segment_obj_w_segment = utils.clone(segment_obj);
      segment_obj_w_segment['segment'] = utils.clone(segment);
      segment_objs_w_segments[segment_obj.segment_id] = segment_obj_w_segment;
      if (!(segment_obj.reaction_id in segment_ids_for_reactions)) segment_ids_for_reactions[segment_obj.reaction_id] = [];
      segment_ids_for_reactions[segment_obj.reaction_id].push(segment_obj.segment_id);
    });
  }
  // find the reactions that should be deleted because they have no segments left
  for (var reaction_id in segment_ids_for_reactions) {
    var reaction = reactions[reaction_id],
        these_ids = segment_ids_for_reactions[reaction_id],
        has = true;
    for (var segment_id in reaction.segments) {
      if (these_ids.indexOf(segment_id) == -1) has = false;
    }
    if (has) these_reactions[reaction_id] = reaction;
  }
  return { segment_objs_w_segments: segment_objs_w_segments, reactions: these_reactions };
}

function add_label_to_search_index(id, text) {
  this.search_index.insert('l' + id, {
    name: text,
    data: { type: 'text_label', text_label_id: id }
  });
}

function new_text_label(coords, text) {
  // Make an label
  var out = build.new_text_label(this.largest_ids, text, coords);
  this.text_labels[out.id] = out.label;
  this.draw_these_text_labels([out.id]);
  // Add to the search index
  if (text !== '') {
    this.add_label_to_search_index(out.id, text);
  }
  return out.id;
}

/**
 * Edit a text label. Undoable.
 * @param {} text_label_id -
 * @param {String} new_value -
 * @param {Boolean} should_draw -
 * @param {Boolean} [is_new=false] - If true, then the text label is all new, so
 * delete it on undo and create it again on redo.
 */
function edit_text_label(text_label_id, new_value, should_draw, is_new) {
  if (_.isUndefined(is_new)) is_new = false;

  if (new_value === '') {
    throw new Error('Should not be called for empty string');
  }

  var edit_and_draw = function (new_val, should_draw) {
    // set the new value
    var label = this.text_labels[text_label_id];
    label.text = new_val;
    if (should_draw) {
      this.draw_these_text_labels([text_label_id]);
    }
    // Update in the search index
    var record_id = 'l' + text_label_id;
    var found = this.search_index.remove(record_id);
    if (!is_new && !found) {
      console.warn('Could not find modified text label in search index');
    }
    this.search_index.insert(record_id, {
      name: new_val,
      data: { type: 'text_label', text_label_id: text_label_id }
    });
  }.bind(this);

  // Save old value
  var saved_label = utils.clone(this.text_labels[text_label_id]);

  // Edit the label
  edit_and_draw(new_value, should_draw);

  // Add to undo stack
  this.undo_stack.push(function () {
    if (is_new) {
      this.delete_text_label_data([text_label_id]);
      this.clear_deleted_text_labels();
    } else {
      edit_and_draw(saved_label.text, true);
    }
  }.bind(this), function () {
    if (is_new) {
      this.text_labels[text_label_id] = utils.clone(saved_label);
      this.text_labels[text_label_id].text = new_value;
      this.draw_these_text_labels([text_label_id]);
      this.add_label_to_search_index(text_label_id, new_value);
    } else {
      edit_and_draw(new_value, true);
    }
  }.bind(this));
}

// -------------------------------------------------------------------------
// Zoom
// -------------------------------------------------------------------------

/**
 * Zoom to fit all the nodes. Returns error if one is raised.
 * @param {} margin - optional argument to set the margins as a fraction of
 * height.
 */
function zoom_extent_nodes(margin) {
  this._zoom_extent(margin, 'nodes');
}

/**
 * Zoom to fit the canvas. Returns error if one is raised.
 * @param {} margin - optional argument to set the margins as a fraction of
 * height.
 */
function zoom_extent_canvas(margin) {
  this._zoom_extent(margin, 'canvas');
}

/**
 * Zoom to fit the canvas or all the nodes. Returns error if one is raised.
 * @param {} margin - optional argument to set the margins.
 * @param {} mode - Values are 'nodes', 'canvas'.
 */
function _zoom_extent(margin, mode) {
  // Optional args
  if (_.isUndefined(margin)) margin = mode === 'nodes' ? 0.2 : 0;
  if (_.isUndefined(mode)) mode = 'canvas';

  var new_zoom;
  var new_pos;
  var size = this.get_size();
  // scale margin to window size
  margin = margin * size.height;

  if (mode === 'nodes') {
    // get the extent of the nodes
    var min = { x: null, y: null // TODO make infinity?
    };var max = { x: null, y: null };
    for (var node_id in this.nodes) {
      var node = this.nodes[node_id];
      if (min.x === null) min.x = node.x;
      if (min.y === null) min.y = node.y;
      if (max.x === null) max.x = node.x;
      if (max.y === null) max.y = node.y;

      min.x = Math.min(min.x, node.x);
      min.y = Math.min(min.y, node.y);
      max.x = Math.max(max.x, node.x);
      max.y = Math.max(max.y, node.y);
    }
    // set the zoom
    new_zoom = Math.min((size.width - margin * 2) / (max.x - min.x), (size.height - margin * 2) / (max.y - min.y));
    new_pos = { x: -(min.x * new_zoom) + margin + (size.width - margin * 2 - (max.x - min.x) * new_zoom) / 2,
      y: -(min.y * new_zoom) + margin + (size.height - margin * 2 - (max.y - min.y) * new_zoom) / 2 };
  } else if (mode == 'canvas') {
    // center the canvas
    new_zoom = Math.min((size.width - margin * 2) / this.canvas.width, (size.height - margin * 2) / this.canvas.height);
    new_pos = { x: -(this.canvas.x * new_zoom) + margin + (size.width - margin * 2 - this.canvas.width * new_zoom) / 2,
      y: -(this.canvas.y * new_zoom) + margin + (size.height - margin * 2 - this.canvas.height * new_zoom) / 2 };
  } else {
    return console.error('Did not recognize mode');
  }
  this.zoom_container.go_to(new_zoom, new_pos);
  return null;
}

function get_size() {
  return this.zoom_container.get_size();
}

function zoom_to_reaction(reaction_id) {
  var reaction = this.reactions[reaction_id],
      new_zoom = 0.5,
      size = this.get_size(),
      new_pos = { x: -reaction.label_x * new_zoom + size.width / 2,
    y: -reaction.label_y * new_zoom + size.height / 2 };
  this.zoom_container.go_to(new_zoom, new_pos);
}

function zoom_to_node(node_id) {
  var node = this.nodes[node_id];
  var new_zoom = 0.5;
  var size = this.get_size();
  var new_pos = {
    x: -node.label_x * new_zoom + size.width / 2,
    y: -node.label_y * new_zoom + size.height / 2
  };
  this.zoom_container.go_to(new_zoom, new_pos);
}

function zoom_to_text_label(text_label_id) {
  var text_label = this.text_labels[text_label_id];
  var new_zoom = 0.5;
  var size = this.get_size();
  var new_pos = {
    x: -text_label.x * new_zoom + size.width / 2,
    y: -text_label.y * new_zoom + size.height / 2
  };
  this.zoom_container.go_to(new_zoom, new_pos);
}

function highlight_reaction(reaction_id) {
  this.highlight(this.sel.selectAll('#r' + reaction_id).selectAll('text'));
}

function highlight_node(node_id) {
  this.highlight(this.sel.selectAll('#n' + node_id).selectAll('text'));
}

function highlight_text_label(text_label_id) {
  this.highlight(this.sel.selectAll('#l' + text_label_id).selectAll('text'));
}

function highlight(sel) {
  this.sel.selectAll('.highlight').classed('highlight', false);
  if (sel !== null) {
    sel.classed('highlight', true);
  }
}

// -------------------------------------------------------------------------
// Full screen
// -------------------------------------------------------------------------

function full_screen_event() {
  if (document.fullscreenEnabled) return 'fullscreenchange';else if (document.mozFullScreenEnabled) return 'mozfullscreenchange';else if (document.webkitFullscreenEnabled) return 'webkitfullscreenchange';else if (document.msFullscreenEnabled) return 'MSFullscreenChange';else return null;
}

/**
 * Call the function when full screen is enabled.
 *
 * To unregister the event listener for the full screen event,
 * unlisten_for_full_screen.
 */
function listen_for_full_screen(fn) {
  document.addEventListener(full_screen_event(), fn);
  this.full_screen_listener = fn;
}

/**
 * Remove the listener created by listen_for_full_screen.
 */
function unlisten_for_full_screen() {
  document.removeEventListener(full_screen_event(), this.full_screen_listener);
}

/**
 * Enter full screen if supported by the browser.
 */
function full_screen() {
  var sel = this.zoom_container.selection;
  var e = sel.node();
  var d = document;
  var full_screen_on = d.fullscreenElement || d.mozFullScreenElement || d.webkitFullscreenElement || d.msFullscreenElement;
  if (full_screen_on) {
    // apply full heigh/width 100%
    sel.classed('full-screen-on', false);
    // exit
    if (d.exitFullscreen) d.exitFullscreen();else if (d.mozCancelFullScreen) d.mozCancelFullScreen();else if (d.webkitExitFullscreen) d.webkitExitFullscreen();else if (d.msExitFullscreen) d.msExitFullscreen();else throw Error('Cannot exit full screen');
  } else {
    sel.classed('full-screen-on', true);
    // enter
    if (e.requestFullscreen) e.requestFullscreen();else if (e.mozRequestFullScreen) e.mozRequestFullScreen();else if (e.webkitRequestFullscreen) e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else if (e.msRequestFullscreen) e.msRequestFullscreen();else throw Error('Full screen does not seem to be supported on this system.');
  }
}

// -------------------------------------------------------------------------
// IO

function save() {
  utils.download_json(this.map_for_export(), this.map_name);
}

function map_for_export() {
  var out = [{ map_name: this.map_name,
    map_id: this.map_id,
    map_description: this.map_description,
    homepage: "https://escher.github.io",
    schema: "https://escher.github.io/escher/jsonschema/1-0-0#"
  }, { reactions: utils.clone(this.reactions),
    nodes: utils.clone(this.nodes),
    text_labels: utils.clone(this.text_labels),
    canvas: this.canvas.size_and_location() }];

  // remove extra data
  for (var r_id in out[1].reactions) {
    var reaction = out[1].reactions[r_id];
    var new_reaction = {};
    var attrs = ['name', 'bigg_id', 'reversibility', 'label_x', 'label_y', 'gene_reaction_rule', 'genes', 'metabolites'];
    attrs.forEach(function (attr) {
      new_reaction[attr] = reaction[attr];
    });
    new_reaction['segments'] = {};
    for (var s_id in reaction.segments) {
      var segment = reaction.segments[s_id];
      var new_segment = {};
      var attrs = ['from_node_id', 'to_node_id', 'b1', 'b2'];
      attrs.forEach(function (attr) {
        new_segment[attr] = segment[attr];
      });
      new_reaction['segments'][s_id] = new_segment;
    }
    out[1].reactions[r_id] = new_reaction;
  }
  for (var n_id in out[1].nodes) {
    var node = out[1].nodes[n_id];
    var new_node = {};
    var attrs;
    if (node.node_type === 'metabolite') {
      attrs = ['node_type', 'x', 'y', 'bigg_id', 'name', 'label_x', 'label_y', 'node_is_primary'];
    } else {
      attrs = ['node_type', 'x', 'y'];
    }
    attrs.forEach(function (attr) {
      new_node[attr] = node[attr];
    });
    out[1].nodes[n_id] = new_node;
  }
  for (var t_id in out[1].text_labels) {
    var text_label = out[1].text_labels[t_id];
    var new_text_label = {};
    var attrs = ['x', 'y', 'text'];
    attrs.forEach(function (attr) {
      new_text_label[attr] = text_label[attr];
    });
    out[1].text_labels[t_id] = new_text_label;
  }
  // canvas
  var canvas_el = out[1].canvas;
  var new_canvas_el = {};
  var attrs = ['x', 'y', 'width', 'height'];
  attrs.forEach(function (attr) {
    new_canvas_el[attr] = canvas_el[attr];
  });
  out[1].canvas = new_canvas_el;

  return out;
}

/**
 * Rescale the canvas and save as svg/png.
 */
function save_map(obj, callback_before, callback_after, map_type) {
  // Run the before callback
  obj.callback_manager.run(callback_before);

  // Turn ofo zoom and translate so that illustrator likes the map
  var window_scale = obj.zoom_container.window_scale;
  var window_translate = obj.zoom_container.window_translate;
  var canvas_size_and_loc = obj.canvas.size_and_location();
  var mouse_node_size_and_trans = {
    w: obj.canvas.mouse_node.attr('width'),
    h: obj.canvas.mouse_node.attr('height'),
    transform: obj.canvas.mouse_node.attr('transform')
  };

  obj.zoom_container._go_to_svg(1.0, { x: -canvas_size_and_loc.x, y: -canvas_size_and_loc.y }, function () {
    obj.svg.attr('width', canvas_size_and_loc.width);
    obj.svg.attr('height', canvas_size_and_loc.height);
    obj.canvas.mouse_node.attr('width', '0px');
    obj.canvas.mouse_node.attr('height', '0px');
    obj.canvas.mouse_node.attr('transform', null);

    // hide the segment control points
    var hidden_sel = obj.sel.selectAll('.multimarker-circle,.midmarker-circle,#canvas').style('visibility', 'hidden');

    // do the export
    if (map_type == 'svg') {
      utils.download_svg('saved_map', obj.svg, true);
    } else if (map_type == 'png') {
      utils.download_png('saved_map', obj.svg);
    }

    // revert everything
    obj.zoom_container._go_to_svg(window_scale, window_translate, function () {
      obj.svg.attr('width', null);
      obj.svg.attr('height', null);
      obj.canvas.mouse_node.attr('width', mouse_node_size_and_trans.w);
      obj.canvas.mouse_node.attr('height', mouse_node_size_and_trans.h);
      obj.canvas.mouse_node.attr('transform', mouse_node_size_and_trans.transform);
      // unhide the segment control points
      hidden_sel.style('visibility', null);

      // run the after callback
      obj.callback_manager.run(callback_after);
    }.bind(obj));
  }.bind(obj));
}

function save_svg() {
  save_map(this, 'before_svg_export', 'after_svg_export', 'svg');
}

function save_png() {
  save_map(this, 'before_png_export', 'after_png_export', 'png');
}

/**
 * Assign the descriptive names and gene_reaction_rules from the model to the
 * map. If no map is loaded, then throw an Error. If some reactions are not in
 * the model, then warn in the status.
 */
function convert_map() {
  // Run the before callback
  this.callback_manager.run('before_convert_map');

  // Check the model
  if (!this.has_cobra_model()) {
    throw Error('No COBRA model loaded.');
  }
  var model = this.cobra_model;

  // IDs for reactions and metabolites not found in the model
  var reactions_not_found = {};
  var reaction_attrs = ['name', 'gene_reaction_rule', 'genes'];
  var met_nodes_not_found = {};
  var metabolite_attrs = ['name'];
  var found;
  // convert reactions
  for (var reaction_id in this.reactions) {
    var reaction = this.reactions[reaction_id];
    found = false;
    // find in cobra model
    for (var model_reaction_id in model.reactions) {
      var model_reaction = model.reactions[model_reaction_id];
      if (model_reaction.bigg_id == reaction.bigg_id) {
        reaction_attrs.forEach(function (attr) {
          reaction[attr] = model_reaction[attr];
        });
        found = true;
      }
    }
    if (!found) reactions_not_found[reaction_id] = true;
  }
  // convert metabolites
  for (var node_id in this.nodes) {
    var node = this.nodes[node_id];
    // only look at metabolites
    if (node.node_type != 'metabolite') continue;
    found = false;
    // find in cobra model
    for (var model_metabolite_id in model.metabolites) {
      var model_metabolite = model.metabolites[model_metabolite_id];
      if (model_metabolite.bigg_id == node.bigg_id) {
        metabolite_attrs.forEach(function (attr) {
          node[attr] = model_metabolite[attr];
        });
        found = true;
      }
    }
    if (!found) met_nodes_not_found[node_id] = true;
  }

  // status
  var n_reactions_not_found = Object.keys(reactions_not_found).length;
  var n_met_nodes_not_found = Object.keys(met_nodes_not_found).length;
  var status_delay = 3000;
  if (n_reactions_not_found === 0 && n_met_nodes_not_found === 0) {
    this.set_status('Successfully converted attributes.', status_delay);
  } else if (n_met_nodes_not_found === 0) {
    this.set_status('Converted attributes, but count not find ' + n_reactions_not_found + ' reactions in the model.', status_delay);
    this.settings.set_conditional('highlight_missing', true);
  } else if (n_reactions_not_found === 0) {
    this.set_status('Converted attributes, but count not find ' + n_met_nodes_not_found + ' metabolites in the model.', status_delay);
    this.settings.set_conditional('highlight_missing', true);
  } else {
    this.set_status('Converted attributes, but count not find ' + n_reactions_not_found + ' reactions and ' + n_met_nodes_not_found + ' metabolites in the model.', status_delay);
    this.settings.set_conditional('highlight_missing', true);
  }

  // redraw
  this.draw_everything();

  // run the after callback
  this.callback_manager.run('after_convert_map');
}

function set_reactions_for_data_scales(s) {
  this.reactions_for_data_scales = s;
}

function set_nodes_for_data_scales(n) {
  this.nodes_for_data_scales = n;
}

/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Behavior. Defines the set of click and drag behaviors for the map, and keeps
 * track of which behaviors are activated.
 *
 * A Behavior instance has the following attributes:
 *
 * my_behavior.rotation_drag, my_behavior.text_label_mousedown,
 * my_behavior.text_label_click, my_behavior.selectable_mousedown,
 * my_behavior.selectable_click, my_behavior.selectable_drag,
 * my_behavior.node_mouseover, my_behavior.node_mouseout,
 * my_behavior.label_mousedown, my_behavior.label_mouseover,
 * my_behavior.label_mouseout, my_behavior.label_touch,
 * my_behavior.bezier_drag,
 * my_behavior.bezier_mouseover, my_behavior.bezier_mouseout,
 * my_behavior.reaction_label_drag, my_behavior.node_label_drag,
 *
 */

var utils = __webpack_require__(1);
var build = __webpack_require__(53);
var d3_drag = __webpack_require__(15).drag;
var d3_select = __webpack_require__(0).select;
var d3_mouse = __webpack_require__(0).mouse;
var d3_selection = __webpack_require__(0);

var Behavior = utils.make_class();
// methods
Behavior.prototype = {
  init: init,
  toggle_rotation_mode: toggle_rotation_mode,
  turn_everything_on: turn_everything_on,
  turn_everything_off: turn_everything_off,
  // toggle
  toggle_selectable_click: toggle_selectable_click,
  toggle_text_label_edit: toggle_text_label_edit,
  toggle_selectable_drag: toggle_selectable_drag,
  toggle_label_drag: toggle_label_drag,
  toggle_label_mouseover: toggle_label_mouseover,
  toggle_label_touch: toggle_label_touch,
  toggle_bezier_drag: toggle_bezier_drag,
  // util
  turn_off_drag: turn_off_drag,
  // get drag behaviors
  _get_selectable_drag: _get_selectable_drag,
  _get_bezier_drag: _get_bezier_drag,
  _get_reaction_label_drag: _get_reaction_label_drag,
  _get_node_label_drag: _get_node_label_drag,
  _get_generic_drag: _get_generic_drag,
  _get_generic_angular_drag: _get_generic_angular_drag
};
module.exports = Behavior;

// definitions
function init(map, undo_stack) {
  this.map = map;
  this.undo_stack = undo_stack;

  // make an empty function that can be called as a behavior and does nothing
  this.empty_behavior = function () {};

  // rotation mode operates separately from the rest
  this.rotation_mode_enabled = false;
  this.rotation_drag = d3_drag();

  // behaviors to be applied
  this.selectable_mousedown = null;
  this.text_label_mousedown = null;
  this.text_label_click = null;
  this.selectable_drag = this.empty_behavior;
  this.node_mouseover = null;
  this.node_mouseout = null;
  this.label_mousedown = null;
  this.label_mouseover = null;
  this.label_mouseout = null;
  this.label_touch = null;
  this.bezier_drag = this.empty_behavior;
  this.bezier_mouseover = null;
  this.bezier_mouseout = null;
  this.reaction_label_drag = this.empty_behavior;
  this.node_label_drag = this.empty_behavior;
  this.dragging = false;
  this.turn_everything_on();
}

/**
 * Toggle everything except rotation mode and text mode.
 */
function turn_everything_on() {
  this.toggle_selectable_click(true);
  this.toggle_selectable_drag(true);
  this.toggle_label_drag(true);
  this.toggle_label_mouseover(true);
  this.toggle_label_touch(true);
}

/**
 * Toggle everything except rotation mode and text mode.
 */
function turn_everything_off() {
  this.toggle_selectable_click(false);
  this.toggle_selectable_drag(false);
  this.toggle_label_drag(false);
  this.toggle_label_mouseover(false);
  this.toggle_label_touch(false);
}

/**
 * Listen for rotation, and rotate selected nodes.
 */
function toggle_rotation_mode(on_off) {
  if (on_off === undefined) {
    this.rotation_mode_enabled = !this.rotation_mode_enabled;
  } else {
    this.rotation_mode_enabled = on_off;
  }

  var selection_node = this.map.sel.selectAll('.node-circle');
  var selection_background = this.map.sel.selectAll('#canvas');

  if (this.rotation_mode_enabled) {
    this.map.callback_manager.run('start_rotation');

    var selected_nodes = this.map.get_selected_nodes();
    if (Object.keys(selected_nodes).length === 0) {
      console.warn('No selected nodes');
      return;
    }

    // show center
    this.center = average_location(selected_nodes);
    show_center.call(this);

    // this.set_status('Drag to rotate.')
    var map = this.map;
    var selected_node_ids = Object.keys(selected_nodes);
    var reactions = this.map.reactions;
    var nodes = this.map.nodes;
    var beziers = this.map.beziers;

    var start_fn = function start_fn(d) {
      // silence other listeners
      d3_selection.event.sourceEvent.stopPropagation();
    };
    var drag_fn = function drag_fn(d, angle, total_angle, center) {
      var updated = build.rotate_nodes(selected_nodes, reactions, beziers, angle, center);
      map.draw_these_nodes(updated.node_ids);
      map.draw_these_reactions(updated.reaction_ids);
    };
    var end_fn = function end_fn(d) {};
    var undo_fn = function undo_fn(d, total_angle, center) {
      // undo
      var these_nodes = {};
      selected_node_ids.forEach(function (id) {
        these_nodes[id] = nodes[id];
      });
      var updated = build.rotate_nodes(these_nodes, reactions, beziers, -total_angle, center);
      map.draw_these_nodes(updated.node_ids);
      map.draw_these_reactions(updated.reaction_ids);
    };
    var redo_fn = function redo_fn(d, total_angle, center) {
      // redo
      var these_nodes = {};
      selected_node_ids.forEach(function (id) {
        these_nodes[id] = nodes[id];
      });
      var updated = build.rotate_nodes(these_nodes, reactions, beziers, total_angle, center);
      map.draw_these_nodes(updated.node_ids);
      map.draw_these_reactions(updated.reaction_ids);
    };
    var center_fn = function () {
      return this.center;
    }.bind(this);
    this.rotation_drag = this._get_generic_angular_drag(start_fn, drag_fn, end_fn, undo_fn, redo_fn, center_fn, this.map.sel);
    selection_background.call(this.rotation_drag);
    this.selectable_drag = this.rotation_drag;
  } else {
    // turn off all listeners
    hide_center.call(this);
    selection_node.on('mousedown.center', null);
    selection_background.on('mousedown.center', null);
    selection_background.on('mousedown.drag', null);
    selection_background.on('touchstart.drag', null);
    this.rotation_drag = null;
    this.selectable_drag = null;
  }

  // definitions
  function show_center() {
    var sel = this.map.sel.selectAll('#rotation-center').data([0]);
    var enter_sel = sel.enter().append('g').attr('id', 'rotation-center');

    enter_sel.append('path').attr('d', 'M-32 0 L32 0').attr('class', 'rotation-center-line');
    enter_sel.append('path').attr('d', 'M0 -32 L0 32').attr('class', 'rotation-center-line');

    var update_sel = enter_sel.merge(sel);

    update_sel.attr('transform', 'translate(' + this.center.x + ',' + this.center.y + ')').attr('visibility', 'visible').on('mouseover', function () {
      var current = parseFloat(update_sel.selectAll('path').style('stroke-width'));
      update_sel.selectAll('path').style('stroke-width', current * 2 + 'px');
    }).on('mouseout', function () {
      update_sel.selectAll('path').style('stroke-width', null);
    }).call(d3_drag().on('drag', function () {
      var cur = utils.d3_transform_catch(update_sel.attr('transform'));
      var new_loc = [d3_selection.event.dx + cur.translate[0], d3_selection.event.dy + cur.translate[1]];
      update_sel.attr('transform', 'translate(' + new_loc + ')');
      this.center = { x: new_loc[0], y: new_loc[1] };
    }.bind(this)));
  }
  function hide_center(sel) {
    this.map.sel.select('#rotation-center').attr('visibility', 'hidden');
  }
  function average_location(nodes) {
    var xs = [];
    var ys = [];
    for (var node_id in nodes) {
      var node = nodes[node_id];
      if (node.x !== undefined) xs.push(node.x);
      if (node.y !== undefined) ys.push(node.y);
    }
    return { x: utils.mean(xs),
      y: utils.mean(ys) };
  }
}

/**
 * With no argument, toggle the node click on or off. Pass in a boolean argument
 * to set the on/off state.
 */
function toggle_selectable_click(on_off) {
  if (on_off === undefined) {
    on_off = this.selectable_mousedown === null;
  }
  if (on_off) {
    var map = this.map;
    this.selectable_mousedown = function (d) {
      // stop propogation for the buildinput to work right
      d3_selection.event.stopPropagation();
      // this.parentNode.__data__.was_selected = d3_select(this.parentNode).classed('selected')
      // d3_select(this.parentNode).classed('selected', true)
    };
    this.selectable_click = function (d) {
      // stop propogation for the buildinput to work right
      d3_selection.event.stopPropagation();
      // click suppressed. This DOES have en effect.
      if (d3_selection.event.defaultPrevented) return;
      // turn off the temporary selection so select_selectable
      // works. This is a bit of a hack.
      // if (!this.parentNode.__data__.was_selected)
      //     d3_select(this.parentNode).classed('selected', false)
      map.select_selectable(this, d, d3_selection.event.shiftKey);
      // this.parentNode.__data__.was_selected = false
    };
    this.node_mouseover = function (d) {
      d3_select(this).style('stroke-width', null);
      var current = parseFloat(d3_select(this).style('stroke-width'));
      if (!d3_select(this.parentNode).classed('selected')) d3_select(this).style('stroke-width', current * 3 + 'px');
    };
    this.node_mouseout = function (d) {
      d3_select(this).style('stroke-width', null);
    };
  } else {
    this.selectable_mousedown = null;
    this.selectable_click = null;
    this.node_mouseover = null;
    this.node_mouseout = null;
    this.map.sel.select('#nodes').selectAll('.node-circle').style('stroke-width', null);
  }
}

/**
 * With no argument, toggle the text edit on mousedown on/off. Pass in a boolean
 * argument to set the on/off state. The backup state is equal to
 * selectable_mousedown.
 */
function toggle_text_label_edit(on_off) {
  if (on_off === undefined) {
    on_off = this.text_edit_mousedown == null;
  }
  if (on_off) {
    var map = this.map;
    var selection = this.selection;
    this.text_label_mousedown = function () {
      if (d3_selection.event.defaultPrevented) {
        return; // mousedown suppressed
      }
      // run the callback
      var coords_a = utils.d3_transform_catch(d3_select(this).attr('transform')).translate;
      var coords = { x: coords_a[0], y: coords_a[1] };
      map.callback_manager.run('edit_text_label', null, d3_select(this), coords);
      d3_selection.event.stopPropagation();
    };
    this.text_label_click = null;
    this.map.sel.select('#text-labels').selectAll('.label').classed('edit-text-cursor', true);
    // add the new-label listener
    this.map.sel.on('mousedown.new_text_label', function (node) {
      // silence other listeners
      d3_selection.event.preventDefault();
      var coords = {
        x: d3_mouse(node)[0],
        y: d3_mouse(node)[1]
      };
      this.map.callback_manager.run('new_text_label', null, coords);
    }.bind(this, this.map.sel.node()));
  } else {
    this.text_label_mousedown = this.selectable_mousedown;
    this.text_label_click = this.selectable_click;
    this.map.sel.select('#text-labels').selectAll('.label').classed('edit-text-cursor', false);
    // remove the new-label listener
    this.map.sel.on('mousedown.new_text_label', null);
    this.map.callback_manager.run('hide_text_label_editor');
  }
}

/**
 * With no argument, toggle the node drag & bezier drag on or off. Pass in a
 * boolean argument to set the on/off state.
 */
function toggle_selectable_drag(on_off) {
  if (on_off === undefined) {
    on_off = this.selectable_drag === this.empty_behavior;
  }
  if (on_off) {
    this.selectable_drag = this._get_selectable_drag(this.map, this.undo_stack);
    this.bezier_drag = this._get_bezier_drag(this.map, this.undo_stack);
  } else {
    this.selectable_drag = this.empty_behavior;
    this.bezier_drag = this.empty_behavior;
  }
}

/**
 * With no argument, toggle the label drag on or off. Pass in a boolean argument
 * to set the on/off state.
 * @param {Boolean} on_off - The new on/off state.
 */
function toggle_label_drag(on_off) {
  if (on_off === undefined) {
    on_off = this.label_drag === this.empty_behavior;
  }
  if (on_off) {
    this.reaction_label_drag = this._get_reaction_label_drag(this.map);
    this.node_label_drag = this._get_node_label_drag(this.map);
  } else {
    this.reaction_label_drag = this.empty_behavior;
    this.node_label_drag = this.empty_behavior;
  }
}

/**
 * With no argument, toggle the tooltips on mouseover labels.
 * @param {Boolean} on_off - The new on/off state.
 */
function toggle_label_mouseover(on_off) {
  if (on_off === undefined) {
    on_off = this.label_mouseover === null;
  }

  if (on_off) {

    // Show/hide tooltip.
    // @param {String} type - 'reaction_label' or 'node_label'
    // @param {Object} d - D3 data for DOM element
    this.label_mouseover = function (type, d) {
      if (!this.dragging) {
        this.map.callback_manager.run('show_tooltip', null, type, d);
      }
    }.bind(this);

    this.label_mouseout = function () {
      this.map.callback_manager.run('delay_hide_tooltip');
    }.bind(this);
  } else {
    this.label_mouseover = null;
  }
}

/**
 * With no argument, toggle the tooltips upon touching of labels.
 * @param {Boolean} on_off - The new on/off state. If this argument is not provided, then toggle the state.
 */
function toggle_label_touch(on_off) {
  var _this = this;

  if (on_off === undefined) {
    on_off = this.label_touch === null;
  }

  if (on_off) {
    this.label_touch = function (type, d) {
      if (!_this.dragging) {
        _this.map.callback_manager.run('show_tooltip', null, type, d);
      }
    };
  } else {
    this.label_touch = null;
  }
}

/**
 * With no argument, toggle the bezier drag on or off. Pass in a boolean
 * argument to set the on/off state.
 */
function toggle_bezier_drag(on_off) {
  if (on_off === undefined) {
    on_off = this.bezier_drag === this.empty_behavior;
  }
  if (on_off) {
    this.bezier_drag = this._get_bezier_drag(this.map);
    this.bezier_mouseover = function (d) {
      d3_select(this).style('stroke-width', String(3) + 'px');
    };
    this.bezier_mouseout = function (d) {
      d3_select(this).style('stroke-width', String(1) + 'px');
    };
  } else {
    this.bezier_drag = this.empty_behavior;
    this.bezier_mouseover = null;
    this.bezier_mouseout = null;
  }
}

function turn_off_drag(sel) {
  sel.on('mousedown.drag', null);
  sel.on('touchstart.drag', null);
}

/**
 * Drag the selected nodes and text labels.
 * @param {} map -
 * @param {} undo_stack -
 */
function _get_selectable_drag(map, undo_stack) {
  // define some variables
  var behavior = d3_drag();
  var the_timeout = null;
  var total_displacement = null;
  // for nodes
  var node_ids_to_drag = null;
  var reaction_ids = null;
  // for text labels
  var text_label_ids_to_drag = null;
  var move_label = function move_label(text_label_id, displacement) {
    var text_label = map.text_labels[text_label_id];
    text_label.x = text_label.x + displacement.x;
    text_label.y = text_label.y + displacement.y;
  };
  var set_dragging = function (on_off) {
    this.dragging = on_off;
  }.bind(this);

  behavior.on('start', function (d) {
    set_dragging(true);

    // silence other listeners (e.g. nodes BELOW this one)
    d3_selection.event.sourceEvent.stopPropagation();
    // remember the total displacement for later
    total_displacement = { x: 0, y: 0

      // If a text label is selected, the rest is not necessary
    };if (d3_select(this).attr('class').indexOf('label') === -1) {
      // Note that drag start is called even for a click event
      var data = this.parentNode.__data__,
          bigg_id = data.bigg_id,
          node_group = this.parentNode;
      // Move element to back (for the next step to work). Wait 200ms
      // before making the move, becuase otherwise the element will be
      // deleted before the click event gets called, and selection
      // will stop working.
      the_timeout = setTimeout(function () {
        node_group.parentNode.insertBefore(node_group, node_group.parentNode.firstChild);
      }, 200);
      // prepare to combine metabolites
      map.sel.selectAll('.metabolite-circle').on('mouseover.combine', function (d) {
        if (d.bigg_id === bigg_id && d.node_id !== data.node_id) {
          d3_select(this).style('stroke-width', String(12) + 'px').classed('node-to-combine', true);
        }
      }).on('mouseout.combine', function (d) {
        if (d.bigg_id === bigg_id) {
          map.sel.selectAll('.node-to-combine').style('stroke-width', String(2) + 'px').classed('node-to-combine', false);
        }
      });
    }
  });

  behavior.on('drag', function (d) {
    // if this node is not already selected, then select this one and
    // deselect all other nodes. Otherwise, leave the selection alone.
    if (!d3_select(this.parentNode).classed('selected')) {
      map.select_selectable(this, d);
    }

    // get the grabbed id
    var grabbed = {};
    if (d3_select(this).attr('class').indexOf('label') === -1) {
      // if it is a node
      grabbed['type'] = 'node';
      grabbed['id'] = this.parentNode.__data__.node_id;
    } else {
      // if it is a text label
      grabbed['type'] = 'label';
      grabbed['id'] = this.__data__.text_label_id;
    }

    var selected_node_ids = map.get_selected_node_ids();
    var selected_text_label_ids = map.get_selected_text_label_ids();
    node_ids_to_drag = [];text_label_ids_to_drag = [];
    // choose the nodes and text labels to drag
    if (grabbed['type'] == 'node' && selected_node_ids.indexOf(grabbed['id']) === -1) {
      node_ids_to_drag.push(grabbed['id']);
    } else if (grabbed['type'] === 'label' && selected_text_label_ids.indexOf(grabbed['id']) === -1) {
      text_label_ids_to_drag.push(grabbed['id']);
    } else {
      node_ids_to_drag = selected_node_ids;
      text_label_ids_to_drag = selected_text_label_ids;
    }
    reaction_ids = [];
    var displacement = {
      x: d3_selection.event.dx,
      y: d3_selection.event.dy
    };
    total_displacement = utils.c_plus_c(total_displacement, displacement);
    node_ids_to_drag.forEach(function (node_id) {
      // update data
      var node = map.nodes[node_id],
          updated = build.move_node_and_dependents(node, node_id, map.reactions, map.beziers, displacement);
      reaction_ids = utils.unique_concat([reaction_ids, updated.reaction_ids]);
      // remember the displacements
      // if (!(node_id in total_displacement))  total_displacement[node_id] = { x: 0, y: 0 }
      // total_displacement[node_id] = utils.c_plus_c(total_displacement[node_id], displacement)
    });
    text_label_ids_to_drag.forEach(function (text_label_id) {
      move_label(text_label_id, displacement);
      // remember the displacements
      // if (!(node_id in total_displacement))  total_displacement[node_id] = { x: 0, y: 0 }
      // total_displacement[node_id] = utils.c_plus_c(total_displacement[node_id], displacement)
    });
    // draw
    map.draw_these_nodes(node_ids_to_drag);
    map.draw_these_reactions(reaction_ids);
    map.draw_these_text_labels(text_label_ids_to_drag);
  });

  behavior.on('end', function () {
    set_dragging(false);

    if (node_ids_to_drag === null) {
      // Drag end can be called when drag has not been called. In this, case, do
      // nothing.
      total_displacement = null;
      node_ids_to_drag = null;
      text_label_ids_to_drag = null;
      reaction_ids = null;
      the_timeout = null;
      return;
    }
    // look for mets to combine
    var node_to_combine_array = [];
    map.sel.selectAll('.node-to-combine').each(function (d) {
      node_to_combine_array.push(d.node_id);
    });
    if (node_to_combine_array.length === 1) {
      // If a node is ready for it, combine nodes
      var fixed_node_id = node_to_combine_array[0],
          dragged_node_id = this.parentNode.__data__.node_id,
          saved_dragged_node = utils.clone(map.nodes[dragged_node_id]),
          segment_objs_moved_to_combine = combine_nodes_and_draw(fixed_node_id, dragged_node_id);
      undo_stack.push(function () {
        // undo
        // put the old node back
        map.nodes[dragged_node_id] = saved_dragged_node;
        var fixed_node = map.nodes[fixed_node_id],
            updated_reactions = [];
        segment_objs_moved_to_combine.forEach(function (segment_obj) {
          var segment = map.reactions[segment_obj.reaction_id].segments[segment_obj.segment_id];
          if (segment.from_node_id == fixed_node_id) {
            segment.from_node_id = dragged_node_id;
          } else if (segment.to_node_id == fixed_node_id) {
            segment.to_node_id = dragged_node_id;
          } else {
            console.error('Segment does not connect to fixed node');
          }
          // removed this segment_obj from the fixed node
          fixed_node.connected_segments = fixed_node.connected_segments.filter(function (x) {
            return !(x.reaction_id == segment_obj.reaction_id && x.segment_id == segment_obj.segment_id);
          });
          if (updated_reactions.indexOf(segment_obj.reaction_id) == -1) updated_reactions.push(segment_obj.reaction_id);
        });
        map.draw_these_nodes([dragged_node_id]);
        map.draw_these_reactions(updated_reactions);
      }, function () {
        // redo
        combine_nodes_and_draw(fixed_node_id, dragged_node_id);
      });
    } else {
      // otherwise, drag node

      // add to undo/redo stack
      // remember the displacement, dragged nodes, and reactions
      var saved_displacement = utils.clone(total_displacement),

      // BUG TODO this variable disappears!
      // Happens sometimes when you drag a node, then delete it, then undo twice
      saved_node_ids = utils.clone(node_ids_to_drag),
          saved_text_label_ids = utils.clone(text_label_ids_to_drag),
          saved_reaction_ids = utils.clone(reaction_ids);
      undo_stack.push(function () {
        // undo
        saved_node_ids.forEach(function (node_id) {
          var node = map.nodes[node_id];
          build.move_node_and_dependents(node, node_id, map.reactions, map.beziers, utils.c_times_scalar(saved_displacement, -1));
        });
        saved_text_label_ids.forEach(function (text_label_id) {
          move_label(text_label_id, utils.c_times_scalar(saved_displacement, -1));
        });
        map.draw_these_nodes(saved_node_ids);
        map.draw_these_reactions(saved_reaction_ids);
        map.draw_these_text_labels(saved_text_label_ids);
      }, function () {
        // redo
        saved_node_ids.forEach(function (node_id) {
          var node = map.nodes[node_id];
          build.move_node_and_dependents(node, node_id, map.reactions, map.beziers, saved_displacement);
        });
        saved_text_label_ids.forEach(function (text_label_id) {
          move_label(text_label_id, saved_displacement);
        });
        map.draw_these_nodes(saved_node_ids);
        map.draw_these_reactions(saved_reaction_ids);
        map.draw_these_text_labels(saved_text_label_ids);
      });
    }

    // stop combining metabolites
    map.sel.selectAll('.metabolite-circle').on('mouseover.combine', null).on('mouseout.combine', null);

    // clear the timeout
    clearTimeout(the_timeout);

    // clear the shared variables
    total_displacement = null;
    node_ids_to_drag = null;
    text_label_ids_to_drag = null;
    reaction_ids = null;
    the_timeout = null;
  });

  return behavior;

  // definitions
  function combine_nodes_and_draw(fixed_node_id, dragged_node_id) {
    var dragged_node = map.nodes[dragged_node_id];
    var fixed_node = map.nodes[fixed_node_id];
    var updated_segment_objs = [];
    dragged_node.connected_segments.forEach(function (segment_obj) {
      // change the segments to reflect
      var segment;
      try {
        segment = map.reactions[segment_obj.reaction_id].segments[segment_obj.segment_id];
        if (segment === undefined) throw new Error('undefined segment');
      } catch (e) {
        console.warn('Could not find connected segment ' + segment_obj.segment_id);
        return;
      }
      if (segment.from_node_id == dragged_node_id) segment.from_node_id = fixed_node_id;else if (segment.to_node_id == dragged_node_id) segment.to_node_id = fixed_node_id;else {
        console.error('Segment does not connect to dragged node');
        return;
      }
      // moved segment_obj to fixed_node
      fixed_node.connected_segments.push(segment_obj);
      updated_segment_objs.push(utils.clone(segment_obj));
      return;
    });
    // delete the old node
    map.delete_node_data([dragged_node_id]);
    // turn off the class
    map.sel.selectAll('.node-to-combine').classed('node-to-combine', false);
    // draw
    map.draw_everything();
    // return for undo
    return updated_segment_objs;
  }
}

function _get_bezier_drag(map) {
  var move_bezier = function move_bezier(reaction_id, segment_id, bez, bezier_id, displacement) {
    var segment = map.reactions[reaction_id].segments[segment_id];
    segment[bez] = utils.c_plus_c(segment[bez], displacement);
    map.beziers[bezier_id].x = segment[bez].x;
    map.beziers[bezier_id].y = segment[bez].y;
  };
  var start_fn = function start_fn(d) {
    d.dragging = true;
  };
  var drag_fn = function drag_fn(d, displacement, total_displacement) {
    // draw
    move_bezier(d.reaction_id, d.segment_id, d.bezier, d.bezier_id, displacement);
    map.draw_these_reactions([d.reaction_id], false);
    map.draw_these_beziers([d.bezier_id]);
  };
  var end_fn = function end_fn(d) {
    d.dragging = false;
  };
  var undo_fn = function undo_fn(d, displacement) {
    move_bezier(d.reaction_id, d.segment_id, d.bezier, d.bezier_id, utils.c_times_scalar(displacement, -1));
    map.draw_these_reactions([d.reaction_id], false);
    map.draw_these_beziers([d.bezier_id]);
  };
  var redo_fn = function redo_fn(d, displacement) {
    move_bezier(d.reaction_id, d.segment_id, d.bezier, d.bezier_id, displacement);
    map.draw_these_reactions([d.reaction_id], false);
    map.draw_these_beziers([d.bezier_id]);
  };
  return this._get_generic_drag(start_fn, drag_fn, end_fn, undo_fn, redo_fn, this.map.sel);
}

function _get_reaction_label_drag(map) {
  var move_label = function move_label(reaction_id, displacement) {
    var reaction = map.reactions[reaction_id];
    reaction.label_x = reaction.label_x + displacement.x;
    reaction.label_y = reaction.label_y + displacement.y;
  };
  var start_fn = function start_fn(d) {
    // hide tooltips when drag starts
    map.callback_manager.run('hide_tooltip');
  };
  var drag_fn = function drag_fn(d, displacement, total_displacement) {
    // draw
    move_label(d.reaction_id, displacement);
    map.draw_these_reactions([d.reaction_id]);
  };
  var end_fn = function end_fn(d) {};
  var undo_fn = function undo_fn(d, displacement) {
    move_label(d.reaction_id, utils.c_times_scalar(displacement, -1));
    map.draw_these_reactions([d.reaction_id]);
  };
  var redo_fn = function redo_fn(d, displacement) {
    move_label(d.reaction_id, displacement);
    map.draw_these_reactions([d.reaction_id]);
  };
  return this._get_generic_drag(start_fn, drag_fn, end_fn, undo_fn, redo_fn, this.map.sel);
}

function _get_node_label_drag(map) {
  var move_label = function move_label(node_id, displacement) {
    var node = map.nodes[node_id];
    node.label_x = node.label_x + displacement.x;
    node.label_y = node.label_y + displacement.y;
  };
  var start_fn = function start_fn(d) {
    // hide tooltips when drag starts
    map.callback_manager.run('hide_tooltip');
  };
  var drag_fn = function drag_fn(d, displacement, total_displacement) {
    // draw
    move_label(d.node_id, displacement);
    map.draw_these_nodes([d.node_id]);
  };
  var end_fn = function end_fn(d) {};
  var undo_fn = function undo_fn(d, displacement) {
    move_label(d.node_id, utils.c_times_scalar(displacement, -1));
    map.draw_these_nodes([d.node_id]);
  };
  var redo_fn = function redo_fn(d, displacement) {
    move_label(d.node_id, displacement);
    map.draw_these_nodes([d.node_id]);
  };
  return this._get_generic_drag(start_fn, drag_fn, end_fn, undo_fn, redo_fn, this.map.sel);
}

/**
 * Make a generic drag behavior, with undo/redo.
 *
 * start_fn: function (d) Called at drag start.
 *
 * drag_fn: function (d, displacement, total_displacement) Called during drag.
 *
 * end_fn
 *
 * undo_fn
 *
 * redo_fn
 *
 * relative_to_selection: a d3 selection that the locations are calculated
 * against.
 *
 */
function _get_generic_drag(start_fn, drag_fn, end_fn, undo_fn, redo_fn, relative_to_selection) {
  // define some variables
  var behavior = d3_drag();
  var total_displacement;
  var undo_stack = this.undo_stack;
  var rel = relative_to_selection.node();

  behavior.on('start', function (d) {
    this.dragging = true;

    // silence other listeners
    d3_selection.event.sourceEvent.stopPropagation();
    total_displacement = { x: 0, y: 0 };
    start_fn(d);
  }.bind(this));

  behavior.on('drag', function (d) {
    // update data
    var displacement = {
      x: d3_selection.event.dx,
      y: d3_selection.event.dy
    };
    var location = {
      x: d3_mouse(rel)[0],
      y: d3_mouse(rel)[1]

      // remember the displacement
    };total_displacement = utils.c_plus_c(total_displacement, displacement);
    drag_fn(d, displacement, total_displacement, location);
  }.bind(this));

  behavior.on('end', function (d) {
    this.dragging = false;

    // add to undo/redo stack
    // remember the displacement, dragged nodes, and reactions
    var saved_d = utils.clone(d);
    var saved_displacement = utils.clone(total_displacement); // BUG TODO this variable disappears!
    var saved_location = {
      x: d3_mouse(rel)[0],
      y: d3_mouse(rel)[1]
    };

    undo_stack.push(function () {
      // undo
      undo_fn(saved_d, saved_displacement, saved_location);
    }, function () {
      // redo
      redo_fn(saved_d, saved_displacement, saved_location);
    });
    end_fn(d);
  }.bind(this));

  return behavior;
}

/** Make a generic drag behavior, with undo/redo. Supplies angles in place of
 * displacements.
 *
 * start_fn: function (d) Called at drag start.
 *
 * drag_fn: function (d, displacement, total_displacement) Called during drag.
 *
 * end_fn:
 *
 * undo_fn:
 *
 * redo_fn:
 *
 * get_center:
 *
 * relative_to_selection: a d3 selection that the locations are calculated
 * against.
 *
 */
function _get_generic_angular_drag(start_fn, drag_fn, end_fn, undo_fn, redo_fn, get_center, relative_to_selection) {

  // define some variables
  var behavior = d3_drag();
  var total_angle;
  var undo_stack = this.undo_stack;
  var rel = relative_to_selection.node();

  behavior.on('start', function (d) {
    this.dragging = true;

    // silence other listeners
    d3_selection.event.sourceEvent.stopPropagation();
    total_angle = 0;
    start_fn(d);
  }.bind(this));

  behavior.on('drag', function (d) {
    // update data
    var displacement = {
      x: d3_selection.event.dx,
      y: d3_selection.event.dy
    };
    var location = {
      x: d3_mouse(rel)[0],
      y: d3_mouse(rel)[1]
    };
    var center = get_center();
    var angle = utils.angle_for_event(displacement, location, center);
    // remember the displacement
    total_angle = total_angle + angle;
    drag_fn(d, angle, total_angle, center);
  }.bind(this));

  behavior.on('end', function (d) {
    this.dragging = false;

    // add to undo/redo stack
    // remember the displacement, dragged nodes, and reactions
    var saved_d = utils.clone(d);
    var saved_angle = total_angle;
    var saved_center = utils.clone(get_center());

    undo_stack.push(function () {
      // undo
      undo_fn(saved_d, saved_angle, saved_center);
    }, function () {
      // redo
      redo_fn(saved_d, saved_angle, saved_center);
    });
    end_fn(d);
  }.bind(this));

  return behavior;
}

/***/ }),
/* 97 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_band__ = __webpack_require__(290);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleBand", function() { return __WEBPACK_IMPORTED_MODULE_0__src_band__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scalePoint", function() { return __WEBPACK_IMPORTED_MODULE_0__src_band__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_identity__ = __webpack_require__(307);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleIdentity", function() { return __WEBPACK_IMPORTED_MODULE_1__src_identity__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_linear__ = __webpack_require__(24);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleLinear", function() { return __WEBPACK_IMPORTED_MODULE_2__src_linear__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_log__ = __webpack_require__(309);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleLog", function() { return __WEBPACK_IMPORTED_MODULE_3__src_log__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_ordinal__ = __webpack_require__(110);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleOrdinal", function() { return __WEBPACK_IMPORTED_MODULE_4__src_ordinal__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleImplicit", function() { return __WEBPACK_IMPORTED_MODULE_4__src_ordinal__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_pow__ = __webpack_require__(310);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scalePow", function() { return __WEBPACK_IMPORTED_MODULE_5__src_pow__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleSqrt", function() { return __WEBPACK_IMPORTED_MODULE_5__src_pow__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__src_quantile__ = __webpack_require__(311);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleQuantile", function() { return __WEBPACK_IMPORTED_MODULE_6__src_quantile__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__src_quantize__ = __webpack_require__(312);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleQuantize", function() { return __WEBPACK_IMPORTED_MODULE_7__src_quantize__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__src_threshold__ = __webpack_require__(313);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleThreshold", function() { return __WEBPACK_IMPORTED_MODULE_8__src_threshold__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__src_time__ = __webpack_require__(113);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleTime", function() { return __WEBPACK_IMPORTED_MODULE_9__src_time__["b"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__src_utcTime__ = __webpack_require__(329);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleUtc", function() { return __WEBPACK_IMPORTED_MODULE_10__src_utcTime__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__src_category10__ = __webpack_require__(330);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "schemeCategory10", function() { return __WEBPACK_IMPORTED_MODULE_11__src_category10__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__src_category20b__ = __webpack_require__(331);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20b", function() { return __WEBPACK_IMPORTED_MODULE_12__src_category20b__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__src_category20c__ = __webpack_require__(332);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20c", function() { return __WEBPACK_IMPORTED_MODULE_13__src_category20c__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__src_category20__ = __webpack_require__(333);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "schemeCategory20", function() { return __WEBPACK_IMPORTED_MODULE_14__src_category20__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__ = __webpack_require__(334);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateCubehelixDefault", function() { return __WEBPACK_IMPORTED_MODULE_15__src_cubehelix__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__src_rainbow__ = __webpack_require__(335);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateRainbow", function() { return __WEBPACK_IMPORTED_MODULE_16__src_rainbow__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateWarm", function() { return __WEBPACK_IMPORTED_MODULE_16__src_rainbow__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateCool", function() { return __WEBPACK_IMPORTED_MODULE_16__src_rainbow__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__src_viridis__ = __webpack_require__(336);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateViridis", function() { return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateMagma", function() { return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolateInferno", function() { return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "interpolatePlasma", function() { return __WEBPACK_IMPORTED_MODULE_17__src_viridis__["d"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__src_sequential__ = __webpack_require__(337);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "scaleSequential", function() { return __WEBPACK_IMPORTED_MODULE_18__src_sequential__["a"]; });







































/***/ }),
/* 98 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export bisectRight */
/* unused harmony export bisectLeft */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ascending__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__bisector__ = __webpack_require__(99);



var ascendingBisect = Object(__WEBPACK_IMPORTED_MODULE_1__bisector__["a" /* default */])(__WEBPACK_IMPORTED_MODULE_0__ascending__["a" /* default */]);
var bisectRight = ascendingBisect.right;
var bisectLeft = ascendingBisect.left;
/* harmony default export */ __webpack_exports__["a"] = (bisectRight);


/***/ }),
/* 99 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ascending__ = __webpack_require__(18);


/* harmony default export */ __webpack_exports__["a"] = (function(compare) {
  if (compare.length === 1) compare = ascendingComparator(compare);
  return {
    left: function(a, x, lo, hi) {
      if (lo == null) lo = 0;
      if (hi == null) hi = a.length;
      while (lo < hi) {
        var mid = lo + hi >>> 1;
        if (compare(a[mid], x) < 0) lo = mid + 1;
        else hi = mid;
      }
      return lo;
    },
    right: function(a, x, lo, hi) {
      if (lo == null) lo = 0;
      if (hi == null) hi = a.length;
      while (lo < hi) {
        var mid = lo + hi >>> 1;
        if (compare(a[mid], x) > 0) hi = mid;
        else lo = mid + 1;
      }
      return lo;
    }
  };
});

function ascendingComparator(f) {
  return function(d, x) {
    return Object(__WEBPACK_IMPORTED_MODULE_0__ascending__["a" /* default */])(f(d), x);
  };
}


/***/ }),
/* 100 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = pair;
/* unused harmony default export */ var _unused_webpack_default_export = (function(array, f) {
  if (f == null) f = pair;
  var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);
  while (i < n) pairs[i] = f(p, p = array[++i]);
  return pairs;
});

function pair(a, b) {
  return [a, b];
}


/***/ }),
/* 101 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__variance__ = __webpack_require__(102);


/* harmony default export */ __webpack_exports__["a"] = (function(array, f) {
  var v = Object(__WEBPACK_IMPORTED_MODULE_0__variance__["a" /* default */])(array, f);
  return v ? Math.sqrt(v) : v;
});


/***/ }),
/* 102 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(23);


/* harmony default export */ __webpack_exports__["a"] = (function(values, valueof) {
  var n = values.length,
      m = 0,
      i = -1,
      mean = 0,
      value,
      delta,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(values[i]))) {
        delta = value - mean;
        mean += delta / ++m;
        sum += delta * (value - mean);
      }
    }
  }

  else {
    while (++i < n) {
      if (!isNaN(value = Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(valueof(values[i], i, values)))) {
        delta = value - mean;
        mean += delta / ++m;
        sum += delta * (value - mean);
      }
    }
  }

  if (m > 1) return sum / (m - 1);
});


/***/ }),
/* 103 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      min,
      max;

  if (valueof == null) {
    while (++i < n) { // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        min = max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = values[i]) != null) {
            if (min > value) min = value;
            if (max < value) max = value;
          }
        }
      }
    }
  }

  else {
    while (++i < n) { // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        min = max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null) {
            if (min > value) min = value;
            if (max < value) max = value;
          }
        }
      }
    }
  }

  return [min, max];
});


/***/ }),
/* 104 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return slice; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return map; });
var array = Array.prototype;

var slice = array.slice;
var map = array.map;


/***/ }),
/* 105 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(start, stop, step) {
  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;

  var i = -1,
      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,
      range = new Array(n);

  while (++i < n) {
    range[i] = start + i * step;
  }

  return range;
});


/***/ }),
/* 106 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = tickIncrement;
/* harmony export (immutable) */ __webpack_exports__["c"] = tickStep;
var e10 = Math.sqrt(50),
    e5 = Math.sqrt(10),
    e2 = Math.sqrt(2);

/* harmony default export */ __webpack_exports__["a"] = (function(start, stop, count) {
  var reverse,
      i = -1,
      n,
      ticks,
      step;

  stop = +stop, start = +start, count = +count;
  if (start === stop && count > 0) return [start];
  if (reverse = stop < start) n = start, start = stop, stop = n;
  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];

  if (step > 0) {
    start = Math.ceil(start / step);
    stop = Math.floor(stop / step);
    ticks = new Array(n = Math.ceil(stop - start + 1));
    while (++i < n) ticks[i] = (start + i) * step;
  } else {
    start = Math.floor(start * step);
    stop = Math.ceil(stop * step);
    ticks = new Array(n = Math.ceil(start - stop + 1));
    while (++i < n) ticks[i] = (start - i) / step;
  }

  if (reverse) ticks.reverse();

  return ticks;
});

function tickIncrement(start, stop, count) {
  var step = (stop - start) / Math.max(0, count),
      power = Math.floor(Math.log(step) / Math.LN10),
      error = step / Math.pow(10, power);
  return power >= 0
      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)
      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);
}

function tickStep(start, stop, count) {
  var step0 = Math.abs(stop - start) / Math.max(0, count),
      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),
      error = step0 / step1;
  if (error >= e10) step1 *= 10;
  else if (error >= e5) step1 *= 5;
  else if (error >= e2) step1 *= 2;
  return stop < start ? -step1 : step1;
}


/***/ }),
/* 107 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(values) {
  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;
});


/***/ }),
/* 108 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      min;

  if (valueof == null) {
    while (++i < n) { // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        min = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = values[i]) != null && min > value) {
            min = value;
          }
        }
      }
    }
  }

  else {
    while (++i < n) { // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        min = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null && min > value) {
            min = value;
          }
        }
      }
    }
  }

  return min;
});


/***/ }),
/* 109 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__min__ = __webpack_require__(108);


/* harmony default export */ __webpack_exports__["a"] = (function(matrix) {
  if (!(n = matrix.length)) return [];
  for (var i = -1, m = Object(__WEBPACK_IMPORTED_MODULE_0__min__["a" /* default */])(matrix, length), transpose = new Array(m); ++i < m;) {
    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {
      row[j] = matrix[j][i];
    }
  }
  return transpose;
});

function length(d) {
  return d.length;
}


/***/ }),
/* 110 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return implicit; });
/* harmony export (immutable) */ __webpack_exports__["a"] = ordinal;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_collection__ = __webpack_require__(72);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__array__ = __webpack_require__(14);



var implicit = {name: "implicit"};

function ordinal(range) {
  var index = Object(__WEBPACK_IMPORTED_MODULE_0_d3_collection__["a" /* map */])(),
      domain = [],
      unknown = implicit;

  range = range == null ? [] : __WEBPACK_IMPORTED_MODULE_1__array__["b" /* slice */].call(range);

  function scale(d) {
    var key = d + "", i = index.get(key);
    if (!i) {
      if (unknown !== implicit) return unknown;
      index.set(key, i = domain.push(d));
    }
    return range[(i - 1) % range.length];
  }

  scale.domain = function(_) {
    if (!arguments.length) return domain.slice();
    domain = [], index = Object(__WEBPACK_IMPORTED_MODULE_0_d3_collection__["a" /* map */])();
    var i = -1, n = _.length, d, key;
    while (++i < n) if (!index.has(key = (d = _[i]) + "")) index.set(key, domain.push(d));
    return scale;
  };

  scale.range = function(_) {
    return arguments.length ? (range = __WEBPACK_IMPORTED_MODULE_1__array__["b" /* slice */].call(_), scale) : range.slice();
  };

  scale.unknown = function(_) {
    return arguments.length ? (unknown = _, scale) : unknown;
  };

  scale.copy = function() {
    return ordinal()
        .domain(domain)
        .range(range)
        .unknown(unknown);
  };

  return scale;
}


/***/ }),
/* 111 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return +x;
});


/***/ }),
/* 112 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(domain, interval) {
  domain = domain.slice();

  var i0 = 0,
      i1 = domain.length - 1,
      x0 = domain[i0],
      x1 = domain[i1],
      t;

  if (x1 < x0) {
    t = i0, i0 = i1, i1 = t;
    t = x0, x0 = x1, x1 = t;
  }

  domain[i0] = interval.floor(x0);
  domain[i1] = interval.ceil(x1);
  return domain;
});


/***/ }),
/* 113 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = calendar;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3_time__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3_time_format__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__array__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__continuous__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__nice__ = __webpack_require__(112);








var durationSecond = 1000,
    durationMinute = durationSecond * 60,
    durationHour = durationMinute * 60,
    durationDay = durationHour * 24,
    durationWeek = durationDay * 7,
    durationMonth = durationDay * 30,
    durationYear = durationDay * 365;

function date(t) {
  return new Date(t);
}

function number(t) {
  return t instanceof Date ? +t : +new Date(+t);
}

function calendar(year, month, week, day, hour, minute, second, millisecond, format) {
  var scale = Object(__WEBPACK_IMPORTED_MODULE_5__continuous__["b" /* default */])(__WEBPACK_IMPORTED_MODULE_5__continuous__["c" /* deinterpolateLinear */], __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["c" /* interpolateNumber */]),
      invert = scale.invert,
      domain = scale.domain;

  var formatMillisecond = format(".%L"),
      formatSecond = format(":%S"),
      formatMinute = format("%I:%M"),
      formatHour = format("%I %p"),
      formatDay = format("%a %d"),
      formatWeek = format("%b %d"),
      formatMonth = format("%B"),
      formatYear = format("%Y");

  var tickIntervals = [
    [second,  1,      durationSecond],
    [second,  5,  5 * durationSecond],
    [second, 15, 15 * durationSecond],
    [second, 30, 30 * durationSecond],
    [minute,  1,      durationMinute],
    [minute,  5,  5 * durationMinute],
    [minute, 15, 15 * durationMinute],
    [minute, 30, 30 * durationMinute],
    [  hour,  1,      durationHour  ],
    [  hour,  3,  3 * durationHour  ],
    [  hour,  6,  6 * durationHour  ],
    [  hour, 12, 12 * durationHour  ],
    [   day,  1,      durationDay   ],
    [   day,  2,  2 * durationDay   ],
    [  week,  1,      durationWeek  ],
    [ month,  1,      durationMonth ],
    [ month,  3,  3 * durationMonth ],
    [  year,  1,      durationYear  ]
  ];

  function tickFormat(date) {
    return (second(date) < date ? formatMillisecond
        : minute(date) < date ? formatSecond
        : hour(date) < date ? formatMinute
        : day(date) < date ? formatHour
        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)
        : year(date) < date ? formatMonth
        : formatYear)(date);
  }

  function tickInterval(interval, start, stop, step) {
    if (interval == null) interval = 10;

    // If a desired tick count is specified, pick a reasonable tick interval
    // based on the extent of the domain and a rough estimate of tick size.
    // Otherwise, assume interval is already a time interval and use it.
    if (typeof interval === "number") {
      var target = Math.abs(stop - start) / interval,
          i = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["c" /* bisector */])(function(i) { return i[2]; }).right(tickIntervals, target);
      if (i === tickIntervals.length) {
        step = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["g" /* tickStep */])(start / durationYear, stop / durationYear, interval);
        interval = year;
      } else if (i) {
        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];
        step = i[1];
        interval = i[0];
      } else {
        step = Math.max(Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["g" /* tickStep */])(start, stop, interval), 1);
        interval = millisecond;
      }
    }

    return step == null ? interval : interval.every(step);
  }

  scale.invert = function(y) {
    return new Date(invert(y));
  };

  scale.domain = function(_) {
    return arguments.length ? domain(__WEBPACK_IMPORTED_MODULE_4__array__["a" /* map */].call(_, number)) : domain().map(date);
  };

  scale.ticks = function(interval, step) {
    var d = domain(),
        t0 = d[0],
        t1 = d[d.length - 1],
        r = t1 < t0,
        t;
    if (r) t = t0, t0 = t1, t1 = t;
    t = tickInterval(interval, t0, t1, step);
    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop
    return r ? t.reverse() : t;
  };

  scale.tickFormat = function(count, specifier) {
    return specifier == null ? tickFormat : format(specifier);
  };

  scale.nice = function(interval, step) {
    var d = domain();
    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))
        ? domain(Object(__WEBPACK_IMPORTED_MODULE_6__nice__["a" /* default */])(d, interval))
        : scale;
  };

  scale.copy = function() {
    return Object(__WEBPACK_IMPORTED_MODULE_5__continuous__["a" /* copy */])(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));
  };

  return scale;
}

/* harmony default export */ __webpack_exports__["b"] = (function() {
  return calendar(__WEBPACK_IMPORTED_MODULE_2_d3_time__["k" /* timeYear */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["f" /* timeMonth */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["j" /* timeWeek */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["a" /* timeDay */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["b" /* timeHour */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["d" /* timeMinute */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["g" /* timeSecond */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["c" /* timeMillisecond */], __WEBPACK_IMPORTED_MODULE_3_d3_time_format__["a" /* timeFormat */]).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);
});


/***/ }),
/* 114 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__ = __webpack_require__(57);
/* unused harmony reexport timeFormatDefaultLocale */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["a"]; });
/* unused harmony reexport timeParse */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_0__src_defaultLocale__["b"]; });
/* unused harmony reexport utcParse */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_locale__ = __webpack_require__(115);
/* unused harmony reexport timeFormatLocale */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_isoFormat__ = __webpack_require__(116);
/* unused harmony reexport isoFormat */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_isoParse__ = __webpack_require__(328);
/* unused harmony reexport isoParse */






/***/ }),
/* 115 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = formatLocale;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_time__ = __webpack_require__(56);


function localDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);
    date.setFullYear(d.y);
    return date;
  }
  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);
}

function utcDate(d) {
  if (0 <= d.y && d.y < 100) {
    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));
    date.setUTCFullYear(d.y);
    return date;
  }
  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));
}

function newYear(y) {
  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};
}

function formatLocale(locale) {
  var locale_dateTime = locale.dateTime,
      locale_date = locale.date,
      locale_time = locale.time,
      locale_periods = locale.periods,
      locale_weekdays = locale.days,
      locale_shortWeekdays = locale.shortDays,
      locale_months = locale.months,
      locale_shortMonths = locale.shortMonths;

  var periodRe = formatRe(locale_periods),
      periodLookup = formatLookup(locale_periods),
      weekdayRe = formatRe(locale_weekdays),
      weekdayLookup = formatLookup(locale_weekdays),
      shortWeekdayRe = formatRe(locale_shortWeekdays),
      shortWeekdayLookup = formatLookup(locale_shortWeekdays),
      monthRe = formatRe(locale_months),
      monthLookup = formatLookup(locale_months),
      shortMonthRe = formatRe(locale_shortMonths),
      shortMonthLookup = formatLookup(locale_shortMonths);

  var formats = {
    "a": formatShortWeekday,
    "A": formatWeekday,
    "b": formatShortMonth,
    "B": formatMonth,
    "c": null,
    "d": formatDayOfMonth,
    "e": formatDayOfMonth,
    "f": formatMicroseconds,
    "H": formatHour24,
    "I": formatHour12,
    "j": formatDayOfYear,
    "L": formatMilliseconds,
    "m": formatMonthNumber,
    "M": formatMinutes,
    "p": formatPeriod,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatSeconds,
    "u": formatWeekdayNumberMonday,
    "U": formatWeekNumberSunday,
    "V": formatWeekNumberISO,
    "w": formatWeekdayNumberSunday,
    "W": formatWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatYear,
    "Y": formatFullYear,
    "Z": formatZone,
    "%": formatLiteralPercent
  };

  var utcFormats = {
    "a": formatUTCShortWeekday,
    "A": formatUTCWeekday,
    "b": formatUTCShortMonth,
    "B": formatUTCMonth,
    "c": null,
    "d": formatUTCDayOfMonth,
    "e": formatUTCDayOfMonth,
    "f": formatUTCMicroseconds,
    "H": formatUTCHour24,
    "I": formatUTCHour12,
    "j": formatUTCDayOfYear,
    "L": formatUTCMilliseconds,
    "m": formatUTCMonthNumber,
    "M": formatUTCMinutes,
    "p": formatUTCPeriod,
    "Q": formatUnixTimestamp,
    "s": formatUnixTimestampSeconds,
    "S": formatUTCSeconds,
    "u": formatUTCWeekdayNumberMonday,
    "U": formatUTCWeekNumberSunday,
    "V": formatUTCWeekNumberISO,
    "w": formatUTCWeekdayNumberSunday,
    "W": formatUTCWeekNumberMonday,
    "x": null,
    "X": null,
    "y": formatUTCYear,
    "Y": formatUTCFullYear,
    "Z": formatUTCZone,
    "%": formatLiteralPercent
  };

  var parses = {
    "a": parseShortWeekday,
    "A": parseWeekday,
    "b": parseShortMonth,
    "B": parseMonth,
    "c": parseLocaleDateTime,
    "d": parseDayOfMonth,
    "e": parseDayOfMonth,
    "f": parseMicroseconds,
    "H": parseHour24,
    "I": parseHour24,
    "j": parseDayOfYear,
    "L": parseMilliseconds,
    "m": parseMonthNumber,
    "M": parseMinutes,
    "p": parsePeriod,
    "Q": parseUnixTimestamp,
    "s": parseUnixTimestampSeconds,
    "S": parseSeconds,
    "u": parseWeekdayNumberMonday,
    "U": parseWeekNumberSunday,
    "V": parseWeekNumberISO,
    "w": parseWeekdayNumberSunday,
    "W": parseWeekNumberMonday,
    "x": parseLocaleDate,
    "X": parseLocaleTime,
    "y": parseYear,
    "Y": parseFullYear,
    "Z": parseZone,
    "%": parseLiteralPercent
  };

  // These recursive directive definitions must be deferred.
  formats.x = newFormat(locale_date, formats);
  formats.X = newFormat(locale_time, formats);
  formats.c = newFormat(locale_dateTime, formats);
  utcFormats.x = newFormat(locale_date, utcFormats);
  utcFormats.X = newFormat(locale_time, utcFormats);
  utcFormats.c = newFormat(locale_dateTime, utcFormats);

  function newFormat(specifier, formats) {
    return function(date) {
      var string = [],
          i = -1,
          j = 0,
          n = specifier.length,
          c,
          pad,
          format;

      if (!(date instanceof Date)) date = new Date(+date);

      while (++i < n) {
        if (specifier.charCodeAt(i) === 37) {
          string.push(specifier.slice(j, i));
          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);
          else pad = c === "e" ? " " : "0";
          if (format = formats[c]) c = format(date, pad);
          string.push(c);
          j = i + 1;
        }
      }

      string.push(specifier.slice(j, i));
      return string.join("");
    };
  }

  function newParse(specifier, newDate) {
    return function(string) {
      var d = newYear(1900),
          i = parseSpecifier(d, specifier, string += "", 0),
          week, day;
      if (i != string.length) return null;

      // If a UNIX timestamp is specified, return it.
      if ("Q" in d) return new Date(d.Q);

      // The am-pm flag is 0 for AM, and 1 for PM.
      if ("p" in d) d.H = d.H % 12 + d.p * 12;

      // Convert day-of-week and week-of-year to day-of-year.
      if ("V" in d) {
        if (d.V < 1 || d.V > 53) return null;
        if (!("w" in d)) d.w = 1;
        if ("Z" in d) {
          week = utcDate(newYear(d.y)), day = week.getUTCDay();
          week = day > 4 || day === 0 ? __WEBPACK_IMPORTED_MODULE_0_d3_time__["p" /* utcMonday */].ceil(week) : Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["p" /* utcMonday */])(week);
          week = __WEBPACK_IMPORTED_MODULE_0_d3_time__["l" /* utcDay */].offset(week, (d.V - 1) * 7);
          d.y = week.getUTCFullYear();
          d.m = week.getUTCMonth();
          d.d = week.getUTCDate() + (d.w + 6) % 7;
        } else {
          week = newDate(newYear(d.y)), day = week.getDay();
          week = day > 4 || day === 0 ? __WEBPACK_IMPORTED_MODULE_0_d3_time__["e" /* timeMonday */].ceil(week) : Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["e" /* timeMonday */])(week);
          week = __WEBPACK_IMPORTED_MODULE_0_d3_time__["a" /* timeDay */].offset(week, (d.V - 1) * 7);
          d.y = week.getFullYear();
          d.m = week.getMonth();
          d.d = week.getDate() + (d.w + 6) % 7;
        }
      } else if ("W" in d || "U" in d) {
        if (!("w" in d)) d.w = "u" in d ? d.u % 7 : "W" in d ? 1 : 0;
        day = "Z" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();
        d.m = 0;
        d.d = "W" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;
      }

      // If a time zone is specified, all fields are interpreted as UTC and then
      // offset according to the specified time zone.
      if ("Z" in d) {
        d.H += d.Z / 100 | 0;
        d.M += d.Z % 100;
        return utcDate(d);
      }

      // Otherwise, all fields are in local time.
      return newDate(d);
    };
  }

  function parseSpecifier(d, specifier, string, j) {
    var i = 0,
        n = specifier.length,
        m = string.length,
        c,
        parse;

    while (i < n) {
      if (j >= m) return -1;
      c = specifier.charCodeAt(i++);
      if (c === 37) {
        c = specifier.charAt(i++);
        parse = parses[c in pads ? specifier.charAt(i++) : c];
        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;
      } else if (c != string.charCodeAt(j++)) {
        return -1;
      }
    }

    return j;
  }

  function parsePeriod(d, string, i) {
    var n = periodRe.exec(string.slice(i));
    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortWeekday(d, string, i) {
    var n = shortWeekdayRe.exec(string.slice(i));
    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseWeekday(d, string, i) {
    var n = weekdayRe.exec(string.slice(i));
    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseShortMonth(d, string, i) {
    var n = shortMonthRe.exec(string.slice(i));
    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseMonth(d, string, i) {
    var n = monthRe.exec(string.slice(i));
    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;
  }

  function parseLocaleDateTime(d, string, i) {
    return parseSpecifier(d, locale_dateTime, string, i);
  }

  function parseLocaleDate(d, string, i) {
    return parseSpecifier(d, locale_date, string, i);
  }

  function parseLocaleTime(d, string, i) {
    return parseSpecifier(d, locale_time, string, i);
  }

  function formatShortWeekday(d) {
    return locale_shortWeekdays[d.getDay()];
  }

  function formatWeekday(d) {
    return locale_weekdays[d.getDay()];
  }

  function formatShortMonth(d) {
    return locale_shortMonths[d.getMonth()];
  }

  function formatMonth(d) {
    return locale_months[d.getMonth()];
  }

  function formatPeriod(d) {
    return locale_periods[+(d.getHours() >= 12)];
  }

  function formatUTCShortWeekday(d) {
    return locale_shortWeekdays[d.getUTCDay()];
  }

  function formatUTCWeekday(d) {
    return locale_weekdays[d.getUTCDay()];
  }

  function formatUTCShortMonth(d) {
    return locale_shortMonths[d.getUTCMonth()];
  }

  function formatUTCMonth(d) {
    return locale_months[d.getUTCMonth()];
  }

  function formatUTCPeriod(d) {
    return locale_periods[+(d.getUTCHours() >= 12)];
  }

  return {
    format: function(specifier) {
      var f = newFormat(specifier += "", formats);
      f.toString = function() { return specifier; };
      return f;
    },
    parse: function(specifier) {
      var p = newParse(specifier += "", localDate);
      p.toString = function() { return specifier; };
      return p;
    },
    utcFormat: function(specifier) {
      var f = newFormat(specifier += "", utcFormats);
      f.toString = function() { return specifier; };
      return f;
    },
    utcParse: function(specifier) {
      var p = newParse(specifier, utcDate);
      p.toString = function() { return specifier; };
      return p;
    }
  };
}

var pads = {"-": "", "_": " ", "0": "0"},
    numberRe = /^\s*\d+/, // note: ignores next directive
    percentRe = /^%/,
    requoteRe = /[\\^$*+?|[\]().{}]/g;

function pad(value, fill, width) {
  var sign = value < 0 ? "-" : "",
      string = (sign ? -value : value) + "",
      length = string.length;
  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);
}

function requote(s) {
  return s.replace(requoteRe, "\\$&");
}

function formatRe(names) {
  return new RegExp("^(?:" + names.map(requote).join("|") + ")", "i");
}

function formatLookup(names) {
  var map = {}, i = -1, n = names.length;
  while (++i < n) map[names[i].toLowerCase()] = i;
  return map;
}

function parseWeekdayNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.w = +n[0], i + n[0].length) : -1;
}

function parseWeekdayNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 1));
  return n ? (d.u = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberSunday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.U = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberISO(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.V = +n[0], i + n[0].length) : -1;
}

function parseWeekNumberMonday(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.W = +n[0], i + n[0].length) : -1;
}

function parseFullYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 4));
  return n ? (d.y = +n[0], i + n[0].length) : -1;
}

function parseYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;
}

function parseZone(d, string, i) {
  var n = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string.slice(i, i + 6));
  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || "00")), i + n[0].length) : -1;
}

function parseMonthNumber(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;
}

function parseDayOfMonth(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.d = +n[0], i + n[0].length) : -1;
}

function parseDayOfYear(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;
}

function parseHour24(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.H = +n[0], i + n[0].length) : -1;
}

function parseMinutes(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.M = +n[0], i + n[0].length) : -1;
}

function parseSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 2));
  return n ? (d.S = +n[0], i + n[0].length) : -1;
}

function parseMilliseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 3));
  return n ? (d.L = +n[0], i + n[0].length) : -1;
}

function parseMicroseconds(d, string, i) {
  var n = numberRe.exec(string.slice(i, i + 6));
  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;
}

function parseLiteralPercent(d, string, i) {
  var n = percentRe.exec(string.slice(i, i + 1));
  return n ? i + n[0].length : -1;
}

function parseUnixTimestamp(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.Q = +n[0], i + n[0].length) : -1;
}

function parseUnixTimestampSeconds(d, string, i) {
  var n = numberRe.exec(string.slice(i));
  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;
}

function formatDayOfMonth(d, p) {
  return pad(d.getDate(), p, 2);
}

function formatHour24(d, p) {
  return pad(d.getHours(), p, 2);
}

function formatHour12(d, p) {
  return pad(d.getHours() % 12 || 12, p, 2);
}

function formatDayOfYear(d, p) {
  return pad(1 + __WEBPACK_IMPORTED_MODULE_0_d3_time__["a" /* timeDay */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["k" /* timeYear */])(d), d), p, 3);
}

function formatMilliseconds(d, p) {
  return pad(d.getMilliseconds(), p, 3);
}

function formatMicroseconds(d, p) {
  return formatMilliseconds(d, p) + "000";
}

function formatMonthNumber(d, p) {
  return pad(d.getMonth() + 1, p, 2);
}

function formatMinutes(d, p) {
  return pad(d.getMinutes(), p, 2);
}

function formatSeconds(d, p) {
  return pad(d.getSeconds(), p, 2);
}

function formatWeekdayNumberMonday(d) {
  var day = d.getDay();
  return day === 0 ? 7 : day;
}

function formatWeekNumberSunday(d, p) {
  return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["h" /* timeSunday */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["k" /* timeYear */])(d), d), p, 2);
}

function formatWeekNumberISO(d, p) {
  var day = d.getDay();
  d = (day >= 4 || day === 0) ? Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["i" /* timeThursday */])(d) : __WEBPACK_IMPORTED_MODULE_0_d3_time__["i" /* timeThursday */].ceil(d);
  return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["i" /* timeThursday */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["k" /* timeYear */])(d), d) + (Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["k" /* timeYear */])(d).getDay() === 4), p, 2);
}

function formatWeekdayNumberSunday(d) {
  return d.getDay();
}

function formatWeekNumberMonday(d, p) {
  return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["e" /* timeMonday */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["k" /* timeYear */])(d), d), p, 2);
}

function formatYear(d, p) {
  return pad(d.getFullYear() % 100, p, 2);
}

function formatFullYear(d, p) {
  return pad(d.getFullYear() % 10000, p, 4);
}

function formatZone(d) {
  var z = d.getTimezoneOffset();
  return (z > 0 ? "-" : (z *= -1, "+"))
      + pad(z / 60 | 0, "0", 2)
      + pad(z % 60, "0", 2);
}

function formatUTCDayOfMonth(d, p) {
  return pad(d.getUTCDate(), p, 2);
}

function formatUTCHour24(d, p) {
  return pad(d.getUTCHours(), p, 2);
}

function formatUTCHour12(d, p) {
  return pad(d.getUTCHours() % 12 || 12, p, 2);
}

function formatUTCDayOfYear(d, p) {
  return pad(1 + __WEBPACK_IMPORTED_MODULE_0_d3_time__["l" /* utcDay */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["v" /* utcYear */])(d), d), p, 3);
}

function formatUTCMilliseconds(d, p) {
  return pad(d.getUTCMilliseconds(), p, 3);
}

function formatUTCMicroseconds(d, p) {
  return formatUTCMilliseconds(d, p) + "000";
}

function formatUTCMonthNumber(d, p) {
  return pad(d.getUTCMonth() + 1, p, 2);
}

function formatUTCMinutes(d, p) {
  return pad(d.getUTCMinutes(), p, 2);
}

function formatUTCSeconds(d, p) {
  return pad(d.getUTCSeconds(), p, 2);
}

function formatUTCWeekdayNumberMonday(d) {
  var dow = d.getUTCDay();
  return dow === 0 ? 7 : dow;
}

function formatUTCWeekNumberSunday(d, p) {
  return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["s" /* utcSunday */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["v" /* utcYear */])(d), d), p, 2);
}

function formatUTCWeekNumberISO(d, p) {
  var day = d.getUTCDay();
  d = (day >= 4 || day === 0) ? Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["t" /* utcThursday */])(d) : __WEBPACK_IMPORTED_MODULE_0_d3_time__["t" /* utcThursday */].ceil(d);
  return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["t" /* utcThursday */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["v" /* utcYear */])(d), d) + (Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["v" /* utcYear */])(d).getUTCDay() === 4), p, 2);
}

function formatUTCWeekdayNumberSunday(d) {
  return d.getUTCDay();
}

function formatUTCWeekNumberMonday(d, p) {
  return pad(__WEBPACK_IMPORTED_MODULE_0_d3_time__["p" /* utcMonday */].count(Object(__WEBPACK_IMPORTED_MODULE_0_d3_time__["v" /* utcYear */])(d), d), p, 2);
}

function formatUTCYear(d, p) {
  return pad(d.getUTCFullYear() % 100, p, 2);
}

function formatUTCFullYear(d, p) {
  return pad(d.getUTCFullYear() % 10000, p, 4);
}

function formatUTCZone() {
  return "+0000";
}

function formatLiteralPercent() {
  return "%";
}

function formatUnixTimestamp(d) {
  return +d;
}

function formatUnixTimestampSeconds(d) {
  return Math.floor(+d / 1000);
}


/***/ }),
/* 116 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return isoSpecifier; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__defaultLocale__ = __webpack_require__(57);


var isoSpecifier = "%Y-%m-%dT%H:%M:%S.%LZ";

function formatIsoNative(date) {
  return date.toISOString();
}

var formatIso = Date.prototype.toISOString
    ? formatIsoNative
    : Object(__WEBPACK_IMPORTED_MODULE_0__defaultLocale__["b" /* utcFormat */])(isoSpecifier);

/* unused harmony default export */ var _unused_webpack_default_export = (formatIso);


/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** UndoStack. A constructor that can be used to store undo info. */

var utils = __webpack_require__(1);

var UndoStack = utils.make_class();
UndoStack.prototype = {
    init: init,
    push: push,
    undo: undo,
    redo: redo
};
module.exports = UndoStack;

// definitions
function init() {
    var stack_size = 40;
    this.stack = Array(stack_size);
    this.current = -1;
    this.oldest = -1;
    this.newest = -1;
    this.end_of_stack = true;
    this.top_of_stack = true;
}

function _incr(a, l) {
    return a + 1 > l - 1 ? 0 : a + 1;
}

function _decr(a, l) {
    return a - 1 < 0 ? l - 1 : a - 1;
}

function push(undo_fn, redo_fn) {
    this.current = _incr(this.current, this.stack.length);
    // change the oldest
    if (this.end_of_stack) this.oldest = this.current;else if (this.oldest == this.current) this.oldest = _incr(this.oldest, this.stack.length);
    this.stack[this.current] = { undo: undo_fn, redo: redo_fn };
    this.newest = this.current;

    // top of the stack
    this.top_of_stack = true;
    this.end_of_stack = false;
}

function undo() {
    // check that we haven't reached the end
    if (this.end_of_stack) return console.warn('End of stack.');
    // run the lastest stack function
    this.stack[this.current].undo();
    if (this.current == this.oldest) {
        // if the next index is less than the oldest, then the stack is dead
        this.end_of_stack = true;
    } else {
        // reference the next fn
        this.current = _decr(this.current, this.stack.length);
    }

    // not at the top of the stack
    this.top_of_stack = false;
}

function redo() {
    // check that we haven't reached the end
    if (this.top_of_stack) return console.warn('Top of stack.');

    if (!this.end_of_stack) this.current = _incr(this.current, this.stack.length);
    this.stack[this.current].redo();

    // if at top of stack
    if (this.current == this.newest) this.top_of_stack = true;

    // not at the end of the stack
    this.end_of_stack = false;
}

/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** KeyManager

 Manage key listeners and events.

 Arguments
 ---------

 assigned_keys (default: {}): An object defining keys to bind.

 input_list (default: []): A list of inputs that will override keyboard
 shortcuts when in focus.

 selection (default: global): A node to bind the events to.

 ctrl_equals_cmd (default: false): If true, then control and command have the
 same effect.

 */

var utils = __webpack_require__(1);
var Mousetrap = __webpack_require__(119);
var _ = __webpack_require__(2);

var KeyManager = utils.make_class();
// instance methods
KeyManager.prototype = {
    init: init,
    update: update,
    toggle: toggle,
    add_escape_listener: add_escape_listener,
    add_enter_listener: add_enter_listener,
    add_key_listener: add_key_listener
};
module.exports = KeyManager;

// instance methods
function init(assigned_keys, input_list, selection, ctrl_equals_cmd) {
    // default Arguments
    this.assigned_keys = assigned_keys || {};
    this.input_list = input_list || [];
    this.mousetrap = selection ? new Mousetrap(selection) : new Mousetrap();
    this.ctrl_equals_cmd = !_.isBoolean(ctrl_equals_cmd) ? false : ctrl_equals_cmd;

    // Fix mousetrap behavior; by default, it ignore shortcuts when inputs are
    // in focus.
    // TODO NOT WORKING https://craig.is/killing/mice
    // consider swithching to https://github.com/PolicyStat/combokeys
    this.mousetrap.stopCallback = function () {
        return false;
    };

    this.enabled = true;
    this.update();
}

function _add_cmd(key, ctrl_equals_cmd) {
    /** If ctrl_equals_cmd is true and key has ctrl+ in it, return an array with
     ctrl+ and meta+ variations.
      */
    if (!ctrl_equals_cmd) return key;
    var key_ar = _.isArray(key) ? key : [key];
    var new_ar = key_ar.reduce(function (c, k) {
        var n = k.replace('ctrl+', 'meta+');
        if (n !== k) c.push(n);
        return c;
    }, key_ar.slice());
    return new_ar.length === key_ar.length ? key : new_ar;
}

/**
 * Updated key bindings if attributes have changed.
 */
function update() {
    this.mousetrap.reset();
    if (!this.enabled) return;

    // loop through keys
    for (var key_id in this.assigned_keys) {
        var assigned_key = this.assigned_keys[key_id];

        // OK if this is missing
        if (!assigned_key.key) continue;

        var key_to_bind = _add_cmd(assigned_key.key, this.ctrl_equals_cmd);
        // remember the input_list
        assigned_key.input_list = this.input_list;
        this.mousetrap.bind(key_to_bind, function (e) {
            // check inputs
            var input_blocking = false;
            if (this.ignore_with_input) {
                for (var i = 0, l = this.input_list.length; i < l; i++) {
                    var thisInputVal = this.input_list[i];
                    var thisInput = _.isFunction(thisInputVal) ? thisInputVal() : thisInputVal;
                    if (thisInput !== null && thisInput.is_visible()) {
                        input_blocking = true;
                        break;
                    }
                }
            }

            if (!input_blocking) {
                if (this.fn) this.fn.call(this.target);else console.warn('No function for key: ' + this.key);
                e.preventDefault();
            }
        }.bind(assigned_key), 'keydown');
    }
}

function toggle(on_off) {
    /** Turn the key manager on or off.
      */
    if (_.isUndefined(on_off)) on_off = !this.enabled;
    this.enabled = on_off;
    this.update();
}

function add_enter_listener(callback, one_time) {
    /** Call the callback when the enter key is pressed, then
     unregisters the listener.
      */
    return this.add_key_listener('enter', callback, one_time);
}

function add_escape_listener(callback, one_time) {
    /** Call the callback when the escape key is pressed, then
     unregisters the listener.
      */
    return this.add_key_listener('escape', callback, one_time);
}

function add_key_listener(key_name, callback, one_time) {
    /** Call the callback when the key is pressed, then unregisters the
     listener. Returns a function that will unbind the event.
      callback: The callback function with no arguments.
      key_name: A key name, or list of key names, as defined by the mousetrap
     library: https://craig.is/killing/mice
      one_time: If True, then cancel the listener after the first execution.
      */

    if (_.isUndefined(one_time)) one_time = false;

    // unbind function ready to go
    var unbind = this.mousetrap.unbind.bind(this.mousetrap, key_name);

    this.mousetrap.bind(_add_cmd(key_name, this.ctrl_equals_cmd), function (e) {
        e.preventDefault();
        callback();
        if (one_time) unbind();
    });

    return unbind;
}

/***/ }),
/* 119 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/*global define:false */
/**
 * Copyright 2012-2017 Craig Campbell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Mousetrap is a simple keyboard shortcut library for Javascript with
 * no external dependencies
 *
 * @version 1.6.1
 * @url craig.is/killing/mice
 */
(function(window, document, undefined) {

    // Check if mousetrap is used inside browser, if not, return
    if (!window) {
        return;
    }

    /**
     * mapping of special keycodes to their corresponding keys
     *
     * everything in this dictionary cannot use keypress events
     * so it has to be here to map to the correct keycodes for
     * keyup/keydown events
     *
     * @type {Object}
     */
    var _MAP = {
        8: 'backspace',
        9: 'tab',
        13: 'enter',
        16: 'shift',
        17: 'ctrl',
        18: 'alt',
        20: 'capslock',
        27: 'esc',
        32: 'space',
        33: 'pageup',
        34: 'pagedown',
        35: 'end',
        36: 'home',
        37: 'left',
        38: 'up',
        39: 'right',
        40: 'down',
        45: 'ins',
        46: 'del',
        91: 'meta',
        93: 'meta',
        224: 'meta'
    };

    /**
     * mapping for special characters so they can support
     *
     * this dictionary is only used incase you want to bind a
     * keyup or keydown event to one of these keys
     *
     * @type {Object}
     */
    var _KEYCODE_MAP = {
        106: '*',
        107: '+',
        109: '-',
        110: '.',
        111 : '/',
        186: ';',
        187: '=',
        188: ',',
        189: '-',
        190: '.',
        191: '/',
        192: '`',
        219: '[',
        220: '\\',
        221: ']',
        222: '\''
    };

    /**
     * this is a mapping of keys that require shift on a US keypad
     * back to the non shift equivelents
     *
     * this is so you can use keyup events with these keys
     *
     * note that this will only work reliably on US keyboards
     *
     * @type {Object}
     */
    var _SHIFT_MAP = {
        '~': '`',
        '!': '1',
        '@': '2',
        '#': '3',
        '$': '4',
        '%': '5',
        '^': '6',
        '&': '7',
        '*': '8',
        '(': '9',
        ')': '0',
        '_': '-',
        '+': '=',
        ':': ';',
        '\"': '\'',
        '<': ',',
        '>': '.',
        '?': '/',
        '|': '\\'
    };

    /**
     * this is a list of special strings you can use to map
     * to modifier keys when you specify your keyboard shortcuts
     *
     * @type {Object}
     */
    var _SPECIAL_ALIASES = {
        'option': 'alt',
        'command': 'meta',
        'return': 'enter',
        'escape': 'esc',
        'plus': '+',
        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'
    };

    /**
     * variable to store the flipped version of _MAP from above
     * needed to check if we should use keypress or not when no action
     * is specified
     *
     * @type {Object|undefined}
     */
    var _REVERSE_MAP;

    /**
     * loop through the f keys, f1 to f19 and add them to the map
     * programatically
     */
    for (var i = 1; i < 20; ++i) {
        _MAP[111 + i] = 'f' + i;
    }

    /**
     * loop through to map numbers on the numeric keypad
     */
    for (i = 0; i <= 9; ++i) {

        // This needs to use a string cause otherwise since 0 is falsey
        // mousetrap will never fire for numpad 0 pressed as part of a keydown
        // event.
        //
        // @see https://github.com/ccampbell/mousetrap/pull/258
        _MAP[i + 96] = i.toString();
    }

    /**
     * cross browser add event method
     *
     * @param {Element|HTMLDocument} object
     * @param {string} type
     * @param {Function} callback
     * @returns void
     */
    function _addEvent(object, type, callback) {
        if (object.addEventListener) {
            object.addEventListener(type, callback, false);
            return;
        }

        object.attachEvent('on' + type, callback);
    }

    /**
     * takes the event and returns the key character
     *
     * @param {Event} e
     * @return {string}
     */
    function _characterFromEvent(e) {

        // for keypress events we should return the character as is
        if (e.type == 'keypress') {
            var character = String.fromCharCode(e.which);

            // if the shift key is not pressed then it is safe to assume
            // that we want the character to be lowercase.  this means if
            // you accidentally have caps lock on then your key bindings
            // will continue to work
            //
            // the only side effect that might not be desired is if you
            // bind something like 'A' cause you want to trigger an
            // event when capital A is pressed caps lock will no longer
            // trigger the event.  shift+a will though.
            if (!e.shiftKey) {
                character = character.toLowerCase();
            }

            return character;
        }

        // for non keypress events the special maps are needed
        if (_MAP[e.which]) {
            return _MAP[e.which];
        }

        if (_KEYCODE_MAP[e.which]) {
            return _KEYCODE_MAP[e.which];
        }

        // if it is not in the special map

        // with keydown and keyup events the character seems to always
        // come in as an uppercase character whether you are pressing shift
        // or not.  we should make sure it is always lowercase for comparisons
        return String.fromCharCode(e.which).toLowerCase();
    }

    /**
     * checks if two arrays are equal
     *
     * @param {Array} modifiers1
     * @param {Array} modifiers2
     * @returns {boolean}
     */
    function _modifiersMatch(modifiers1, modifiers2) {
        return modifiers1.sort().join(',') === modifiers2.sort().join(',');
    }

    /**
     * takes a key event and figures out what the modifiers are
     *
     * @param {Event} e
     * @returns {Array}
     */
    function _eventModifiers(e) {
        var modifiers = [];

        if (e.shiftKey) {
            modifiers.push('shift');
        }

        if (e.altKey) {
            modifiers.push('alt');
        }

        if (e.ctrlKey) {
            modifiers.push('ctrl');
        }

        if (e.metaKey) {
            modifiers.push('meta');
        }

        return modifiers;
    }

    /**
     * prevents default for this event
     *
     * @param {Event} e
     * @returns void
     */
    function _preventDefault(e) {
        if (e.preventDefault) {
            e.preventDefault();
            return;
        }

        e.returnValue = false;
    }

    /**
     * stops propogation for this event
     *
     * @param {Event} e
     * @returns void
     */
    function _stopPropagation(e) {
        if (e.stopPropagation) {
            e.stopPropagation();
            return;
        }

        e.cancelBubble = true;
    }

    /**
     * determines if the keycode specified is a modifier key or not
     *
     * @param {string} key
     * @returns {boolean}
     */
    function _isModifier(key) {
        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';
    }

    /**
     * reverses the map lookup so that we can look for specific keys
     * to see what can and can't use keypress
     *
     * @return {Object}
     */
    function _getReverseMap() {
        if (!_REVERSE_MAP) {
            _REVERSE_MAP = {};
            for (var key in _MAP) {

                // pull out the numeric keypad from here cause keypress should
                // be able to detect the keys from the character
                if (key > 95 && key < 112) {
                    continue;
                }

                if (_MAP.hasOwnProperty(key)) {
                    _REVERSE_MAP[_MAP[key]] = key;
                }
            }
        }
        return _REVERSE_MAP;
    }

    /**
     * picks the best action based on the key combination
     *
     * @param {string} key - character for key
     * @param {Array} modifiers
     * @param {string=} action passed in
     */
    function _pickBestAction(key, modifiers, action) {

        // if no action was picked in we should try to pick the one
        // that we think would work best for this key
        if (!action) {
            action = _getReverseMap()[key] ? 'keydown' : 'keypress';
        }

        // modifier keys don't work as expected with keypress,
        // switch to keydown
        if (action == 'keypress' && modifiers.length) {
            action = 'keydown';
        }

        return action;
    }

    /**
     * Converts from a string key combination to an array
     *
     * @param  {string} combination like "command+shift+l"
     * @return {Array}
     */
    function _keysFromString(combination) {
        if (combination === '+') {
            return ['+'];
        }

        combination = combination.replace(/\+{2}/g, '+plus');
        return combination.split('+');
    }

    /**
     * Gets info for a specific key combination
     *
     * @param  {string} combination key combination ("command+s" or "a" or "*")
     * @param  {string=} action
     * @returns {Object}
     */
    function _getKeyInfo(combination, action) {
        var keys;
        var key;
        var i;
        var modifiers = [];

        // take the keys from this pattern and figure out what the actual
        // pattern is all about
        keys = _keysFromString(combination);

        for (i = 0; i < keys.length; ++i) {
            key = keys[i];

            // normalize key names
            if (_SPECIAL_ALIASES[key]) {
                key = _SPECIAL_ALIASES[key];
            }

            // if this is not a keypress event then we should
            // be smart about using shift keys
            // this will only work for US keyboards however
            if (action && action != 'keypress' && _SHIFT_MAP[key]) {
                key = _SHIFT_MAP[key];
                modifiers.push('shift');
            }

            // if this key is a modifier then add it to the list of modifiers
            if (_isModifier(key)) {
                modifiers.push(key);
            }
        }

        // depending on what the key combination is
        // we will try to pick the best event for it
        action = _pickBestAction(key, modifiers, action);

        return {
            key: key,
            modifiers: modifiers,
            action: action
        };
    }

    function _belongsTo(element, ancestor) {
        if (element === null || element === document) {
            return false;
        }

        if (element === ancestor) {
            return true;
        }

        return _belongsTo(element.parentNode, ancestor);
    }

    function Mousetrap(targetElement) {
        var self = this;

        targetElement = targetElement || document;

        if (!(self instanceof Mousetrap)) {
            return new Mousetrap(targetElement);
        }

        /**
         * element to attach key events to
         *
         * @type {Element}
         */
        self.target = targetElement;

        /**
         * a list of all the callbacks setup via Mousetrap.bind()
         *
         * @type {Object}
         */
        self._callbacks = {};

        /**
         * direct map of string combinations to callbacks used for trigger()
         *
         * @type {Object}
         */
        self._directMap = {};

        /**
         * keeps track of what level each sequence is at since multiple
         * sequences can start out with the same sequence
         *
         * @type {Object}
         */
        var _sequenceLevels = {};

        /**
         * variable to store the setTimeout call
         *
         * @type {null|number}
         */
        var _resetTimer;

        /**
         * temporary state where we will ignore the next keyup
         *
         * @type {boolean|string}
         */
        var _ignoreNextKeyup = false;

        /**
         * temporary state where we will ignore the next keypress
         *
         * @type {boolean}
         */
        var _ignoreNextKeypress = false;

        /**
         * are we currently inside of a sequence?
         * type of action ("keyup" or "keydown" or "keypress") or false
         *
         * @type {boolean|string}
         */
        var _nextExpectedAction = false;

        /**
         * resets all sequence counters except for the ones passed in
         *
         * @param {Object} doNotReset
         * @returns void
         */
        function _resetSequences(doNotReset) {
            doNotReset = doNotReset || {};

            var activeSequences = false,
                key;

            for (key in _sequenceLevels) {
                if (doNotReset[key]) {
                    activeSequences = true;
                    continue;
                }
                _sequenceLevels[key] = 0;
            }

            if (!activeSequences) {
                _nextExpectedAction = false;
            }
        }

        /**
         * finds all callbacks that match based on the keycode, modifiers,
         * and action
         *
         * @param {string} character
         * @param {Array} modifiers
         * @param {Event|Object} e
         * @param {string=} sequenceName - name of the sequence we are looking for
         * @param {string=} combination
         * @param {number=} level
         * @returns {Array}
         */
        function _getMatches(character, modifiers, e, sequenceName, combination, level) {
            var i;
            var callback;
            var matches = [];
            var action = e.type;

            // if there are no events related to this keycode
            if (!self._callbacks[character]) {
                return [];
            }

            // if a modifier key is coming up on its own we should allow it
            if (action == 'keyup' && _isModifier(character)) {
                modifiers = [character];
            }

            // loop through all callbacks for the key that was pressed
            // and see if any of them match
            for (i = 0; i < self._callbacks[character].length; ++i) {
                callback = self._callbacks[character][i];

                // if a sequence name is not specified, but this is a sequence at
                // the wrong level then move onto the next match
                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {
                    continue;
                }

                // if the action we are looking for doesn't match the action we got
                // then we should keep going
                if (action != callback.action) {
                    continue;
                }

                // if this is a keypress event and the meta key and control key
                // are not pressed that means that we need to only look at the
                // character, otherwise check the modifiers as well
                //
                // chrome will not fire a keypress if meta or control is down
                // safari will fire a keypress if meta or meta+shift is down
                // firefox will fire a keypress if meta or control is down
                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {

                    // when you bind a combination or sequence a second time it
                    // should overwrite the first one.  if a sequenceName or
                    // combination is specified in this call it does just that
                    //
                    // @todo make deleting its own method?
                    var deleteCombo = !sequenceName && callback.combo == combination;
                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;
                    if (deleteCombo || deleteSequence) {
                        self._callbacks[character].splice(i, 1);
                    }

                    matches.push(callback);
                }
            }

            return matches;
        }

        /**
         * actually calls the callback function
         *
         * if your callback function returns false this will use the jquery
         * convention - prevent default and stop propogation on the event
         *
         * @param {Function} callback
         * @param {Event} e
         * @returns void
         */
        function _fireCallback(callback, e, combo, sequence) {

            // if this event should not happen stop here
            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {
                return;
            }

            if (callback(e, combo) === false) {
                _preventDefault(e);
                _stopPropagation(e);
            }
        }

        /**
         * handles a character key event
         *
         * @param {string} character
         * @param {Array} modifiers
         * @param {Event} e
         * @returns void
         */
        self._handleKey = function(character, modifiers, e) {
            var callbacks = _getMatches(character, modifiers, e);
            var i;
            var doNotReset = {};
            var maxLevel = 0;
            var processedSequenceCallback = false;

            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence
            for (i = 0; i < callbacks.length; ++i) {
                if (callbacks[i].seq) {
                    maxLevel = Math.max(maxLevel, callbacks[i].level);
                }
            }

            // loop through matching callbacks for this key event
            for (i = 0; i < callbacks.length; ++i) {

                // fire for all sequence callbacks
                // this is because if for example you have multiple sequences
                // bound such as "g i" and "g t" they both need to fire the
                // callback for matching g cause otherwise you can only ever
                // match the first one
                if (callbacks[i].seq) {

                    // only fire callbacks for the maxLevel to prevent
                    // subsequences from also firing
                    //
                    // for example 'a option b' should not cause 'option b' to fire
                    // even though 'option b' is part of the other sequence
                    //
                    // any sequences that do not match here will be discarded
                    // below by the _resetSequences call
                    if (callbacks[i].level != maxLevel) {
                        continue;
                    }

                    processedSequenceCallback = true;

                    // keep a list of which sequences were matches for later
                    doNotReset[callbacks[i].seq] = 1;
                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);
                    continue;
                }

                // if there were no sequence matches but we are still here
                // that means this is a regular match so we should fire that
                if (!processedSequenceCallback) {
                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);
                }
            }

            // if the key you pressed matches the type of sequence without
            // being a modifier (ie "keyup" or "keypress") then we should
            // reset all sequences that were not matched by this event
            //
            // this is so, for example, if you have the sequence "h a t" and you
            // type "h e a r t" it does not match.  in this case the "e" will
            // cause the sequence to reset
            //
            // modifier keys are ignored because you can have a sequence
            // that contains modifiers such as "enter ctrl+space" and in most
            // cases the modifier key will be pressed before the next key
            //
            // also if you have a sequence such as "ctrl+b a" then pressing the
            // "b" key will trigger a "keypress" and a "keydown"
            //
            // the "keydown" is expected when there is a modifier, but the
            // "keypress" ends up matching the _nextExpectedAction since it occurs
            // after and that causes the sequence to reset
            //
            // we ignore keypresses in a sequence that directly follow a keydown
            // for the same character
            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;
            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {
                _resetSequences(doNotReset);
            }

            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';
        };

        /**
         * handles a keydown event
         *
         * @param {Event} e
         * @returns void
         */
        function _handleKeyEvent(e) {

            // normalize e.which for key events
            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion
            if (typeof e.which !== 'number') {
                e.which = e.keyCode;
            }

            var character = _characterFromEvent(e);

            // no character found then stop
            if (!character) {
                return;
            }

            // need to use === for the character check because the character can be 0
            if (e.type == 'keyup' && _ignoreNextKeyup === character) {
                _ignoreNextKeyup = false;
                return;
            }

            self.handleKey(character, _eventModifiers(e), e);
        }

        /**
         * called to set a 1 second timeout on the specified sequence
         *
         * this is so after each key press in the sequence you have 1 second
         * to press the next key before you have to start over
         *
         * @returns void
         */
        function _resetSequenceTimer() {
            clearTimeout(_resetTimer);
            _resetTimer = setTimeout(_resetSequences, 1000);
        }

        /**
         * binds a key sequence to an event
         *
         * @param {string} combo - combo specified in bind call
         * @param {Array} keys
         * @param {Function} callback
         * @param {string=} action
         * @returns void
         */
        function _bindSequence(combo, keys, callback, action) {

            // start off by adding a sequence level record for this combination
            // and setting the level to 0
            _sequenceLevels[combo] = 0;

            /**
             * callback to increase the sequence level for this sequence and reset
             * all other sequences that were active
             *
             * @param {string} nextAction
             * @returns {Function}
             */
            function _increaseSequence(nextAction) {
                return function() {
                    _nextExpectedAction = nextAction;
                    ++_sequenceLevels[combo];
                    _resetSequenceTimer();
                };
            }

            /**
             * wraps the specified callback inside of another function in order
             * to reset all sequence counters as soon as this sequence is done
             *
             * @param {Event} e
             * @returns void
             */
            function _callbackAndReset(e) {
                _fireCallback(callback, e, combo);

                // we should ignore the next key up if the action is key down
                // or keypress.  this is so if you finish a sequence and
                // release the key the final key will not trigger a keyup
                if (action !== 'keyup') {
                    _ignoreNextKeyup = _characterFromEvent(e);
                }

                // weird race condition if a sequence ends with the key
                // another sequence begins with
                setTimeout(_resetSequences, 10);
            }

            // loop through keys one at a time and bind the appropriate callback
            // function.  for any key leading up to the final one it should
            // increase the sequence. after the final, it should reset all sequences
            //
            // if an action is specified in the original bind call then that will
            // be used throughout.  otherwise we will pass the action that the
            // next key in the sequence should match.  this allows a sequence
            // to mix and match keypress and keydown events depending on which
            // ones are better suited to the key provided
            for (var i = 0; i < keys.length; ++i) {
                var isFinal = i + 1 === keys.length;
                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);
                _bindSingle(keys[i], wrappedCallback, action, combo, i);
            }
        }

        /**
         * binds a single keyboard combination
         *
         * @param {string} combination
         * @param {Function} callback
         * @param {string=} action
         * @param {string=} sequenceName - name of sequence if part of sequence
         * @param {number=} level - what part of the sequence the command is
         * @returns void
         */
        function _bindSingle(combination, callback, action, sequenceName, level) {

            // store a direct mapped reference for use with Mousetrap.trigger
            self._directMap[combination + ':' + action] = callback;

            // make sure multiple spaces in a row become a single space
            combination = combination.replace(/\s+/g, ' ');

            var sequence = combination.split(' ');
            var info;

            // if this pattern is a sequence of keys then run through this method
            // to reprocess each pattern one key at a time
            if (sequence.length > 1) {
                _bindSequence(combination, sequence, callback, action);
                return;
            }

            info = _getKeyInfo(combination, action);

            // make sure to initialize array if this is the first time
            // a callback is added for this key
            self._callbacks[info.key] = self._callbacks[info.key] || [];

            // remove an existing match if there is one
            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);

            // add this call back to the array
            // if it is a sequence put it at the beginning
            // if not put it at the end
            //
            // this is important because the way these are processed expects
            // the sequence ones to come first
            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({
                callback: callback,
                modifiers: info.modifiers,
                action: info.action,
                seq: sequenceName,
                level: level,
                combo: combination
            });
        }

        /**
         * binds multiple combinations to the same callback
         *
         * @param {Array} combinations
         * @param {Function} callback
         * @param {string|undefined} action
         * @returns void
         */
        self._bindMultiple = function(combinations, callback, action) {
            for (var i = 0; i < combinations.length; ++i) {
                _bindSingle(combinations[i], callback, action);
            }
        };

        // start!
        _addEvent(targetElement, 'keypress', _handleKeyEvent);
        _addEvent(targetElement, 'keydown', _handleKeyEvent);
        _addEvent(targetElement, 'keyup', _handleKeyEvent);
    }

    /**
     * binds an event to mousetrap
     *
     * can be a single key, a combination of keys separated with +,
     * an array of keys, or a sequence of keys separated by spaces
     *
     * be sure to list the modifier keys first to make sure that the
     * correct key ends up getting bound (the last key in the pattern)
     *
     * @param {string|Array} keys
     * @param {Function} callback
     * @param {string=} action - 'keypress', 'keydown', or 'keyup'
     * @returns void
     */
    Mousetrap.prototype.bind = function(keys, callback, action) {
        var self = this;
        keys = keys instanceof Array ? keys : [keys];
        self._bindMultiple.call(self, keys, callback, action);
        return self;
    };

    /**
     * unbinds an event to mousetrap
     *
     * the unbinding sets the callback function of the specified key combo
     * to an empty function and deletes the corresponding key in the
     * _directMap dict.
     *
     * TODO: actually remove this from the _callbacks dictionary instead
     * of binding an empty function
     *
     * the keycombo+action has to be exactly the same as
     * it was defined in the bind method
     *
     * @param {string|Array} keys
     * @param {string} action
     * @returns void
     */
    Mousetrap.prototype.unbind = function(keys, action) {
        var self = this;
        return self.bind.call(self, keys, function() {}, action);
    };

    /**
     * triggers an event that has already been bound
     *
     * @param {string} keys
     * @param {string=} action
     * @returns void
     */
    Mousetrap.prototype.trigger = function(keys, action) {
        var self = this;
        if (self._directMap[keys + ':' + action]) {
            self._directMap[keys + ':' + action]({}, keys);
        }
        return self;
    };

    /**
     * resets the library back to its initial state.  this is useful
     * if you want to clear out the current keyboard shortcuts and bind
     * new ones - for example if you switch to another page
     *
     * @returns void
     */
    Mousetrap.prototype.reset = function() {
        var self = this;
        self._callbacks = {};
        self._directMap = {};
        return self;
    };

    /**
     * should we stop this event before firing off callbacks
     *
     * @param {Event} e
     * @param {Element} element
     * @return {boolean}
     */
    Mousetrap.prototype.stopCallback = function(e, element) {
        var self = this;

        // if the element has the class "mousetrap" then no need to stop
        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {
            return false;
        }

        if (_belongsTo(element, self.target)) {
            return false;
        }

        // stop for input, select, and textarea
        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;
    };

    /**
     * exposes _handleKey publicly so it can be overwritten by extensions
     */
    Mousetrap.prototype.handleKey = function() {
        var self = this;
        return self._handleKey.apply(self, arguments);
    };

    /**
     * allow custom key mappings
     */
    Mousetrap.addKeycodes = function(object) {
        for (var key in object) {
            if (object.hasOwnProperty(key)) {
                _MAP[key] = object[key];
            }
        }
        _REVERSE_MAP = null;
    };

    /**
     * Init the global mousetrap functions
     *
     * This method is needed to allow the global mousetrap functions to work
     * now that mousetrap is a constructor function.
     */
    Mousetrap.init = function() {
        var documentMousetrap = Mousetrap(document);
        for (var method in documentMousetrap) {
            if (method.charAt(0) !== '_') {
                Mousetrap[method] = (function(method) {
                    return function() {
                        return documentMousetrap[method].apply(documentMousetrap, arguments);
                    };
                } (method));
            }
        }
    };

    Mousetrap.init();

    // expose mousetrap to the global object
    window.Mousetrap = Mousetrap;

    // expose as a common js module
    if (typeof module !== 'undefined' && module.exports) {
        module.exports = Mousetrap;
    }

    // expose mousetrap as an AMD module
    if (true) {
        !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
            return Mousetrap;
        }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    }
}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);


/***/ }),
/* 120 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** SearchIndex. Define an index for searching for reaction and metabolites in
 the map.

 The index is stored in SearchIndex.index, an object of id/record pairs.

 */

var utils = __webpack_require__(1);

var SearchIndex = utils.make_class();
SearchIndex.prototype = {
    init: init,
    insert: insert,
    remove: remove,
    find: find
};
module.exports = SearchIndex;

function init() {
    this.index = {};
}

function insert(id, record, overwrite, check_record) {
    /** Insert a record into the index.
      id: A unique string id.
      record: Records have the form:
      { 'name': '',
     'data': {} }
      Search is performed on substrings of the name.
      overwrite: (Default false) For faster performance, make overwrite true,
     and records will be inserted without checking for an existing record.
      check_record: (Default false) For faster performance, make check_record
     false. If true, records will be checked to make sure they have name and
     data attributes.
      Returns undefined.
      */
    if (!overwrite && id in this.index) throw new Error("id is already in the index");
    if (check_record && !('name' in record && 'data' in record)) throw new Error("malformed record");
    this.index[id] = record;
}

function remove(record_id) {
    /** Remove the matching record.
      Returns true is a record is found, or false if no match is found.
      */
    if (record_id in this.index) {
        delete this.index[record_id];
        return true;
    } else {
        return false;
    }
}

function find(substring) {
    /** Find a record that matches the substring.
      Returns an array of data from matching records.
      */

    var re = RegExp(substring, "i"),
        // ignore case
    matches = [];
    for (var id in this.index) {
        var record = this.index[id];
        if (re.exec(record.name)) matches.push(record.data);
    }
    return matches;
}

/***/ }),
/* 121 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_brush__ = __webpack_require__(340);
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "brush", function() { return __WEBPACK_IMPORTED_MODULE_0__src_brush__["d"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "brushX", function() { return __WEBPACK_IMPORTED_MODULE_0__src_brush__["b"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "brushY", function() { return __WEBPACK_IMPORTED_MODULE_0__src_brush__["c"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "brushSelection", function() { return __WEBPACK_IMPORTED_MODULE_0__src_brush__["a"]; });



/***/ }),
/* 122 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _utils = __webpack_require__(1);

var _utils2 = _interopRequireDefault(_utils);

var _baconjs = __webpack_require__(58);

var _baconjs2 = _interopRequireDefault(_baconjs);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/** Settings. A class to manage settings for a Map.

 Arguments
 ---------

 setOption: A function, fn(key), that returns the option value for the
 key.

 getOption: A function, fn(key, value), that sets the option for the key
 and value.

 conditionalOptions: The options to that are conditionally accepted when
 changed. Changes can be abandoned by calling abandon_changes(), or accepted
 by calling accept_changes().

 */

var Settings = _utils2.default.make_class();
// instance methods
Settings.prototype = {
  init: init,
  set_conditional: set_conditional,
  hold_changes: hold_changes,
  abandon_changes: abandon_changes,
  accept_changes: accept_changes,
  createConditionalSetting: createConditionalSetting,
  convertToConditionalStream: convertToConditionalStream
};
module.exports = Settings;

function init(setOption, getOption, conditionalOptions) {
  this.set_option = setOption;
  this.get_option = getOption;

  // Manage accepting/abandoning changes
  this.status_bus = new _baconjs2.default.Bus();

  // Create the options
  this.busses = {};
  this.streams = {};
  for (var i = 0, l = conditionalOptions.length; i < l; i++) {
    var name = conditionalOptions[i];
    var out = createConditionalSetting(name, getOption(name), setOption, this.status_bus);
    this.busses[name] = out.bus;
    this.streams[name] = out.stream;
  }
}

/**
 * Hold on to event when hold_property is true, and only keep them if
 * accept_property is true (when hold_property becomes false).
 */
function convertToConditionalStream(valueStream, statusStream) {
  // Combine values with status to revert to last value when a reject is passed.
  var init = {
    savedValue: null,
    currentValue: null,
    lastStatus: null
  };

  var held = _baconjs2.default.combineAsArray(valueStream, statusStream.toProperty(null)).scan(init, function (_ref, _ref2) {
    var savedValue = _ref.savedValue,
        currentValue = _ref.currentValue,
        lastStatus = _ref.lastStatus;
    var value = _ref2[0],
        status = _ref2[1];

    // See if the status was just set
    var newStatus = lastStatus !== status;

    if (newStatus && status === 'hold') {
      // Record the currentValue as the savedValue
      return {
        savedValue: currentValue,
        currentValue: currentValue,
        lastStatus: status
      };
    } else if (!newStatus && status === 'hold') {
      // Record the current value, and keep the savedValue unchanged
      return {
        savedValue: savedValue,
        currentValue: value,
        lastStatus: status
      };
    } else if (newStatus && status === 'abandon') {
      // Keep the saved value
      return {
        savedValue: null,
        currentValue: savedValue,
        lastStatus: status
      };
    } else if (newStatus && status === 'accept') {
      // Keep the new value
      return {
        savedValue: null,
        currentValue: currentValue,
        lastStatus: status
      };
    } else {
      // Not held, so keep the value
      return {
        savedValue: null,
        currentValue: value,
        lastStatus: status
      };
    }
  })
  // Skip the initial null value
  .skip(1)
  // Get the current value
  .map(function (_ref3) {
    var currentValue = _ref3.currentValue;
    return currentValue;
  })
  // Skip duplicate values
  .skipDuplicates();

  return held;
}

function createConditionalSetting(name, initialValue, setOption, statusBus) {
  // Set up the bus
  var bus = new _baconjs2.default.Bus();

  // Make the event stream and conditionally accept changes
  var stream = convertToConditionalStream(bus, statusBus);

  // Get the latest
  stream.onValue(function (v) {
    return setOption(name, v);
  });

  // Push the initial value
  bus.push(initialValue);

  return { bus: bus, stream: stream };
}

/** Set the value of a conditional setting, one that will only be
 accepted if this.accept_changes() is called.

 Arguments
 ---------

 name: The option name

 value: The new value

 */
function set_conditional(name, value) {
  if (!(name in this.busses)) {
    console.error('Invalid setting name ' + name);
  } else {
    this.busses[name].push(value);
  }
  // console.log(name, value)
}

function hold_changes() {
  this.status_bus.push('hold');
  // console.log('changes held')
}

function abandon_changes() {
  this.status_bus.push('abandon');
  // console.log('changes abandoned')
}

function accept_changes() {
  this.status_bus.push('accept');
  // console.log('changes accepted')
}

/***/ }),
/* 123 */
/***/ (function(module, exports) {

module.exports = "data:application/vnd.ms-fontobject;base64,1CUAACwlAAABAAIAAAAAAAIABQMAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAA1tn2TQAAAAAAAAAAAAAAAAAAAAAAABAAZgBvAG4AdABlAGwAbABvAAAADgBSAGUAZwB1AGwAYQByAAAAFgBWAGUAcgBzAGkAbwBuACAAMQAuADAAAAAQAGYAbwBuAHQAZQBsAGwAbwAAAAAAAAEAAAAPAIAAAwBwR1NVQiCLJXoAAAD8AAAAVE9TLzI+I1MlAAABUAAAAFZjbWFw4DG4CQAAAagAAAKuY3Z0IAbV/v4AABkUAAAAIGZwZ22KkZBZAAAZNAAAC3BnYXNwAAAAEAAAGQwAAAAIZ2x5ZrvFooAAAARYAAAPymhlYWQPa+ZOAAAUJAAAADZoaGVhBzoDZAAAFFwAAAAkaG10eExI//YAABSAAAAAXGxvY2En1iw5AAAU3AAAADBtYXhwASYMCgAAFQwAAAAgbmFtZcydHR8AABUsAAACzXBvc3Rtb/8bAAAX/AAAAQ9wcmVw5UErvAAAJKQAAACGAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAEDUQGQAAUAAAJ6ArwAAACMAnoCvAAAAeAAMQECAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAQOgA8kUDUv9qAFoDUgCZAAAAAQAAAAAAAAAAAAUAAAADAAAALAAAAAQAAAGWAAEAAAAAAJAAAwABAAAALAADAAoAAAGWAAQAZAAAAAoACAACAALoEvBH8MjyRf//AADoAPBH8MjyRf//AAAAAAAAAAAAAQAKAC4ALgAuAAAAAQACAAMABAAFAAYABwAIAAkACgALAAwADQAOAA8AEAARABIAEwAUABUAFgAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAABGAAAAAAAAAAWAADoAAAA6AAAAAABAADoAQAA6AEAAAACAADoAgAA6AIAAAADAADoAwAA6AMAAAAEAADoBAAA6AQAAAAFAADoBQAA6AUAAAAGAADoBgAA6AYAAAAHAADoBwAA6AcAAAAIAADoCAAA6AgAAAAJAADoCQAA6AkAAAAKAADoCgAA6AoAAAALAADoCwAA6AsAAAAMAADoDAAA6AwAAAANAADoDQAA6A0AAAAOAADoDgAA6A4AAAAPAADoDwAA6A8AAAAQAADoEAAA6BAAAAARAADoEQAA6BEAAAASAADoEgAA6BIAAAATAADwRwAA8EcAAAAUAADwyAAA8MgAAAAVAADyRQAA8kUAAAAWAAAAAQAAAAADpQKYABUAHUAaDwEAAQFHAAIBAm8AAQABbwAAAGYUFxQDBRcrARQHAQYiJwEmND8BNjIfAQE2Mh8BFgOlEP4gECwQ/uoPD0wQLBCkAW4QLBBMEAIWFhD+IA8PARYQLBBMEBClAW8QEEwPAAEAAP/vAtQChgAkAB5AGyIZEAcEAAIBRwMBAgACbwEBAABmFBwUFAQFGCslFA8BBiIvAQcGIi8BJjQ/AScmND8BNjIfATc2Mh8BFhQPARcWAtQPTBAsEKSkECwQTBAQpKQQEEwQLBCkpBAsEEwPD6SkD3AWEEwPD6WlDw9MECwQpKQQLBBMEBCkpBAQTA8uD6SkDwABAAD/+QMSAwsAIwApQCYABAMEbwABAAFwBQEDAAADVAUBAwMAWAIBAAMATCMzJSMzIwYFGisBFRQGJyMVFAYHIyImNzUjIiYnNTQ2NzM1NDY7ATIWFxUzMhYDEiAW6CAWaxYgAegXHgEgFugeF2sXHgHoFx4Bt2sWIAHpFh4BIBXpHhdrFx4B6BYgIBboIAABAAD/zwODAwsAHgAgQB0YDwIAAQFHAAIBAm8DAQEAAW8AAABmFTUXFAQFGCsBFAcBBiInASY0PwE2Mh8BETQ2NzMyFhURNzYyHwEWA4MV/pUWOhX+lRUVKRY6FaQqHkcdKqUUOxYpFQGCHhT+lBUVAWwUOxYpFRWkAYkdKgEsHP53pBUVKRYAAQAA/4gDWQLtAB0AJEAhAAIDAm8AAQABcAADAAADVAADAwBYAAADAEwmFxYjBAUYKwEVFAYjIRcWFA8BBiInASY0NwE2Mh8BFhQPASEyFgNZJB3+d6QVFSoVOxX+lBQUAWwVOhYqFRWkAYkdJAFeRx4qpBQ8FCsUFAFsFToWAWsVFSkWOhakKAAAAAABAAD/iAM1Au0AHgAkQCEAAwIDbwAAAQBwAAIBAQJUAAICAVgAAQIBTBYlJhQEBRgrARQHAQYiLwEmND8BISImPQE0NhchJyY0PwE2MhcBFgM1FP6VFjoVKhYWo/53HSQkHQGJoxYWKhU6FgFrFAE6HhT+lBQUKhU8FaMqHkceKgGlFDwUKhUV/pUUAAEAAP+xA4MC5wAeACBAHRAHAgADAUcAAwADbwIBAAEAbwABAWYXFTUUBAUYKwEUDwEGIi8BERQGByMiJjURBwYiLwEmNDcBNjIXARYDgxUpFjsUpSgfRx4qpBQ8FCoVFQFrFDwVAWsVATQcFioVFaT+dx0kASYcAYmkFRUqFTsVAWsVFf6VFgABAAD/wAKYA0QAFAAttQEBAAEBR0uwJFBYQAsAAAEAcAABAQwBSRtACQABAAFvAAAAZlm0FxcCBRYrCQIWFA8BBiInASY0NwE2Mh8BFhQCjv7XASkKCl0LHAv+YgsLAZ4KHgpdCgKq/tj+1woeCl0KCgGfCh4KAZ4LC10KHgAAAAEAAP/AAnQDRAAUAC21CQEAAQFHS7AkUFhACwAAAQBwAAEBDAFJG0AJAAEAAW8AAABmWbQcEgIFFisJAQYiLwEmNDcJASY0PwE2MhcBFhQCav5iCxwLXQsLASj+2AsLXQoeCgGeCgFp/mEKCl0LHAsBKQEoCxwLXQsL/mILHAAAAwAA/3YDoAMLAAgAFAAuAFlAECYBBAMoJxIDAgQAAQEAA0dLsCFQWEAaAAMEA28ABAIEbwACAAJvAAABAG8AAQENAUkbQBgAAwQDbwAEAgRvAAIAAm8AAAEAbwABAWZZtxwjLRgSBQUZKzc0Jg4CHgE2JQEGIi8BJjQ3AR4BJRQHDgEnIiY0NjcyFhcWFA8BFRc2PwE2MhbWFB4UAhgaGAFm/oMVOhY7FRUBfBZUAZkNG4JPaJKSaCBGGQkJo2wCKkshDwodDhYCEiASBBr2/oMUFD0UOxYBfDdU3RYlS14BktCQAhQQBhIHXn08AhktFAoAAAIAAP+xA1oDCwAYADAAMUAuKB8ZAwIEEgwDAwABAkcABAIEbwACAwJvAAMBA28AAQABbwAAAGY6FBcaNwUFGSsBFA8BFxYUBgcjIiYnNTQ+AR8BNzYyHwEWARUUDgEvAQcGIi8BJjQ/AScmNDY3MzIWAaUFuVAKFA/6DxQBFhwLULoFDgZABQG0FCAJULkGDgZABQW6UQoUD/oPFgEFBwa5UQoeFAEWDvoPFAIMULkGBj8GAdv6DxQCDFC5BgZABQ4GuVEKHhQBFgAAAAH//v+xA1kDCwAwAD1AOi0BAQUJAQABAkcAAAEDAQADbQADAgEDAmsABQABAAUBYAACBAQCVAACAgRYAAQCBEwnJxMnJDMGBRorARUUBisBIiY/ASYjIg4CFB4CMzI2Nz4BHwEeAQcOAQciLgI+AzMyFhc3NhYDWRQQ+hcTEU1ScDpqTC4uTGo6QnYpBBEGTAUCBjyuX1egcEgEQHiYW1KYPUgRLALD+g4WLRBNTS5ManRqTC46NQYBBU0EDgZKUAFEdJ6unnREPjlIEhMAAAAC//3/sQNfAwsADwAcAB1AGgADAANvAAABAG8AAQIBbwACAmYVFTUkBAUYKwE1NCYHISIGFxUUFjchMjY3FA4BIi4CPgEyHgECpxYO/lMOFgEUDwGtDhaycsboyG4Gerz0un4BOkgOFgEUD0gOFgEUM3XEdHTE6sR0dMQAAv/9/7EDXwMLACMAMABBQD4NAQABHwEEAwJHAgEAAQMBAANtBQEDBAEDBGsABwABAAcBYAAEBgYEVAAEBAZYAAYEBkwVFSMkJSMkFAgFHCsBNTQmByM1NCYnIyIGBxUjIgYXFRQWNzMVFBYXMzI2NzUzMjY3FA4BIi4CPgEyHgECpxYOjxYORw8UAY8OFgEUD48WDkcPFAGPDhaycsboyG4Gerz0un4BOkgOFgGPDxQBFg6PFA9IDhYBjw8UARYOjxQzdcR0dMTqxHR0xAAAAAYAAP+xAxIDCwAPAB8ALwA7AEMAZwBkQGFXRQIGCCkhGREJAQYAAQJHBQMCAQYABgEAbQQCAgAHBgAHawAOAAkIDglgDw0CCAwKAgYBCAZeAAcLCwdUAAcHC1gACwcLTGVkYV5bWVNST0xJR0E/FCQUJiYmJiYjEAUdKwERFAYrASImNRE0NjsBMhYXERQGKwEiJjURNDY7ATIWFxEUBisBIiY1ETQ2OwEyFhMRIREUHgEzITI+AQEzJyYnIwYHBRUUBisBERQGIyEiJicRIyImPQE0NjsBNz4BNzMyFh8BMzIWAR4KCCQICgoIJAgKjwoIJAgKCggkCAqOCgckCAoKCCQHCkj+DAgIAgHQAggI/on6GwQFsQYEAesKCDY0Jf4wJTQBNQgKCgisJwksFrIXKgknrQgKAbf+vwgKCggBQQgKCgj+vwgKCggBQQgKCgj+vwgKCggBQQgKCv5kAhH97wwUCgoUAmVBBQEBBVMkCAr97y5EQi4CEwoIJAgKXRUcAR4UXQoAAgAA/7EDoQMLAAcAUACzQAk+NiEJBAUDAUdLsApQWEAqAAEAAW8ABQMCAwUCbQACBAMCBGsHBgIEBG4AAAMDAFIAAAADVgADAANKG0uwC1BYQCoAAQABbwAFAwIDBQJtBAECBgMCBmsHAQYGbgAAAwMAUgAAAANWAAMAA0obQCoAAQABbwAFAwIDBQJtAAIEAwIEawcGAgQEbgAAAwMAUgAAAANWAAMAA0pZWUATCAgIUAhQTEtKSTs6KiMbUQgFFisBBxcWMzI3JgE3PgQ3GwEzFxMeARceARcWFx4BFxYVFAYXIiYHIgYjND8CNj8BNj8BNic0Ji8CDgEXFB4BHwEWNxYVFAciJiMiBicGAZVfTDofCxUw/jUBDSQcHBYGhJxIBnITUhYJMBALCAtMCQQCASOOJCqcFQJJBwYDEQQCBQMCIhcY+w46ARAgCyAVAgEBIYIgBRQCLQIa+wEBAY3+BiwEBgYKGBABWAGUDP70K8o0E3ohGgYJEAMWCgMKAgoBCBgTEAEBAQcCAgYEBAlaNjgBIJoODBIKAgUDAQsVBQsMBgEIAAP///9qA6EDDQAjACwARQBdQFofGAIDBBMSAQMAAw0GAgEAQwEHATIBCQcFRwAEBgMGBANtAAEABwABB20ACgAGBAoGYAUBAwIBAAEDAGAABwAJCAcJYAAICA0IST08NTMUExUUIyYUIyMLBR0rARUUBicjFRQGJyMiJjc1IyImJzU0NjsBNTQ2OwEyFhcVMzIWFzQuAQYUFj4BARQGIi8BBiMiLgI+BB4CFxQHFxYCOwoHfQwGJAcMAX0HCgEMBn0KCCQHCgF9BwpIktCSktCSAR4qPBS/ZHtQkmhAAjxsjqSObDwBRb8VAZQkBwwBfQcMAQoIfQoIJAcKfQgKCgh9ChlnkgKWypgGjP6aHSoVv0U+apCijm46BEJmlk17ZL8VAAAD////agOhAw0ADwAYADEAO0A4CQgBAwABLwEDAB4BBQMDRwAGAAIBBgJgAAEAAAMBAGAAAwAFBAMFYAAEBA0ESRcjFBMVJiMHBRsrARUUBichIiYnNTQ2MyEyFhc0LgEGFBY+AQEUBiIvAQYjIi4CPgQeAhcUBxcWAjsKB/6+BwoBDAYBQgcKSJLQkpLQkgEeKjwUv2R7UJJoQAI8bI6kjmw8AUW/FQGUJAcMAQoIJAcKChlnkgKWypgGjP6aHSoVv0U+apCijm46BEJmlk17ZL8VAAEAAAAAAcwCJgACABVAEgEBAEQBAQAAZgAAAAIAAgIFFCsBCwEBzObmAib+cAGQAAEAAP9qA+gDUgBEAFBATQsBCQoHCgkHbQ0BBwgKBwhrBgEAAQIBAAJtBAECAwECA2sMAQgFAQEACAFeAAoKDEgAAwMNA0lBQD08Ozk0My4sExcTESUVIRMUDgUdKwEUDwEGIiY9ASMVMzIWFA8BBiIvASY0NjsBNSMVFAYiLwEmND8BNjIWHQEzNSMiJjQ/ATYyHwEWFAYrARUzNTQ2Mh8BFgPoC44LHhTXSA4WC48KHgqPCxYOSNcUHgqPCwuPCh4U10gOFguPCxwLjwsWDkjXFB4LjgsBXg4LjwsWDkjXFB4KjwsLjwoeFNdIDhYLjwscC48LFg5I1xQeC44LC44LHhTXSA4WC48KAAABAAD/sQNZAwsADwARQA4AAQABbwAAAGY1MwIFFisBERQGByEiJjURNDY3ITIWA1leQ/3pQ15eQwIXQ14Cav3oQl4BYEECGEJeAWAAAQAA/2cCigNSABwAIUAeDgEBAAFHAAACAQIAAW0AAQFuAAICDAJJKBsjAwUXKwEWBwYrARMWBg8BBiYvAQcGIyInJjURNDc2MzIXAngSCgkY1XAGDA1jDhoGa64LDgcHFhYHBw8KAQwRFRf+9g0cBSoGDA38rgsDChcDRxgJAwsAAAAAAQAAAAEAAE322dZfDzz1AAsD6AAAAADWM9FYAAAAANYz0Vj//f9nA+gDUgAAAAgAAgAAAAAAAAABAAADUv9qAAAD6P/9//oD6AABAAAAAAAAAAAAAAAAAAAAFwPoAAAD6AAAAxEAAAMRAAADoAAAA1kAAANZAAADoAAAAsoAAALKAAADoAAAA1kAAANZ//4DWf/9A1n//QMRAAADoAAAA6D//wOg//8BzAAAA+gAAANZAAACygAAAAAAAAA4AIIAygEOAVQBmgHeAh4CXgLYAz4DpgPkBEwFEAXkBnYG4Ab4B34HpAflAAEAAAAXAGgABgAAAAAAAgAgADAAcwAAAHULcAAAAAAAAAASAN4AAQAAAAAAAAA1AAAAAQAAAAAAAQAIADUAAQAAAAAAAgAHAD0AAQAAAAAAAwAIAEQAAQAAAAAABAAIAEwAAQAAAAAABQALAFQAAQAAAAAABgAIAF8AAQAAAAAACgArAGcAAQAAAAAACwATAJIAAwABBAkAAABqAKUAAwABBAkAAQAQAQ8AAwABBAkAAgAOAR8AAwABBAkAAwAQAS0AAwABBAkABAAQAT0AAwABBAkABQAWAU0AAwABBAkABgAQAWMAAwABBAkACgBWAXMAAwABBAkACwAmAclDb3B5cmlnaHQgKEMpIDIwMTcgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbWZvbnRlbGxvUmVndWxhcmZvbnRlbGxvZm9udGVsbG9WZXJzaW9uIDEuMGZvbnRlbGxvR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAxADcAIABiAHkAIABvAHIAaQBnAGkAbgBhAGwAIABhAHUAdABoAG8AcgBzACAAQAAgAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAGYAbwBuAHQAZQBsAGwAbwBSAGUAZwB1AGwAYQByAGYAbwBuAHQAZQBsAGwAbwBmAG8AbgB0AGUAbABsAG8AVgBlAHIAcwBpAG8AbgAgADEALgAwAGYAbwBuAHQAZQBsAGwAbwBHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETARQBFQEWARcBGAACb2sGY2FuY2VsBHBsdXMIZG93bi1iaWcIbGVmdC1iaWcJcmlnaHQtYmlnBnVwLWJpZwlsZWZ0LW9wZW4KcmlnaHQtb3BlbgZ3cmVuY2gLcmVzaXplLWZ1bGwCY3cNbWludXMtY2lyY2xlZAxwbHVzLWNpcmNsZWQLdHJhc2gtZW1wdHkEZm9udAd6b29tLWluCHpvb20tb3V0CGRvd24tZGlyBG1vdmUFYmxhbmsNbW91c2UtcG9pbnRlcgAAAAABAAH//wAPAAAAAAAAAAAAAAAAAAAAAAAYABgAGAAYA1L/ZwNS/2ewACwgsABVWEVZICBLuAAOUUuwBlNaWLA0G7AoWWBmIIpVWLACJWG5CAAIAGNjI2IbISGwAFmwAEMjRLIAAQBDYEItsAEssCBgZi2wAiwgZCCwwFCwBCZasigBCkNFY0VSW1ghIyEbilggsFBQWCGwQFkbILA4UFghsDhZWSCxAQpDRWNFYWSwKFBYIbEBCkNFY0UgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7ABK1lZI7AAUFhlWVktsAMsIEUgsAQlYWQgsAVDUFiwBSNCsAYjQhshIVmwAWAtsAQsIyEjISBksQViQiCwBiNCsQEKQ0VjsQEKQ7ABYEVjsAMqISCwBkMgiiCKsAErsTAFJbAEJlFYYFAbYVJZWCNZISCwQFNYsAErGyGwQFkjsABQWGVZLbAFLLAHQyuyAAIAQ2BCLbAGLLAHI0IjILAAI0JhsAJiZrABY7ABYLAFKi2wBywgIEUgsAtDY7gEAGIgsABQWLBAYFlmsAFjYESwAWAtsAgssgcLAENFQiohsgABAENgQi2wCSywAEMjRLIAAQBDYEItsAosICBFILABKyOwAEOwBCVgIEWKI2EgZCCwIFBYIbAAG7AwUFiwIBuwQFlZI7AAUFhlWbADJSNhRESwAWAtsAssICBFILABKyOwAEOwBCVgIEWKI2EgZLAkUFiwABuwQFkjsABQWGVZsAMlI2FERLABYC2wDCwgsAAjQrILCgNFWCEbIyFZKiEtsA0ssQICRbBkYUQtsA4ssAFgICCwDENKsABQWCCwDCNCWbANQ0qwAFJYILANI0JZLbAPLCCwEGJmsAFjILgEAGOKI2GwDkNgIIpgILAOI0IjLbAQLEtUWLEEZERZJLANZSN4LbARLEtRWEtTWLEEZERZGyFZJLATZSN4LbASLLEAD0NVWLEPD0OwAWFCsA8rWbAAQ7ACJUKxDAIlQrENAiVCsAEWIyCwAyVQWLEBAENgsAQlQoqKIIojYbAOKiEjsAFhIIojYbAOKiEbsQEAQ2CwAiVCsAIlYbAOKiFZsAxDR7ANQ0dgsAJiILAAUFiwQGBZZrABYyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsQAAEyNEsAFDsAA+sgEBAUNgQi2wEywAsQACRVRYsA8jQiBFsAsjQrAKI7ABYEIgYLABYbUQEAEADgBCQopgsRIGK7ByKxsiWS2wFCyxABMrLbAVLLEBEystsBYssQITKy2wFyyxAxMrLbAYLLEEEystsBkssQUTKy2wGiyxBhMrLbAbLLEHEystsBwssQgTKy2wHSyxCRMrLbAeLACwDSuxAAJFVFiwDyNCIEWwCyNCsAojsAFgQiBgsAFhtRAQAQAOAEJCimCxEgYrsHIrGyJZLbAfLLEAHistsCAssQEeKy2wISyxAh4rLbAiLLEDHistsCMssQQeKy2wJCyxBR4rLbAlLLEGHistsCYssQceKy2wJyyxCB4rLbAoLLEJHistsCksIDywAWAtsCosIGCwEGAgQyOwAWBDsAIlYbABYLApKiEtsCsssCorsCoqLbAsLCAgRyAgsAtDY7gEAGIgsABQWLBAYFlmsAFjYCNhOCMgilVYIEcgILALQ2O4BABiILAAUFiwQGBZZrABY2AjYTgbIVktsC0sALEAAkVUWLABFrAsKrABFTAbIlktsC4sALANK7EAAkVUWLABFrAsKrABFTAbIlktsC8sIDWwAWAtsDAsALABRWO4BABiILAAUFiwQGBZZrABY7ABK7ALQ2O4BABiILAAUFiwQGBZZrABY7ABK7AAFrQAAAAAAEQ+IzixLwEVKi2wMSwgPCBHILALQ2O4BABiILAAUFiwQGBZZrABY2CwAENhOC2wMiwuFzwtsDMsIDwgRyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsABDYbABQ2M4LbA0LLECABYlIC4gR7AAI0KwAiVJiopHI0cjYSBYYhshWbABI0KyMwEBFRQqLbA1LLAAFrAEJbAEJUcjRyNhsAlDK2WKLiMgIDyKOC2wNiywABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyCwCEMgiiNHI0cjYSNGYLAEQ7ACYiCwAFBYsEBgWWawAWNgILABKyCKimEgsAJDYGQjsANDYWRQWLACQ2EbsANDYFmwAyWwAmIgsABQWLBAYFlmsAFjYSMgILAEJiNGYTgbI7AIQ0awAiWwCENHI0cjYWAgsARDsAJiILAAUFiwQGBZZrABY2AjILABKyOwBENgsAErsAUlYbAFJbACYiCwAFBYsEBgWWawAWOwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbA3LLAAFiAgILAFJiAuRyNHI2EjPDgtsDgssAAWILAII0IgICBGI0ewASsjYTgtsDkssAAWsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbkIAAgAY2MjIFhiGyFZY7gEAGIgsABQWLBAYFlmsAFjYCMuIyAgPIo4IyFZLbA6LLAAFiCwCEMgLkcjRyNhIGCwIGBmsAJiILAAUFiwQGBZZrABYyMgIDyKOC2wOywjIC5GsAIlRlJYIDxZLrErARQrLbA8LCMgLkawAiVGUFggPFkusSsBFCstsD0sIyAuRrACJUZSWCA8WSMgLkawAiVGUFggPFkusSsBFCstsD4ssDUrIyAuRrACJUZSWCA8WS6xKwEUKy2wPyywNiuKICA8sAQjQoo4IyAuRrACJUZSWCA8WS6xKwEUK7AEQy6wKystsEAssAAWsAQlsAQmIC5HI0cjYbAJQysjIDwgLiM4sSsBFCstsEEssQgEJUKwABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyBHsARDsAJiILAAUFiwQGBZZrABY2AgsAErIIqKYSCwAkNgZCOwA0NhZFBYsAJDYRuwA0NgWbADJbACYiCwAFBYsEBgWWawAWNhsAIlRmE4IyA8IzgbISAgRiNHsAErI2E4IVmxKwEUKy2wQiywNSsusSsBFCstsEMssDYrISMgIDywBCNCIzixKwEUK7AEQy6wKystsEQssAAVIEewACNCsgABARUUEy6wMSotsEUssAAVIEewACNCsgABARUUEy6wMSotsEYssQABFBOwMiotsEcssDQqLbBILLAAFkUjIC4gRoojYTixKwEUKy2wSSywCCNCsEgrLbBKLLIAAEErLbBLLLIAAUErLbBMLLIBAEErLbBNLLIBAUErLbBOLLIAAEIrLbBPLLIAAUIrLbBQLLIBAEIrLbBRLLIBAUIrLbBSLLIAAD4rLbBTLLIAAT4rLbBULLIBAD4rLbBVLLIBAT4rLbBWLLIAAEArLbBXLLIAAUArLbBYLLIBAEArLbBZLLIBAUArLbBaLLIAAEMrLbBbLLIAAUMrLbBcLLIBAEMrLbBdLLIBAUMrLbBeLLIAAD8rLbBfLLIAAT8rLbBgLLIBAD8rLbBhLLIBAT8rLbBiLLA3Ky6xKwEUKy2wYyywNyuwOystsGQssDcrsDwrLbBlLLAAFrA3K7A9Ky2wZiywOCsusSsBFCstsGcssDgrsDsrLbBoLLA4K7A8Ky2waSywOCuwPSstsGossDkrLrErARQrLbBrLLA5K7A7Ky2wbCywOSuwPCstsG0ssDkrsD0rLbBuLLA6Ky6xKwEUKy2wbyywOiuwOystsHAssDorsDwrLbBxLLA6K7A9Ky2wciyzCQQCA0VYIRsjIVlCK7AIZbADJFB4sAEVMC0AS7gAyFJYsQEBjlmwAbkIAAgAY3CxAAVCsgABACqxAAVCswoCAQgqsQAFQrMOAAEIKrEABkK6AsAAAQAJKrEAB0K6AEAAAQAJKrEDAESxJAGIUViwQIhYsQNkRLEmAYhRWLoIgAABBECIY1RYsQMARFlZWVmzDAIBDCq4Af+FsASNsQIARAAA"

/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(125);
module.exports = __webpack_require__(146);


/***/ }),
/* 125 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(__resourceQuery) {

/* global __resourceQuery WorkerGlobalScope self */
/* eslint prefer-destructuring: off */

var url = __webpack_require__(126);
var stripAnsi = __webpack_require__(132);
var log = __webpack_require__(134).getLogger('webpack-dev-server');
var socket = __webpack_require__(135);
var overlay = __webpack_require__(137);

function getCurrentScriptSource() {
  // `document.currentScript` is the most accurate way to find the current script,
  // but is not supported in all browsers.
  if (document.currentScript) {
    return document.currentScript.getAttribute('src');
  }
  // Fall back to getting all scripts in the document.
  var scriptElements = document.scripts || [];
  var currentScript = scriptElements[scriptElements.length - 1];
  if (currentScript) {
    return currentScript.getAttribute('src');
  }
  // Fail as there was no script to use.
  throw new Error('[WDS] Failed to get current script source.');
}

var urlParts = void 0;
var hotReload = true;
if (typeof window !== 'undefined') {
  var qs = window.location.search.toLowerCase();
  hotReload = qs.indexOf('hotreload=false') === -1;
}
if (true) {
  // If this bundle is inlined, use the resource query to get the correct url.
  urlParts = url.parse(__resourceQuery.substr(1));
} else {
  // Else, get the url from the <script> this file was called with.
  var scriptHost = getCurrentScriptSource();
  // eslint-disable-next-line no-useless-escape
  scriptHost = scriptHost.replace(/\/[^\/]+$/, '');
  urlParts = url.parse(scriptHost || '/', false, true);
}

if (!urlParts.port || urlParts.port === '0') {
  urlParts.port = self.location.port;
}

var _hot = false;
var initial = true;
var currentHash = '';
var useWarningOverlay = false;
var useErrorOverlay = false;
var useProgress = false;

var INFO = 'info';
var WARNING = 'warning';
var ERROR = 'error';
var NONE = 'none';

// Set the default log level
log.setDefaultLevel(INFO);

// Send messages to the outside, so plugins can consume it.
function sendMsg(type, data) {
  if (typeof self !== 'undefined' && (typeof WorkerGlobalScope === 'undefined' || !(self instanceof WorkerGlobalScope))) {
    self.postMessage({
      type: 'webpack' + type,
      data: data
    }, '*');
  }
}

var onSocketMsg = {
  hot: function hot() {
    _hot = true;
    log.info('[WDS] Hot Module Replacement enabled.');
  },
  invalid: function invalid() {
    log.info('[WDS] App updated. Recompiling...');
    // fixes #1042. overlay doesn't clear if errors are fixed but warnings remain.
    if (useWarningOverlay || useErrorOverlay) overlay.clear();
    sendMsg('Invalid');
  },
  hash: function hash(_hash) {
    currentHash = _hash;
  },

  'still-ok': function stillOk() {
    log.info('[WDS] Nothing changed.');
    if (useWarningOverlay || useErrorOverlay) overlay.clear();
    sendMsg('StillOk');
  },
  'log-level': function logLevel(level) {
    var hotCtx = __webpack_require__(142);
    if (hotCtx.keys().indexOf('./log') !== -1) {
      hotCtx('./log').setLogLevel(level);
    }
    switch (level) {
      case INFO:
      case ERROR:
        log.setLevel(level);
        break;
      case WARNING:
        // loglevel's warning name is different from webpack's
        log.setLevel('warn');
        break;
      case NONE:
        log.disableAll();
        break;
      default:
        log.error('[WDS] Unknown clientLogLevel \'' + level + '\'');
    }
  },
  overlay: function overlay(value) {
    if (typeof document !== 'undefined') {
      if (typeof value === 'boolean') {
        useWarningOverlay = false;
        useErrorOverlay = value;
      } else if (value) {
        useWarningOverlay = value.warnings;
        useErrorOverlay = value.errors;
      }
    }
  },
  progress: function progress(_progress) {
    if (typeof document !== 'undefined') {
      useProgress = _progress;
    }
  },

  'progress-update': function progressUpdate(data) {
    if (useProgress) log.info('[WDS] ' + data.percent + '% - ' + data.msg + '.');
  },
  ok: function ok() {
    sendMsg('Ok');
    if (useWarningOverlay || useErrorOverlay) overlay.clear();
    if (initial) return initial = false; // eslint-disable-line no-return-assign
    reloadApp();
  },

  'content-changed': function contentChanged() {
    log.info('[WDS] Content base changed. Reloading...');
    self.location.reload();
  },
  warnings: function warnings(_warnings) {
    log.warn('[WDS] Warnings while compiling.');
    var strippedWarnings = _warnings.map(function (warning) {
      return stripAnsi(warning);
    });
    sendMsg('Warnings', strippedWarnings);
    for (var i = 0; i < strippedWarnings.length; i++) {
      log.warn(strippedWarnings[i]);
    }
    if (useWarningOverlay) overlay.showMessage(_warnings);

    if (initial) return initial = false; // eslint-disable-line no-return-assign
    reloadApp();
  },
  errors: function errors(_errors) {
    log.error('[WDS] Errors while compiling. Reload prevented.');
    var strippedErrors = _errors.map(function (error) {
      return stripAnsi(error);
    });
    sendMsg('Errors', strippedErrors);
    for (var i = 0; i < strippedErrors.length; i++) {
      log.error(strippedErrors[i]);
    }
    if (useErrorOverlay) overlay.showMessage(_errors);
  },
  error: function error(_error) {
    log.error(_error);
  },
  close: function close() {
    log.error('[WDS] Disconnected!');
    sendMsg('Close');
  }
};

var hostname = urlParts.hostname;
var protocol = urlParts.protocol;

// check ipv4 and ipv6 `all hostname`
if (hostname === '0.0.0.0' || hostname === '::') {
  // why do we need this check?
  // hostname n/a for file protocol (example, when using electron, ionic)
  // see: https://github.com/webpack/webpack-dev-server/pull/384
  // eslint-disable-next-line no-bitwise
  if (self.location.hostname && !!~self.location.protocol.indexOf('http')) {
    hostname = self.location.hostname;
  }
}

// `hostname` can be empty when the script path is relative. In that case, specifying
// a protocol would result in an invalid URL.
// When https is used in the app, secure websockets are always necessary
// because the browser doesn't accept non-secure websockets.
if (hostname && (self.location.protocol === 'https:' || urlParts.hostname === '0.0.0.0')) {
  protocol = self.location.protocol;
}

var socketUrl = url.format({
  protocol: protocol,
  auth: urlParts.auth,
  hostname: hostname,
  port: urlParts.port,
  pathname: urlParts.path == null || urlParts.path === '/' ? '/sockjs-node' : urlParts.path
});

socket(socketUrl, onSocketMsg);

var isUnloading = false;
self.addEventListener('beforeunload', function () {
  isUnloading = true;
});

function reloadApp() {
  if (isUnloading || !hotReload) {
    return;
  }
  if (_hot) {
    log.info('[WDS] App hot update...');
    // eslint-disable-next-line global-require
    var hotEmitter = __webpack_require__(144);
    hotEmitter.emit('webpackHotUpdate', currentHash);
    if (typeof self !== 'undefined' && self.window) {
      // broadcast update to window
      self.postMessage('webpackHotUpdate' + currentHash, '*');
    }
  } else {
    var rootWindow = self;
    // use parent window for reload (in case we're in an iframe with no valid src)
    var intervalId = self.setInterval(function () {
      if (rootWindow.location.protocol !== 'about:') {
        // reload immediately if protocol is valid
        applyReload(rootWindow, intervalId);
      } else {
        rootWindow = rootWindow.parent;
        if (rootWindow.parent === rootWindow) {
          // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways
          applyReload(rootWindow, intervalId);
        }
      }
    });
  }

  function applyReload(rootWindow, intervalId) {
    clearInterval(intervalId);
    log.info('[WDS] App updated. Reloading...');
    rootWindow.location.reload();
  }
}
/* WEBPACK VAR INJECTION */}.call(exports, "?http://localhost:7621"))

/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var punycode = __webpack_require__(127);
var util = __webpack_require__(128);

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

function Url() {
  this.protocol = null;
  this.slashes = null;
  this.auth = null;
  this.host = null;
  this.port = null;
  this.hostname = null;
  this.hash = null;
  this.search = null;
  this.query = null;
  this.pathname = null;
  this.path = null;
  this.href = null;
}

// Reference: RFC 3986, RFC 1808, RFC 2396

// define these here so at least they only have to be
// compiled once on the first module load.
var protocolPattern = /^([a-z0-9.+-]+:)/i,
    portPattern = /:[0-9]*$/,

    // Special case for a simple path URL
    simplePathPattern = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,

    // RFC 2396: characters reserved for delimiting URLs.
    // We actually just auto-escape these.
    delims = ['<', '>', '"', '`', ' ', '\r', '\n', '\t'],

    // RFC 2396: characters not allowed for various reasons.
    unwise = ['{', '}', '|', '\\', '^', '`'].concat(delims),

    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.
    autoEscape = ['\''].concat(unwise),
    // Characters that are never ever allowed in a hostname.
    // Note that any invalid chars are also handled, but these
    // are the ones that are *expected* to be seen, so we fast-path
    // them.
    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),
    hostEndingChars = ['/', '?', '#'],
    hostnameMaxLen = 255,
    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,
    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
    // protocols that can allow "unsafe" and "unwise" chars.
    unsafeProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that never have a hostname.
    hostlessProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that always contain a // bit.
    slashedProtocol = {
      'http': true,
      'https': true,
      'ftp': true,
      'gopher': true,
      'file': true,
      'http:': true,
      'https:': true,
      'ftp:': true,
      'gopher:': true,
      'file:': true
    },
    querystring = __webpack_require__(129);

function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url && util.isObject(url) && url instanceof Url) return url;

  var u = new Url;
  u.parse(url, parseQueryString, slashesDenoteHost);
  return u;
}

Url.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {
  if (!util.isString(url)) {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  // Copy chrome, IE, opera backslash-handling behavior.
  // Back slashes before the query string get converted to forward slashes
  // See: https://code.google.com/p/chromium/issues/detail?id=25916
  var queryIndex = url.indexOf('?'),
      splitter =
          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',
      uSplit = url.split(splitter),
      slashRegex = /\\/g;
  uSplit[0] = uSplit[0].replace(slashRegex, '/');
  url = uSplit.join(splitter);

  var rest = url;

  // trim before proceeding.
  // This is to support parse stuff like "  http://foo.com  \n"
  rest = rest.trim();

  if (!slashesDenoteHost && url.split('#').length === 1) {
    // Try fast path regexp
    var simplePath = simplePathPattern.exec(rest);
    if (simplePath) {
      this.path = rest;
      this.href = rest;
      this.pathname = simplePath[1];
      if (simplePath[2]) {
        this.search = simplePath[2];
        if (parseQueryString) {
          this.query = querystring.parse(this.search.substr(1));
        } else {
          this.query = this.search.substr(1);
        }
      } else if (parseQueryString) {
        this.search = '';
        this.query = {};
      }
      return this;
    }
  }

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    this.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it's got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that's
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes && !(proto && hostlessProtocol[proto])) {
      rest = rest.substr(2);
      this.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &&
      (slashes || (proto && !slashedProtocol[proto]))) {

    // there's a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    //
    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the last @ sign, unless some host-ending character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    //
    // ex:
    // http://a@b@c/ => user:a@b host:c
    // http://a@b?@c => user:a host:c path:/?@c

    // v0.12 TODO(isaacs): This is not quite how Chrome does things.
    // Review our test case against browsers more comprehensively.

    // find the first instance of any hostEndingChars
    var hostEnd = -1;
    for (var i = 0; i < hostEndingChars.length; i++) {
      var hec = rest.indexOf(hostEndingChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }

    // at this point, either we have an explicit point where the
    // auth portion cannot go past, or the last @ char is the decider.
    var auth, atSign;
    if (hostEnd === -1) {
      // atSign can be anywhere.
      atSign = rest.lastIndexOf('@');
    } else {
      // atSign must be in auth portion.
      // http://a@b/c@d => host:b auth:a path:/c@d
      atSign = rest.lastIndexOf('@', hostEnd);
    }

    // Now we have a portion which is definitely the auth.
    // Pull that off.
    if (atSign !== -1) {
      auth = rest.slice(0, atSign);
      rest = rest.slice(atSign + 1);
      this.auth = decodeURIComponent(auth);
    }

    // the host is the remaining to the left of the first non-host char
    hostEnd = -1;
    for (var i = 0; i < nonHostChars.length; i++) {
      var hec = rest.indexOf(nonHostChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }
    // if we still have not hit it, then the entire thing is a host.
    if (hostEnd === -1)
      hostEnd = rest.length;

    this.host = rest.slice(0, hostEnd);
    rest = rest.slice(hostEnd);

    // pull out port.
    this.parseHost();

    // we've indicated that there is a hostname,
    // so even if it's empty, it has to be present.
    this.hostname = this.hostname || '';

    // if hostname begins with [ and ends with ]
    // assume that it's an IPv6 address.
    var ipv6Hostname = this.hostname[0] === '[' &&
        this.hostname[this.hostname.length - 1] === ']';

    // validate a little.
    if (!ipv6Hostname) {
      var hostparts = this.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i < l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j < k; j++) {
            if (part.charCodeAt(j) > 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) {
              validParts.push(bit[1]);
              notHost.unshift(bit[2]);
            }
            if (notHost.length) {
              rest = '/' + notHost.join('.') + rest;
            }
            this.hostname = validParts.join('.');
            break;
          }
        }
      }
    }

    if (this.hostname.length > hostnameMaxLen) {
      this.hostname = '';
    } else {
      // hostnames are always lower case.
      this.hostname = this.hostname.toLowerCase();
    }

    if (!ipv6Hostname) {
      // IDNA Support: Returns a punycoded representation of "domain".
      // It only converts parts of the domain name that
      // have non-ASCII characters, i.e. it doesn't matter if
      // you call it with a domain that already is ASCII-only.
      this.hostname = punycode.toASCII(this.hostname);
    }

    var p = this.port ? ':' + this.port : '';
    var h = this.hostname || '';
    this.host = h + p;
    this.href += this.host;

    // strip [ and ] from the hostname
    // the host field still retains them, though
    if (ipv6Hostname) {
      this.hostname = this.hostname.substr(1, this.hostname.length - 2);
      if (rest[0] !== '/') {
        rest = '/' + rest;
      }
    }
  }

  // now rest is set to the post-host stuff.
  // chop off any delim chars.
  if (!unsafeProtocol[lowerProto]) {

    // First, make 100% sure that any "autoEscape" chars get
    // escaped, even if encodeURIComponent doesn't think they
    // need to be.
    for (var i = 0, l = autoEscape.length; i < l; i++) {
      var ae = autoEscape[i];
      if (rest.indexOf(ae) === -1)
        continue;
      var esc = encodeURIComponent(ae);
      if (esc === ae) {
        esc = escape(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }


  // chop off from the tail first.
  var hash = rest.indexOf('#');
  if (hash !== -1) {
    // got a fragment string.
    this.hash = rest.substr(hash);
    rest = rest.slice(0, hash);
  }
  var qm = rest.indexOf('?');
  if (qm !== -1) {
    this.search = rest.substr(qm);
    this.query = rest.substr(qm + 1);
    if (parseQueryString) {
      this.query = querystring.parse(this.query);
    }
    rest = rest.slice(0, qm);
  } else if (parseQueryString) {
    // no query string, but parseQueryString still requested
    this.search = '';
    this.query = {};
  }
  if (rest) this.pathname = rest;
  if (slashedProtocol[lowerProto] &&
      this.hostname && !this.pathname) {
    this.pathname = '/';
  }

  //to support http.request
  if (this.pathname || this.search) {
    var p = this.pathname || '';
    var s = this.search || '';
    this.path = p + s;
  }

  // finally, reconstruct the href based on what has been validated.
  this.href = this.format();
  return this;
};

// format a parsed object into a url string
function urlFormat(obj) {
  // ensure it's an object, and not a string url.
  // If it's an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (util.isString(obj)) obj = urlParse(obj);
  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);
  return obj.format();
}

Url.prototype.format = function() {
  var auth = this.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = this.protocol || '',
      pathname = this.pathname || '',
      hash = this.hash || '',
      host = false,
      query = '';

  if (this.host) {
    host = auth + this.host;
  } else if (this.hostname) {
    host = auth + (this.hostname.indexOf(':') === -1 ?
        this.hostname :
        '[' + this.hostname + ']');
    if (this.port) {
      host += ':' + this.port;
    }
  }

  if (this.query &&
      util.isObject(this.query) &&
      Object.keys(this.query).length) {
    query = querystring.stringify(this.query);
  }

  var search = this.search || (query && ('?' + query)) || '';

  if (protocol && protocol.substr(-1) !== ':') protocol += ':';

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (this.slashes ||
      (!protocol || slashedProtocol[protocol]) && host !== false) {
    host = '//' + (host || '');
    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;
  } else if (!host) {
    host = '';
  }

  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;
  if (search && search.charAt(0) !== '?') search = '?' + search;

  pathname = pathname.replace(/[?#]/g, function(match) {
    return encodeURIComponent(match);
  });
  search = search.replace('#', '%23');

  return protocol + host + pathname + search + hash;
};

function urlResolve(source, relative) {
  return urlParse(source, false, true).resolve(relative);
}

Url.prototype.resolve = function(relative) {
  return this.resolveObject(urlParse(relative, false, true)).format();
};

function urlResolveObject(source, relative) {
  if (!source) return relative;
  return urlParse(source, false, true).resolveObject(relative);
}

Url.prototype.resolveObject = function(relative) {
  if (util.isString(relative)) {
    var rel = new Url();
    rel.parse(relative, false, true);
    relative = rel;
  }

  var result = new Url();
  var tkeys = Object.keys(this);
  for (var tk = 0; tk < tkeys.length; tk++) {
    var tkey = tkeys[tk];
    result[tkey] = this[tkey];
  }

  // hash is always overridden, no matter what.
  // even href="" will remove it.
  result.hash = relative.hash;

  // if the relative url is empty, then there's nothing left to do here.
  if (relative.href === '') {
    result.href = result.format();
    return result;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes && !relative.protocol) {
    // take everything except the protocol from relative
    var rkeys = Object.keys(relative);
    for (var rk = 0; rk < rkeys.length; rk++) {
      var rkey = rkeys[rk];
      if (rkey !== 'protocol')
        result[rkey] = relative[rkey];
    }

    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[result.protocol] &&
        result.hostname && !result.pathname) {
      result.path = result.pathname = '/';
    }

    result.href = result.format();
    return result;
  }

  if (relative.protocol && relative.protocol !== result.protocol) {
    // if it's a known url protocol, then changing
    // the protocol does weird things
    // first, if it's not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that's known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      var keys = Object.keys(relative);
      for (var v = 0; v < keys.length; v++) {
        var k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      return result;
    }

    result.protocol = relative.protocol;
    if (!relative.host && !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length && !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = '';
      if (!relative.hostname) relative.hostname = '';
      if (relPath[0] !== '') relPath.unshift('');
      if (relPath.length < 2) relPath.unshift('');
      result.pathname = relPath.join('/');
    } else {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || '';
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
    // to support http.request
    if (result.pathname || result.search) {
      var p = result.pathname || '';
      var s = result.search || '';
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    return result;
  }

  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),
      isRelAbs = (
          relative.host ||
          relative.pathname && relative.pathname.charAt(0) === '/'
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (result.host && relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = result.pathname && result.pathname.split('/') || [],
      relPath = relative.pathname && relative.pathname.split('/') || [],
      psychotic = result.protocol && !slashedProtocol[result.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // result.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {
    result.hostname = '';
    result.port = null;
    if (result.host) {
      if (srcPath[0] === '') srcPath[0] = result.host;
      else srcPath.unshift(result.host);
    }
    result.host = '';
    if (relative.protocol) {
      relative.hostname = null;
      relative.port = null;
      if (relative.host) {
        if (relPath[0] === '') relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      relative.host = null;
    }
    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    result.host = (relative.host || relative.host === '') ?
                  relative.host : result.host;
    result.hostname = (relative.hostname || relative.hostname === '') ?
                      relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
    // fall through to the dot-handling below.
  } else if (relPath.length) {
    // it's relative
    // throw away the existing file, and take the new path instead.
    if (!srcPath) srcPath = [];
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } else if (!util.isNullOrUndefined(relative.search)) {
    // just pull out the search.
    // like href='?foo'.
    // Put this after the other two cases because it simplifies the booleans
    if (psychotic) {
      result.hostname = result.host = srcPath.shift();
      //occationaly the auth can get stuck only in host
      //this especially happens in cases like
      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
      var authInHost = result.host && result.host.indexOf('@') > 0 ?
                       result.host.split('@') : false;
      if (authInHost) {
        result.auth = authInHost.shift();
        result.host = result.hostname = authInHost.shift();
      }
    }
    result.search = relative.search;
    result.query = relative.query;
    //to support http.request
    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
      result.path = (result.pathname ? result.pathname : '') +
                    (result.search ? result.search : '');
    }
    result.href = result.format();
    return result;
  }

  if (!srcPath.length) {
    // no path at all.  easy.
    // we've already handled the other stuff above.
    result.pathname = null;
    //to support http.request
    if (result.search) {
      result.path = '/' + result.search;
    } else {
      result.path = null;
    }
    result.href = result.format();
    return result;
  }

  // if a url ENDs in . or .., then it must get a trailing slash.
  // however, if it ends in anything else non-slashy,
  // then it must NOT get a trailing slash.
  var last = srcPath.slice(-1)[0];
  var hasTrailingSlash = (
      (result.host || relative.host || srcPath.length > 1) &&
      (last === '.' || last === '..') || last === '');

  // strip single dots, resolve double dots to parent dir
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = srcPath.length; i >= 0; i--) {
    last = srcPath[i];
    if (last === '.') {
      srcPath.splice(i, 1);
    } else if (last === '..') {
      srcPath.splice(i, 1);
      up++;
    } else if (up) {
      srcPath.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (!mustEndAbs && !removeAllDots) {
    for (; up--; up) {
      srcPath.unshift('..');
    }
  }

  if (mustEndAbs && srcPath[0] !== '' &&
      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {
    srcPath.unshift('');
  }

  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {
    srcPath.push('');
  }

  var isAbsolute = srcPath[0] === '' ||
      (srcPath[0] && srcPath[0].charAt(0) === '/');

  // put the host back
  if (psychotic) {
    result.hostname = result.host = isAbsolute ? '' :
                                    srcPath.length ? srcPath.shift() : '';
    //occationaly the auth can get stuck only in host
    //this especially happens in cases like
    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
    var authInHost = result.host && result.host.indexOf('@') > 0 ?
                     result.host.split('@') : false;
    if (authInHost) {
      result.auth = authInHost.shift();
      result.host = result.hostname = authInHost.shift();
    }
  }

  mustEndAbs = mustEndAbs || (result.host && srcPath.length);

  if (mustEndAbs && !isAbsolute) {
    srcPath.unshift('');
  }

  if (!srcPath.length) {
    result.pathname = null;
    result.path = null;
  } else {
    result.pathname = srcPath.join('/');
  }

  //to support request.http
  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
    result.path = (result.pathname ? result.pathname : '') +
                  (result.search ? result.search : '');
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  return result;
};

Url.prototype.parseHost = function() {
  var host = this.host;
  var port = portPattern.exec(host);
  if (port) {
    port = port[0];
    if (port !== ':') {
      this.port = port.substr(1);
    }
    host = host.substr(0, host.length - port.length);
  }
  if (host) this.hostname = host;
};


/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */
;(function(root) {

	/** Detect free variables */
	var freeExports = typeof exports == 'object' && exports &&
		!exports.nodeType && exports;
	var freeModule = typeof module == 'object' && module &&
		!module.nodeType && module;
	var freeGlobal = typeof global == 'object' && global;
	if (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

	/**
	 * The `punycode` object.
	 * @name punycode
	 * @type Object
	 */
	var punycode,

	/** Highest positive signed 32-bit float value */
	maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1

	/** Bootstring parameters */
	base = 36,
	tMin = 1,
	tMax = 26,
	skew = 38,
	damp = 700,
	initialBias = 72,
	initialN = 128, // 0x80
	delimiter = '-', // '\x2D'

	/** Regular expressions */
	regexPunycode = /^xn--/,
	regexNonASCII = /[^\x20-\x7E]/, // unprintable ASCII chars + non-ASCII chars
	regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, // RFC 3490 separators

	/** Error messages */
	errors = {
		'overflow': 'Overflow: input needs wider integers to process',
		'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
		'invalid-input': 'Invalid input'
	},

	/** Convenience shortcuts */
	baseMinusTMin = base - tMin,
	floor = Math.floor,
	stringFromCharCode = String.fromCharCode,

	/** Temporary variable */
	key;

	/*--------------------------------------------------------------------------*/

	/**
	 * A generic error utility function.
	 * @private
	 * @param {String} type The error type.
	 * @returns {Error} Throws a `RangeError` with the applicable error message.
	 */
	function error(type) {
		throw new RangeError(errors[type]);
	}

	/**
	 * A generic `Array#map` utility function.
	 * @private
	 * @param {Array} array The array to iterate over.
	 * @param {Function} callback The function that gets called for every array
	 * item.
	 * @returns {Array} A new array of values returned by the callback function.
	 */
	function map(array, fn) {
		var length = array.length;
		var result = [];
		while (length--) {
			result[length] = fn(array[length]);
		}
		return result;
	}

	/**
	 * A simple `Array#map`-like wrapper to work with domain name strings or email
	 * addresses.
	 * @private
	 * @param {String} domain The domain name or email address.
	 * @param {Function} callback The function that gets called for every
	 * character.
	 * @returns {Array} A new string of characters returned by the callback
	 * function.
	 */
	function mapDomain(string, fn) {
		var parts = string.split('@');
		var result = '';
		if (parts.length > 1) {
			// In email addresses, only the domain name should be punycoded. Leave
			// the local part (i.e. everything up to `@`) intact.
			result = parts[0] + '@';
			string = parts[1];
		}
		// Avoid `split(regex)` for IE8 compatibility. See #17.
		string = string.replace(regexSeparators, '\x2E');
		var labels = string.split('.');
		var encoded = map(labels, fn).join('.');
		return result + encoded;
	}

	/**
	 * Creates an array containing the numeric code points of each Unicode
	 * character in the string. While JavaScript uses UCS-2 internally,
	 * this function will convert a pair of surrogate halves (each of which
	 * UCS-2 exposes as separate characters) into a single code point,
	 * matching UTF-16.
	 * @see `punycode.ucs2.encode`
	 * @see <https://mathiasbynens.be/notes/javascript-encoding>
	 * @memberOf punycode.ucs2
	 * @name decode
	 * @param {String} string The Unicode input string (UCS-2).
	 * @returns {Array} The new array of code points.
	 */
	function ucs2decode(string) {
		var output = [],
		    counter = 0,
		    length = string.length,
		    value,
		    extra;
		while (counter < length) {
			value = string.charCodeAt(counter++);
			if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
				// high surrogate, and there is a next character
				extra = string.charCodeAt(counter++);
				if ((extra & 0xFC00) == 0xDC00) { // low surrogate
					output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
				} else {
					// unmatched surrogate; only append this code unit, in case the next
					// code unit is the high surrogate of a surrogate pair
					output.push(value);
					counter--;
				}
			} else {
				output.push(value);
			}
		}
		return output;
	}

	/**
	 * Creates a string based on an array of numeric code points.
	 * @see `punycode.ucs2.decode`
	 * @memberOf punycode.ucs2
	 * @name encode
	 * @param {Array} codePoints The array of numeric code points.
	 * @returns {String} The new Unicode string (UCS-2).
	 */
	function ucs2encode(array) {
		return map(array, function(value) {
			var output = '';
			if (value > 0xFFFF) {
				value -= 0x10000;
				output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);
				value = 0xDC00 | value & 0x3FF;
			}
			output += stringFromCharCode(value);
			return output;
		}).join('');
	}

	/**
	 * Converts a basic code point into a digit/integer.
	 * @see `digitToBasic()`
	 * @private
	 * @param {Number} codePoint The basic numeric code point value.
	 * @returns {Number} The numeric value of a basic code point (for use in
	 * representing integers) in the range `0` to `base - 1`, or `base` if
	 * the code point does not represent a value.
	 */
	function basicToDigit(codePoint) {
		if (codePoint - 48 < 10) {
			return codePoint - 22;
		}
		if (codePoint - 65 < 26) {
			return codePoint - 65;
		}
		if (codePoint - 97 < 26) {
			return codePoint - 97;
		}
		return base;
	}

	/**
	 * Converts a digit/integer into a basic code point.
	 * @see `basicToDigit()`
	 * @private
	 * @param {Number} digit The numeric value of a basic code point.
	 * @returns {Number} The basic code point whose value (when used for
	 * representing integers) is `digit`, which needs to be in the range
	 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
	 * used; else, the lowercase form is used. The behavior is undefined
	 * if `flag` is non-zero and `digit` has no uppercase form.
	 */
	function digitToBasic(digit, flag) {
		//  0..25 map to ASCII a..z or A..Z
		// 26..35 map to ASCII 0..9
		return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
	}

	/**
	 * Bias adaptation function as per section 3.4 of RFC 3492.
	 * https://tools.ietf.org/html/rfc3492#section-3.4
	 * @private
	 */
	function adapt(delta, numPoints, firstTime) {
		var k = 0;
		delta = firstTime ? floor(delta / damp) : delta >> 1;
		delta += floor(delta / numPoints);
		for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
	}

	/**
	 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
	 * symbols.
	 * @memberOf punycode
	 * @param {String} input The Punycode string of ASCII-only symbols.
	 * @returns {String} The resulting string of Unicode symbols.
	 */
	function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    /** Cached calculation results */
		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic < 0) {
			basic = 0;
		}

		for (j = 0; j < basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) >= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index >= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit >= base || digit > floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);

				if (digit < t) {
					break;
				}

				baseMinusT = base - t;
				if (w > floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) > maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}

	/**
	 * Converts a string of Unicode symbols (e.g. a domain name label) to a
	 * Punycode string of ASCII-only symbols.
	 * @memberOf punycode
	 * @param {String} input The string of Unicode symbols.
	 * @returns {String} The resulting Punycode string of ASCII-only symbols.
	 */
	function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    /** `inputLength` will hold the number of code points in `input`. */
		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j < inputLength; ++j) {
			currentValue = input[j];
			if (currentValue < 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount < inputLength) {

			// All non-basic code points < n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j < inputLength; ++j) {
				currentValue = input[j];
				if (currentValue >= n && currentValue < m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j < inputLength; ++j) {
				currentValue = input[j];

				if (currentValue < n && ++delta > maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
						if (q < t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}

	/**
	 * Converts a Punycode string representing a domain name or an email address
	 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
	 * it doesn't matter if you call it on a string that has already been
	 * converted to Unicode.
	 * @memberOf punycode
	 * @param {String} input The Punycoded domain name or email address to
	 * convert to Unicode.
	 * @returns {String} The Unicode representation of the given Punycode
	 * string.
	 */
	function toUnicode(input) {
		return mapDomain(input, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}

	/**
	 * Converts a Unicode string representing a domain name or an email address to
	 * Punycode. Only the non-ASCII parts of the domain name will be converted,
	 * i.e. it doesn't matter if you call it with a domain that's already in
	 * ASCII.
	 * @memberOf punycode
	 * @param {String} input The domain name or email address to convert, as a
	 * Unicode string.
	 * @returns {String} The Punycode representation of the given domain name or
	 * email address.
	 */
	function toASCII(input) {
		return mapDomain(input, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}

	/*--------------------------------------------------------------------------*/

	/** Define the public API */
	punycode = {
		/**
		 * A string representing the current Punycode.js version number.
		 * @memberOf punycode
		 * @type String
		 */
		'version': '1.4.1',
		/**
		 * An object of methods to convert from JavaScript's internal character
		 * representation (UCS-2) to Unicode code points, and back.
		 * @see <https://mathiasbynens.be/notes/javascript-encoding>
		 * @memberOf punycode
		 * @type Object
		 */
		'ucs2': {
			'decode': ucs2decode,
			'encode': ucs2encode
		},
		'decode': decode,
		'encode': encode,
		'toASCII': toASCII,
		'toUnicode': toUnicode
	};

	/** Expose `punycode` */
	// Some AMD build optimizers, like r.js, check for specific condition patterns
	// like the following:
	if (
		true
	) {
		!(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
			return punycode;
		}).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else if (freeExports && freeModule) {
		if (module.exports == freeExports) {
			// in Node.js, io.js, or RingoJS v0.8.0+
			freeModule.exports = punycode;
		} else {
			// in Narwhal or RingoJS v0.7.0-
			for (key in punycode) {
				punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);
			}
		}
	} else {
		// in Rhino or a web browser
		root.punycode = punycode;
	}

}(this));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(59)(module), __webpack_require__(33)))

/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = {
  isString: function(arg) {
    return typeof(arg) === 'string';
  },
  isObject: function(arg) {
    return typeof(arg) === 'object' && arg !== null;
  },
  isNull: function(arg) {
    return arg === null;
  },
  isNullOrUndefined: function(arg) {
    return arg == null;
  }
};


/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.decode = exports.parse = __webpack_require__(130);
exports.encode = exports.stringify = __webpack_require__(131);


/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



// If obj.hasOwnProperty has been overridden, then calling
// obj.hasOwnProperty(prop) will break.
// See: https://github.com/joyent/node/issues/1707
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

module.exports = function(qs, sep, eq, options) {
  sep = sep || '&';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options && typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys <= 0 means that we should not limit keys count
  if (maxKeys > 0 && len > maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i < len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};


/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var stringifyPrimitive = function(v) {
  switch (typeof v) {
    case 'string':
      return v;

    case 'boolean':
      return v ? 'true' : 'false';

    case 'number':
      return isFinite(v) ? v : '';

    default:
      return '';
  }
};

module.exports = function(obj, sep, eq, name) {
  sep = sep || '&';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return map(objectKeys(obj), function(k) {
      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
      if (isArray(obj[k])) {
        return map(obj[k], function(v) {
          return ks + encodeURIComponent(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return encodeURIComponent(stringifyPrimitive(name)) + eq +
         encodeURIComponent(stringifyPrimitive(obj));
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

function map (xs, f) {
  if (xs.map) return xs.map(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    res.push(f(xs[i], i));
  }
  return res;
}

var objectKeys = Object.keys || function (obj) {
  var res = [];
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  return res;
};


/***/ }),
/* 132 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ansiRegex = __webpack_require__(133)();

module.exports = function (str) {
	return typeof str === 'string' ? str.replace(ansiRegex, '') : str;
};


/***/ }),
/* 133 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function () {
	return /[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g;
};


/***/ }),
/* 134 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
* loglevel - https://github.com/pimterry/loglevel
*
* Copyright (c) 2013 Tim Perry
* Licensed under the MIT license.
*/
(function (root, definition) {
    "use strict";
    if (true) {
        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if (typeof module === 'object' && module.exports) {
        module.exports = definition();
    } else {
        root.log = definition();
    }
}(this, function () {
    "use strict";

    // Slightly dubious tricks to cut down minimized file size
    var noop = function() {};
    var undefinedType = "undefined";

    var logMethods = [
        "trace",
        "debug",
        "info",
        "warn",
        "error"
    ];

    // Cross-browser bind equivalent that works at least back to IE6
    function bindMethod(obj, methodName) {
        var method = obj[methodName];
        if (typeof method.bind === 'function') {
            return method.bind(obj);
        } else {
            try {
                return Function.prototype.bind.call(method, obj);
            } catch (e) {
                // Missing bind shim or IE8 + Modernizr, fallback to wrapping
                return function() {
                    return Function.prototype.apply.apply(method, [obj, arguments]);
                };
            }
        }
    }

    // Build the best logging method possible for this env
    // Wherever possible we want to bind, not wrap, to preserve stack traces
    function realMethod(methodName) {
        if (methodName === 'debug') {
            methodName = 'log';
        }

        if (typeof console === undefinedType) {
            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives
        } else if (console[methodName] !== undefined) {
            return bindMethod(console, methodName);
        } else if (console.log !== undefined) {
            return bindMethod(console, 'log');
        } else {
            return noop;
        }
    }

    // These private functions always need `this` to be set properly

    function replaceLoggingMethods(level, loggerName) {
        /*jshint validthis:true */
        for (var i = 0; i < logMethods.length; i++) {
            var methodName = logMethods[i];
            this[methodName] = (i < level) ?
                noop :
                this.methodFactory(methodName, level, loggerName);
        }

        // Define log.log as an alias for log.debug
        this.log = this.debug;
    }

    // In old IE versions, the console isn't present until you first open it.
    // We build realMethod() replacements here that regenerate logging methods
    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {
        return function () {
            if (typeof console !== undefinedType) {
                replaceLoggingMethods.call(this, level, loggerName);
                this[methodName].apply(this, arguments);
            }
        };
    }

    // By default, we use closely bound real methods wherever possible, and
    // otherwise we wait for a console to appear, and then try again.
    function defaultMethodFactory(methodName, level, loggerName) {
        /*jshint validthis:true */
        return realMethod(methodName) ||
               enableLoggingWhenConsoleArrives.apply(this, arguments);
    }

    function Logger(name, defaultLevel, factory) {
      var self = this;
      var currentLevel;
      var storageKey = "loglevel";
      if (name) {
        storageKey += ":" + name;
      }

      function persistLevelIfPossible(levelNum) {
          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();

          if (typeof window === undefinedType) return;

          // Use localStorage if available
          try {
              window.localStorage[storageKey] = levelName;
              return;
          } catch (ignore) {}

          // Use session cookie as fallback
          try {
              window.document.cookie =
                encodeURIComponent(storageKey) + "=" + levelName + ";";
          } catch (ignore) {}
      }

      function getPersistedLevel() {
          var storedLevel;

          if (typeof window === undefinedType) return;

          try {
              storedLevel = window.localStorage[storageKey];
          } catch (ignore) {}

          // Fallback to cookies if local storage gives us nothing
          if (typeof storedLevel === undefinedType) {
              try {
                  var cookie = window.document.cookie;
                  var location = cookie.indexOf(
                      encodeURIComponent(storageKey) + "=");
                  if (location !== -1) {
                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];
                  }
              } catch (ignore) {}
          }

          // If the stored level is not valid, treat it as if nothing was stored.
          if (self.levels[storedLevel] === undefined) {
              storedLevel = undefined;
          }

          return storedLevel;
      }

      /*
       *
       * Public logger API - see https://github.com/pimterry/loglevel for details
       *
       */

      self.name = name;

      self.levels = { "TRACE": 0, "DEBUG": 1, "INFO": 2, "WARN": 3,
          "ERROR": 4, "SILENT": 5};

      self.methodFactory = factory || defaultMethodFactory;

      self.getLevel = function () {
          return currentLevel;
      };

      self.setLevel = function (level, persist) {
          if (typeof level === "string" && self.levels[level.toUpperCase()] !== undefined) {
              level = self.levels[level.toUpperCase()];
          }
          if (typeof level === "number" && level >= 0 && level <= self.levels.SILENT) {
              currentLevel = level;
              if (persist !== false) {  // defaults to true
                  persistLevelIfPossible(level);
              }
              replaceLoggingMethods.call(self, level, name);
              if (typeof console === undefinedType && level < self.levels.SILENT) {
                  return "No console available for logging";
              }
          } else {
              throw "log.setLevel() called with invalid level: " + level;
          }
      };

      self.setDefaultLevel = function (level) {
          if (!getPersistedLevel()) {
              self.setLevel(level, false);
          }
      };

      self.enableAll = function(persist) {
          self.setLevel(self.levels.TRACE, persist);
      };

      self.disableAll = function(persist) {
          self.setLevel(self.levels.SILENT, persist);
      };

      // Initialize with the right level
      var initialLevel = getPersistedLevel();
      if (initialLevel == null) {
          initialLevel = defaultLevel == null ? "WARN" : defaultLevel;
      }
      self.setLevel(initialLevel, false);
    }

    /*
     *
     * Top-level API
     *
     */

    var defaultLogger = new Logger();

    var _loggersByName = {};
    defaultLogger.getLogger = function getLogger(name) {
        if (typeof name !== "string" || name === "") {
          throw new TypeError("You must supply a name when creating a logger.");
        }

        var logger = _loggersByName[name];
        if (!logger) {
          logger = _loggersByName[name] = new Logger(
            name, defaultLogger.getLevel(), defaultLogger.methodFactory);
        }
        return logger;
    };

    // Grab the current global log variable in case of overwrite
    var _log = (typeof window !== undefinedType) ? window.log : undefined;
    defaultLogger.noConflict = function() {
        if (typeof window !== undefinedType &&
               window.log === defaultLogger) {
            window.log = _log;
        }

        return defaultLogger;
    };

    defaultLogger.getLoggers = function getLoggers() {
        return _loggersByName;
    };

    return defaultLogger;
}));


/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var SockJS = __webpack_require__(136);

var retries = 0;
var sock = null;

var socket = function initSocket(url, handlers) {
  sock = new SockJS(url);

  sock.onopen = function onopen() {
    retries = 0;
  };

  sock.onclose = function onclose() {
    if (retries === 0) {
      handlers.close();
    }

    // Try to reconnect.
    sock = null;

    // After 10 retries stop trying, to prevent logspam.
    if (retries <= 10) {
      // Exponentially increase timeout to reconnect.
      // Respectfully copied from the package `got`.
      // eslint-disable-next-line no-mixed-operators, no-restricted-properties
      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;
      retries += 1;

      setTimeout(function () {
        socket(url, handlers);
      }, retryInMs);
    }
  };

  sock.onmessage = function onmessage(e) {
    // This assumes that all data sent via the websocket is JSON.
    var msg = JSON.parse(e.data);
    if (handlers[msg.type]) {
      handlers[msg.type](msg.data);
    }
  };
};

module.exports = socket;

/***/ }),
/* 136 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var require;var require;/* sockjs-client v1.1.4 | http://sockjs.org | MIT license */
(function(f){if(true){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.SockJS = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
'use strict';

var transportList = require('./transport-list');

module.exports = require('./main')(transportList);

// TODO can't get rid of this until all servers do
if ('_sockjs_onload' in global) {
  setTimeout(global._sockjs_onload, 1);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./main":14,"./transport-list":16}],2:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , Event = require('./event')
  ;

function CloseEvent() {
  Event.call(this);
  this.initEvent('close', false, false);
  this.wasClean = false;
  this.code = 0;
  this.reason = '';
}

inherits(CloseEvent, Event);

module.exports = CloseEvent;

},{"./event":4,"inherits":57}],3:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , EventTarget = require('./eventtarget')
  ;

function EventEmitter() {
  EventTarget.call(this);
}

inherits(EventEmitter, EventTarget);

EventEmitter.prototype.removeAllListeners = function(type) {
  if (type) {
    delete this._listeners[type];
  } else {
    this._listeners = {};
  }
};

EventEmitter.prototype.once = function(type, listener) {
  var self = this
    , fired = false;

  function g() {
    self.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  this.on(type, g);
};

EventEmitter.prototype.emit = function() {
  var type = arguments[0];
  var listeners = this._listeners[type];
  if (!listeners) {
    return;
  }
  // equivalent of Array.prototype.slice.call(arguments, 1);
  var l = arguments.length;
  var args = new Array(l - 1);
  for (var ai = 1; ai < l; ai++) {
    args[ai - 1] = arguments[ai];
  }
  for (var i = 0; i < listeners.length; i++) {
    listeners[i].apply(this, args);
  }
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;
EventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;

module.exports.EventEmitter = EventEmitter;

},{"./eventtarget":5,"inherits":57}],4:[function(require,module,exports){
'use strict';

function Event(eventType) {
  this.type = eventType;
}

Event.prototype.initEvent = function(eventType, canBubble, cancelable) {
  this.type = eventType;
  this.bubbles = canBubble;
  this.cancelable = cancelable;
  this.timeStamp = +new Date();
  return this;
};

Event.prototype.stopPropagation = function() {};
Event.prototype.preventDefault = function() {};

Event.CAPTURING_PHASE = 1;
Event.AT_TARGET = 2;
Event.BUBBLING_PHASE = 3;

module.exports = Event;

},{}],5:[function(require,module,exports){
'use strict';

/* Simplified implementation of DOM2 EventTarget.
 *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget
 */

function EventTarget() {
  this._listeners = {};
}

EventTarget.prototype.addEventListener = function(eventType, listener) {
  if (!(eventType in this._listeners)) {
    this._listeners[eventType] = [];
  }
  var arr = this._listeners[eventType];
  // #4
  if (arr.indexOf(listener) === -1) {
    // Make a copy so as not to interfere with a current dispatchEvent.
    arr = arr.concat([listener]);
  }
  this._listeners[eventType] = arr;
};

EventTarget.prototype.removeEventListener = function(eventType, listener) {
  var arr = this._listeners[eventType];
  if (!arr) {
    return;
  }
  var idx = arr.indexOf(listener);
  if (idx !== -1) {
    if (arr.length > 1) {
      // Make a copy so as not to interfere with a current dispatchEvent.
      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));
    } else {
      delete this._listeners[eventType];
    }
    return;
  }
};

EventTarget.prototype.dispatchEvent = function() {
  var event = arguments[0];
  var t = event.type;
  // equivalent of Array.prototype.slice.call(arguments, 0);
  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments);
  // TODO: This doesn't match the real behavior; per spec, onfoo get
  // their place in line from the /first/ time they're set from
  // non-null. Although WebKit bumps it to the end every time it's
  // set.
  if (this['on' + t]) {
    this['on' + t].apply(this, args);
  }
  if (t in this._listeners) {
    // Grab a reference to the listeners list. removeEventListener may alter the list.
    var listeners = this._listeners[t];
    for (var i = 0; i < listeners.length; i++) {
      listeners[i].apply(this, args);
    }
  }
};

module.exports = EventTarget;

},{}],6:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , Event = require('./event')
  ;

function TransportMessageEvent(data) {
  Event.call(this);
  this.initEvent('message', false, false);
  this.data = data;
}

inherits(TransportMessageEvent, Event);

module.exports = TransportMessageEvent;

},{"./event":4,"inherits":57}],7:[function(require,module,exports){
'use strict';

var JSON3 = require('json3')
  , iframeUtils = require('./utils/iframe')
  ;

function FacadeJS(transport) {
  this._transport = transport;
  transport.on('message', this._transportMessage.bind(this));
  transport.on('close', this._transportClose.bind(this));
}

FacadeJS.prototype._transportClose = function(code, reason) {
  iframeUtils.postMessage('c', JSON3.stringify([code, reason]));
};
FacadeJS.prototype._transportMessage = function(frame) {
  iframeUtils.postMessage('t', frame);
};
FacadeJS.prototype._send = function(data) {
  this._transport.send(data);
};
FacadeJS.prototype._close = function() {
  this._transport.close();
  this._transport.removeAllListeners();
};

module.exports = FacadeJS;

},{"./utils/iframe":47,"json3":58}],8:[function(require,module,exports){
(function (process){
'use strict';

var urlUtils = require('./utils/url')
  , eventUtils = require('./utils/event')
  , JSON3 = require('json3')
  , FacadeJS = require('./facade')
  , InfoIframeReceiver = require('./info-iframe-receiver')
  , iframeUtils = require('./utils/iframe')
  , loc = require('./location')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:iframe-bootstrap');
}

module.exports = function(SockJS, availableTransports) {
  var transportMap = {};
  availableTransports.forEach(function(at) {
    if (at.facadeTransport) {
      transportMap[at.facadeTransport.transportName] = at.facadeTransport;
    }
  });

  // hard-coded for the info iframe
  // TODO see if we can make this more dynamic
  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;
  var parentOrigin;

  /* eslint-disable camelcase */
  SockJS.bootstrap_iframe = function() {
    /* eslint-enable camelcase */
    var facade;
    iframeUtils.currentWindowId = loc.hash.slice(1);
    var onMessage = function(e) {
      if (e.source !== parent) {
        return;
      }
      if (typeof parentOrigin === 'undefined') {
        parentOrigin = e.origin;
      }
      if (e.origin !== parentOrigin) {
        return;
      }

      var iframeMessage;
      try {
        iframeMessage = JSON3.parse(e.data);
      } catch (ignored) {
        debug('bad json', e.data);
        return;
      }

      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {
        return;
      }
      switch (iframeMessage.type) {
      case 's':
        var p;
        try {
          p = JSON3.parse(iframeMessage.data);
        } catch (ignored) {
          debug('bad json', iframeMessage.data);
          break;
        }
        var version = p[0];
        var transport = p[1];
        var transUrl = p[2];
        var baseUrl = p[3];
        debug(version, transport, transUrl, baseUrl);
        // change this to semver logic
        if (version !== SockJS.version) {
          throw new Error('Incompatible SockJS! Main site uses:' +
                    ' "' + version + '", the iframe:' +
                    ' "' + SockJS.version + '".');
        }

        if (!urlUtils.isOriginEqual(transUrl, loc.href) ||
            !urlUtils.isOriginEqual(baseUrl, loc.href)) {
          throw new Error('Can\'t connect to different domain from within an ' +
                    'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');
        }
        facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));
        break;
      case 'm':
        facade._send(iframeMessage.data);
        break;
      case 'c':
        if (facade) {
          facade._close();
        }
        facade = null;
        break;
      }
    };

    eventUtils.attachEvent('message', onMessage);

    // Start
    iframeUtils.postMessage('s');
  };
};

}).call(this,{ env: {} })

},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,"debug":55,"json3":58}],9:[function(require,module,exports){
(function (process){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , objectUtils = require('./utils/object')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-ajax');
}

function InfoAjax(url, AjaxObject) {
  EventEmitter.call(this);

  var self = this;
  var t0 = +new Date();
  this.xo = new AjaxObject('GET', url);

  this.xo.once('finish', function(status, text) {
    var info, rtt;
    if (status === 200) {
      rtt = (+new Date()) - t0;
      if (text) {
        try {
          info = JSON3.parse(text);
        } catch (e) {
          debug('bad json', text);
        }
      }

      if (!objectUtils.isObject(info)) {
        info = {};
      }
    }
    self.emit('finish', info, rtt);
    self.removeAllListeners();
  });
}

inherits(InfoAjax, EventEmitter);

InfoAjax.prototype.close = function() {
  this.removeAllListeners();
  this.xo.close();
};

module.exports = InfoAjax;

}).call(this,{ env: {} })

},{"./utils/object":49,"debug":55,"events":3,"inherits":57,"json3":58}],10:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , JSON3 = require('json3')
  , XHRLocalObject = require('./transport/sender/xhr-local')
  , InfoAjax = require('./info-ajax')
  ;

function InfoReceiverIframe(transUrl) {
  var self = this;
  EventEmitter.call(this);

  this.ir = new InfoAjax(transUrl, XHRLocalObject);
  this.ir.once('finish', function(info, rtt) {
    self.ir = null;
    self.emit('message', JSON3.stringify([info, rtt]));
  });
}

inherits(InfoReceiverIframe, EventEmitter);

InfoReceiverIframe.transportName = 'iframe-info-receiver';

InfoReceiverIframe.prototype.close = function() {
  if (this.ir) {
    this.ir.close();
    this.ir = null;
  }
  this.removeAllListeners();
};

module.exports = InfoReceiverIframe;

},{"./info-ajax":9,"./transport/sender/xhr-local":37,"events":3,"inherits":57,"json3":58}],11:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , utils = require('./utils/event')
  , IframeTransport = require('./transport/iframe')
  , InfoReceiverIframe = require('./info-iframe-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-iframe');
}

function InfoIframe(baseUrl, url) {
  var self = this;
  EventEmitter.call(this);

  var go = function() {
    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);

    ifr.once('message', function(msg) {
      if (msg) {
        var d;
        try {
          d = JSON3.parse(msg);
        } catch (e) {
          debug('bad json', msg);
          self.emit('finish');
          self.close();
          return;
        }

        var info = d[0], rtt = d[1];
        self.emit('finish', info, rtt);
      }
      self.close();
    });

    ifr.once('close', function() {
      self.emit('finish');
      self.close();
    });
  };

  // TODO this seems the same as the 'needBody' from transports
  if (!global.document.body) {
    utils.attachEvent('load', go);
  } else {
    go();
  }
}

inherits(InfoIframe, EventEmitter);

InfoIframe.enabled = function() {
  return IframeTransport.enabled();
};

InfoIframe.prototype.close = function() {
  if (this.ifr) {
    this.ifr.close();
  }
  this.removeAllListeners();
  this.ifr = null;
};

module.exports = InfoIframe;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,"debug":55,"events":3,"inherits":57,"json3":58}],12:[function(require,module,exports){
(function (process){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , urlUtils = require('./utils/url')
  , XDR = require('./transport/sender/xdr')
  , XHRCors = require('./transport/sender/xhr-cors')
  , XHRLocal = require('./transport/sender/xhr-local')
  , XHRFake = require('./transport/sender/xhr-fake')
  , InfoIframe = require('./info-iframe')
  , InfoAjax = require('./info-ajax')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:info-receiver');
}

function InfoReceiver(baseUrl, urlInfo) {
  debug(baseUrl);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function() {
    self.doXhr(baseUrl, urlInfo);
  }, 0);
}

inherits(InfoReceiver, EventEmitter);

// TODO this is currently ignoring the list of available transports and the whitelist

InfoReceiver._getReceiver = function(baseUrl, url, urlInfo) {
  // determine method of CORS support (if needed)
  if (urlInfo.sameOrigin) {
    return new InfoAjax(url, XHRLocal);
  }
  if (XHRCors.enabled) {
    return new InfoAjax(url, XHRCors);
  }
  if (XDR.enabled && urlInfo.sameScheme) {
    return new InfoAjax(url, XDR);
  }
  if (InfoIframe.enabled()) {
    return new InfoIframe(baseUrl, url);
  }
  return new InfoAjax(url, XHRFake);
};

InfoReceiver.prototype.doXhr = function(baseUrl, urlInfo) {
  var self = this
    , url = urlUtils.addPath(baseUrl, '/info')
    ;
  debug('doXhr', url);

  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);

  this.timeoutRef = setTimeout(function() {
    debug('timeout');
    self._cleanup(false);
    self.emit('finish');
  }, InfoReceiver.timeout);

  this.xo.once('finish', function(info, rtt) {
    debug('finish', info, rtt);
    self._cleanup(true);
    self.emit('finish', info, rtt);
  });
};

InfoReceiver.prototype._cleanup = function(wasClean) {
  debug('_cleanup');
  clearTimeout(this.timeoutRef);
  this.timeoutRef = null;
  if (!wasClean && this.xo) {
    this.xo.close();
  }
  this.xo = null;
};

InfoReceiver.prototype.close = function() {
  debug('close');
  this.removeAllListeners();
  this._cleanup(false);
};

InfoReceiver.timeout = 8000;

module.exports = InfoReceiver;

}).call(this,{ env: {} })

},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,"debug":55,"events":3,"inherits":57}],13:[function(require,module,exports){
(function (global){
'use strict';

module.exports = global.location || {
  origin: 'http://localhost:80'
, protocol: 'http'
, host: 'localhost'
, port: 80
, href: 'http://localhost/'
, hash: ''
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],14:[function(require,module,exports){
(function (process,global){
'use strict';

require('./shims');

var URL = require('url-parse')
  , inherits = require('inherits')
  , JSON3 = require('json3')
  , random = require('./utils/random')
  , escape = require('./utils/escape')
  , urlUtils = require('./utils/url')
  , eventUtils = require('./utils/event')
  , transport = require('./utils/transport')
  , objectUtils = require('./utils/object')
  , browser = require('./utils/browser')
  , log = require('./utils/log')
  , Event = require('./event/event')
  , EventTarget = require('./event/eventtarget')
  , loc = require('./location')
  , CloseEvent = require('./event/close')
  , TransportMessageEvent = require('./event/trans-message')
  , InfoReceiver = require('./info-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:main');
}

var transports;

// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface
function SockJS(url, protocols, options) {
  if (!(this instanceof SockJS)) {
    return new SockJS(url, protocols, options);
  }
  if (arguments.length < 1) {
    throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");
  }
  EventTarget.call(this);

  this.readyState = SockJS.CONNECTING;
  this.extensions = '';
  this.protocol = '';

  // non-standard extension
  options = options || {};
  if (options.protocols_whitelist) {
    log.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead.");
  }
  this._transportsWhitelist = options.transports;
  this._transportOptions = options.transportOptions || {};

  var sessionId = options.sessionId || 8;
  if (typeof sessionId === 'function') {
    this._generateSessionId = sessionId;
  } else if (typeof sessionId === 'number') {
    this._generateSessionId = function() {
      return random.string(sessionId);
    };
  } else {
    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');
  }

  this._server = options.server || random.numberString(1000);

  // Step 1 of WS spec - parse and validate the url. Issue #8
  var parsedUrl = new URL(url);
  if (!parsedUrl.host || !parsedUrl.protocol) {
    throw new SyntaxError("The URL '" + url + "' is invalid");
  } else if (parsedUrl.hash) {
    throw new SyntaxError('The URL must not contain a fragment');
  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {
    throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '" + parsedUrl.protocol + "' is not allowed.");
  }

  var secure = parsedUrl.protocol === 'https:';
  // Step 2 - don't allow secure origin with an insecure protocol
  if (loc.protocol === 'https' && !secure) {
    throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');
  }

  // Step 3 - check port access - no need here
  // Step 4 - parse protocols argument
  if (!protocols) {
    protocols = [];
  } else if (!Array.isArray(protocols)) {
    protocols = [protocols];
  }

  // Step 5 - check protocols argument
  var sortedProtocols = protocols.sort();
  sortedProtocols.forEach(function(proto, i) {
    if (!proto) {
      throw new SyntaxError("The protocols entry '" + proto + "' is invalid.");
    }
    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {
      throw new SyntaxError("The protocols entry '" + proto + "' is duplicated.");
    }
  });

  // Step 6 - convert origin
  var o = urlUtils.getOrigin(loc.href);
  this._origin = o ? o.toLowerCase() : null;

  // remove the trailing slash
  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\/+$/, ''));

  // store the sanitized url
  this.url = parsedUrl.href;
  debug('using url', this.url);

  // Step 7 - start connection in background
  // obtain server info
  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26
  this._urlInfo = {
    nullOrigin: !browser.hasDomain()
  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)
  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)
  };

  this._ir = new InfoReceiver(this.url, this._urlInfo);
  this._ir.once('finish', this._receiveInfo.bind(this));
}

inherits(SockJS, EventTarget);

function userSetCode(code) {
  return code === 1000 || (code >= 3000 && code <= 4999);
}

SockJS.prototype.close = function(code, reason) {
  // Step 1
  if (code && !userSetCode(code)) {
    throw new Error('InvalidAccessError: Invalid code');
  }
  // Step 2.4 states the max is 123 bytes, but we are just checking length
  if (reason && reason.length > 123) {
    throw new SyntaxError('reason argument has an invalid length');
  }

  // Step 3.1
  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {
    return;
  }

  // TODO look at docs to determine how to set this
  var wasClean = true;
  this._close(code || 1000, reason || 'Normal closure', wasClean);
};

SockJS.prototype.send = function(data) {
  // #13 - convert anything non-string to string
  // TODO this currently turns objects into [object Object]
  if (typeof data !== 'string') {
    data = '' + data;
  }
  if (this.readyState === SockJS.CONNECTING) {
    throw new Error('InvalidStateError: The connection has not been established yet');
  }
  if (this.readyState !== SockJS.OPEN) {
    return;
  }
  this._transport.send(escape.quote(data));
};

SockJS.version = require('./version');

SockJS.CONNECTING = 0;
SockJS.OPEN = 1;
SockJS.CLOSING = 2;
SockJS.CLOSED = 3;

SockJS.prototype._receiveInfo = function(info, rtt) {
  debug('_receiveInfo', rtt);
  this._ir = null;
  if (!info) {
    this._close(1002, 'Cannot connect to server');
    return;
  }

  // establish a round-trip timeout (RTO) based on the
  // round-trip time (RTT)
  this._rto = this.countRTO(rtt);
  // allow server to override url used for the actual transport
  this._transUrl = info.base_url ? info.base_url : this.url;
  info = objectUtils.extend(info, this._urlInfo);
  debug('info', info);
  // determine list of desired and supported transports
  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);
  this._transports = enabledTransports.main;
  debug(this._transports.length + ' enabled transports');

  this._connect();
};

SockJS.prototype._connect = function() {
  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {
    debug('attempt', Transport.transportName);
    if (Transport.needBody) {
      if (!global.document.body ||
          (typeof global.document.readyState !== 'undefined' &&
            global.document.readyState !== 'complete' &&
            global.document.readyState !== 'interactive')) {
        debug('waiting for body');
        this._transports.unshift(Transport);
        eventUtils.attachEvent('load', this._connect.bind(this));
        return;
      }
    }

    // calculate timeout based on RTO and round trips. Default to 5s
    var timeoutMs = (this._rto * Transport.roundTrips) || 5000;
    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);
    debug('using timeout', timeoutMs);

    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());
    var options = this._transportOptions[Transport.transportName];
    debug('transport url', transportUrl);
    var transportObj = new Transport(transportUrl, this._transUrl, options);
    transportObj.on('message', this._transportMessage.bind(this));
    transportObj.once('close', this._transportClose.bind(this));
    transportObj.transportName = Transport.transportName;
    this._transport = transportObj;

    return;
  }
  this._close(2000, 'All transports failed', false);
};

SockJS.prototype._transportTimeout = function() {
  debug('_transportTimeout');
  if (this.readyState === SockJS.CONNECTING) {
    this._transportClose(2007, 'Transport timed out');
  }
};

SockJS.prototype._transportMessage = function(msg) {
  debug('_transportMessage', msg);
  var self = this
    , type = msg.slice(0, 1)
    , content = msg.slice(1)
    , payload
    ;

  // first check for messages that don't need a payload
  switch (type) {
    case 'o':
      this._open();
      return;
    case 'h':
      this.dispatchEvent(new Event('heartbeat'));
      debug('heartbeat', this.transport);
      return;
  }

  if (content) {
    try {
      payload = JSON3.parse(content);
    } catch (e) {
      debug('bad json', content);
    }
  }

  if (typeof payload === 'undefined') {
    debug('empty payload', content);
    return;
  }

  switch (type) {
    case 'a':
      if (Array.isArray(payload)) {
        payload.forEach(function(p) {
          debug('message', self.transport, p);
          self.dispatchEvent(new TransportMessageEvent(p));
        });
      }
      break;
    case 'm':
      debug('message', this.transport, payload);
      this.dispatchEvent(new TransportMessageEvent(payload));
      break;
    case 'c':
      if (Array.isArray(payload) && payload.length === 2) {
        this._close(payload[0], payload[1], true);
      }
      break;
  }
};

SockJS.prototype._transportClose = function(code, reason) {
  debug('_transportClose', this.transport, code, reason);
  if (this._transport) {
    this._transport.removeAllListeners();
    this._transport = null;
    this.transport = null;
  }

  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {
    this._connect();
    return;
  }

  this._close(code, reason);
};

SockJS.prototype._open = function() {
  debug('_open', this._transport.transportName, this.readyState);
  if (this.readyState === SockJS.CONNECTING) {
    if (this._transportTimeoutId) {
      clearTimeout(this._transportTimeoutId);
      this._transportTimeoutId = null;
    }
    this.readyState = SockJS.OPEN;
    this.transport = this._transport.transportName;
    this.dispatchEvent(new Event('open'));
    debug('connected', this.transport);
  } else {
    // The server might have been restarted, and lost track of our
    // connection.
    this._close(1006, 'Server lost session');
  }
};

SockJS.prototype._close = function(code, reason, wasClean) {
  debug('_close', this.transport, code, reason, wasClean, this.readyState);
  var forceFail = false;

  if (this._ir) {
    forceFail = true;
    this._ir.close();
    this._ir = null;
  }
  if (this._transport) {
    this._transport.close();
    this._transport = null;
    this.transport = null;
  }

  if (this.readyState === SockJS.CLOSED) {
    throw new Error('InvalidStateError: SockJS has already been closed');
  }

  this.readyState = SockJS.CLOSING;
  setTimeout(function() {
    this.readyState = SockJS.CLOSED;

    if (forceFail) {
      this.dispatchEvent(new Event('error'));
    }

    var e = new CloseEvent('close');
    e.wasClean = wasClean || false;
    e.code = code || 1000;
    e.reason = reason;

    this.dispatchEvent(e);
    this.onmessage = this.onclose = this.onerror = null;
    debug('disconnected');
  }.bind(this), 0);
};

// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/
// and RFC 2988.
SockJS.prototype.countRTO = function(rtt) {
  // In a local environment, when using IE8/9 and the `jsonp-polling`
  // transport the time needed to establish a connection (the time that pass
  // from the opening of the transport to the call of `_dispatchOpen`) is
  // around 200msec (the lower bound used in the article above) and this
  // causes spurious timeouts. For this reason we calculate a value slightly
  // larger than that used in the article.
  if (rtt > 100) {
    return 4 * rtt; // rto > 400msec
  }
  return 300 + rtt; // 300msec < rto <= 400msec
};

module.exports = function(availableTransports) {
  transports = transport(availableTransports);
  require('./iframe-bootstrap')(SockJS, availableTransports);
  return SockJS;
};

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,"debug":55,"inherits":57,"json3":58,"url-parse":61}],15:[function(require,module,exports){
/* eslint-disable */
/* jscs: disable */
'use strict';

// pulled specific shims from https://github.com/es-shims/es5-shim

var ArrayPrototype = Array.prototype;
var ObjectPrototype = Object.prototype;
var FunctionPrototype = Function.prototype;
var StringPrototype = String.prototype;
var array_slice = ArrayPrototype.slice;

var _toString = ObjectPrototype.toString;
var isFunction = function (val) {
    return ObjectPrototype.toString.call(val) === '[object Function]';
};
var isArray = function isArray(obj) {
    return _toString.call(obj) === '[object Array]';
};
var isString = function isString(obj) {
    return _toString.call(obj) === '[object String]';
};

var supportsDescriptors = Object.defineProperty && (function () {
    try {
        Object.defineProperty({}, 'x', {});
        return true;
    } catch (e) { /* this is ES3 */
        return false;
    }
}());

// Define configurable, writable and non-enumerable props
// if they don't exist.
var defineProperty;
if (supportsDescriptors) {
    defineProperty = function (object, name, method, forceAssign) {
        if (!forceAssign && (name in object)) { return; }
        Object.defineProperty(object, name, {
            configurable: true,
            enumerable: false,
            writable: true,
            value: method
        });
    };
} else {
    defineProperty = function (object, name, method, forceAssign) {
        if (!forceAssign && (name in object)) { return; }
        object[name] = method;
    };
}
var defineProperties = function (object, map, forceAssign) {
    for (var name in map) {
        if (ObjectPrototype.hasOwnProperty.call(map, name)) {
          defineProperty(object, name, map[name], forceAssign);
        }
    }
};

var toObject = function (o) {
    if (o == null) { // this matches both null and undefined
        throw new TypeError("can't convert " + o + ' to object');
    }
    return Object(o);
};

//
// Util
// ======
//

// ES5 9.4
// http://es5.github.com/#x9.4
// http://jsperf.com/to-integer

function toInteger(num) {
    var n = +num;
    if (n !== n) { // isNaN
        n = 0;
    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {
        n = (n > 0 || -1) * Math.floor(Math.abs(n));
    }
    return n;
}

function ToUint32(x) {
    return x >>> 0;
}

//
// Function
// ========
//

// ES-5 15.3.4.5
// http://es5.github.com/#x15.3.4.5

function Empty() {}

defineProperties(FunctionPrototype, {
    bind: function bind(that) { // .length is 1
        // 1. Let Target be the this value.
        var target = this;
        // 2. If IsCallable(Target) is false, throw a TypeError exception.
        if (!isFunction(target)) {
            throw new TypeError('Function.prototype.bind called on incompatible ' + target);
        }
        // 3. Let A be a new (possibly empty) internal list of all of the
        //   argument values provided after thisArg (arg1, arg2 etc), in order.
        // XXX slicedArgs will stand in for "A" if used
        var args = array_slice.call(arguments, 1); // for normal call
        // 4. Let F be a new native ECMAScript object.
        // 11. Set the [[Prototype]] internal property of F to the standard
        //   built-in Function prototype object as specified in 15.3.3.1.
        // 12. Set the [[Call]] internal property of F as described in
        //   15.3.4.5.1.
        // 13. Set the [[Construct]] internal property of F as described in
        //   15.3.4.5.2.
        // 14. Set the [[HasInstance]] internal property of F as described in
        //   15.3.4.5.3.
        var binder = function () {

            if (this instanceof bound) {
                // 15.3.4.5.2 [[Construct]]
                // When the [[Construct]] internal method of a function object,
                // F that was created using the bind function is called with a
                // list of arguments ExtraArgs, the following steps are taken:
                // 1. Let target be the value of F's [[TargetFunction]]
                //   internal property.
                // 2. If target has no [[Construct]] internal method, a
                //   TypeError exception is thrown.
                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Construct]] internal
                //   method of target providing args as the arguments.

                var result = target.apply(
                    this,
                    args.concat(array_slice.call(arguments))
                );
                if (Object(result) === result) {
                    return result;
                }
                return this;

            } else {
                // 15.3.4.5.1 [[Call]]
                // When the [[Call]] internal method of a function object, F,
                // which was created using the bind function is called with a
                // this value and a list of arguments ExtraArgs, the following
                // steps are taken:
                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal
                //   property.
                // 2. Let boundThis be the value of F's [[BoundThis]] internal
                //   property.
                // 3. Let target be the value of F's [[TargetFunction]] internal
                //   property.
                // 4. Let args be a new list containing the same values as the
                //   list boundArgs in the same order followed by the same
                //   values as the list ExtraArgs in the same order.
                // 5. Return the result of calling the [[Call]] internal method
                //   of target providing boundThis as the this value and
                //   providing args as the arguments.

                // equiv: target.call(this, ...boundArgs, ...args)
                return target.apply(
                    that,
                    args.concat(array_slice.call(arguments))
                );

            }

        };

        // 15. If the [[Class]] internal property of Target is "Function", then
        //     a. Let L be the length property of Target minus the length of A.
        //     b. Set the length own property of F to either 0 or L, whichever is
        //       larger.
        // 16. Else set the length own property of F to 0.

        var boundLength = Math.max(0, target.length - args.length);

        // 17. Set the attributes of the length own property of F to the values
        //   specified in 15.3.5.1.
        var boundArgs = [];
        for (var i = 0; i < boundLength; i++) {
            boundArgs.push('$' + i);
        }

        // XXX Build a dynamic function with desired amount of arguments is the only
        // way to set the length property of a function.
        // In environments where Content Security Policies enabled (Chrome extensions,
        // for ex.) all use of eval or Function costructor throws an exception.
        // However in all of these environments Function.prototype.bind exists
        // and so this code will never be executed.
        var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);

        if (target.prototype) {
            Empty.prototype = target.prototype;
            bound.prototype = new Empty();
            // Clean up dangling references.
            Empty.prototype = null;
        }

        // TODO
        // 18. Set the [[Extensible]] internal property of F to true.

        // TODO
        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).
        // 20. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "caller", PropertyDescriptor {[[Get]]: thrower, [[Set]]:
        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and
        //   false.
        // 21. Call the [[DefineOwnProperty]] internal method of F with
        //   arguments "arguments", PropertyDescriptor {[[Get]]: thrower,
        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},
        //   and false.

        // TODO
        // NOTE Function objects created using Function.prototype.bind do not
        // have a prototype property or the [[Code]], [[FormalParameters]], and
        // [[Scope]] internal properties.
        // XXX can't delete prototype in pure-js.

        // 22. Return F.
        return bound;
    }
});

//
// Array
// =====
//

// ES5 15.4.3.2
// http://es5.github.com/#x15.4.3.2
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray
defineProperties(Array, { isArray: isArray });


var boxedString = Object('a');
var splitString = boxedString[0] !== 'a' || !(0 in boxedString);

var properlyBoxesContext = function properlyBoxed(method) {
    // Check node 0.6.21 bug where third parameter is not boxed
    var properlyBoxesNonStrict = true;
    var properlyBoxesStrict = true;
    if (method) {
        method.call('foo', function (_, __, context) {
            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }
        });

        method.call([1], function () {
            'use strict';
            properlyBoxesStrict = typeof this === 'string';
        }, 'x');
    }
    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;
};

defineProperties(ArrayPrototype, {
    forEach: function forEach(fun /*, thisp*/) {
        var object = toObject(this),
            self = splitString && isString(this) ? this.split('') : object,
            thisp = arguments[1],
            i = -1,
            length = self.length >>> 0;

        // If no callback function or if callback is not a callable function
        if (!isFunction(fun)) {
            throw new TypeError(); // TODO message
        }

        while (++i < length) {
            if (i in self) {
                // Invoke the callback function with call, passing arguments:
                // context, property value, property key, thisArg object
                // context
                fun.call(thisp, self[i], i, object);
            }
        }
    }
}, !properlyBoxesContext(ArrayPrototype.forEach));

// ES5 15.4.4.14
// http://es5.github.com/#x15.4.4.14
// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf
var hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;
defineProperties(ArrayPrototype, {
    indexOf: function indexOf(sought /*, fromIndex */ ) {
        var self = splitString && isString(this) ? this.split('') : toObject(this),
            length = self.length >>> 0;

        if (!length) {
            return -1;
        }

        var i = 0;
        if (arguments.length > 1) {
            i = toInteger(arguments[1]);
        }

        // handle negative indices
        i = i >= 0 ? i : Math.max(0, length + i);
        for (; i < length; i++) {
            if (i in self && self[i] === sought) {
                return i;
            }
        }
        return -1;
    }
}, hasFirefox2IndexOfBug);

//
// String
// ======
//

// ES5 15.5.4.14
// http://es5.github.com/#x15.5.4.14

// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]
// Many browsers do not split properly with regular expressions or they
// do not perform the split correctly under obscure conditions.
// See http://blog.stevenlevithan.com/archives/cross-browser-split
// I've tested in many browsers and this seems to cover the deviant ones:
//    'ab'.split(/(?:ab)*/) should be ["", ""], not [""]
//    '.'.split(/(.?)(.?)/) should be ["", ".", "", ""], not ["", ""]
//    'tesst'.split(/(s)*/) should be ["t", undefined, "e", "s", "t"], not
//       [undefined, "t", undefined, "e", ...]
//    ''.split(/.?/) should be [], not [""]
//    '.'.split(/()()/) should be ["."], not ["", "", "."]

var string_split = StringPrototype.split;
if (
    'ab'.split(/(?:ab)*/).length !== 2 ||
    '.'.split(/(.?)(.?)/).length !== 4 ||
    'tesst'.split(/(s)*/)[1] === 't' ||
    'test'.split(/(?:)/, -1).length !== 4 ||
    ''.split(/.?/).length ||
    '.'.split(/()()/).length > 1
) {
    (function () {
        var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group

        StringPrototype.split = function (separator, limit) {
            var string = this;
            if (separator === void 0 && limit === 0) {
                return [];
            }

            // If `separator` is not a regex, use native split
            if (_toString.call(separator) !== '[object RegExp]') {
                return string_split.call(this, separator, limit);
            }

            var output = [],
                flags = (separator.ignoreCase ? 'i' : '') +
                        (separator.multiline  ? 'm' : '') +
                        (separator.extended   ? 'x' : '') + // Proposed for ES6
                        (separator.sticky     ? 'y' : ''), // Firefox 3+
                lastLastIndex = 0,
                // Make `global` and avoid `lastIndex` issues by working with a copy
                separator2, match, lastIndex, lastLength;
            separator = new RegExp(separator.source, flags + 'g');
            string += ''; // Type-convert
            if (!compliantExecNpcg) {
                // Doesn't need flags gy, but they don't hurt
                separator2 = new RegExp('^' + separator.source + '$(?!\\s)', flags);
            }
            /* Values for `limit`, per the spec:
             * If undefined: 4294967295 // Math.pow(2, 32) - 1
             * If 0, Infinity, or NaN: 0
             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;
             * If negative number: 4294967296 - Math.floor(Math.abs(limit))
             * If other: Type-convert, then use the above rules
             */
            limit = limit === void 0 ?
                -1 >>> 0 : // Math.pow(2, 32) - 1
                ToUint32(limit);
            while (match = separator.exec(string)) {
                // `separator.lastIndex` is not reliable cross-browser
                lastIndex = match.index + match[0].length;
                if (lastIndex > lastLastIndex) {
                    output.push(string.slice(lastLastIndex, match.index));
                    // Fix browsers whose `exec` methods don't consistently return `undefined` for
                    // nonparticipating capturing groups
                    if (!compliantExecNpcg && match.length > 1) {
                        match[0].replace(separator2, function () {
                            for (var i = 1; i < arguments.length - 2; i++) {
                                if (arguments[i] === void 0) {
                                    match[i] = void 0;
                                }
                            }
                        });
                    }
                    if (match.length > 1 && match.index < string.length) {
                        ArrayPrototype.push.apply(output, match.slice(1));
                    }
                    lastLength = match[0].length;
                    lastLastIndex = lastIndex;
                    if (output.length >= limit) {
                        break;
                    }
                }
                if (separator.lastIndex === match.index) {
                    separator.lastIndex++; // Avoid an infinite loop
                }
            }
            if (lastLastIndex === string.length) {
                if (lastLength || !separator.test('')) {
                    output.push('');
                }
            } else {
                output.push(string.slice(lastLastIndex));
            }
            return output.length > limit ? output.slice(0, limit) : output;
        };
    }());

// [bugfix, chrome]
// If separator is undefined, then the result array contains just one String,
// which is the this value (converted to a String). If limit is not undefined,
// then the output array is truncated so that it contains no more than limit
// elements.
// "0".split(undefined, 0) -> []
} else if ('0'.split(void 0, 0).length) {
    StringPrototype.split = function split(separator, limit) {
        if (separator === void 0 && limit === 0) { return []; }
        return string_split.call(this, separator, limit);
    };
}

// ECMA-262, 3rd B.2.3
// Not an ECMAScript standard, although ECMAScript 3rd Edition has a
// non-normative section suggesting uniform semantics and it should be
// normalized across all browsers
// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE
var string_substr = StringPrototype.substr;
var hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';
defineProperties(StringPrototype, {
    substr: function substr(start, length) {
        return string_substr.call(
            this,
            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,
            length
        );
    }
}, hasNegativeSubstrBug);

},{}],16:[function(require,module,exports){
'use strict';

module.exports = [
  // streaming transports
  require('./transport/websocket')
, require('./transport/xhr-streaming')
, require('./transport/xdr-streaming')
, require('./transport/eventsource')
, require('./transport/lib/iframe-wrap')(require('./transport/eventsource'))

  // polling transports
, require('./transport/htmlfile')
, require('./transport/lib/iframe-wrap')(require('./transport/htmlfile'))
, require('./transport/xhr-polling')
, require('./transport/xdr-polling')
, require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling'))
, require('./transport/jsonp-polling')
];

},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , utils = require('../../utils/event')
  , urlUtils = require('../../utils/url')
  , XHR = global.XMLHttpRequest
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:browser:xhr');
}

function AbstractXHRObject(method, url, payload, opts) {
  debug(method, url);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function () {
    self._start(method, url, payload, opts);
  }, 0);
}

inherits(AbstractXHRObject, EventEmitter);

AbstractXHRObject.prototype._start = function(method, url, payload, opts) {
  var self = this;

  try {
    this.xhr = new XHR();
  } catch (x) {
    // intentionally empty
  }

  if (!this.xhr) {
    debug('no xhr');
    this.emit('finish', 0, 'no xhr support');
    this._cleanup();
    return;
  }

  // several browsers cache POSTs
  url = urlUtils.addQuery(url, 't=' + (+new Date()));

  // Explorer tends to keep connection open, even after the
  // tab gets closed: http://bugs.jquery.com/ticket/5280
  this.unloadRef = utils.unloadAdd(function() {
    debug('unload cleanup');
    self._cleanup(true);
  });
  try {
    this.xhr.open(method, url, true);
    if (this.timeout && 'timeout' in this.xhr) {
      this.xhr.timeout = this.timeout;
      this.xhr.ontimeout = function() {
        debug('xhr timeout');
        self.emit('finish', 0, '');
        self._cleanup(false);
      };
    }
  } catch (e) {
    debug('exception', e);
    // IE raises an exception on wrong port.
    this.emit('finish', 0, '');
    this._cleanup(false);
    return;
  }

  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {
    debug('withCredentials');
    // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :
    // "This never affects same-site requests."

    this.xhr.withCredentials = 'true';
  }
  if (opts && opts.headers) {
    for (var key in opts.headers) {
      this.xhr.setRequestHeader(key, opts.headers[key]);
    }
  }

  this.xhr.onreadystatechange = function() {
    if (self.xhr) {
      var x = self.xhr;
      var text, status;
      debug('readyState', x.readyState);
      switch (x.readyState) {
      case 3:
        // IE doesn't like peeking into responseText or status
        // on Microsoft.XMLHTTP and readystate=3
        try {
          status = x.status;
          text = x.responseText;
        } catch (e) {
          // intentionally empty
        }
        debug('status', status);
        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450
        if (status === 1223) {
          status = 204;
        }

        // IE does return readystate == 3 for 404 answers.
        if (status === 200 && text && text.length > 0) {
          debug('chunk');
          self.emit('chunk', status, text);
        }
        break;
      case 4:
        status = x.status;
        debug('status', status);
        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450
        if (status === 1223) {
          status = 204;
        }
        // IE returns this for a bad port
        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx
        if (status === 12005 || status === 12029) {
          status = 0;
        }

        debug('finish', status, x.responseText);
        self.emit('finish', status, x.responseText);
        self._cleanup(false);
        break;
      }
    }
  };

  try {
    self.xhr.send(payload);
  } catch (e) {
    self.emit('finish', 0, '');
    self._cleanup(false);
  }
};

AbstractXHRObject.prototype._cleanup = function(abort) {
  debug('cleanup');
  if (!this.xhr) {
    return;
  }
  this.removeAllListeners();
  utils.unloadDel(this.unloadRef);

  // IE needs this field to be a function
  this.xhr.onreadystatechange = function() {};
  if (this.xhr.ontimeout) {
    this.xhr.ontimeout = null;
  }

  if (abort) {
    try {
      this.xhr.abort();
    } catch (x) {
      // intentionally empty
    }
  }
  this.unloadRef = this.xhr = null;
};

AbstractXHRObject.prototype.close = function() {
  debug('close');
  this._cleanup(true);
};

AbstractXHRObject.enabled = !!XHR;
// override XMLHttpRequest for IE6/7
// obfuscate to avoid firewalls
var axo = ['Active'].concat('Object').join('X');
if (!AbstractXHRObject.enabled && (axo in global)) {
  debug('overriding xmlhttprequest');
  XHR = function() {
    try {
      return new global[axo]('Microsoft.XMLHTTP');
    } catch (e) {
      return null;
    }
  };
  AbstractXHRObject.enabled = !!new XHR();
}

var cors = false;
try {
  cors = 'withCredentials' in new XHR();
} catch (ignored) {
  // intentionally empty
}

AbstractXHRObject.supportsCORS = cors;

module.exports = AbstractXHRObject;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/event":46,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],18:[function(require,module,exports){
(function (global){
module.exports = global.EventSource;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],19:[function(require,module,exports){
(function (global){
'use strict';

var Driver = global.WebSocket || global.MozWebSocket;
if (Driver) {
	module.exports = function WebSocketBrowserDriver(url) {
		return new Driver(url);
	};
} else {
	module.exports = undefined;
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , EventSourceReceiver = require('./receiver/eventsource')
  , XHRCorsObject = require('./sender/xhr-cors')
  , EventSourceDriver = require('eventsource')
  ;

function EventSourceTransport(transUrl) {
  if (!EventSourceTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }

  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);
}

inherits(EventSourceTransport, AjaxBasedTransport);

EventSourceTransport.enabled = function() {
  return !!EventSourceDriver;
};

EventSourceTransport.transportName = 'eventsource';
EventSourceTransport.roundTrips = 2;

module.exports = EventSourceTransport;

},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,"eventsource":18,"inherits":57}],21:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , HtmlfileReceiver = require('./receiver/htmlfile')
  , XHRLocalObject = require('./sender/xhr-local')
  , AjaxBasedTransport = require('./lib/ajax-based')
  ;

function HtmlFileTransport(transUrl) {
  if (!HtmlfileReceiver.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);
}

inherits(HtmlFileTransport, AjaxBasedTransport);

HtmlFileTransport.enabled = function(info) {
  return HtmlfileReceiver.enabled && info.sameOrigin;
};

HtmlFileTransport.transportName = 'htmlfile';
HtmlFileTransport.roundTrips = 2;

module.exports = HtmlFileTransport;

},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,"inherits":57}],22:[function(require,module,exports){
(function (process){
'use strict';

// Few cool transports do work only for same-origin. In order to make
// them work cross-domain we shall use iframe, served from the
// remote domain. New browsers have capabilities to communicate with
// cross domain iframe using postMessage(). In IE it was implemented
// from IE 8+, but of course, IE got some details wrong:
//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx
//    http://stevesouders.com/misc/test-postmessage.php

var inherits = require('inherits')
  , JSON3 = require('json3')
  , EventEmitter = require('events').EventEmitter
  , version = require('../version')
  , urlUtils = require('../utils/url')
  , iframeUtils = require('../utils/iframe')
  , eventUtils = require('../utils/event')
  , random = require('../utils/random')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:transport:iframe');
}

function IframeTransport(transport, transUrl, baseUrl) {
  if (!IframeTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }
  EventEmitter.call(this);

  var self = this;
  this.origin = urlUtils.getOrigin(baseUrl);
  this.baseUrl = baseUrl;
  this.transUrl = transUrl;
  this.transport = transport;
  this.windowId = random.string(8);

  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;
  debug(transport, transUrl, iframeUrl);

  this.iframeObj = iframeUtils.createIframe(iframeUrl, function(r) {
    debug('err callback');
    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');
    self.close();
  });

  this.onmessageCallback = this._message.bind(this);
  eventUtils.attachEvent('message', this.onmessageCallback);
}

inherits(IframeTransport, EventEmitter);

IframeTransport.prototype.close = function() {
  debug('close');
  this.removeAllListeners();
  if (this.iframeObj) {
    eventUtils.detachEvent('message', this.onmessageCallback);
    try {
      // When the iframe is not loaded, IE raises an exception
      // on 'contentWindow'.
      this.postMessage('c');
    } catch (x) {
      // intentionally empty
    }
    this.iframeObj.cleanup();
    this.iframeObj = null;
    this.onmessageCallback = this.iframeObj = null;
  }
};

IframeTransport.prototype._message = function(e) {
  debug('message', e.data);
  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {
    debug('not same origin', e.origin, this.origin);
    return;
  }

  var iframeMessage;
  try {
    iframeMessage = JSON3.parse(e.data);
  } catch (ignored) {
    debug('bad json', e.data);
    return;
  }

  if (iframeMessage.windowId !== this.windowId) {
    debug('mismatched window id', iframeMessage.windowId, this.windowId);
    return;
  }

  switch (iframeMessage.type) {
  case 's':
    this.iframeObj.loaded();
    // window global dependency
    this.postMessage('s', JSON3.stringify([
      version
    , this.transport
    , this.transUrl
    , this.baseUrl
    ]));
    break;
  case 't':
    this.emit('message', iframeMessage.data);
    break;
  case 'c':
    var cdata;
    try {
      cdata = JSON3.parse(iframeMessage.data);
    } catch (ignored) {
      debug('bad json', iframeMessage.data);
      return;
    }
    this.emit('close', cdata[0], cdata[1]);
    this.close();
    break;
  }
};

IframeTransport.prototype.postMessage = function(type, data) {
  debug('postMessage', type, data);
  this.iframeObj.post(JSON3.stringify({
    windowId: this.windowId
  , type: type
  , data: data || ''
  }), this.origin);
};

IframeTransport.prototype.send = function(message) {
  debug('send', message);
  this.postMessage('m', message);
};

IframeTransport.enabled = function() {
  return iframeUtils.iframeEnabled;
};

IframeTransport.transportName = 'iframe';
IframeTransport.roundTrips = 2;

module.exports = IframeTransport;

}).call(this,{ env: {} })

},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,"debug":55,"events":3,"inherits":57,"json3":58}],23:[function(require,module,exports){
(function (global){
'use strict';

// The simplest and most robust transport, using the well-know cross
// domain hack - JSONP. This transport is quite inefficient - one
// message could use up to one http request. But at least it works almost
// everywhere.
// Known limitations:
//   o you will get a spinning cursor
//   o for Konqueror a dumb timer is needed to detect errors

var inherits = require('inherits')
  , SenderReceiver = require('./lib/sender-receiver')
  , JsonpReceiver = require('./receiver/jsonp')
  , jsonpSender = require('./sender/jsonp')
  ;

function JsonPTransport(transUrl) {
  if (!JsonPTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }
  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);
}

inherits(JsonPTransport, SenderReceiver);

JsonPTransport.enabled = function() {
  return !!global.document;
};

JsonPTransport.transportName = 'jsonp-polling';
JsonPTransport.roundTrips = 1;
JsonPTransport.needBody = true;

module.exports = JsonPTransport;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,"inherits":57}],24:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , urlUtils = require('../../utils/url')
  , SenderReceiver = require('./sender-receiver')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:ajax-based');
}

function createAjaxSender(AjaxObject) {
  return function(url, payload, callback) {
    debug('create ajax sender', url, payload);
    var opt = {};
    if (typeof payload === 'string') {
      opt.headers = {'Content-type': 'text/plain'};
    }
    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');
    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);
    xo.once('finish', function(status) {
      debug('finish', status);
      xo = null;

      if (status !== 200 && status !== 204) {
        return callback(new Error('http status ' + status));
      }
      callback();
    });
    return function() {
      debug('abort');
      xo.close();
      xo = null;

      var err = new Error('Aborted');
      err.code = 1000;
      callback(err);
    };
  };
}

function AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {
  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);
}

inherits(AjaxBasedTransport, SenderReceiver);

module.exports = AjaxBasedTransport;

}).call(this,{ env: {} })

},{"../../utils/url":52,"./sender-receiver":28,"debug":55,"inherits":57}],25:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:buffered-sender');
}

function BufferedSender(url, sender) {
  debug(url);
  EventEmitter.call(this);
  this.sendBuffer = [];
  this.sender = sender;
  this.url = url;
}

inherits(BufferedSender, EventEmitter);

BufferedSender.prototype.send = function(message) {
  debug('send', message);
  this.sendBuffer.push(message);
  if (!this.sendStop) {
    this.sendSchedule();
  }
};

// For polling transports in a situation when in the message callback,
// new message is being send. If the sending connection was started
// before receiving one, it is possible to saturate the network and
// timeout due to the lack of receiving socket. To avoid that we delay
// sending messages by some small time, in order to let receiving
// connection be started beforehand. This is only a halfmeasure and
// does not fix the big problem, but it does make the tests go more
// stable on slow networks.
BufferedSender.prototype.sendScheduleWait = function() {
  debug('sendScheduleWait');
  var self = this;
  var tref;
  this.sendStop = function() {
    debug('sendStop');
    self.sendStop = null;
    clearTimeout(tref);
  };
  tref = setTimeout(function() {
    debug('timeout');
    self.sendStop = null;
    self.sendSchedule();
  }, 25);
};

BufferedSender.prototype.sendSchedule = function() {
  debug('sendSchedule', this.sendBuffer.length);
  var self = this;
  if (this.sendBuffer.length > 0) {
    var payload = '[' + this.sendBuffer.join(',') + ']';
    this.sendStop = this.sender(this.url, payload, function(err) {
      self.sendStop = null;
      if (err) {
        debug('error', err);
        self.emit('close', err.code || 1006, 'Sending error: ' + err);
        self.close();
      } else {
        self.sendScheduleWait();
      }
    });
    this.sendBuffer = [];
  }
};

BufferedSender.prototype._cleanup = function() {
  debug('_cleanup');
  this.removeAllListeners();
};

BufferedSender.prototype.close = function() {
  debug('close');
  this._cleanup();
  if (this.sendStop) {
    this.sendStop();
    this.sendStop = null;
  }
};

module.exports = BufferedSender;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],26:[function(require,module,exports){
(function (global){
'use strict';

var inherits = require('inherits')
  , IframeTransport = require('../iframe')
  , objectUtils = require('../../utils/object')
  ;

module.exports = function(transport) {

  function IframeWrapTransport(transUrl, baseUrl) {
    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);
  }

  inherits(IframeWrapTransport, IframeTransport);

  IframeWrapTransport.enabled = function(url, info) {
    if (!global.document) {
      return false;
    }

    var iframeInfo = objectUtils.extend({}, info);
    iframeInfo.sameOrigin = true;
    return transport.enabled(iframeInfo) && IframeTransport.enabled();
  };

  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;
  IframeWrapTransport.needBody = true;
  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)

  IframeWrapTransport.facadeTransport = transport;

  return IframeWrapTransport;
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/object":49,"../iframe":22,"inherits":57}],27:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:polling');
}

function Polling(Receiver, receiveUrl, AjaxObject) {
  debug(receiveUrl);
  EventEmitter.call(this);
  this.Receiver = Receiver;
  this.receiveUrl = receiveUrl;
  this.AjaxObject = AjaxObject;
  this._scheduleReceiver();
}

inherits(Polling, EventEmitter);

Polling.prototype._scheduleReceiver = function() {
  debug('_scheduleReceiver');
  var self = this;
  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);

  poll.on('message', function(msg) {
    debug('message', msg);
    self.emit('message', msg);
  });

  poll.once('close', function(code, reason) {
    debug('close', code, reason, self.pollIsClosing);
    self.poll = poll = null;

    if (!self.pollIsClosing) {
      if (reason === 'network') {
        self._scheduleReceiver();
      } else {
        self.emit('close', code || 1006, reason);
        self.removeAllListeners();
      }
    }
  });
};

Polling.prototype.abort = function() {
  debug('abort');
  this.removeAllListeners();
  this.pollIsClosing = true;
  if (this.poll) {
    this.poll.abort();
  }
};

module.exports = Polling;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],28:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , urlUtils = require('../../utils/url')
  , BufferedSender = require('./buffered-sender')
  , Polling = require('./polling')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender-receiver');
}

function SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {
  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);
  debug(pollUrl);
  var self = this;
  BufferedSender.call(this, transUrl, senderFunc);

  this.poll = new Polling(Receiver, pollUrl, AjaxObject);
  this.poll.on('message', function(msg) {
    debug('poll message', msg);
    self.emit('message', msg);
  });
  this.poll.once('close', function(code, reason) {
    debug('poll close', code, reason);
    self.poll = null;
    self.emit('close', code, reason);
    self.close();
  });
}

inherits(SenderReceiver, BufferedSender);

SenderReceiver.prototype.close = function() {
  BufferedSender.prototype.close.call(this);
  debug('close');
  this.removeAllListeners();
  if (this.poll) {
    this.poll.abort();
    this.poll = null;
  }
};

module.exports = SenderReceiver;

}).call(this,{ env: {} })

},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,"debug":55,"inherits":57}],29:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , EventSourceDriver = require('eventsource')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:eventsource');
}

function EventSourceReceiver(url) {
  debug(url);
  EventEmitter.call(this);

  var self = this;
  var es = this.es = new EventSourceDriver(url);
  es.onmessage = function(e) {
    debug('message', e.data);
    self.emit('message', decodeURI(e.data));
  };
  es.onerror = function(e) {
    debug('error', es.readyState, e);
    // ES on reconnection has readyState = 0 or 1.
    // on network error it's CLOSED = 2
    var reason = (es.readyState !== 2 ? 'network' : 'permanent');
    self._cleanup();
    self._close(reason);
  };
}

inherits(EventSourceReceiver, EventEmitter);

EventSourceReceiver.prototype.abort = function() {
  debug('abort');
  this._cleanup();
  this._close('user');
};

EventSourceReceiver.prototype._cleanup = function() {
  debug('cleanup');
  var es = this.es;
  if (es) {
    es.onmessage = es.onerror = null;
    es.close();
    this.es = null;
  }
};

EventSourceReceiver.prototype._close = function(reason) {
  debug('close', reason);
  var self = this;
  // Safari and chrome < 15 crash if we close window before
  // waiting for ES cleanup. See:
  // https://code.google.com/p/chromium/issues/detail?id=89155
  setTimeout(function() {
    self.emit('close', null, reason);
    self.removeAllListeners();
  }, 200);
};

module.exports = EventSourceReceiver;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"eventsource":18,"inherits":57}],30:[function(require,module,exports){
(function (process,global){
'use strict';

var inherits = require('inherits')
  , iframeUtils = require('../../utils/iframe')
  , urlUtils = require('../../utils/url')
  , EventEmitter = require('events').EventEmitter
  , random = require('../../utils/random')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:htmlfile');
}

function HtmlfileReceiver(url) {
  debug(url);
  EventEmitter.call(this);
  var self = this;
  iframeUtils.polluteGlobalNamespace();

  this.id = 'a' + random.string(6);
  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));

  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);
  var constructFunc = HtmlfileReceiver.htmlfileEnabled ?
      iframeUtils.createHtmlfile : iframeUtils.createIframe;

  global[iframeUtils.WPrefix][this.id] = {
    start: function() {
      debug('start');
      self.iframeObj.loaded();
    }
  , message: function(data) {
      debug('message', data);
      self.emit('message', data);
    }
  , stop: function() {
      debug('stop');
      self._cleanup();
      self._close('network');
    }
  };
  this.iframeObj = constructFunc(url, function() {
    debug('callback');
    self._cleanup();
    self._close('permanent');
  });
}

inherits(HtmlfileReceiver, EventEmitter);

HtmlfileReceiver.prototype.abort = function() {
  debug('abort');
  this._cleanup();
  this._close('user');
};

HtmlfileReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  if (this.iframeObj) {
    this.iframeObj.cleanup();
    this.iframeObj = null;
  }
  delete global[iframeUtils.WPrefix][this.id];
};

HtmlfileReceiver.prototype._close = function(reason) {
  debug('_close', reason);
  this.emit('close', null, reason);
  this.removeAllListeners();
};

HtmlfileReceiver.htmlfileEnabled = false;

// obfuscate to avoid firewalls
var axo = ['Active'].concat('Object').join('X');
if (axo in global) {
  try {
    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');
  } catch (x) {
    // intentionally empty
  }
}

HtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;

module.exports = HtmlfileReceiver;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],31:[function(require,module,exports){
(function (process,global){
'use strict';

var utils = require('../../utils/iframe')
  , random = require('../../utils/random')
  , browser = require('../../utils/browser')
  , urlUtils = require('../../utils/url')
  , inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:jsonp');
}

function JsonpReceiver(url) {
  debug(url);
  var self = this;
  EventEmitter.call(this);

  utils.polluteGlobalNamespace();

  this.id = 'a' + random.string(6);
  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));

  global[utils.WPrefix][this.id] = this._callback.bind(this);
  this._createScript(urlWithId);

  // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.
  this.timeoutId = setTimeout(function() {
    debug('timeout');
    self._abort(new Error('JSONP script loaded abnormally (timeout)'));
  }, JsonpReceiver.timeout);
}

inherits(JsonpReceiver, EventEmitter);

JsonpReceiver.prototype.abort = function() {
  debug('abort');
  if (global[utils.WPrefix][this.id]) {
    var err = new Error('JSONP user aborted read');
    err.code = 1000;
    this._abort(err);
  }
};

JsonpReceiver.timeout = 35000;
JsonpReceiver.scriptErrorTimeout = 1000;

JsonpReceiver.prototype._callback = function(data) {
  debug('_callback', data);
  this._cleanup();

  if (this.aborting) {
    return;
  }

  if (data) {
    debug('message', data);
    this.emit('message', data);
  }
  this.emit('close', null, 'network');
  this.removeAllListeners();
};

JsonpReceiver.prototype._abort = function(err) {
  debug('_abort', err);
  this._cleanup();
  this.aborting = true;
  this.emit('close', err.code, err.message);
  this.removeAllListeners();
};

JsonpReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  clearTimeout(this.timeoutId);
  if (this.script2) {
    this.script2.parentNode.removeChild(this.script2);
    this.script2 = null;
  }
  if (this.script) {
    var script = this.script;
    // Unfortunately, you can't really abort script loading of
    // the script.
    script.parentNode.removeChild(script);
    script.onreadystatechange = script.onerror =
        script.onload = script.onclick = null;
    this.script = null;
  }
  delete global[utils.WPrefix][this.id];
};

JsonpReceiver.prototype._scriptError = function() {
  debug('_scriptError');
  var self = this;
  if (this.errorTimer) {
    return;
  }

  this.errorTimer = setTimeout(function() {
    if (!self.loadedOkay) {
      self._abort(new Error('JSONP script loaded abnormally (onerror)'));
    }
  }, JsonpReceiver.scriptErrorTimeout);
};

JsonpReceiver.prototype._createScript = function(url) {
  debug('_createScript', url);
  var self = this;
  var script = this.script = global.document.createElement('script');
  var script2;  // Opera synchronous load trick.

  script.id = 'a' + random.string(8);
  script.src = url;
  script.type = 'text/javascript';
  script.charset = 'UTF-8';
  script.onerror = this._scriptError.bind(this);
  script.onload = function() {
    debug('onload');
    self._abort(new Error('JSONP script loaded abnormally (onload)'));
  };

  // IE9 fires 'error' event after onreadystatechange or before, in random order.
  // Use loadedOkay to determine if actually errored
  script.onreadystatechange = function() {
    debug('onreadystatechange', script.readyState);
    if (/loaded|closed/.test(script.readyState)) {
      if (script && script.htmlFor && script.onclick) {
        self.loadedOkay = true;
        try {
          // In IE, actually execute the script.
          script.onclick();
        } catch (x) {
          // intentionally empty
        }
      }
      if (script) {
        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));
      }
    }
  };
  // IE: event/htmlFor/onclick trick.
  // One can't rely on proper order for onreadystatechange. In order to
  // make sure, set a 'htmlFor' and 'event' properties, so that
  // script code will be installed as 'onclick' handler for the
  // script object. Later, onreadystatechange, manually execute this
  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'
  // set. For reference see:
  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html
  // Also, read on that about script ordering:
  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order
  if (typeof script.async === 'undefined' && global.document.attachEvent) {
    // According to mozilla docs, in recent browsers script.async defaults
    // to 'true', so we may use it to detect a good browser:
    // https://developer.mozilla.org/en/HTML/Element/script
    if (!browser.isOpera()) {
      // Naively assume we're in IE
      try {
        script.htmlFor = script.id;
        script.event = 'onclick';
      } catch (x) {
        // intentionally empty
      }
      script.async = true;
    } else {
      // Opera, second sync script hack
      script2 = this.script2 = global.document.createElement('script');
      script2.text = "try{var a = document.getElementById('" + script.id + "'); if(a)a.onerror();}catch(x){};";
      script.async = script2.async = false;
    }
  }
  if (typeof script.async !== 'undefined') {
    script.async = true;
  }

  var head = global.document.getElementsByTagName('head')[0];
  head.insertBefore(script, head.firstChild);
  if (script2) {
    head.insertBefore(script2, head.firstChild);
  }
};

module.exports = JsonpReceiver;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],32:[function(require,module,exports){
(function (process){
'use strict';

var inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:receiver:xhr');
}

function XhrReceiver(url, AjaxObject) {
  debug(url);
  EventEmitter.call(this);
  var self = this;

  this.bufferPosition = 0;

  this.xo = new AjaxObject('POST', url, null);
  this.xo.on('chunk', this._chunkHandler.bind(this));
  this.xo.once('finish', function(status, text) {
    debug('finish', status, text);
    self._chunkHandler(status, text);
    self.xo = null;
    var reason = status === 200 ? 'network' : 'permanent';
    debug('close', reason);
    self.emit('close', null, reason);
    self._cleanup();
  });
}

inherits(XhrReceiver, EventEmitter);

XhrReceiver.prototype._chunkHandler = function(status, text) {
  debug('_chunkHandler', status);
  if (status !== 200 || !text) {
    return;
  }

  for (var idx = -1; ; this.bufferPosition += idx + 1) {
    var buf = text.slice(this.bufferPosition);
    idx = buf.indexOf('\n');
    if (idx === -1) {
      break;
    }
    var msg = buf.slice(0, idx);
    if (msg) {
      debug('message', msg);
      this.emit('message', msg);
    }
  }
};

XhrReceiver.prototype._cleanup = function() {
  debug('_cleanup');
  this.removeAllListeners();
};

XhrReceiver.prototype.abort = function() {
  debug('abort');
  if (this.xo) {
    this.xo.close();
    debug('close');
    this.emit('close', null, 'user');
    this.xo = null;
  }
  this._cleanup();
};

module.exports = XhrReceiver;

}).call(this,{ env: {} })

},{"debug":55,"events":3,"inherits":57}],33:[function(require,module,exports){
(function (process,global){
'use strict';

var random = require('../../utils/random')
  , urlUtils = require('../../utils/url')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender:jsonp');
}

var form, area;

function createIframe(id) {
  debug('createIframe', id);
  try {
    // ie6 dynamic iframes with target="" support (thanks Chris Lambacher)
    return global.document.createElement('<iframe name="' + id + '">');
  } catch (x) {
    var iframe = global.document.createElement('iframe');
    iframe.name = id;
    return iframe;
  }
}

function createForm() {
  debug('createForm');
  form = global.document.createElement('form');
  form.style.display = 'none';
  form.style.position = 'absolute';
  form.method = 'POST';
  form.enctype = 'application/x-www-form-urlencoded';
  form.acceptCharset = 'UTF-8';

  area = global.document.createElement('textarea');
  area.name = 'd';
  form.appendChild(area);

  global.document.body.appendChild(form);
}

module.exports = function(url, payload, callback) {
  debug(url, payload);
  if (!form) {
    createForm();
  }
  var id = 'a' + random.string(8);
  form.target = id;
  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);

  var iframe = createIframe(id);
  iframe.id = id;
  iframe.style.display = 'none';
  form.appendChild(iframe);

  try {
    area.value = payload;
  } catch (e) {
    // seriously broken browsers get here
  }
  form.submit();

  var completed = function(err) {
    debug('completed', id, err);
    if (!iframe.onerror) {
      return;
    }
    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;
    // Opera mini doesn't like if we GC iframe
    // immediately, thus this timeout.
    setTimeout(function() {
      debug('cleaning up', id);
      iframe.parentNode.removeChild(iframe);
      iframe = null;
    }, 500);
    area.value = '';
    // It is not possible to detect if the iframe succeeded or
    // failed to submit our form.
    callback(err);
  };
  iframe.onerror = function() {
    debug('onerror', id);
    completed();
  };
  iframe.onload = function() {
    debug('onload', id);
    completed();
  };
  iframe.onreadystatechange = function(e) {
    debug('onreadystatechange', id, iframe.readyState, e);
    if (iframe.readyState === 'complete') {
      completed();
    }
  };
  return function() {
    debug('aborted', id);
    completed(new Error('Aborted'));
  };
};

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/random":50,"../../utils/url":52,"debug":55}],34:[function(require,module,exports){
(function (process,global){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  , eventUtils = require('../../utils/event')
  , browser = require('../../utils/browser')
  , urlUtils = require('../../utils/url')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:sender:xdr');
}

// References:
//   http://ajaxian.com/archives/100-line-ajax-wrapper
//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx

function XDRObject(method, url, payload) {
  debug(method, url);
  var self = this;
  EventEmitter.call(this);

  setTimeout(function() {
    self._start(method, url, payload);
  }, 0);
}

inherits(XDRObject, EventEmitter);

XDRObject.prototype._start = function(method, url, payload) {
  debug('_start');
  var self = this;
  var xdr = new global.XDomainRequest();
  // IE caches even POSTs
  url = urlUtils.addQuery(url, 't=' + (+new Date()));

  xdr.onerror = function() {
    debug('onerror');
    self._error();
  };
  xdr.ontimeout = function() {
    debug('ontimeout');
    self._error();
  };
  xdr.onprogress = function() {
    debug('progress', xdr.responseText);
    self.emit('chunk', 200, xdr.responseText);
  };
  xdr.onload = function() {
    debug('load');
    self.emit('finish', 200, xdr.responseText);
    self._cleanup(false);
  };
  this.xdr = xdr;
  this.unloadRef = eventUtils.unloadAdd(function() {
    self._cleanup(true);
  });
  try {
    // Fails with AccessDenied if port number is bogus
    this.xdr.open(method, url);
    if (this.timeout) {
      this.xdr.timeout = this.timeout;
    }
    this.xdr.send(payload);
  } catch (x) {
    this._error();
  }
};

XDRObject.prototype._error = function() {
  this.emit('finish', 0, '');
  this._cleanup(false);
};

XDRObject.prototype._cleanup = function(abort) {
  debug('cleanup', abort);
  if (!this.xdr) {
    return;
  }
  this.removeAllListeners();
  eventUtils.unloadDel(this.unloadRef);

  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;
  if (abort) {
    try {
      this.xdr.abort();
    } catch (x) {
      // intentionally empty
    }
  }
  this.unloadRef = this.xdr = null;
};

XDRObject.prototype.close = function() {
  debug('close');
  this._cleanup(true);
};

// IE 8/9 if the request target uses the same scheme - #79
XDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());

module.exports = XDRObject;

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,"debug":55,"events":3,"inherits":57}],35:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , XhrDriver = require('../driver/xhr')
  ;

function XHRCorsObject(method, url, payload, opts) {
  XhrDriver.call(this, method, url, payload, opts);
}

inherits(XHRCorsObject, XhrDriver);

XHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;

module.exports = XHRCorsObject;

},{"../driver/xhr":17,"inherits":57}],36:[function(require,module,exports){
'use strict';

var EventEmitter = require('events').EventEmitter
  , inherits = require('inherits')
  ;

function XHRFake(/* method, url, payload, opts */) {
  var self = this;
  EventEmitter.call(this);

  this.to = setTimeout(function() {
    self.emit('finish', 200, '{}');
  }, XHRFake.timeout);
}

inherits(XHRFake, EventEmitter);

XHRFake.prototype.close = function() {
  clearTimeout(this.to);
};

XHRFake.timeout = 2000;

module.exports = XHRFake;

},{"events":3,"inherits":57}],37:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , XhrDriver = require('../driver/xhr')
  ;

function XHRLocalObject(method, url, payload /*, opts */) {
  XhrDriver.call(this, method, url, payload, {
    noCredentials: true
  });
}

inherits(XHRLocalObject, XhrDriver);

XHRLocalObject.enabled = XhrDriver.enabled;

module.exports = XHRLocalObject;

},{"../driver/xhr":17,"inherits":57}],38:[function(require,module,exports){
(function (process){
'use strict';

var utils = require('../utils/event')
  , urlUtils = require('../utils/url')
  , inherits = require('inherits')
  , EventEmitter = require('events').EventEmitter
  , WebsocketDriver = require('./driver/websocket')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:websocket');
}

function WebSocketTransport(transUrl, ignore, options) {
  if (!WebSocketTransport.enabled()) {
    throw new Error('Transport created when disabled');
  }

  EventEmitter.call(this);
  debug('constructor', transUrl);

  var self = this;
  var url = urlUtils.addPath(transUrl, '/websocket');
  if (url.slice(0, 5) === 'https') {
    url = 'wss' + url.slice(5);
  } else {
    url = 'ws' + url.slice(4);
  }
  this.url = url;

  this.ws = new WebsocketDriver(this.url, [], options);
  this.ws.onmessage = function(e) {
    debug('message event', e.data);
    self.emit('message', e.data);
  };
  // Firefox has an interesting bug. If a websocket connection is
  // created after onunload, it stays alive even when user
  // navigates away from the page. In such situation let's lie -
  // let's not open the ws connection at all. See:
  // https://github.com/sockjs/sockjs-client/issues/28
  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085
  this.unloadRef = utils.unloadAdd(function() {
    debug('unload');
    self.ws.close();
  });
  this.ws.onclose = function(e) {
    debug('close event', e.code, e.reason);
    self.emit('close', e.code, e.reason);
    self._cleanup();
  };
  this.ws.onerror = function(e) {
    debug('error event', e);
    self.emit('close', 1006, 'WebSocket connection broken');
    self._cleanup();
  };
}

inherits(WebSocketTransport, EventEmitter);

WebSocketTransport.prototype.send = function(data) {
  var msg = '[' + data + ']';
  debug('send', msg);
  this.ws.send(msg);
};

WebSocketTransport.prototype.close = function() {
  debug('close');
  var ws = this.ws;
  this._cleanup();
  if (ws) {
    ws.close();
  }
};

WebSocketTransport.prototype._cleanup = function() {
  debug('_cleanup');
  var ws = this.ws;
  if (ws) {
    ws.onmessage = ws.onclose = ws.onerror = null;
  }
  utils.unloadDel(this.unloadRef);
  this.unloadRef = this.ws = null;
  this.removeAllListeners();
};

WebSocketTransport.enabled = function() {
  debug('enabled');
  return !!WebsocketDriver;
};
WebSocketTransport.transportName = 'websocket';

// In theory, ws should require 1 round trip. But in chrome, this is
// not very stable over SSL. Most likely a ws connection requires a
// separate SSL connection, in which case 2 round trips are an
// absolute minumum.
WebSocketTransport.roundTrips = 2;

module.exports = WebSocketTransport;

}).call(this,{ env: {} })

},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,"debug":55,"events":3,"inherits":57}],39:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XdrStreamingTransport = require('./xdr-streaming')
  , XhrReceiver = require('./receiver/xhr')
  , XDRObject = require('./sender/xdr')
  ;

function XdrPollingTransport(transUrl) {
  if (!XDRObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);
}

inherits(XdrPollingTransport, AjaxBasedTransport);

XdrPollingTransport.enabled = XdrStreamingTransport.enabled;
XdrPollingTransport.transportName = 'xdr-polling';
XdrPollingTransport.roundTrips = 2; // preflight, ajax

module.exports = XdrPollingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,"inherits":57}],40:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XDRObject = require('./sender/xdr')
  ;

// According to:
//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests
//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/

function XdrStreamingTransport(transUrl) {
  if (!XDRObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);
}

inherits(XdrStreamingTransport, AjaxBasedTransport);

XdrStreamingTransport.enabled = function(info) {
  if (info.cookie_needed || info.nullOrigin) {
    return false;
  }
  return XDRObject.enabled && info.sameScheme;
};

XdrStreamingTransport.transportName = 'xdr-streaming';
XdrStreamingTransport.roundTrips = 2; // preflight, ajax

module.exports = XdrStreamingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"inherits":57}],41:[function(require,module,exports){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XHRCorsObject = require('./sender/xhr-cors')
  , XHRLocalObject = require('./sender/xhr-local')
  ;

function XhrPollingTransport(transUrl) {
  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);
}

inherits(XhrPollingTransport, AjaxBasedTransport);

XhrPollingTransport.enabled = function(info) {
  if (info.nullOrigin) {
    return false;
  }

  if (XHRLocalObject.enabled && info.sameOrigin) {
    return true;
  }
  return XHRCorsObject.enabled;
};

XhrPollingTransport.transportName = 'xhr-polling';
XhrPollingTransport.roundTrips = 2; // preflight, ajax

module.exports = XhrPollingTransport;

},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],42:[function(require,module,exports){
(function (global){
'use strict';

var inherits = require('inherits')
  , AjaxBasedTransport = require('./lib/ajax-based')
  , XhrReceiver = require('./receiver/xhr')
  , XHRCorsObject = require('./sender/xhr-cors')
  , XHRLocalObject = require('./sender/xhr-local')
  , browser = require('../utils/browser')
  ;

function XhrStreamingTransport(transUrl) {
  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {
    throw new Error('Transport created when disabled');
  }
  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);
}

inherits(XhrStreamingTransport, AjaxBasedTransport);

XhrStreamingTransport.enabled = function(info) {
  if (info.nullOrigin) {
    return false;
  }
  // Opera doesn't support xhr-streaming #60
  // But it might be able to #92
  if (browser.isOpera()) {
    return false;
  }

  return XHRCorsObject.enabled;
};

XhrStreamingTransport.transportName = 'xhr-streaming';
XhrStreamingTransport.roundTrips = 2; // preflight, ajax

// Safari gets confused when a streaming ajax request is started
// before onload. This causes the load indicator to spin indefinetely.
// Only require body when used in a browser
XhrStreamingTransport.needBody = !!global.document;

module.exports = XhrStreamingTransport;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,"inherits":57}],43:[function(require,module,exports){
(function (global){
'use strict';

if (global.crypto && global.crypto.getRandomValues) {
  module.exports.randomBytes = function(length) {
    var bytes = new Uint8Array(length);
    global.crypto.getRandomValues(bytes);
    return bytes;
  };
} else {
  module.exports.randomBytes = function(length) {
    var bytes = new Array(length);
    for (var i = 0; i < length; i++) {
      bytes[i] = Math.floor(Math.random() * 256);
    }
    return bytes;
  };
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],44:[function(require,module,exports){
(function (global){
'use strict';

module.exports = {
  isOpera: function() {
    return global.navigator &&
      /opera/i.test(global.navigator.userAgent);
  }

, isKonqueror: function() {
    return global.navigator &&
      /konqueror/i.test(global.navigator.userAgent);
  }

  // #187 wrap document.domain in try/catch because of WP8 from file:///
, hasDomain: function () {
    // non-browser client always has a domain
    if (!global.document) {
      return true;
    }

    try {
      return !!global.document.domain;
    } catch (e) {
      return false;
    }
  }
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],45:[function(require,module,exports){
'use strict';

var JSON3 = require('json3');

// Some extra characters that Chrome gets wrong, and substitutes with
// something else on the wire.
// eslint-disable-next-line no-control-regex
var extraEscapable = /[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g
  , extraLookup;

// This may be quite slow, so let's delay until user actually uses bad
// characters.
var unrollLookup = function(escapable) {
  var i;
  var unrolled = {};
  var c = [];
  for (i = 0; i < 65536; i++) {
    c.push( String.fromCharCode(i) );
  }
  escapable.lastIndex = 0;
  c.join('').replace(escapable, function(a) {
    unrolled[ a ] = '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
    return '';
  });
  escapable.lastIndex = 0;
  return unrolled;
};

// Quote string, also taking care of unicode characters that browsers
// often break. Especially, take care of unicode surrogates:
// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates
module.exports = {
  quote: function(string) {
    var quoted = JSON3.stringify(string);

    // In most cases this should be very fast and good enough.
    extraEscapable.lastIndex = 0;
    if (!extraEscapable.test(quoted)) {
      return quoted;
    }

    if (!extraLookup) {
      extraLookup = unrollLookup(extraEscapable);
    }

    return quoted.replace(extraEscapable, function(a) {
      return extraLookup[a];
    });
  }
};

},{"json3":58}],46:[function(require,module,exports){
(function (global){
'use strict';

var random = require('./random');

var onUnload = {}
  , afterUnload = false
    // detect google chrome packaged apps because they don't allow the 'unload' event
  , isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime
  ;

module.exports = {
  attachEvent: function(event, listener) {
    if (typeof global.addEventListener !== 'undefined') {
      global.addEventListener(event, listener, false);
    } else if (global.document && global.attachEvent) {
      // IE quirks.
      // According to: http://stevesouders.com/misc/test-postmessage.php
      // the message gets delivered only to 'document', not 'window'.
      global.document.attachEvent('on' + event, listener);
      // I get 'window' for ie8.
      global.attachEvent('on' + event, listener);
    }
  }

, detachEvent: function(event, listener) {
    if (typeof global.addEventListener !== 'undefined') {
      global.removeEventListener(event, listener, false);
    } else if (global.document && global.detachEvent) {
      global.document.detachEvent('on' + event, listener);
      global.detachEvent('on' + event, listener);
    }
  }

, unloadAdd: function(listener) {
    if (isChromePackagedApp) {
      return null;
    }

    var ref = random.string(8);
    onUnload[ref] = listener;
    if (afterUnload) {
      setTimeout(this.triggerUnloadCallbacks, 0);
    }
    return ref;
  }

, unloadDel: function(ref) {
    if (ref in onUnload) {
      delete onUnload[ref];
    }
  }

, triggerUnloadCallbacks: function() {
    for (var ref in onUnload) {
      onUnload[ref]();
      delete onUnload[ref];
    }
  }
};

var unloadTriggered = function() {
  if (afterUnload) {
    return;
  }
  afterUnload = true;
  module.exports.triggerUnloadCallbacks();
};

// 'unload' alone is not reliable in opera within an iframe, but we
// can't use `beforeunload` as IE fires it on javascript: links.
if (!isChromePackagedApp) {
  module.exports.attachEvent('unload', unloadTriggered);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./random":50}],47:[function(require,module,exports){
(function (process,global){
'use strict';

var eventUtils = require('./event')
  , JSON3 = require('json3')
  , browser = require('./browser')
  ;

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:iframe');
}

module.exports = {
  WPrefix: '_jp'
, currentWindowId: null

, polluteGlobalNamespace: function() {
    if (!(module.exports.WPrefix in global)) {
      global[module.exports.WPrefix] = {};
    }
  }

, postMessage: function(type, data) {
    if (global.parent !== global) {
      global.parent.postMessage(JSON3.stringify({
        windowId: module.exports.currentWindowId
      , type: type
      , data: data || ''
      }), '*');
    } else {
      debug('Cannot postMessage, no parent window.', type, data);
    }
  }

, createIframe: function(iframeUrl, errorCallback) {
    var iframe = global.document.createElement('iframe');
    var tref, unloadRef;
    var unattach = function() {
      debug('unattach');
      clearTimeout(tref);
      // Explorer had problems with that.
      try {
        iframe.onload = null;
      } catch (x) {
        // intentionally empty
      }
      iframe.onerror = null;
    };
    var cleanup = function() {
      debug('cleanup');
      if (iframe) {
        unattach();
        // This timeout makes chrome fire onbeforeunload event
        // within iframe. Without the timeout it goes straight to
        // onunload.
        setTimeout(function() {
          if (iframe) {
            iframe.parentNode.removeChild(iframe);
          }
          iframe = null;
        }, 0);
        eventUtils.unloadDel(unloadRef);
      }
    };
    var onerror = function(err) {
      debug('onerror', err);
      if (iframe) {
        cleanup();
        errorCallback(err);
      }
    };
    var post = function(msg, origin) {
      debug('post', msg, origin);
      try {
        // When the iframe is not loaded, IE raises an exception
        // on 'contentWindow'.
        setTimeout(function() {
          if (iframe && iframe.contentWindow) {
            iframe.contentWindow.postMessage(msg, origin);
          }
        }, 0);
      } catch (x) {
        // intentionally empty
      }
    };

    iframe.src = iframeUrl;
    iframe.style.display = 'none';
    iframe.style.position = 'absolute';
    iframe.onerror = function() {
      onerror('onerror');
    };
    iframe.onload = function() {
      debug('onload');
      // `onload` is triggered before scripts on the iframe are
      // executed. Give it few seconds to actually load stuff.
      clearTimeout(tref);
      tref = setTimeout(function() {
        onerror('onload timeout');
      }, 2000);
    };
    global.document.body.appendChild(iframe);
    tref = setTimeout(function() {
      onerror('timeout');
    }, 15000);
    unloadRef = eventUtils.unloadAdd(cleanup);
    return {
      post: post
    , cleanup: cleanup
    , loaded: unattach
    };
  }

/* eslint no-undef: "off", new-cap: "off" */
, createHtmlfile: function(iframeUrl, errorCallback) {
    var axo = ['Active'].concat('Object').join('X');
    var doc = new global[axo]('htmlfile');
    var tref, unloadRef;
    var iframe;
    var unattach = function() {
      clearTimeout(tref);
      iframe.onerror = null;
    };
    var cleanup = function() {
      if (doc) {
        unattach();
        eventUtils.unloadDel(unloadRef);
        iframe.parentNode.removeChild(iframe);
        iframe = doc = null;
        CollectGarbage();
      }
    };
    var onerror = function(r) {
      debug('onerror', r);
      if (doc) {
        cleanup();
        errorCallback(r);
      }
    };
    var post = function(msg, origin) {
      try {
        // When the iframe is not loaded, IE raises an exception
        // on 'contentWindow'.
        setTimeout(function() {
          if (iframe && iframe.contentWindow) {
              iframe.contentWindow.postMessage(msg, origin);
          }
        }, 0);
      } catch (x) {
        // intentionally empty
      }
    };

    doc.open();
    doc.write('<html><s' + 'cript>' +
              'document.domain="' + global.document.domain + '";' +
              '</s' + 'cript></html>');
    doc.close();
    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];
    var c = doc.createElement('div');
    doc.body.appendChild(c);
    iframe = doc.createElement('iframe');
    c.appendChild(iframe);
    iframe.src = iframeUrl;
    iframe.onerror = function() {
      onerror('onerror');
    };
    tref = setTimeout(function() {
      onerror('timeout');
    }, 15000);
    unloadRef = eventUtils.unloadAdd(cleanup);
    return {
      post: post
    , cleanup: cleanup
    , loaded: unattach
    };
  }
};

module.exports.iframeEnabled = false;
if (global.document) {
  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with
  // huge delay, or not at all.
  module.exports.iframeEnabled = (typeof global.postMessage === 'function' ||
    typeof global.postMessage === 'object') && (!browser.isKonqueror());
}

}).call(this,{ env: {} },typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./browser":44,"./event":46,"debug":55,"json3":58}],48:[function(require,module,exports){
(function (global){
'use strict';

var logObject = {};
['log', 'debug', 'warn'].forEach(function (level) {
  var levelExists;

  try {
    levelExists = global.console && global.console[level] && global.console[level].apply;
  } catch(e) {
    // do nothing
  }

  logObject[level] = levelExists ? function () {
    return global.console[level].apply(global.console, arguments);
  } : (level === 'log' ? function () {} : logObject.log);
});

module.exports = logObject;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],49:[function(require,module,exports){
'use strict';

module.exports = {
  isObject: function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' && !!obj;
  }

, extend: function(obj) {
    if (!this.isObject(obj)) {
      return obj;
    }
    var source, prop;
    for (var i = 1, length = arguments.length; i < length; i++) {
      source = arguments[i];
      for (prop in source) {
        if (Object.prototype.hasOwnProperty.call(source, prop)) {
          obj[prop] = source[prop];
        }
      }
    }
    return obj;
  }
};

},{}],50:[function(require,module,exports){
'use strict';

/* global crypto:true */
var crypto = require('crypto');

// This string has length 32, a power of 2, so the modulus doesn't introduce a
// bias.
var _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';
module.exports = {
  string: function(length) {
    var max = _randomStringChars.length;
    var bytes = crypto.randomBytes(length);
    var ret = [];
    for (var i = 0; i < length; i++) {
      ret.push(_randomStringChars.substr(bytes[i] % max, 1));
    }
    return ret.join('');
  }

, number: function(max) {
    return Math.floor(Math.random() * max);
  }

, numberString: function(max) {
    var t = ('' + (max - 1)).length;
    var p = new Array(t + 1).join('0');
    return (p + this.number(max)).slice(-t);
  }
};

},{"crypto":43}],51:[function(require,module,exports){
(function (process){
'use strict';

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:transport');
}

module.exports = function(availableTransports) {
  return {
    filterToEnabled: function(transportsWhitelist, info) {
      var transports = {
        main: []
      , facade: []
      };
      if (!transportsWhitelist) {
        transportsWhitelist = [];
      } else if (typeof transportsWhitelist === 'string') {
        transportsWhitelist = [transportsWhitelist];
      }

      availableTransports.forEach(function(trans) {
        if (!trans) {
          return;
        }

        if (trans.transportName === 'websocket' && info.websocket === false) {
          debug('disabled from server', 'websocket');
          return;
        }

        if (transportsWhitelist.length &&
            transportsWhitelist.indexOf(trans.transportName) === -1) {
          debug('not in whitelist', trans.transportName);
          return;
        }

        if (trans.enabled(info)) {
          debug('enabled', trans.transportName);
          transports.main.push(trans);
          if (trans.facadeTransport) {
            transports.facade.push(trans.facadeTransport);
          }
        } else {
          debug('disabled', trans.transportName);
        }
      });
      return transports;
    }
  };
};

}).call(this,{ env: {} })

},{"debug":55}],52:[function(require,module,exports){
(function (process){
'use strict';

var URL = require('url-parse');

var debug = function() {};
if (process.env.NODE_ENV !== 'production') {
  debug = require('debug')('sockjs-client:utils:url');
}

module.exports = {
  getOrigin: function(url) {
    if (!url) {
      return null;
    }

    var p = new URL(url);
    if (p.protocol === 'file:') {
      return null;
    }

    var port = p.port;
    if (!port) {
      port = (p.protocol === 'https:') ? '443' : '80';
    }

    return p.protocol + '//' + p.hostname + ':' + port;
  }

, isOriginEqual: function(a, b) {
    var res = this.getOrigin(a) === this.getOrigin(b);
    debug('same', a, b, res);
    return res;
  }

, isSchemeEqual: function(a, b) {
    return (a.split(':')[0] === b.split(':')[0]);
  }

, addPath: function (url, path) {
    var qs = url.split('?');
    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');
  }

, addQuery: function (url, q) {
    return url + (url.indexOf('?') === -1 ? ('?' + q) : ('&' + q));
  }
};

}).call(this,{ env: {} })

},{"debug":55,"url-parse":61}],53:[function(require,module,exports){
module.exports = '1.1.4';

},{}],54:[function(require,module,exports){
/**
 * Helpers.
 */

var s = 1000
var m = s * 60
var h = m * 60
var d = h * 24
var y = d * 365.25

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function (val, options) {
  options = options || {}
  var type = typeof val
  if (type === 'string' && val.length > 0) {
    return parse(val)
  } else if (type === 'number' && isNaN(val) === false) {
    return options.long ?
			fmtLong(val) :
			fmtShort(val)
  }
  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val))
}

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str)
  if (str.length > 10000) {
    return
  }
  var match = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str)
  if (!match) {
    return
  }
  var n = parseFloat(match[1])
  var type = (match[2] || 'ms').toLowerCase()
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y
    case 'days':
    case 'day':
    case 'd':
      return n * d
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n
    default:
      return undefined
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  if (ms >= d) {
    return Math.round(ms / d) + 'd'
  }
  if (ms >= h) {
    return Math.round(ms / h) + 'h'
  }
  if (ms >= m) {
    return Math.round(ms / m) + 'm'
  }
  if (ms >= s) {
    return Math.round(ms / s) + 's'
  }
  return ms + 'ms'
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  return plural(ms, d, 'day') ||
    plural(ms, h, 'hour') ||
    plural(ms, m, 'minute') ||
    plural(ms, s, 'second') ||
    ms + ' ms'
}

/**
 * Pluralization helper.
 */

function plural(ms, n, name) {
  if (ms < n) {
    return
  }
  if (ms < n * 1.5) {
    return Math.floor(ms / n) + ' ' + name
  }
  return Math.ceil(ms / n) + ' ' + name + 's'
}

},{}],55:[function(require,module,exports){
(function (process){
/**
 * This is the web browser implementation of `debug()`.
 *
 * Expose `debug()` as the module.
 */

exports = module.exports = require('./debug');
exports.log = log;
exports.formatArgs = formatArgs;
exports.save = save;
exports.load = load;
exports.useColors = useColors;
exports.storage = 'undefined' != typeof chrome
               && 'undefined' != typeof chrome.storage
                  ? chrome.storage.local
                  : localstorage();

/**
 * Colors.
 */

exports.colors = [
  'lightseagreen',
  'forestgreen',
  'goldenrod',
  'dodgerblue',
  'darkorchid',
  'crimson'
];

/**
 * Currently only WebKit-based Web Inspectors, Firefox >= v31,
 * and the Firebug extension (any Firefox version) are known
 * to support "%c" CSS customizations.
 *
 * TODO: add a `localStorage` variable to explicitly enable/disable colors
 */

function useColors() {
  // NB: In an Electron preload script, document will be defined but not fully
  // initialized. Since we know we're in Chrome, we'll just detect this case
  // explicitly
  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {
    return true;
  }

  // is webkit? http://stackoverflow.com/a/16459606/376773
  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632
  return (typeof document !== 'undefined' && document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||
    // is firebug? http://stackoverflow.com/a/398120/376773
    (typeof window !== 'undefined' && window && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||
    // is firefox >= v31?
    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
    (typeof navigator !== 'undefined' && navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||
    // double check webkit in userAgent just in case we are in a worker
    (typeof navigator !== 'undefined' && navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}

/**
 * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.
 */

exports.formatters.j = function(v) {
  try {
    return JSON.stringify(v);
  } catch (err) {
    return '[UnexpectedJSONParseError]: ' + err.message;
  }
};


/**
 * Colorize log arguments if enabled.
 *
 * @api public
 */

function formatArgs(args) {
  var useColors = this.useColors;

  args[0] = (useColors ? '%c' : '')
    + this.namespace
    + (useColors ? ' %c' : ' ')
    + args[0]
    + (useColors ? '%c ' : ' ')
    + '+' + exports.humanize(this.diff);

  if (!useColors) return;

  var c = 'color: ' + this.color;
  args.splice(1, 0, c, 'color: inherit')

  // the final "%c" is somewhat tricky, because there could be other
  // arguments passed either before or after the %c, so we need to
  // figure out the correct index to insert the CSS into
  var index = 0;
  var lastC = 0;
  args[0].replace(/%[a-zA-Z%]/g, function(match) {
    if ('%%' === match) return;
    index++;
    if ('%c' === match) {
      // we only are interested in the *last* %c
      // (the user may have provided their own)
      lastC = index;
    }
  });

  args.splice(lastC, 0, c);
}

/**
 * Invokes `console.log()` when available.
 * No-op when `console.log` is not a "function".
 *
 * @api public
 */

function log() {
  // this hackery is required for IE8/9, where
  // the `console.log` function doesn't have 'apply'
  return 'object' === typeof console
    && console.log
    && Function.prototype.apply.call(console.log, console, arguments);
}

/**
 * Save `namespaces`.
 *
 * @param {String} namespaces
 * @api private
 */

function save(namespaces) {
  try {
    if (null == namespaces) {
      exports.storage.removeItem('debug');
    } else {
      exports.storage.debug = namespaces;
    }
  } catch(e) {}
}

/**
 * Load `namespaces`.
 *
 * @return {String} returns the previously persisted debug modes
 * @api private
 */

function load() {
  var r;
  try {
    r = exports.storage.debug;
  } catch(e) {}

  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG
  if (!r && typeof process !== 'undefined' && 'env' in process) {
    r = process.env.DEBUG;
  }

  return r;
}

/**
 * Enable namespaces listed in `localStorage.debug` initially.
 */

exports.enable(load());

/**
 * Localstorage attempts to return the localstorage.
 *
 * This is necessary because safari throws
 * when a user disables cookies/localstorage
 * and you attempt to access it.
 *
 * @return {LocalStorage}
 * @api private
 */

function localstorage() {
  try {
    return window.localStorage;
  } catch (e) {}
}

}).call(this,{ env: {} })

},{"./debug":56}],56:[function(require,module,exports){

/**
 * This is the common logic for both the Node.js and web browser
 * implementations of `debug()`.
 *
 * Expose `debug()` as the module.
 */

exports = module.exports = createDebug.debug = createDebug['default'] = createDebug;
exports.coerce = coerce;
exports.disable = disable;
exports.enable = enable;
exports.enabled = enabled;
exports.humanize = require('ms');

/**
 * The currently active debug mode names, and names to skip.
 */

exports.names = [];
exports.skips = [];

/**
 * Map of special "%n" handling functions, for the debug "format" argument.
 *
 * Valid key names are a single, lower or upper-case letter, i.e. "n" and "N".
 */

exports.formatters = {};

/**
 * Previous log timestamp.
 */

var prevTime;

/**
 * Select a color.
 * @param {String} namespace
 * @return {Number}
 * @api private
 */

function selectColor(namespace) {
  var hash = 0, i;

  for (i in namespace) {
    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);
    hash |= 0; // Convert to 32bit integer
  }

  return exports.colors[Math.abs(hash) % exports.colors.length];
}

/**
 * Create a debugger with the given `namespace`.
 *
 * @param {String} namespace
 * @return {Function}
 * @api public
 */

function createDebug(namespace) {

  function debug() {
    // disabled?
    if (!debug.enabled) return;

    var self = debug;

    // set `diff` timestamp
    var curr = +new Date();
    var ms = curr - (prevTime || curr);
    self.diff = ms;
    self.prev = prevTime;
    self.curr = curr;
    prevTime = curr;

    // turn the `arguments` into a proper Array
    var args = new Array(arguments.length);
    for (var i = 0; i < args.length; i++) {
      args[i] = arguments[i];
    }

    args[0] = exports.coerce(args[0]);

    if ('string' !== typeof args[0]) {
      // anything else let's inspect with %O
      args.unshift('%O');
    }

    // apply any `formatters` transformations
    var index = 0;
    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {
      // if we encounter an escaped % then don't increase the array index
      if (match === '%%') return match;
      index++;
      var formatter = exports.formatters[format];
      if ('function' === typeof formatter) {
        var val = args[index];
        match = formatter.call(self, val);

        // now we need to remove `args[index]` since it's inlined in the `format`
        args.splice(index, 1);
        index--;
      }
      return match;
    });

    // apply env-specific formatting (colors, etc.)
    exports.formatArgs.call(self, args);

    var logFn = debug.log || exports.log || console.log.bind(console);
    logFn.apply(self, args);
  }

  debug.namespace = namespace;
  debug.enabled = exports.enabled(namespace);
  debug.useColors = exports.useColors();
  debug.color = selectColor(namespace);

  // env-specific initialization logic for debug instances
  if ('function' === typeof exports.init) {
    exports.init(debug);
  }

  return debug;
}

/**
 * Enables a debug mode by namespaces. This can include modes
 * separated by a colon and wildcards.
 *
 * @param {String} namespaces
 * @api public
 */

function enable(namespaces) {
  exports.save(namespaces);

  exports.names = [];
  exports.skips = [];

  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\s,]+/);
  var len = split.length;

  for (var i = 0; i < len; i++) {
    if (!split[i]) continue; // ignore empty strings
    namespaces = split[i].replace(/\*/g, '.*?');
    if (namespaces[0] === '-') {
      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));
    } else {
      exports.names.push(new RegExp('^' + namespaces + '$'));
    }
  }
}

/**
 * Disable debug output.
 *
 * @api public
 */

function disable() {
  exports.enable('');
}

/**
 * Returns true if the given mode name is enabled, false otherwise.
 *
 * @param {String} name
 * @return {Boolean}
 * @api public
 */

function enabled(name) {
  var i, len;
  for (i = 0, len = exports.skips.length; i < len; i++) {
    if (exports.skips[i].test(name)) {
      return false;
    }
  }
  for (i = 0, len = exports.names.length; i < len; i++) {
    if (exports.names[i].test(name)) {
      return true;
    }
  }
  return false;
}

/**
 * Coerce `val`.
 *
 * @param {Mixed} val
 * @return {Mixed}
 * @api private
 */

function coerce(val) {
  if (val instanceof Error) return val.stack || val.message;
  return val;
}

},{"ms":54}],57:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],58:[function(require,module,exports){
(function (global){
/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */
;(function () {
  // Detect the `define` function exposed by asynchronous module loaders. The
  // strict `define` check is necessary for compatibility with `r.js`.
  var isLoader = typeof define === "function" && define.amd;

  // A set of types used to distinguish objects from primitives.
  var objectTypes = {
    "function": true,
    "object": true
  };

  // Detect the `exports` object exposed by CommonJS implementations.
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;

  // Use the `global` object exposed by Node (including Browserify via
  // `insert-module-globals`), Narwhal, and Ringo as the default context,
  // and the `window` object in browsers. Rhino exports a `global` function
  // instead.
  var root = objectTypes[typeof window] && window || this,
      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == "object" && global;

  if (freeGlobal && (freeGlobal["global"] === freeGlobal || freeGlobal["window"] === freeGlobal || freeGlobal["self"] === freeGlobal)) {
    root = freeGlobal;
  }

  // Public: Initializes JSON 3 using the given `context` object, attaching the
  // `stringify` and `parse` functions to the specified `exports` object.
  function runInContext(context, exports) {
    context || (context = root["Object"]());
    exports || (exports = root["Object"]());

    // Native constructor aliases.
    var Number = context["Number"] || root["Number"],
        String = context["String"] || root["String"],
        Object = context["Object"] || root["Object"],
        Date = context["Date"] || root["Date"],
        SyntaxError = context["SyntaxError"] || root["SyntaxError"],
        TypeError = context["TypeError"] || root["TypeError"],
        Math = context["Math"] || root["Math"],
        nativeJSON = context["JSON"] || root["JSON"];

    // Delegate to the native `stringify` and `parse` implementations.
    if (typeof nativeJSON == "object" && nativeJSON) {
      exports.stringify = nativeJSON.stringify;
      exports.parse = nativeJSON.parse;
    }

    // Convenience aliases.
    var objectProto = Object.prototype,
        getClass = objectProto.toString,
        isProperty, forEach, undef;

    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.
    var isExtended = new Date(-3509827334573292);
    try {
      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical
      // results for certain dates in Opera >= 10.53.
      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&
        // Safari < 2.0.2 stores the internal millisecond time value correctly,
        // but clips the values returned by the date methods to the range of
        // signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).
        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;
    } catch (exception) {}

    // Internal: Determines whether the native `JSON.stringify` and `parse`
    // implementations are spec-compliant. Based on work by Ken Snyder.
    function has(name) {
      if (has[name] !== undef) {
        // Return cached feature test result.
        return has[name];
      }
      var isSupported;
      if (name == "bug-string-char-index") {
        // IE <= 7 doesn't support accessing string characters using square
        // bracket notation. IE 8 only supports this for primitives.
        isSupported = "a"[0] != "a";
      } else if (name == "json") {
        // Indicates whether both `JSON.stringify` and `JSON.parse` are
        // supported.
        isSupported = has("json-stringify") && has("json-parse");
      } else {
        var value, serialized = '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';
        // Test `JSON.stringify`.
        if (name == "json-stringify") {
          var stringify = exports.stringify, stringifySupported = typeof stringify == "function" && isExtended;
          if (stringifySupported) {
            // A test function object with a custom `toJSON` method.
            (value = function () {
              return 1;
            }).toJSON = value;
            try {
              stringifySupported =
                // Firefox 3.1b1 and b2 serialize string, number, and boolean
                // primitives as object literals.
                stringify(0) === "0" &&
                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object
                // literals.
                stringify(new Number()) === "0" &&
                stringify(new String()) == '""' &&
                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or
                // does not define a canonical JSON representation (this applies to
                // objects with `toJSON` properties as well, *unless* they are nested
                // within an object or array).
                stringify(getClass) === undef &&
                // IE 8 serializes `undefined` as `"undefined"`. Safari <= 5.1.7 and
                // FF 3.1b3 pass this test.
                stringify(undef) === undef &&
                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,
                // respectively, if the value is omitted entirely.
                stringify() === undef &&
                // FF 3.1b1, 2 throw an error if the given value is not a number,
                // string, array, object, Boolean, or `null` literal. This applies to
                // objects with custom `toJSON` methods as well, unless they are nested
                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`
                // methods entirely.
                stringify(value) === "1" &&
                stringify([value]) == "[1]" &&
                // Prototype <= 1.6.1 serializes `[undefined]` as `"[]"` instead of
                // `"[null]"`.
                stringify([undef]) == "[null]" &&
                // YUI 3.0.0b1 fails to serialize `null` literals.
                stringify(null) == "null" &&
                // FF 3.1b1, 2 halts serialization if an array contains a function:
                // `[1, true, getClass, 1]` serializes as "[1,true,],". FF 3.1b3
                // elides non-JSON values from objects and arrays, unless they
                // define custom `toJSON` methods.
                stringify([undef, getClass, null]) == "[null,null,null]" &&
                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences
                // where character escape codes are expected (e.g., `\b` => `\u0008`).
                stringify({ "a": [value, true, false, null, "\x00\b\n\f\r\t"] }) == serialized &&
                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.
                stringify(null, value) === "1" &&
                stringify([1, 2], null, 1) == "[\n 1,\n 2\n]" &&
                // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly
                // serialize extended years.
                stringify(new Date(-8.64e15)) == '"-271821-04-20T00:00:00.000Z"' &&
                // The milliseconds are optional in ES 5, but required in 5.1.
                stringify(new Date(8.64e15)) == '"+275760-09-13T00:00:00.000Z"' &&
                // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative
                // four-digit years instead of six-digit years. Credits: @Yaffle.
                stringify(new Date(-621987552e5)) == '"-000001-01-01T00:00:00.000Z"' &&
                // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond
                // values less than 1000. Credits: @Yaffle.
                stringify(new Date(-1)) == '"1969-12-31T23:59:59.999Z"';
            } catch (exception) {
              stringifySupported = false;
            }
          }
          isSupported = stringifySupported;
        }
        // Test `JSON.parse`.
        if (name == "json-parse") {
          var parse = exports.parse;
          if (typeof parse == "function") {
            try {
              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.
              // Conforming implementations should also coerce the initial argument to
              // a string prior to parsing.
              if (parse("0") === 0 && !parse(false)) {
                // Simple parsing test.
                value = parse(serialized);
                var parseSupported = value["a"].length == 5 && value["a"][0] === 1;
                if (parseSupported) {
                  try {
                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.
                    parseSupported = !parse('"\t"');
                  } catch (exception) {}
                  if (parseSupported) {
                    try {
                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading
                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow
                      // certain octal literals.
                      parseSupported = parse("01") !== 1;
                    } catch (exception) {}
                  }
                  if (parseSupported) {
                    try {
                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal
                      // points. These environments, along with FF 3.1b1 and 2,
                      // also allow trailing commas in JSON objects and arrays.
                      parseSupported = parse("1.") !== 1;
                    } catch (exception) {}
                  }
                }
              }
            } catch (exception) {
              parseSupported = false;
            }
          }
          isSupported = parseSupported;
        }
      }
      return has[name] = !!isSupported;
    }

    if (!has("json")) {
      // Common `[[Class]]` name aliases.
      var functionClass = "[object Function]",
          dateClass = "[object Date]",
          numberClass = "[object Number]",
          stringClass = "[object String]",
          arrayClass = "[object Array]",
          booleanClass = "[object Boolean]";

      // Detect incomplete support for accessing string characters by index.
      var charIndexBuggy = has("bug-string-char-index");

      // Define additional utility methods if the `Date` methods are buggy.
      if (!isExtended) {
        var floor = Math.floor;
        // A mapping between the months of the year and the number of days between
        // January 1st and the first of the respective month.
        var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
        // Internal: Calculates the number of days between the Unix epoch and the
        // first day of the given month.
        var getDay = function (year, month) {
          return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);
        };
      }

      // Internal: Determines if a property is a direct property of the given
      // object. Delegates to the native `Object#hasOwnProperty` method.
      if (!(isProperty = objectProto.hasOwnProperty)) {
        isProperty = function (property) {
          var members = {}, constructor;
          if ((members.__proto__ = null, members.__proto__ = {
            // The *proto* property cannot be set multiple times in recent
            // versions of Firefox and SeaMonkey.
            "toString": 1
          }, members).toString != getClass) {
            // Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but
            // supports the mutable *proto* property.
            isProperty = function (property) {
              // Capture and break the object's prototype chain (see section 8.6.2
              // of the ES 5.1 spec). The parenthesized expression prevents an
              // unsafe transformation by the Closure Compiler.
              var original = this.__proto__, result = property in (this.__proto__ = null, this);
              // Restore the original prototype chain.
              this.__proto__ = original;
              return result;
            };
          } else {
            // Capture a reference to the top-level `Object` constructor.
            constructor = members.constructor;
            // Use the `constructor` property to simulate `Object#hasOwnProperty` in
            // other environments.
            isProperty = function (property) {
              var parent = (this.constructor || constructor).prototype;
              return property in this && !(property in parent && this[property] === parent[property]);
            };
          }
          members = null;
          return isProperty.call(this, property);
        };
      }

      // Internal: Normalizes the `for...in` iteration algorithm across
      // environments. Each enumerated key is yielded to a `callback` function.
      forEach = function (object, callback) {
        var size = 0, Properties, members, property;

        // Tests for bugs in the current environment's `for...in` algorithm. The
        // `valueOf` property inherits the non-enumerable flag from
        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.
        (Properties = function () {
          this.valueOf = 0;
        }).prototype.valueOf = 0;

        // Iterate over a new instance of the `Properties` class.
        members = new Properties();
        for (property in members) {
          // Ignore all properties inherited from `Object.prototype`.
          if (isProperty.call(members, property)) {
            size++;
          }
        }
        Properties = members = null;

        // Normalize the iteration algorithm.
        if (!size) {
          // A list of non-enumerable properties inherited from `Object.prototype`.
          members = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"];
          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable
          // properties.
          forEach = function (object, callback) {
            var isFunction = getClass.call(object) == functionClass, property, length;
            var hasProperty = !isFunction && typeof object.constructor != "function" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;
            for (property in object) {
              // Gecko <= 1.0 enumerates the `prototype` property of functions under
              // certain conditions; IE does not.
              if (!(isFunction && property == "prototype") && hasProperty.call(object, property)) {
                callback(property);
              }
            }
            // Manually invoke the callback for each non-enumerable property.
            for (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));
          };
        } else if (size == 2) {
          // Safari <= 2.0.4 enumerates shadowed properties twice.
          forEach = function (object, callback) {
            // Create a set of iterated properties.
            var members = {}, isFunction = getClass.call(object) == functionClass, property;
            for (property in object) {
              // Store each property name to prevent double enumeration. The
              // `prototype` property of functions is not enumerated due to cross-
              // environment inconsistencies.
              if (!(isFunction && property == "prototype") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {
                callback(property);
              }
            }
          };
        } else {
          // No bugs detected; use the standard `for...in` algorithm.
          forEach = function (object, callback) {
            var isFunction = getClass.call(object) == functionClass, property, isConstructor;
            for (property in object) {
              if (!(isFunction && property == "prototype") && isProperty.call(object, property) && !(isConstructor = property === "constructor")) {
                callback(property);
              }
            }
            // Manually invoke the callback for the `constructor` property due to
            // cross-environment inconsistencies.
            if (isConstructor || isProperty.call(object, (property = "constructor"))) {
              callback(property);
            }
          };
        }
        return forEach(object, callback);
      };

      // Public: Serializes a JavaScript `value` as a JSON string. The optional
      // `filter` argument may specify either a function that alters how object and
      // array members are serialized, or an array of strings and numbers that
      // indicates which properties should be serialized. The optional `width`
      // argument may be either a string or number that specifies the indentation
      // level of the output.
      if (!has("json-stringify")) {
        // Internal: A map of control characters and their escaped equivalents.
        var Escapes = {
          92: "\\\\",
          34: '\\"',
          8: "\\b",
          12: "\\f",
          10: "\\n",
          13: "\\r",
          9: "\\t"
        };

        // Internal: Converts `value` into a zero-padded string such that its
        // length is at least equal to `width`. The `width` must be <= 6.
        var leadingZeroes = "000000";
        var toPaddedString = function (width, value) {
          // The `|| 0` expression is necessary to work around a bug in
          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== "0"`.
          return (leadingZeroes + (value || 0)).slice(-width);
        };

        // Internal: Double-quotes a string `value`, replacing all ASCII control
        // characters (characters with code unit values between 0 and 31) with
        // their escaped equivalents. This is an implementation of the
        // `Quote(value)` operation defined in ES 5.1 section 15.12.3.
        var unicodePrefix = "\\u00";
        var quote = function (value) {
          var result = '"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;
          var symbols = useCharIndex && (charIndexBuggy ? value.split("") : value);
          for (; index < length; index++) {
            var charCode = value.charCodeAt(index);
            // If the character is a control character, append its Unicode or
            // shorthand escape sequence; otherwise, append the character as-is.
            switch (charCode) {
              case 8: case 9: case 10: case 12: case 13: case 34: case 92:
                result += Escapes[charCode];
                break;
              default:
                if (charCode < 32) {
                  result += unicodePrefix + toPaddedString(2, charCode.toString(16));
                  break;
                }
                result += useCharIndex ? symbols[index] : value.charAt(index);
            }
          }
          return result + '"';
        };

        // Internal: Recursively serializes an object. Implements the
        // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.
        var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {
          var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;
          try {
            // Necessary for host object support.
            value = object[property];
          } catch (exception) {}
          if (typeof value == "object" && value) {
            className = getClass.call(value);
            if (className == dateClass && !isProperty.call(value, "toJSON")) {
              if (value > -1 / 0 && value < 1 / 0) {
                // Dates are serialized according to the `Date#toJSON` method
                // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15
                // for the ISO 8601 date time string format.
                if (getDay) {
                  // Manually compute the year, month, date, hours, minutes,
                  // seconds, and milliseconds if the `getUTC*` methods are
                  // buggy. Adapted from @Yaffle's `date-shim` project.
                  date = floor(value / 864e5);
                  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);
                  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);
                  date = 1 + date - getDay(year, month);
                  // The `time` value specifies the time within the day (see ES
                  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used
                  // to compute `A modulo B`, as the `%` operator does not
                  // correspond to the `modulo` operation for negative numbers.
                  time = (value % 864e5 + 864e5) % 864e5;
                  // The hours, minutes, seconds, and milliseconds are obtained by
                  // decomposing the time within the day. See section 15.9.1.10.
                  hours = floor(time / 36e5) % 24;
                  minutes = floor(time / 6e4) % 60;
                  seconds = floor(time / 1e3) % 60;
                  milliseconds = time % 1e3;
                } else {
                  year = value.getUTCFullYear();
                  month = value.getUTCMonth();
                  date = value.getUTCDate();
                  hours = value.getUTCHours();
                  minutes = value.getUTCMinutes();
                  seconds = value.getUTCSeconds();
                  milliseconds = value.getUTCMilliseconds();
                }
                // Serialize extended years correctly.
                value = (year <= 0 || year >= 1e4 ? (year < 0 ? "-" : "+") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +
                  "-" + toPaddedString(2, month + 1) + "-" + toPaddedString(2, date) +
                  // Months, dates, hours, minutes, and seconds should have two
                  // digits; milliseconds should have three.
                  "T" + toPaddedString(2, hours) + ":" + toPaddedString(2, minutes) + ":" + toPaddedString(2, seconds) +
                  // Milliseconds are optional in ES 5.0, but required in 5.1.
                  "." + toPaddedString(3, milliseconds) + "Z";
              } else {
                value = null;
              }
            } else if (typeof value.toJSON == "function" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, "toJSON"))) {
              // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the
              // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3
              // ignores all `toJSON` methods on these objects unless they are
              // defined directly on an instance.
              value = value.toJSON(property);
            }
          }
          if (callback) {
            // If a replacement function was provided, call it to obtain the value
            // for serialization.
            value = callback.call(object, property, value);
          }
          if (value === null) {
            return "null";
          }
          className = getClass.call(value);
          if (className == booleanClass) {
            // Booleans are represented literally.
            return "" + value;
          } else if (className == numberClass) {
            // JSON numbers must be finite. `Infinity` and `NaN` are serialized as
            // `"null"`.
            return value > -1 / 0 && value < 1 / 0 ? "" + value : "null";
          } else if (className == stringClass) {
            // Strings are double-quoted and escaped.
            return quote("" + value);
          }
          // Recursively serialize objects and arrays.
          if (typeof value == "object") {
            // Check for cyclic structures. This is a linear search; performance
            // is inversely proportional to the number of unique nested objects.
            for (length = stack.length; length--;) {
              if (stack[length] === value) {
                // Cyclic structures cannot be serialized by `JSON.stringify`.
                throw TypeError();
              }
            }
            // Add the object to the stack of traversed objects.
            stack.push(value);
            results = [];
            // Save the current indentation level and indent one additional level.
            prefix = indentation;
            indentation += whitespace;
            if (className == arrayClass) {
              // Recursively serialize array elements.
              for (index = 0, length = value.length; index < length; index++) {
                element = serialize(index, value, callback, properties, whitespace, indentation, stack);
                results.push(element === undef ? "null" : element);
              }
              result = results.length ? (whitespace ? "[\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "]" : ("[" + results.join(",") + "]")) : "[]";
            } else {
              // Recursively serialize object members. Members are selected from
              // either a user-specified list of property names, or the object
              // itself.
              forEach(properties || value, function (property) {
                var element = serialize(property, value, callback, properties, whitespace, indentation, stack);
                if (element !== undef) {
                  // According to ES 5.1 section 15.12.3: "If `gap` {whitespace}
                  // is not the empty string, let `member` {quote(property) + ":"}
                  // be the concatenation of `member` and the `space` character."
                  // The "`space` character" refers to the literal space
                  // character, not the `space` {width} argument provided to
                  // `JSON.stringify`.
                  results.push(quote(property) + ":" + (whitespace ? " " : "") + element);
                }
              });
              result = results.length ? (whitespace ? "{\n" + indentation + results.join(",\n" + indentation) + "\n" + prefix + "}" : ("{" + results.join(",") + "}")) : "{}";
            }
            // Remove the object from the traversed object stack.
            stack.pop();
            return result;
          }
        };

        // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.
        exports.stringify = function (source, filter, width) {
          var whitespace, callback, properties, className;
          if (objectTypes[typeof filter] && filter) {
            if ((className = getClass.call(filter)) == functionClass) {
              callback = filter;
            } else if (className == arrayClass) {
              // Convert the property names array into a makeshift set.
              properties = {};
              for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));
            }
          }
          if (width) {
            if ((className = getClass.call(width)) == numberClass) {
              // Convert the `width` to an integer and create a string containing
              // `width` number of space characters.
              if ((width -= width % 1) > 0) {
                for (whitespace = "", width > 10 && (width = 10); whitespace.length < width; whitespace += " ");
              }
            } else if (className == stringClass) {
              whitespace = width.length <= 10 ? width : width.slice(0, 10);
            }
          }
          // Opera <= 7.54u2 discards the values associated with empty string keys
          // (`""`) only if they are used directly within an object member list
          // (e.g., `!("" in { "": 1})`).
          return serialize("", (value = {}, value[""] = source, value), callback, properties, whitespace, "", []);
        };
      }

      // Public: Parses a JSON source string.
      if (!has("json-parse")) {
        var fromCharCode = String.fromCharCode;

        // Internal: A map of escaped control characters and their unescaped
        // equivalents.
        var Unescapes = {
          92: "\\",
          34: '"',
          47: "/",
          98: "\b",
          116: "\t",
          110: "\n",
          102: "\f",
          114: "\r"
        };

        // Internal: Stores the parser state.
        var Index, Source;

        // Internal: Resets the parser state and throws a `SyntaxError`.
        var abort = function () {
          Index = Source = null;
          throw SyntaxError();
        };

        // Internal: Returns the next token, or `"$"` if the parser has reached
        // the end of the source string. A token may be a string, number, `null`
        // literal, or Boolean literal.
        var lex = function () {
          var source = Source, length = source.length, value, begin, position, isSigned, charCode;
          while (Index < length) {
            charCode = source.charCodeAt(Index);
            switch (charCode) {
              case 9: case 10: case 13: case 32:
                // Skip whitespace tokens, including tabs, carriage returns, line
                // feeds, and space characters.
                Index++;
                break;
              case 123: case 125: case 91: case 93: case 58: case 44:
                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at
                // the current position.
                value = charIndexBuggy ? source.charAt(Index) : source[Index];
                Index++;
                return value;
              case 34:
                // `"` delimits a JSON string; advance to the next character and
                // begin parsing the string. String tokens are prefixed with the
                // sentinel `@` character to distinguish them from punctuators and
                // end-of-string tokens.
                for (value = "@", Index++; Index < length;) {
                  charCode = source.charCodeAt(Index);
                  if (charCode < 32) {
                    // Unescaped ASCII control characters (those with a code unit
                    // less than the space character) are not permitted.
                    abort();
                  } else if (charCode == 92) {
                    // A reverse solidus (`\`) marks the beginning of an escaped
                    // control character (including `"`, `\`, and `/`) or Unicode
                    // escape sequence.
                    charCode = source.charCodeAt(++Index);
                    switch (charCode) {
                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:
                        // Revive escaped control characters.
                        value += Unescapes[charCode];
                        Index++;
                        break;
                      case 117:
                        // `\u` marks the beginning of a Unicode escape sequence.
                        // Advance to the first character and validate the
                        // four-digit code point.
                        begin = ++Index;
                        for (position = Index + 4; Index < position; Index++) {
                          charCode = source.charCodeAt(Index);
                          // A valid sequence comprises four hexdigits (case-
                          // insensitive) that form a single hexadecimal value.
                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {
                            // Invalid Unicode escape sequence.
                            abort();
                          }
                        }
                        // Revive the escaped character.
                        value += fromCharCode("0x" + source.slice(begin, Index));
                        break;
                      default:
                        // Invalid escape sequence.
                        abort();
                    }
                  } else {
                    if (charCode == 34) {
                      // An unescaped double-quote character marks the end of the
                      // string.
                      break;
                    }
                    charCode = source.charCodeAt(Index);
                    begin = Index;
                    // Optimize for the common case where a string is valid.
                    while (charCode >= 32 && charCode != 92 && charCode != 34) {
                      charCode = source.charCodeAt(++Index);
                    }
                    // Append the string as-is.
                    value += source.slice(begin, Index);
                  }
                }
                if (source.charCodeAt(Index) == 34) {
                  // Advance to the next character and return the revived string.
                  Index++;
                  return value;
                }
                // Unterminated string.
                abort();
              default:
                // Parse numbers and literals.
                begin = Index;
                // Advance past the negative sign, if one is specified.
                if (charCode == 45) {
                  isSigned = true;
                  charCode = source.charCodeAt(++Index);
                }
                // Parse an integer or floating-point value.
                if (charCode >= 48 && charCode <= 57) {
                  // Leading zeroes are interpreted as octal literals.
                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {
                    // Illegal octal literal.
                    abort();
                  }
                  isSigned = false;
                  // Parse the integer component.
                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);
                  // Floats cannot contain a leading decimal point; however, this
                  // case is already accounted for by the parser.
                  if (source.charCodeAt(Index) == 46) {
                    position = ++Index;
                    // Parse the decimal component.
                    for (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);
                    if (position == Index) {
                      // Illegal trailing decimal.
                      abort();
                    }
                    Index = position;
                  }
                  // Parse exponents. The `e` denoting the exponent is
                  // case-insensitive.
                  charCode = source.charCodeAt(Index);
                  if (charCode == 101 || charCode == 69) {
                    charCode = source.charCodeAt(++Index);
                    // Skip past the sign following the exponent, if one is
                    // specified.
                    if (charCode == 43 || charCode == 45) {
                      Index++;
                    }
                    // Parse the exponential component.
                    for (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);
                    if (position == Index) {
                      // Illegal empty exponent.
                      abort();
                    }
                    Index = position;
                  }
                  // Coerce the parsed value to a JavaScript number.
                  return +source.slice(begin, Index);
                }
                // A negative sign may only precede numbers.
                if (isSigned) {
                  abort();
                }
                // `true`, `false`, and `null` literals.
                if (source.slice(Index, Index + 4) == "true") {
                  Index += 4;
                  return true;
                } else if (source.slice(Index, Index + 5) == "false") {
                  Index += 5;
                  return false;
                } else if (source.slice(Index, Index + 4) == "null") {
                  Index += 4;
                  return null;
                }
                // Unrecognized token.
                abort();
            }
          }
          // Return the sentinel `$` character if the parser has reached the end
          // of the source string.
          return "$";
        };

        // Internal: Parses a JSON `value` token.
        var get = function (value) {
          var results, hasMembers;
          if (value == "$") {
            // Unexpected end of input.
            abort();
          }
          if (typeof value == "string") {
            if ((charIndexBuggy ? value.charAt(0) : value[0]) == "@") {
              // Remove the sentinel `@` character.
              return value.slice(1);
            }
            // Parse object and array literals.
            if (value == "[") {
              // Parses a JSON array, returning a new JavaScript array.
              results = [];
              for (;; hasMembers || (hasMembers = true)) {
                value = lex();
                // A closing square bracket marks the end of the array literal.
                if (value == "]") {
                  break;
                }
                // If the array literal contains elements, the current token
                // should be a comma separating the previous element from the
                // next.
                if (hasMembers) {
                  if (value == ",") {
                    value = lex();
                    if (value == "]") {
                      // Unexpected trailing `,` in array literal.
                      abort();
                    }
                  } else {
                    // A `,` must separate each array element.
                    abort();
                  }
                }
                // Elisions and leading commas are not permitted.
                if (value == ",") {
                  abort();
                }
                results.push(get(value));
              }
              return results;
            } else if (value == "{") {
              // Parses a JSON object, returning a new JavaScript object.
              results = {};
              for (;; hasMembers || (hasMembers = true)) {
                value = lex();
                // A closing curly brace marks the end of the object literal.
                if (value == "}") {
                  break;
                }
                // If the object literal contains members, the current token
                // should be a comma separator.
                if (hasMembers) {
                  if (value == ",") {
                    value = lex();
                    if (value == "}") {
                      // Unexpected trailing `,` in object literal.
                      abort();
                    }
                  } else {
                    // A `,` must separate each object member.
                    abort();
                  }
                }
                // Leading commas are not permitted, object property names must be
                // double-quoted strings, and a `:` must separate each property
                // name and value.
                if (value == "," || typeof value != "string" || (charIndexBuggy ? value.charAt(0) : value[0]) != "@" || lex() != ":") {
                  abort();
                }
                results[value.slice(1)] = get(lex());
              }
              return results;
            }
            // Unexpected token encountered.
            abort();
          }
          return value;
        };

        // Internal: Updates a traversed object member.
        var update = function (source, property, callback) {
          var element = walk(source, property, callback);
          if (element === undef) {
            delete source[property];
          } else {
            source[property] = element;
          }
        };

        // Internal: Recursively traverses a parsed JSON object, invoking the
        // `callback` function for each value. This is an implementation of the
        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.
        var walk = function (source, property, callback) {
          var value = source[property], length;
          if (typeof value == "object" && value) {
            // `forEach` can't be used to traverse an array in Opera <= 8.54
            // because its `Object#hasOwnProperty` implementation returns `false`
            // for array indices (e.g., `![1, 2, 3].hasOwnProperty("0")`).
            if (getClass.call(value) == arrayClass) {
              for (length = value.length; length--;) {
                update(value, length, callback);
              }
            } else {
              forEach(value, function (property) {
                update(value, property, callback);
              });
            }
          }
          return callback.call(source, property, value);
        };

        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.
        exports.parse = function (source, callback) {
          var result, value;
          Index = 0;
          Source = "" + source;
          result = get(lex());
          // If a JSON string contains multiple tokens, it is invalid.
          if (lex() != "$") {
            abort();
          }
          // Reset the parser state.
          Index = Source = null;
          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[""] = result, value), "", callback) : result;
        };
      }
    }

    exports["runInContext"] = runInContext;
    return exports;
  }

  if (freeExports && !isLoader) {
    // Export for CommonJS environments.
    runInContext(root, freeExports);
  } else {
    // Export for web browsers and JavaScript engines.
    var nativeJSON = root.JSON,
        previousJSON = root["JSON3"],
        isRestored = false;

    var JSON3 = runInContext(root, (root["JSON3"] = {
      // Public: Restores the original value of the global `JSON` object and
      // returns a reference to the `JSON3` object.
      "noConflict": function () {
        if (!isRestored) {
          isRestored = true;
          root.JSON = nativeJSON;
          root["JSON3"] = previousJSON;
          nativeJSON = previousJSON = null;
        }
        return JSON3;
      }
    }));

    root.JSON = {
      "parse": JSON3.parse,
      "stringify": JSON3.stringify
    };
  }

  // Export for asynchronous module loaders.
  if (isLoader) {
    define(function () {
      return JSON3;
    });
  }
}).call(this);

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],59:[function(require,module,exports){
'use strict';

var has = Object.prototype.hasOwnProperty;

/**
 * Simple query string parser.
 *
 * @param {String} query The query string that needs to be parsed.
 * @returns {Object}
 * @api public
 */
function querystring(query) {
  var parser = /([^=?&]+)=?([^&]*)/g
    , result = {}
    , part;

  //
  // Little nifty parsing hack, leverage the fact that RegExp.exec increments
  // the lastIndex property so we can continue executing this loop until we've
  // parsed all results.
  //
  for (;
    part = parser.exec(query);
    result[decodeURIComponent(part[1])] = decodeURIComponent(part[2])
  );

  return result;
}

/**
 * Transform a query string to an object.
 *
 * @param {Object} obj Object that should be transformed.
 * @param {String} prefix Optional prefix.
 * @returns {String}
 * @api public
 */
function querystringify(obj, prefix) {
  prefix = prefix || '';

  var pairs = [];

  //
  // Optionally prefix with a '?' if needed
  //
  if ('string' !== typeof prefix) prefix = '?';

  for (var key in obj) {
    if (has.call(obj, key)) {
      pairs.push(encodeURIComponent(key) +'='+ encodeURIComponent(obj[key]));
    }
  }

  return pairs.length ? prefix + pairs.join('&') : '';
}

//
// Expose the module.
//
exports.stringify = querystringify;
exports.parse = querystring;

},{}],60:[function(require,module,exports){
'use strict';

/**
 * Check if we're required to add a port number.
 *
 * @see https://url.spec.whatwg.org/#default-port
 * @param {Number|String} port Port number we need to check
 * @param {String} protocol Protocol we need to check against.
 * @returns {Boolean} Is it a default port for the given protocol
 * @api private
 */
module.exports = function required(port, protocol) {
  protocol = protocol.split(':')[0];
  port = +port;

  if (!port) return false;

  switch (protocol) {
    case 'http':
    case 'ws':
    return port !== 80;

    case 'https':
    case 'wss':
    return port !== 443;

    case 'ftp':
    return port !== 21;

    case 'gopher':
    return port !== 70;

    case 'file':
    return false;
  }

  return port !== 0;
};

},{}],61:[function(require,module,exports){
'use strict';

var required = require('requires-port')
  , lolcation = require('./lolcation')
  , qs = require('querystringify')
  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i;

/**
 * These are the parse rules for the URL parser, it informs the parser
 * about:
 *
 * 0. The char it Needs to parse, if it's a string it should be done using
 *    indexOf, RegExp using exec and NaN means set as current value.
 * 1. The property we should set when parsing this value.
 * 2. Indication if it's backwards or forward parsing, when set as number it's
 *    the value of extra chars that should be split off.
 * 3. Inherit from location if non existing in the parser.
 * 4. `toLowerCase` the resulting value.
 */
var rules = [
  ['#', 'hash'],                        // Extract from the back.
  ['?', 'query'],                       // Extract from the back.
  ['/', 'pathname'],                    // Extract from the back.
  ['@', 'auth', 1],                     // Extract from the front.
  [NaN, 'host', undefined, 1, 1],       // Set left over value.
  [/:(\d+)$/, 'port', undefined, 1],    // RegExp the back.
  [NaN, 'hostname', undefined, 1, 1]    // Set left over.
];

/**
 * @typedef ProtocolExtract
 * @type Object
 * @property {String} protocol Protocol matched in the URL, in lowercase.
 * @property {Boolean} slashes `true` if protocol is followed by "//", else `false`.
 * @property {String} rest Rest of the URL that is not part of the protocol.
 */

/**
 * Extract protocol information from a URL with/without double slash ("//").
 *
 * @param {String} address URL we want to extract from.
 * @return {ProtocolExtract} Extracted information.
 * @api private
 */
function extractProtocol(address) {
  var match = protocolre.exec(address);

  return {
    protocol: match[1] ? match[1].toLowerCase() : '',
    slashes: !!match[2],
    rest: match[3]
  };
}

/**
 * Resolve a relative URL pathname against a base URL pathname.
 *
 * @param {String} relative Pathname of the relative URL.
 * @param {String} base Pathname of the base URL.
 * @return {String} Resolved pathname.
 * @api private
 */
function resolve(relative, base) {
  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))
    , i = path.length
    , last = path[i - 1]
    , unshift = false
    , up = 0;

  while (i--) {
    if (path[i] === '.') {
      path.splice(i, 1);
    } else if (path[i] === '..') {
      path.splice(i, 1);
      up++;
    } else if (up) {
      if (i === 0) unshift = true;
      path.splice(i, 1);
      up--;
    }
  }

  if (unshift) path.unshift('');
  if (last === '.' || last === '..') path.push('');

  return path.join('/');
}

/**
 * The actual URL instance. Instead of returning an object we've opted-in to
 * create an actual constructor as it's much more memory efficient and
 * faster and it pleases my OCD.
 *
 * @constructor
 * @param {String} address URL we want to parse.
 * @param {Object|String} location Location defaults for relative paths.
 * @param {Boolean|Function} parser Parser for the query string.
 * @api public
 */
function URL(address, location, parser) {
  if (!(this instanceof URL)) {
    return new URL(address, location, parser);
  }

  var relative, extracted, parse, instruction, index, key
    , instructions = rules.slice()
    , type = typeof location
    , url = this
    , i = 0;

  //
  // The following if statements allows this module two have compatibility with
  // 2 different API:
  //
  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments
  //    where the boolean indicates that the query string should also be parsed.
  //
  // 2. The `URL` interface of the browser which accepts a URL, object as
  //    arguments. The supplied object will be used as default values / fall-back
  //    for relative paths.
  //
  if ('object' !== type && 'string' !== type) {
    parser = location;
    location = null;
  }

  if (parser && 'function' !== typeof parser) parser = qs.parse;

  location = lolcation(location);

  //
  // Extract protocol information before running the instructions.
  //
  extracted = extractProtocol(address || '');
  relative = !extracted.protocol && !extracted.slashes;
  url.slashes = extracted.slashes || relative && location.slashes;
  url.protocol = extracted.protocol || location.protocol || '';
  address = extracted.rest;

  //
  // When the authority component is absent the URL starts with a path
  // component.
  //
  if (!extracted.slashes) instructions[2] = [/(.*)/, 'pathname'];

  for (; i < instructions.length; i++) {
    instruction = instructions[i];
    parse = instruction[0];
    key = instruction[1];

    if (parse !== parse) {
      url[key] = address;
    } else if ('string' === typeof parse) {
      if (~(index = address.indexOf(parse))) {
        if ('number' === typeof instruction[2]) {
          url[key] = address.slice(0, index);
          address = address.slice(index + instruction[2]);
        } else {
          url[key] = address.slice(index);
          address = address.slice(0, index);
        }
      }
    } else if ((index = parse.exec(address))) {
      url[key] = index[1];
      address = address.slice(0, index.index);
    }

    url[key] = url[key] || (
      relative && instruction[3] ? location[key] || '' : ''
    );

    //
    // Hostname, host and protocol should be lowercased so they can be used to
    // create a proper `origin`.
    //
    if (instruction[4]) url[key] = url[key].toLowerCase();
  }

  //
  // Also parse the supplied query string in to an object. If we're supplied
  // with a custom parser as function use that instead of the default build-in
  // parser.
  //
  if (parser) url.query = parser(url.query);

  //
  // If the URL is relative, resolve the pathname against the base URL.
  //
  if (
      relative
    && location.slashes
    && url.pathname.charAt(0) !== '/'
    && (url.pathname !== '' || location.pathname !== '')
  ) {
    url.pathname = resolve(url.pathname, location.pathname);
  }

  //
  // We should not add port numbers if they are already the default port number
  // for a given protocol. As the host also contains the port number we're going
  // override it with the hostname which contains no port number.
  //
  if (!required(url.port, url.protocol)) {
    url.host = url.hostname;
    url.port = '';
  }

  //
  // Parse down the `auth` for the username and password.
  //
  url.username = url.password = '';
  if (url.auth) {
    instruction = url.auth.split(':');
    url.username = instruction[0] || '';
    url.password = instruction[1] || '';
  }

  url.origin = url.protocol && url.host && url.protocol !== 'file:'
    ? url.protocol +'//'+ url.host
    : 'null';

  //
  // The href is just the compiled result.
  //
  url.href = url.toString();
}

/**
 * This is convenience method for changing properties in the URL instance to
 * insure that they all propagate correctly.
 *
 * @param {String} part          Property we need to adjust.
 * @param {Mixed} value          The newly assigned value.
 * @param {Boolean|Function} fn  When setting the query, it will be the function
 *                               used to parse the query.
 *                               When setting the protocol, double slash will be
 *                               removed from the final url if it is true.
 * @returns {URL}
 * @api public
 */
function set(part, value, fn) {
  var url = this;

  switch (part) {
    case 'query':
      if ('string' === typeof value && value.length) {
        value = (fn || qs.parse)(value);
      }

      url[part] = value;
      break;

    case 'port':
      url[part] = value;

      if (!required(value, url.protocol)) {
        url.host = url.hostname;
        url[part] = '';
      } else if (value) {
        url.host = url.hostname +':'+ value;
      }

      break;

    case 'hostname':
      url[part] = value;

      if (url.port) value += ':'+ url.port;
      url.host = value;
      break;

    case 'host':
      url[part] = value;

      if (/:\d+$/.test(value)) {
        value = value.split(':');
        url.port = value.pop();
        url.hostname = value.join(':');
      } else {
        url.hostname = value;
        url.port = '';
      }

      break;

    case 'protocol':
      url.protocol = value.toLowerCase();
      url.slashes = !fn;
      break;

    case 'pathname':
      url.pathname = value.length && value.charAt(0) !== '/' ? '/' + value : value;

      break;

    default:
      url[part] = value;
  }

  for (var i = 0; i < rules.length; i++) {
    var ins = rules[i];

    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();
  }

  url.origin = url.protocol && url.host && url.protocol !== 'file:'
    ? url.protocol +'//'+ url.host
    : 'null';

  url.href = url.toString();

  return url;
};

/**
 * Transform the properties back in to a valid and full URL string.
 *
 * @param {Function} stringify Optional query stringify function.
 * @returns {String}
 * @api public
 */
function toString(stringify) {
  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;

  var query
    , url = this
    , protocol = url.protocol;

  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';

  var result = protocol + (url.slashes ? '//' : '');

  if (url.username) {
    result += url.username;
    if (url.password) result += ':'+ url.password;
    result += '@';
  }

  result += url.host + url.pathname;

  query = 'object' === typeof url.query ? stringify(url.query) : url.query;
  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;

  if (url.hash) result += url.hash;

  return result;
}

URL.prototype = { set: set, toString: toString };

//
// Expose the URL parser and some additional properties that might be useful for
// others or testing.
//
URL.extractProtocol = extractProtocol;
URL.location = lolcation;
URL.qs = qs;

module.exports = URL;

},{"./lolcation":62,"querystringify":59,"requires-port":60}],62:[function(require,module,exports){
(function (global){
'use strict';

var slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\/\//;

/**
 * These properties should not be copied or inherited from. This is only needed
 * for all non blob URL's as a blob URL does not include a hash, only the
 * origin.
 *
 * @type {Object}
 * @private
 */
var ignore = { hash: 1, query: 1 }
  , URL;

/**
 * The location object differs when your code is loaded through a normal page,
 * Worker or through a worker using a blob. And with the blobble begins the
 * trouble as the location object will contain the URL of the blob, not the
 * location of the page where our code is loaded in. The actual origin is
 * encoded in the `pathname` so we can thankfully generate a good "default"
 * location from it so we can generate proper relative URL's again.
 *
 * @param {Object|String} loc Optional default location object.
 * @returns {Object} lolcation object.
 * @api public
 */
module.exports = function lolcation(loc) {
  loc = loc || global.location || {};
  URL = URL || require('./');

  var finaldestination = {}
    , type = typeof loc
    , key;

  if ('blob:' === loc.protocol) {
    finaldestination = new URL(unescape(loc.pathname), {});
  } else if ('string' === type) {
    finaldestination = new URL(loc, {});
    for (key in ignore) delete finaldestination[key];
  } else if ('object' === type) {
    for (key in loc) {
      if (key in ignore) continue;
      finaldestination[key] = loc[key];
    }

    if (finaldestination.slashes === undefined) {
      finaldestination.slashes = slashes.test(loc.href);
    }
  }

  return finaldestination;
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./":61}]},{},[1])(1)
});


//# sourceMappingURL=sockjs.js.map

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(33)))

/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


// The error overlay is inspired (and mostly copied) from Create React App (https://github.com/facebookincubator/create-react-app)
// They, in turn, got inspired by webpack-hot-middleware (https://github.com/glenjamin/webpack-hot-middleware).

var ansiHTML = __webpack_require__(138);
var Entities = __webpack_require__(139).AllHtmlEntities;

var entities = new Entities();

var colors = {
  reset: ['transparent', 'transparent'],
  black: '181818',
  red: 'E36049',
  green: 'B3CB74',
  yellow: 'FFD080',
  blue: '7CAFC2',
  magenta: '7FACCA',
  cyan: 'C3C2EF',
  lightgrey: 'EBE7E3',
  darkgrey: '6D7891'
};
ansiHTML.setColors(colors);

function createOverlayIframe(onIframeLoad) {
  var iframe = document.createElement('iframe');
  iframe.id = 'webpack-dev-server-client-overlay';
  iframe.src = 'about:blank';
  iframe.style.position = 'fixed';
  iframe.style.left = 0;
  iframe.style.top = 0;
  iframe.style.right = 0;
  iframe.style.bottom = 0;
  iframe.style.width = '100vw';
  iframe.style.height = '100vh';
  iframe.style.border = 'none';
  iframe.style.zIndex = 9999999999;
  iframe.onload = onIframeLoad;
  return iframe;
}

function addOverlayDivTo(iframe) {
  var div = iframe.contentDocument.createElement('div');
  div.id = 'webpack-dev-server-client-overlay-div';
  div.style.position = 'fixed';
  div.style.boxSizing = 'border-box';
  div.style.left = 0;
  div.style.top = 0;
  div.style.right = 0;
  div.style.bottom = 0;
  div.style.width = '100vw';
  div.style.height = '100vh';
  div.style.backgroundColor = 'rgba(0, 0, 0, 0.85)';
  div.style.color = '#E8E8E8';
  div.style.fontFamily = 'Menlo, Consolas, monospace';
  div.style.fontSize = 'large';
  div.style.padding = '2rem';
  div.style.lineHeight = '1.2';
  div.style.whiteSpace = 'pre-wrap';
  div.style.overflow = 'auto';
  iframe.contentDocument.body.appendChild(div);
  return div;
}

var overlayIframe = null;
var overlayDiv = null;
var lastOnOverlayDivReady = null;

function ensureOverlayDivExists(onOverlayDivReady) {
  if (overlayDiv) {
    // Everything is ready, call the callback right away.
    onOverlayDivReady(overlayDiv);
    return;
  }

  // Creating an iframe may be asynchronous so we'll schedule the callback.
  // In case of multiple calls, last callback wins.
  lastOnOverlayDivReady = onOverlayDivReady;

  if (overlayIframe) {
    // We're already creating it.
    return;
  }

  // Create iframe and, when it is ready, a div inside it.
  overlayIframe = createOverlayIframe(function () {
    overlayDiv = addOverlayDivTo(overlayIframe);
    // Now we can talk!
    lastOnOverlayDivReady(overlayDiv);
  });

  // Zalgo alert: onIframeLoad() will be called either synchronously
  // or asynchronously depending on the browser.
  // We delay adding it so `overlayIframe` is set when `onIframeLoad` fires.
  document.body.appendChild(overlayIframe);
}

function showMessageOverlay(message) {
  ensureOverlayDivExists(function (div) {
    // Make it look similar to our terminal.
    div.innerHTML = '<span style="color: #' + colors.red + '">Failed to compile.</span><br><br>' + ansiHTML(entities.encode(message));
  });
}

function destroyErrorOverlay() {
  if (!overlayDiv) {
    // It is not there in the first place.
    return;
  }

  // Clean up and reset internal state.
  document.body.removeChild(overlayIframe);
  overlayDiv = null;
  overlayIframe = null;
  lastOnOverlayDivReady = null;
}

// Successful compilation.
exports.clear = function handleSuccess() {
  destroyErrorOverlay();
};

// Compilation with errors (e.g. syntax error or missing modules).
exports.showMessage = function handleMessage(messages) {
  showMessageOverlay(messages[0]);
};

/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = ansiHTML

// Reference to https://github.com/sindresorhus/ansi-regex
var _regANSI = /(?:(?:\u001b\[)|\u009b)(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-M|f-m])|\u001b[A-M]/

var _defColors = {
  reset: ['fff', '000'], // [FOREGROUD_COLOR, BACKGROUND_COLOR]
  black: '000',
  red: 'ff0000',
  green: '209805',
  yellow: 'e8bf03',
  blue: '0000ff',
  magenta: 'ff00ff',
  cyan: '00ffee',
  lightgrey: 'f0f0f0',
  darkgrey: '888'
}
var _styles = {
  30: 'black',
  31: 'red',
  32: 'green',
  33: 'yellow',
  34: 'blue',
  35: 'magenta',
  36: 'cyan',
  37: 'lightgrey'
}
var _openTags = {
  '1': 'font-weight:bold', // bold
  '2': 'opacity:0.5', // dim
  '3': '<i>', // italic
  '4': '<u>', // underscore
  '8': 'display:none', // hidden
  '9': '<del>' // delete
}
var _closeTags = {
  '23': '</i>', // reset italic
  '24': '</u>', // reset underscore
  '29': '</del>' // reset delete
}

;[0, 21, 22, 27, 28, 39, 49].forEach(function (n) {
  _closeTags[n] = '</span>'
})

/**
 * Converts text with ANSI color codes to HTML markup.
 * @param {String} text
 * @returns {*}
 */
function ansiHTML (text) {
  // Returns the text if the string has no ANSI escape code.
  if (!_regANSI.test(text)) {
    return text
  }

  // Cache opened sequence.
  var ansiCodes = []
  // Replace with markup.
  var ret = text.replace(/\033\[(\d+)*m/g, function (match, seq) {
    var ot = _openTags[seq]
    if (ot) {
      // If current sequence has been opened, close it.
      if (!!~ansiCodes.indexOf(seq)) { // eslint-disable-line no-extra-boolean-cast
        ansiCodes.pop()
        return '</span>'
      }
      // Open tag.
      ansiCodes.push(seq)
      return ot[0] === '<' ? ot : '<span style="' + ot + ';">'
    }

    var ct = _closeTags[seq]
    if (ct) {
      // Pop sequence
      ansiCodes.pop()
      return ct
    }
    return ''
  })

  // Make sure tags are closed.
  var l = ansiCodes.length
  ;(l > 0) && (ret += Array(l + 1).join('</span>'))

  return ret
}

/**
 * Customize colors.
 * @param {Object} colors reference to _defColors
 */
ansiHTML.setColors = function (colors) {
  if (typeof colors !== 'object') {
    throw new Error('`colors` parameter must be an Object.')
  }

  var _finalColors = {}
  for (var key in _defColors) {
    var hex = colors.hasOwnProperty(key) ? colors[key] : null
    if (!hex) {
      _finalColors[key] = _defColors[key]
      continue
    }
    if ('reset' === key) {
      if (typeof hex === 'string') {
        hex = [hex]
      }
      if (!Array.isArray(hex) || hex.length === 0 || hex.some(function (h) {
        return typeof h !== 'string'
      })) {
        throw new Error('The value of `' + key + '` property must be an Array and each item could only be a hex string, e.g.: FF0000')
      }
      var defHexColor = _defColors[key]
      if (!hex[0]) {
        hex[0] = defHexColor[0]
      }
      if (hex.length === 1 || !hex[1]) {
        hex = [hex[0]]
        hex.push(defHexColor[1])
      }

      hex = hex.slice(0, 2)
    } else if (typeof hex !== 'string') {
      throw new Error('The value of `' + key + '` property must be a hex string, e.g.: FF0000')
    }
    _finalColors[key] = hex
  }
  _setTags(_finalColors)
}

/**
 * Reset colors.
 */
ansiHTML.reset = function () {
  _setTags(_defColors)
}

/**
 * Expose tags, including open and close.
 * @type {Object}
 */
ansiHTML.tags = {}

if (Object.defineProperty) {
  Object.defineProperty(ansiHTML.tags, 'open', {
    get: function () { return _openTags }
  })
  Object.defineProperty(ansiHTML.tags, 'close', {
    get: function () { return _closeTags }
  })
} else {
  ansiHTML.tags.open = _openTags
  ansiHTML.tags.close = _closeTags
}

function _setTags (colors) {
  // reset all
  _openTags['0'] = 'font-weight:normal;opacity:1;color:#' + colors.reset[0] + ';background:#' + colors.reset[1]
  // inverse
  _openTags['7'] = 'color:#' + colors.reset[1] + ';background:#' + colors.reset[0]
  // dark grey
  _openTags['90'] = 'color:#' + colors.darkgrey

  for (var code in _styles) {
    var color = _styles[code]
    var oriColor = colors[color] || '000'
    _openTags[code] = 'color:#' + oriColor
    code = parseInt(code)
    _openTags[(code + 10).toString()] = 'background:#' + oriColor
  }
}

ansiHTML.reset()


/***/ }),
/* 139 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = {
  XmlEntities: __webpack_require__(140),
  Html4Entities: __webpack_require__(141),
  Html5Entities: __webpack_require__(60),
  AllHtmlEntities: __webpack_require__(60)
};


/***/ }),
/* 140 */
/***/ (function(module, exports) {

var ALPHA_INDEX = {
    '&lt': '<',
    '&gt': '>',
    '&quot': '"',
    '&apos': '\'',
    '&amp': '&',
    '&lt;': '<',
    '&gt;': '>',
    '&quot;': '"',
    '&apos;': '\'',
    '&amp;': '&'
};

var CHAR_INDEX = {
    60: 'lt',
    62: 'gt',
    34: 'quot',
    39: 'apos',
    38: 'amp'
};

var CHAR_S_INDEX = {
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    '\'': '&apos;',
    '&': '&amp;'
};

/**
 * @constructor
 */
function XmlEntities() {}

/**
 * @param {String} str
 * @returns {String}
 */
XmlEntities.prototype.encode = function(str) {
    if (!str || !str.length) {
        return '';
    }
    return str.replace(/<|>|"|'|&/g, function(s) {
        return CHAR_S_INDEX[s];
    });
};

/**
 * @param {String} str
 * @returns {String}
 */
 XmlEntities.encode = function(str) {
    return new XmlEntities().encode(str);
 };

/**
 * @param {String} str
 * @returns {String}
 */
XmlEntities.prototype.decode = function(str) {
    if (!str || !str.length) {
        return '';
    }
    return str.replace(/&#?[0-9a-zA-Z]+;?/g, function(s) {
        if (s.charAt(1) === '#') {
            var code = s.charAt(2).toLowerCase() === 'x' ?
                parseInt(s.substr(3), 16) :
                parseInt(s.substr(2));

            if (isNaN(code) || code < -32768 || code > 65535) {
                return '';
            }
            return String.fromCharCode(code);
        }
        return ALPHA_INDEX[s] || s;
    });
};

/**
 * @param {String} str
 * @returns {String}
 */
 XmlEntities.decode = function(str) {
    return new XmlEntities().decode(str);
 };

/**
 * @param {String} str
 * @returns {String}
 */
XmlEntities.prototype.encodeNonUTF = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLength = str.length;
    var result = '';
    var i = 0;
    while (i < strLength) {
        var c = str.charCodeAt(i);
        var alpha = CHAR_INDEX[c];
        if (alpha) {
            result += "&" + alpha + ";";
            i++;
            continue;
        }
        if (c < 32 || c > 126) {
            result += '&#' + c + ';';
        } else {
            result += str.charAt(i);
        }
        i++;
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
 XmlEntities.encodeNonUTF = function(str) {
    return new XmlEntities().encodeNonUTF(str);
 };

/**
 * @param {String} str
 * @returns {String}
 */
XmlEntities.prototype.encodeNonASCII = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLenght = str.length;
    var result = '';
    var i = 0;
    while (i < strLenght) {
        var c = str.charCodeAt(i);
        if (c <= 255) {
            result += str[i++];
            continue;
        }
        result += '&#' + c + ';';
        i++;
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
 XmlEntities.encodeNonASCII = function(str) {
    return new XmlEntities().encodeNonASCII(str);
 };

module.exports = XmlEntities;


/***/ }),
/* 141 */
/***/ (function(module, exports) {

var HTML_ALPHA = ['apos', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'Aelig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'acirc', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'quot', 'amp', 'lt', 'gt', 'OElig', 'oelig', 'Scaron', 'scaron', 'Yuml', 'circ', 'tilde', 'ensp', 'emsp', 'thinsp', 'zwnj', 'zwj', 'lrm', 'rlm', 'ndash', 'mdash', 'lsquo', 'rsquo', 'sbquo', 'ldquo', 'rdquo', 'bdquo', 'dagger', 'Dagger', 'permil', 'lsaquo', 'rsaquo', 'euro', 'fnof', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigmaf', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'thetasym', 'upsih', 'piv', 'bull', 'hellip', 'prime', 'Prime', 'oline', 'frasl', 'weierp', 'image', 'real', 'trade', 'alefsym', 'larr', 'uarr', 'rarr', 'darr', 'harr', 'crarr', 'lArr', 'uArr', 'rArr', 'dArr', 'hArr', 'forall', 'part', 'exist', 'empty', 'nabla', 'isin', 'notin', 'ni', 'prod', 'sum', 'minus', 'lowast', 'radic', 'prop', 'infin', 'ang', 'and', 'or', 'cap', 'cup', 'int', 'there4', 'sim', 'cong', 'asymp', 'ne', 'equiv', 'le', 'ge', 'sub', 'sup', 'nsub', 'sube', 'supe', 'oplus', 'otimes', 'perp', 'sdot', 'lceil', 'rceil', 'lfloor', 'rfloor', 'lang', 'rang', 'loz', 'spades', 'clubs', 'hearts', 'diams'];
var HTML_CODES = [39, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 34, 38, 60, 62, 338, 339, 352, 353, 376, 710, 732, 8194, 8195, 8201, 8204, 8205, 8206, 8207, 8211, 8212, 8216, 8217, 8218, 8220, 8221, 8222, 8224, 8225, 8240, 8249, 8250, 8364, 402, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 931, 932, 933, 934, 935, 936, 937, 945, 946, 947, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959, 960, 961, 962, 963, 964, 965, 966, 967, 968, 969, 977, 978, 982, 8226, 8230, 8242, 8243, 8254, 8260, 8472, 8465, 8476, 8482, 8501, 8592, 8593, 8594, 8595, 8596, 8629, 8656, 8657, 8658, 8659, 8660, 8704, 8706, 8707, 8709, 8711, 8712, 8713, 8715, 8719, 8721, 8722, 8727, 8730, 8733, 8734, 8736, 8743, 8744, 8745, 8746, 8747, 8756, 8764, 8773, 8776, 8800, 8801, 8804, 8805, 8834, 8835, 8836, 8838, 8839, 8853, 8855, 8869, 8901, 8968, 8969, 8970, 8971, 9001, 9002, 9674, 9824, 9827, 9829, 9830];

var alphaIndex = {};
var numIndex = {};

var i = 0;
var length = HTML_ALPHA.length;
while (i < length) {
    var a = HTML_ALPHA[i];
    var c = HTML_CODES[i];
    alphaIndex[a] = String.fromCharCode(c);
    numIndex[c] = a;
    i++;
}

/**
 * @constructor
 */
function Html4Entities() {}

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.prototype.decode = function(str) {
    if (!str || !str.length) {
        return '';
    }
    return str.replace(/&(#?[\w\d]+);?/g, function(s, entity) {
        var chr;
        if (entity.charAt(0) === "#") {
            var code = entity.charAt(1).toLowerCase() === 'x' ?
                parseInt(entity.substr(2), 16) :
                parseInt(entity.substr(1));

            if (!(isNaN(code) || code < -32768 || code > 65535)) {
                chr = String.fromCharCode(code);
            }
        } else {
            chr = alphaIndex[entity];
        }
        return chr || s;
    });
};

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.decode = function(str) {
    return new Html4Entities().decode(str);
};

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.prototype.encode = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLength = str.length;
    var result = '';
    var i = 0;
    while (i < strLength) {
        var alpha = numIndex[str.charCodeAt(i)];
        result += alpha ? "&" + alpha + ";" : str.charAt(i);
        i++;
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.encode = function(str) {
    return new Html4Entities().encode(str);
};

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.prototype.encodeNonUTF = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLength = str.length;
    var result = '';
    var i = 0;
    while (i < strLength) {
        var cc = str.charCodeAt(i);
        var alpha = numIndex[cc];
        if (alpha) {
            result += "&" + alpha + ";";
        } else if (cc < 32 || cc > 126) {
            result += "&#" + cc + ";";
        } else {
            result += str.charAt(i);
        }
        i++;
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.encodeNonUTF = function(str) {
    return new Html4Entities().encodeNonUTF(str);
};

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.prototype.encodeNonASCII = function(str) {
    if (!str || !str.length) {
        return '';
    }
    var strLength = str.length;
    var result = '';
    var i = 0;
    while (i < strLength) {
        var c = str.charCodeAt(i);
        if (c <= 255) {
            result += str[i++];
            continue;
        }
        result += '&#' + c + ';';
        i++;
    }
    return result;
};

/**
 * @param {String} str
 * @returns {String}
 */
Html4Entities.encodeNonASCII = function(str) {
    return new Html4Entities().encodeNonASCII(str);
};

module.exports = Html4Entities;


/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./log": 143
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 142;

/***/ }),
/* 143 */
/***/ (function(module, exports) {

var logLevel = "info";

function dummy() {}

function shouldLog(level) {
	var shouldLog = (logLevel === "info" && level === "info") ||
		(["info", "warning"].indexOf(logLevel) >= 0 && level === "warning") ||
		(["info", "warning", "error"].indexOf(logLevel) >= 0 && level === "error");
	return shouldLog;
}

function logGroup(logFn) {
	return function(level, msg) {
		if(shouldLog(level)) {
			logFn(msg);
		}
	};
}

module.exports = function(level, msg) {
	if(shouldLog(level)) {
		if(level === "info") {
			console.log(msg);
		} else if(level === "warning") {
			console.warn(msg);
		} else if(level === "error") {
			console.error(msg);
		}
	}
};

var group = console.group || dummy;
var groupCollapsed = console.groupCollapsed || dummy;
var groupEnd = console.groupEnd || dummy;

module.exports.group = logGroup(group);

module.exports.groupCollapsed = logGroup(groupCollapsed);

module.exports.groupEnd = logGroup(groupEnd);

module.exports.setLogLevel = function(level) {
	logLevel = level;
};


/***/ }),
/* 144 */
/***/ (function(module, exports, __webpack_require__) {

var EventEmitter = __webpack_require__(145);
module.exports = new EventEmitter();


/***/ }),
/* 145 */
/***/ (function(module, exports) {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      } else {
        // At least give some kind of context to the user
        var err = new Error('Uncaught, unspecified "error" event. (' + er + ')');
        err.context = er;
        throw err;
      }
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}


/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _S5_iJO1366Glycolysis_PPP_AA_Nucleotides = __webpack_require__(147);

var _S5_iJO1366Glycolysis_PPP_AA_Nucleotides2 = _interopRequireDefault(_S5_iJO1366Glycolysis_PPP_AA_Nucleotides);

var _main = __webpack_require__(148);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

new _main.Builder( // eslint-disable-line no-new
_S5_iJO1366Glycolysis_PPP_AA_Nucleotides2.default, null, null, _main.libs.d3_select('#root'), {
  fill_screen: true,
  never_ask_before_quit: true
});

/***/ }),
/* 147 */
/***/ (function(module, exports) {

module.exports = [{"map_name":"iJO1366.Central metabolism","map_id":"23lkrjf93","map_description":"Central metabolism (iJO1366)\nLast Modified Wed Feb 18 2015 12:54:08 GMT-0800 (PST)","homepage":"https://escher.github.io","schema":"https://escher.github.io/escher/jsonschema/1-0-0#"},{"reactions":{"2075839":{"name":"malate dehydrogenase","bigg_id":"MDH","reversibility":true,"label_x":3001.086271484375,"label_y":3883.49973125,"gene_reaction_rule":"b3236","genes":[{"bigg_id":"b3236","name":"b3236"}],"metabolites":[{"coefficient":-1,"bigg_id":"mal__L_c"},{"coefficient":-1,"bigg_id":"nad_c"},{"coefficient":1,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"oaa_c"},{"coefficient":1,"bigg_id":"nadh_c"}],"segments":{"675":{"from_node_id":"2076049","to_node_id":"2076047","b1":null,"b2":null},"676":{"from_node_id":"2076047","to_node_id":"2076048","b1":null,"b2":null},"677":{"from_node_id":"2075291","to_node_id":"2076049","b1":{"x":2978.79403515625,"y":3732.279312562738},"b2":{"x":2978.104826171875,"y":3828.010534354759}},"678":{"from_node_id":"2075292","to_node_id":"2076049","b1":{"x":2991.086271484375,"y":3815.769549805468},"b2":{"x":2978.104826171875,"y":3840.3213018166402}},"679":{"from_node_id":"2076048","to_node_id":"2075293","b1":{"x":2979.024431844931,"y":3948.7830375230687},"b2":{"x":2989.9657513320612,"y":4033.7927183060624}},"680":{"from_node_id":"2076048","to_node_id":"2075294","b1":{"x":2978.948683049377,"y":3945.298592927578},"b2":{"x":2986.828489721881,"y":3991.887863925259}},"681":{"from_node_id":"2076048","to_node_id":"2075295","b1":{"x":2979.323407278447,"y":3962.535907464812},"b2":{"x":2994.6002755635736,"y":4013.2860087368736}}}},"2075851":{"name":"phosphoenolpyruvate carboxylase","bigg_id":"PPC","reversibility":false,"label_x":2034.270253515625,"label_y":3812.255590625,"gene_reaction_rule":"b3956","genes":[{"bigg_id":"b3956","name":"b3956"}],"metabolites":[{"coefficient":-1,"bigg_id":"h2o_c"},{"coefficient":-1,"bigg_id":"co2_c"},{"coefficient":-1,"bigg_id":"pep_c"},{"coefficient":1,"bigg_id":"oaa_c"},{"coefficient":1,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"pi_c"}],"segments":{"747":{"from_node_id":"2076079","to_node_id":"2076080","b1":null,"b2":null},"748":{"from_node_id":"2076080","to_node_id":"2076081","b1":null,"b2":null},"749":{"from_node_id":"2075338","to_node_id":"2076079","b1":{"x":1703.1840088250565,"y":3769.770020723239},"b2":{"x":1945.9160475889232,"y":3778.4694167247844}},"750":{"from_node_id":"2075339","to_node_id":"2076079","b1":{"x":1951.5987587307172,"y":3781.6450494216692},"b2":{"x":1978.6688050801527,"y":3796.7724282640006}},"751":{"from_node_id":"2075340","to_node_id":"2076079","b1":{"x":1923.4886507691183,"y":3765.9364596784226},"b2":{"x":1970.235772691673,"y":3792.059851341027}},"752":{"from_node_id":"2076081","to_node_id":"2075295","b1":{"x":2242.5213204904744,"y":3914.59246211837},"b2":{"x":2504.167863874497,"y":4090.4973107070664}},"753":{"from_node_id":"2076081","to_node_id":"2075341","b1":{"x":2120.1866617952833,"y":3862.8355574869493},"b2":{"x":2161.991381114486,"y":3880.522146831497}},"754":{"from_node_id":"2076081","to_node_id":"2075342","b1":{"x":2126.0377377036616,"y":3865.311009505299},"b2":{"x":2181.4949674757468,"y":3888.77365355933}}}},"2075864":{"name":"citrate synthase","bigg_id":"CS","reversibility":false,"label_x":3124.623625,"label_y":4378.88625,"gene_reaction_rule":"b0720","genes":[{"bigg_id":"b0720","name":"b0720"}],"metabolites":[{"coefficient":-1,"bigg_id":"h2o_c"},{"coefficient":1,"bigg_id":"coa_c"},{"coefficient":-1,"bigg_id":"accoa_c"},{"coefficient":-1,"bigg_id":"oaa_c"},{"coefficient":1,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"cit_c"}],"segments":{"825":{"from_node_id":"2076114","to_node_id":"2076113","b1":null,"b2":null},"826":{"from_node_id":"2076113","to_node_id":"2076112","b1":null,"b2":null},"827":{"from_node_id":"2075382","to_node_id":"2076114","b1":{"x":2519.973434659687,"y":4276.893235347283},"b2":{"x":2958.789554226031,"y":4155.766006736997}},"828":{"from_node_id":"2075295","to_node_id":"2076114","b1":{"x":3067.808862219809,"y":4242.1498421782735},"b2":{"y":4275.867671403482,"x":3113.1382293690676}},"829":{"from_node_id":"2075383","to_node_id":"2076114","b1":{"x":3090.4878476443187,"y":4259.1011581563325},"b2":{"y":4280.664638462525,"x":3118.2119445276708}},"830":{"from_node_id":"2076112","to_node_id":"2075384","b1":{"y":4389.286880172074,"x":3245.9338402294334},"b2":{"y":4420.919600573583,"x":3288.110800764778}},"831":{"from_node_id":"2076112","to_node_id":"2075385","b1":{"y":4389.479985454537,"x":3246.1913139393837},"b2":{"y":4421.563284848458,"x":3288.9690464646123}},"832":{"from_node_id":"2076112","to_node_id":"2075386","b1":{"y":4384.474832759978,"x":3239.5177770133055},"b2":{"y":4404.879442533263,"x":3266.723923377684}}}},"2075868":{"name":"glucose-6-phosphate isomerase","bigg_id":"PGI","reversibility":true,"label_x":1631.5208638671875,"label_y":1867.371069140625,"gene_reaction_rule":"b4025","genes":[{"bigg_id":"b4025","name":"b4025"}],"metabolites":[{"coefficient":1,"bigg_id":"f6p_c"},{"coefficient":-1,"bigg_id":"g6p_c"}],"segments":{"848":{"from_node_id":"2075395","to_node_id":"2076122","b1":{"y":1713.4302,"x":1614.8579},"b2":{"y":1761.7302,"x":1614.8579}},"849":{"from_node_id":"2076122","to_node_id":"2075396","b1":{"y":1853.2302,"x":1614.8579},"b2":{"y":1905.7302,"x":1614.8579}}}},"2075872":{"name":"phosphoglycerate kinase","bigg_id":"PGK","reversibility":true,"label_x":1628.8579,"label_y":3150.7302,"gene_reaction_rule":"b2926","genes":[{"bigg_id":"b2926","name":"b2926"}],"metabolites":[{"coefficient":1,"bigg_id":"13dpg_c"},{"coefficient":-1,"bigg_id":"atp_c"},{"coefficient":1,"bigg_id":"adp_c"},{"coefficient":-1,"bigg_id":"3pg_c"}],"segments":{"866":{"from_node_id":"2076130","to_node_id":"2076131","b1":null,"b2":null},"867":{"from_node_id":"2076131","to_node_id":"2076132","b1":null,"b2":null},"868":{"from_node_id":"2075405","to_node_id":"2076130","b1":{"y":3258.1643649025254,"x":1618.8579},"b2":{"y":3224.960449470758,"x":1618.8579}},"869":{"from_node_id":"2075406","to_node_id":"2076130","b1":{"y":3260.7302,"x":1618.8579},"b2":{"y":3225.7302,"x":1618.8579}},"870":{"from_node_id":"2076132","to_node_id":"2075407","b1":{"y":3086.499950529242,"x":1618.8579},"b2":{"y":3053.2960350974745,"x":1618.8579}},"871":{"from_node_id":"2076132","to_node_id":"2075408","b1":{"y":3085.7302,"x":1618.8579},"b2":{"y":3050.7302,"x":1618.8579}}}},"2075881":{"name":"glucose 6-phosphate dehydrogenase","bigg_id":"G6PDH2r","reversibility":true,"label_x":1800.6558736328125,"label_y":1654.3738767578125,"gene_reaction_rule":"b1852","genes":[{"bigg_id":"b1852","name":"b1852"}],"metabolites":[{"coefficient":1,"bigg_id":"6pgl_c"},{"coefficient":1,"bigg_id":"h_c"},{"coefficient":-1,"bigg_id":"nadp_c"},{"coefficient":-1,"bigg_id":"g6p_c"},{"coefficient":1,"bigg_id":"nadph_c"}],"segments":{"896":{"from_node_id":"2076147","to_node_id":"2076146","b1":null,"b2":null},"897":{"from_node_id":"2076146","to_node_id":"2076145","b1":null,"b2":null},"898":{"from_node_id":"2075395","to_node_id":"2076147","b1":{"y":1692.7302,"x":1702.8579},"b2":{"x":1816.4356832031249,"y":1692.7303220703125}},"899":{"from_node_id":"2075424","to_node_id":"2076147","b1":{"y":1692.7302,"x":1734.8556679016274},"b2":{"x":1826.0350135736132,"y":1692.7303220703125}},"900":{"from_node_id":"2076145","to_node_id":"2075425","b1":{"x":1897.7943763278602,"y":1692.7303220703125},"b2":{"x":1932.6979936189089,"y":1692.7303220703125}},"901":{"from_node_id":"2076145","to_node_id":"2075426","b1":{"x":1901.885683203125,"y":1692.7303220703125},"b2":{"x":1946.335683203125,"y":1692.7303220703125}},"902":{"from_node_id":"2076145","to_node_id":"2075427","b1":{"x":1899.7936459345383,"y":1692.7303220703125},"b2":{"x":1939.362225641169,"y":1692.7303220703125}}}},"2075886":{"name":"6-phosphogluconolactonase","bigg_id":"PGL","reversibility":false,"label_x":2234.49618359375,"label_y":1648.5474607421875,"gene_reaction_rule":"b0767","genes":[{"bigg_id":"b0767","name":"b0767"}],"metabolites":[{"coefficient":-1,"bigg_id":"h2o_c"},{"coefficient":-1,"bigg_id":"6pgl_c"},{"coefficient":1,"bigg_id":"6pgc_c"},{"coefficient":1,"bigg_id":"h_c"}],"segments":{"930":{"from_node_id":"2076161","to_node_id":"2076162","b1":null,"b2":null},"931":{"from_node_id":"2076162","to_node_id":"2076160","b1":null,"b2":null},"932":{"from_node_id":"2075443","to_node_id":"2076161","b1":{"x":2154.4229718881506,"y":1689.48166484375},"b2":{"x":2176.39228648832,"y":1689.48166484375}},"933":{"from_node_id":"2075426","to_node_id":"2076161","b1":{"x":2065.335733203125,"y":1692.7303220703125},"b2":{"x":2169.15769203125,"y":1689.48166484375}},"934":{"from_node_id":"2076160","to_node_id":"2075444","b1":{"x":2296.55770703125,"y":1689.48166484375},"b2":{"x":2385.788419921875,"y":1689.48166484375}},"935":{"from_node_id":"2076160","to_node_id":"2075445","b1":{"x":2290.5019970862318,"y":1689.48166484375},"b2":{"x":2320.1220072145215,"y":1689.48166484375}}}},"2075889":{"name":"ATP synthase (four protons for one ATP) (periplasm)","bigg_id":"ATPS4rpp","reversibility":true,"label_x":4960.90048046875,"label_y":1801.31955546875,"gene_reaction_rule":"(((b3736 and b3737 and b3738) and (b3731 and b3732 and b3733 and b3734 and b3735) and b3739) or ((b3736 and b3737 and b3738) and (b3731 and b3732 and b3733 and b3734 and b3735)))","genes":[{"bigg_id":"b3736","name":"b3736"},{"bigg_id":"b3737","name":"b3737"},{"bigg_id":"b3738","name":"b3738"},{"bigg_id":"b3731","name":"b3731"},{"bigg_id":"b3732","name":"b3732"},{"bigg_id":"b3733","name":"b3733"},{"bigg_id":"b3734","name":"b3734"},{"bigg_id":"b3735","name":"b3735"},{"bigg_id":"b3739","name":"b3739"},{"bigg_id":"b3736","name":"b3736"},{"bigg_id":"b3737","name":"b3737"},{"bigg_id":"b3738","name":"b3738"},{"bigg_id":"b3731","name":"b3731"},{"bigg_id":"b3732","name":"b3732"},{"bigg_id":"b3733","name":"b3733"},{"bigg_id":"b3734","name":"b3734"},{"bigg_id":"b3735","name":"b3735"}],"metabolites":[{"coefficient":1,"bigg_id":"h2o_c"},{"coefficient":-1,"bigg_id":"adp_c"},{"coefficient":-4,"bigg_id":"h_p"},{"coefficient":-1,"bigg_id":"pi_c"},{"coefficient":3,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"atp_c"}],"segments":{"940":{"from_node_id":"2076167","to_node_id":"2076165","b1":null,"b2":null},"941":{"from_node_id":"2076165","to_node_id":"2076166","b1":null,"b2":null},"942":{"from_node_id":"2075450","to_node_id":"2076167","b1":{"x":4845.908289047058,"y":1825.0582029296875},"b2":{"x":4918.062637495368,"y":1825.0582029296875}},"943":{"from_node_id":"2075451","to_node_id":"2076167","b1":{"x":4821.89541199072,"y":1825.0582029296875},"b2":{"x":4927.352622034716,"y":1825.0582029296875}},"944":{"from_node_id":"2075452","to_node_id":"2076167","b1":{"x":4862.67254717934,"y":1825.0582029296875},"b2":{"x":4923.091914935052,"y":1825.0582029296875}},"945":{"from_node_id":"2076166","to_node_id":"2075453","b1":{"x":5079.909221879632,"y":1825.0582029296875},"b2":{"x":5146.565523452941,"y":1902.02951640625}},"946":{"from_node_id":"2076166","to_node_id":"2075454","b1":{"x":5071.882435971211,"y":1825.0582029296875},"b2":{"x":5279.250000112369,"y":1830.5562498046875}},"947":{"from_node_id":"2076166","to_node_id":"2075455","b1":{"x":5074.879944439948,"y":1825.0582029296875},"b2":{"x":5184.781245789411,"y":1918.523412890625}}}},"2075893":{"name":"ribose-5-phosphate isomerase","bigg_id":"RPI","reversibility":true,"label_x":3002.288419921875,"label_y":1857.48166484375,"gene_reaction_rule":"(b2914 or b4090)","genes":[{"bigg_id":"b2914","name":"b2914"},{"bigg_id":"b4090","name":"b4090"}],"metabolites":[{"coefficient":-1,"bigg_id":"r5p_c"},{"coefficient":1,"bigg_id":"ru5p__D_c"}],"segments":{"964":{"from_node_id":"2075464","to_node_id":"2076175","b1":{"x":3055.1884199218753,"y":1974.5816648437499},"b2":{"x":3029.288419921875,"y":1930.48166484375}},"965":{"from_node_id":"2076175","to_node_id":"2075465","b1":{"x":2977.738419921875,"y":1840.78166484375},"b2":{"x":2943.788419921875,"y":1778.48166484375}}}},"2075902":{"name":"pyruvate kinase","bigg_id":"PYK","reversibility":false,"label_x":1678.718983984375,"label_y":4097.091572265625,"gene_reaction_rule":"(b1854 or b1676)","genes":[{"bigg_id":"b1854","name":"b1854"},{"bigg_id":"b1676","name":"b1676"}],"metabolites":[{"coefficient":-1,"bigg_id":"pep_c"},{"coefficient":-1,"bigg_id":"h_c"},{"coefficient":-1,"bigg_id":"adp_c"},{"coefficient":1,"bigg_id":"pyr_c"},{"coefficient":1,"bigg_id":"atp_c"}],"segments":{"1009":{"from_node_id":"2076196","to_node_id":"2076198","b1":null,"b2":null},"1010":{"from_node_id":"2076198","to_node_id":"2076197","b1":null,"b2":null},"1011":{"from_node_id":"2075491","to_node_id":"2076196","b1":{"x":1667.8745015625,"y":4012.3553596505585},"b2":{"x":1669.796620703125,"y":4037.88310434048}},"1012":{"from_node_id":"2075492","to_node_id":"2076196","b1":{"x":1665.95213828125,"y":4027.3890142539067},"b2":{"x":1669.796620703125,"y":4046.7181518933594}},"1013":{"from_node_id":"2075338","to_node_id":"2076196","b1":{"x":1675.5633443359375,"y":3892.980444140625},"b2":{"x":1669.796620703125,"y":4017.35217265625}},"1014":{"from_node_id":"2076197","to_node_id":"2076584","b1":{"x":1670.75780234375,"y":4154.836236257042},"b2":{"x":1663.9233296875,"y":4274.520807054726}},"1015":{"from_node_id":"2076197","to_node_id":"2075493","b1":{"x":1670.75780234375,"y":4137.757899149445},"b2":{"x":1666.9131978515625,"y":4160.831786227315}}}},"2075916":{"name":"pyruvate dehydrogenase","bigg_id":"PDH","reversibility":false,"label_x":2001.1337568359377,"label_y":4356.76125,"gene_reaction_rule":"(b0114 and b0115 and b0116)","genes":[{"bigg_id":"b0114","name":"b0114"},{"bigg_id":"b0115","name":"b0115"},{"bigg_id":"b0116","name":"b0116"}],"metabolites":[{"coefficient":-1,"bigg_id":"pyr_c"},{"coefficient":-1,"bigg_id":"coa_c"},{"coefficient":-1,"bigg_id":"nad_c"},{"coefficient":1,"bigg_id":"co2_c"},{"coefficient":1,"bigg_id":"nadh_c"},{"coefficient":1,"bigg_id":"accoa_c"}],"segments":{"1094":{"from_node_id":"2076234","to_node_id":"2076235","b1":null,"b2":null},"1095":{"from_node_id":"2076235","to_node_id":"2076236","b1":null,"b2":null},"1096":{"from_node_id":"2075530","to_node_id":"2076234","b1":{"x":1924.3440298902908,"y":4394.1391796875},"b2":{"y":4379.73,"x":1977.3265661155247}},"1097":{"from_node_id":"2075531","to_node_id":"2076234","b1":{"y":4379.73,"x":1933.1413454205444},"b2":{"y":4379.73,"x":1975.6429336261633}},"1098":{"from_node_id":"2076584","to_node_id":"2076234","b1":{"x":1700.2132466796875,"y":4385.8969921875},"b2":{"y":4379.73,"x":1937.4578999999999}},"1099":{"from_node_id":"2076236","to_node_id":"2075532","b1":{"y":4379.73,"x":2136.274156292363},"b2":{"y":4379.73,"x":2176.9118543078753}},"1100":{"from_node_id":"2076236","to_node_id":"2075533","b1":{"y":4379.73,"x":2134.1704948979586},"b2":{"y":4379.73,"x":2169.899649659861}},"1101":{"from_node_id":"2076236","to_node_id":"2075382","b1":{"y":4379.73,"x":2161.458},"b2":{"y":4379.73,"x":2260.858}}}},"2075921":{"name":"fumarate reductase","bigg_id":"FRD3","reversibility":false,"label_x":3572.858,"label_y":3198.7302,"gene_reaction_rule":"(b4151 and b4152 and b4153 and b4154)","genes":[{"bigg_id":"b4151","name":"b4151"},{"bigg_id":"b4152","name":"b4152"},{"bigg_id":"b4153","name":"b4153"},{"bigg_id":"b4154","name":"b4154"}],"metabolites":[{"coefficient":-1,"bigg_id":"fum_c"},{"coefficient":1,"bigg_id":"2dmmq8_c"},{"coefficient":1,"bigg_id":"succ_c"},{"coefficient":-1,"bigg_id":"2dmmql8_c"}],"segments":{"1122":{"from_node_id":"2076245","to_node_id":"2076247","b1":null,"b2":null},"1123":{"from_node_id":"2076247","to_node_id":"2076246","b1":null,"b2":null},"1124":{"from_node_id":"2075365","to_node_id":"2076245","b1":{"y":3208.7302,"x":3278.1966413235527},"b2":{"y":3208.7302,"x":3351.459592397066}},"1125":{"from_node_id":"2075544","to_node_id":"2076245","b1":{"y":3208.7302,"x":3326.945121340428},"b2":{"y":3208.7302,"x":3366.0841364021285}},"1126":{"from_node_id":"2076246","to_node_id":"2075545","b1":{"y":3208.7302,"x":3733.965403914267},"b2":{"y":3208.7302,"x":3783.216013047556}},"1127":{"from_node_id":"2076246","to_node_id":"2075546","b1":{"y":3208.7302,"x":3731.1678334236008},"b2":{"y":3208.7302,"x":3773.8907780786685}}}},"2075927":{"name":"aconitase (half-reaction B, Isocitrate hydro-lyase)","bigg_id":"ACONTb","reversibility":true,"label_x":3699.39315625,"label_y":4513.6372265625,"gene_reaction_rule":"(b0118 or b1276)","genes":[{"bigg_id":"b0118","name":"b0118"},{"bigg_id":"b1276","name":"b1276"}],"metabolites":[{"coefficient":-1,"bigg_id":"h2o_c"},{"coefficient":-1,"bigg_id":"acon__C_c"},{"coefficient":1,"bigg_id":"icit_c"}],"segments":{"24":{"from_node_id":"2076263","to_node_id":"2076264","b1":null,"b2":null},"25":{"from_node_id":"2076264","to_node_id":"2075564","b1":{"y":4454.23,"x":3761.858},"b2":{"y":4443.73,"x":3782.858}},"26":{"from_node_id":"2075333","to_node_id":"2076263","b1":{"x":3654.8414033097497,"y":4493.325375980083},"b2":{"y":4483.108612794024,"x":3679.722161617925}},"27":{"from_node_id":"2075563","to_node_id":"2076263","b1":{"x":3665.5226961998214,"y":4478.706676787559},"b2":{"y":4484.348296005018,"x":3676.0031119849464}}}},"2075930":{"name":"fumarase","bigg_id":"FUM","reversibility":true,"label_x":3105.4937421875,"label_y":3518.03879375,"gene_reaction_rule":"(b1612 or b4122 or b1611)","genes":[{"bigg_id":"b1612","name":"b1612"},{"bigg_id":"b4122","name":"b4122"},{"bigg_id":"b1611","name":"b1611"}],"metabolites":[{"coefficient":-1,"bigg_id":"h2o_c"},{"coefficient":1,"bigg_id":"mal__L_c"},{"coefficient":-1,"bigg_id":"fum_c"}],"segments":{"39":{"from_node_id":"2076269","to_node_id":"2076270","b1":null,"b2":null},"40":{"from_node_id":"2076270","to_node_id":"2075291","b1":{"y":3528.2802,"x":3063.808},"b2":{"y":3569.2302,"x":3040.358}},"41":{"from_node_id":"2075365","to_node_id":"2076269","b1":{"y":3389.27736643816,"x":3157.6185748702346},"b2":{"y":3433.694349931448,"x":3126.9861724610705}},"42":{"from_node_id":"2075574","to_node_id":"2076269","b1":{"y":3415.2740182408534,"x":3139.6898494890665},"b2":{"y":3441.493345472256,"x":3121.60755484672}}}},"2075932":{"name":"pyruvate formate lyase","bigg_id":"PFL","reversibility":false,"label_x":1892.8579,"label_y":4421.73,"gene_reaction_rule":"((b0902 and b0903) or (b0902 and b3114) or (b3951 and b3952) or ((b0902 and b0903) and b2579))","genes":[{"bigg_id":"b0902","name":"b0902"},{"bigg_id":"b0903","name":"b0903"},{"bigg_id":"b0902","name":"b0902"},{"bigg_id":"b3114","name":"b3114"},{"bigg_id":"b3951","name":"b3951"},{"bigg_id":"b3952","name":"b3952"},{"bigg_id":"b0902","name":"b0902"},{"bigg_id":"b0903","name":"b0903"},{"bigg_id":"b2579","name":"b2579"}],"metabolites":[{"coefficient":1,"bigg_id":"accoa_c"},{"coefficient":1,"bigg_id":"for_c"},{"coefficient":-1,"bigg_id":"coa_c"},{"coefficient":-1,"bigg_id":"pyr_c"}],"segments":{"47":{"from_node_id":"2076273","to_node_id":"2076275","b1":null,"b2":null},"48":{"from_node_id":"2076275","to_node_id":"2076274","b1":null,"b2":null},"49":{"from_node_id":"2075577","to_node_id":"2076273","b1":{"y":4429.99285320054,"x":1771.6805048345605},"b2":{"y":4430.508855960162,"x":1804.704681450368}},"50":{"from_node_id":"2076584","to_node_id":"2076273","b1":{"x":1710.8071523642543,"y":4426.321551352248},"b2":{"y":4430.244037671299,"x":1787.7563109631826}},"51":{"from_node_id":"2076274","to_node_id":"2075578","b1":{"y":4431.73,"x":1954.1769056053279},"b2":{"y":4431.73,"x":2003.9212520177593}},"52":{"from_node_id":"2076274","to_node_id":"2075382","b1":{"y":4431.73,"x":2003.7880918438136},"b2":{"x":2310.5040310158374,"y":4427.40724609375}}}},"2075940":{"name":"phosphoglycerate mutase","bigg_id":"PGM","reversibility":true,"label_x":1628.8579,"label_y":3420.7302,"gene_reaction_rule":"(b3612 or b4395 or b0755)","genes":[{"bigg_id":"b3612","name":"b3612"},{"bigg_id":"b4395","name":"b4395"},{"bigg_id":"b0755","name":"b0755"}],"metabolites":[{"coefficient":-1,"bigg_id":"2pg_c"},{"coefficient":1,"bigg_id":"3pg_c"}],"segments":{"101":{"from_node_id":"2075602","to_node_id":"2076296","b1":{"y":3541.2302,"x":1618.8579},"b2":{"y":3495.7302,"x":1618.8579}},"102":{"from_node_id":"2076296","to_node_id":"2075406","b1":{"y":3412.7302,"x":1618.8579},"b2":{"y":3370.7302,"x":1618.8579}}}},"2075941":{"name":"ribulose 5-phosphate 3-epimerase","bigg_id":"RPE","reversibility":true,"label_x":2701.6890546875,"label_y":1860.462377734375,"gene_reaction_rule":"(b4301 or b3386)","genes":[{"bigg_id":"b4301","name":"b4301"},{"bigg_id":"b3386","name":"b3386"}],"metabolites":[{"coefficient":1,"bigg_id":"xu5p__D_c"},{"coefficient":-1,"bigg_id":"ru5p__D_c"}],"segments":{"103":{"from_node_id":"2075465","to_node_id":"2076297","b1":{"x":2882.988419921875,"y":1711.38166484375},"b2":{"x":2854.288419921875,"y":1762.48166484375}},"104":{"from_node_id":"2076297","to_node_id":"2075603","b1":{"x":2799.788419921875,"y":1858.5816648437499},"b2":{"x":2768.288419921875,"y":1912.48166484375}}}},"2075942":{"name":"fumarate reductase","bigg_id":"FRD2","reversibility":false,"label_x":3484.858,"label_y":3303.7302,"gene_reaction_rule":"(b4151 and b4152 and b4153 and b4154)","genes":[{"bigg_id":"b4151","name":"b4151"},{"bigg_id":"b4152","name":"b4152"},{"bigg_id":"b4153","name":"b4153"},{"bigg_id":"b4154","name":"b4154"}],"metabolites":[{"coefficient":-1,"bigg_id":"mql8_c"},{"coefficient":-1,"bigg_id":"fum_c"},{"coefficient":1,"bigg_id":"succ_c"},{"coefficient":1,"bigg_id":"mqn8_c"}],"segments":{"105":{"from_node_id":"2076299","to_node_id":"2076300","b1":null,"b2":null},"106":{"from_node_id":"2076300","to_node_id":"2076298","b1":null,"b2":null},"107":{"from_node_id":"2075365","to_node_id":"2076299","b1":{"y":3313.7302,"x":3349.0905169338525},"b2":{"y":3313.7302,"x":3432.9277550801557}},"108":{"from_node_id":"2075604","to_node_id":"2076299","b1":{"y":3313.7302,"x":3425.9016267825136},"b2":{"y":3313.7302,"x":3455.9710880347543}},"109":{"from_node_id":"2076298","to_node_id":"2075545","b1":{"y":3313.7302,"x":3625.8702704460025},"b2":{"y":3313.7302,"x":3702.8989014866747}},"110":{"from_node_id":"2076298","to_node_id":"2075605","b1":{"y":3313.7302,"x":3607.4203658792107},"b2":{"x":3652.938282097369,"y":3313.7302}}}},"2075945":{"name":"phosphoenolpyruvate synthase","bigg_id":"PPS","reversibility":false,"label_x":1513.048085546875,"label_y":4106.05197734375,"gene_reaction_rule":"b1702","genes":[{"bigg_id":"b1702","name":"b1702"}],"metabolites":[{"coefficient":-1,"bigg_id":"pyr_c"},{"coefficient":1,"bigg_id":"amp_c"},{"coefficient":-1,"bigg_id":"h2o_c"},{"coefficient":1,"bigg_id":"pep_c"},{"coefficient":-1,"bigg_id":"atp_c"},{"coefficient":2,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"pi_c"}],"segments":{"120":{"from_node_id":"2076307","to_node_id":"2076306","b1":null,"b2":null},"121":{"from_node_id":"2076306","to_node_id":"2076305","b1":null,"b2":null},"122":{"from_node_id":"2076584","to_node_id":"2076307","b1":{"x":1597.8897603515625,"y":4194.686348312079},"b2":{"x":1602.268788671875,"y":4165.670468946748}},"123":{"from_node_id":"2075610","to_node_id":"2076307","b1":{"x":1601.3074849609375,"y":4197.720467412101},"b2":{"x":1602.268788671875,"y":4147.279337489255}},"124":{"from_node_id":"2075611","to_node_id":"2076307","b1":{"x":1602.2686666015625,"y":4185.322580995495},"b2":{"x":1602.268788671875,"y":4143.5598250798985}},"125":{"from_node_id":"2076305","to_node_id":"2075612","b1":{"x":1602.268788671875,"y":4031.6610991650537},"b2":{"x":1595.54100546875,"y":3993.0015728678877}},"126":{"from_node_id":"2076305","to_node_id":"2075613","b1":{"x":1602.268788671875,"y":4027.0213174916385},"b2":{"x":1594.5799458984375,"y":4000.6020402065033}},"127":{"from_node_id":"2076305","to_node_id":"2075614","b1":{"x":1602.268788671875,"y":4036.2850469851833},"b2":{"x":1591.696523046875,"y":4007.4535506276948}},"128":{"from_node_id":"2076305","to_node_id":"2075338","b1":{"x":1602.268788671875,"y":4014.349742874341},"b2":{"x":1597.463124609375,"y":3985.27483510197}}}},"2075955":{"name":"fructose-bisphosphatase","bigg_id":"FBP","reversibility":false,"label_x":1579.8579,"label_y":2148.7302,"gene_reaction_rule":"(b3925 or b4232 or b2930)","genes":[{"bigg_id":"b3925","name":"b3925"},{"bigg_id":"b4232","name":"b4232"},{"bigg_id":"b2930","name":"b2930"}],"metabolites":[{"coefficient":-1,"bigg_id":"h2o_c"},{"coefficient":1,"bigg_id":"f6p_c"},{"coefficient":1,"bigg_id":"pi_c"},{"coefficient":-1,"bigg_id":"fdp_c"}],"segments":{"183":{"from_node_id":"2076333","to_node_id":"2076335","b1":null,"b2":null},"184":{"from_node_id":"2076335","to_node_id":"2076334","b1":null,"b2":null},"185":{"from_node_id":"2075638","to_node_id":"2076333","b1":{"y":2296.832949727361,"x":1567.76543409504},"b2":{"y":2246.3610249182084,"x":1568.530160228512}},"186":{"from_node_id":"2075639","to_node_id":"2076333","b1":{"y":2259.7297540809,"x":1568.3276037260468},"b2":{"y":2235.23006622427,"x":1568.698811117814}},"187":{"from_node_id":"2076334","to_node_id":"2075640","b1":{"y":2083.5438522899713,"x":1571.070583027581},"b2":{"y":2052.7757076332377,"x":1571.5668434252702}},"188":{"from_node_id":"2076334","to_node_id":"2075396","b1":{"y":2078.122945237974,"x":1571.1580170122907},"b2":{"y":2034.7060174599137,"x":1571.858290040969}}}},"2075960":{"name":"isocitrate dehydrogenase (NADP)","bigg_id":"ICDHyr","reversibility":true,"label_x":4022.742765625,"label_y":4329.3286328125,"gene_reaction_rule":"b1136","genes":[{"bigg_id":"b1136","name":"b1136"}],"metabolites":[{"coefficient":1,"bigg_id":"akg_c"},{"coefficient":1,"bigg_id":"nadph_c"},{"coefficient":-1,"bigg_id":"nadp_c"},{"coefficient":-1,"bigg_id":"icit_c"},{"coefficient":1,"bigg_id":"co2_c"}],"segments":{"204":{"from_node_id":"2076344","to_node_id":"2076345","b1":null,"b2":null},"205":{"from_node_id":"2076345","to_node_id":"2076343","b1":null,"b2":null},"206":{"from_node_id":"2075645","to_node_id":"2076344","b1":{"x":3929.0590012517246,"y":4360.924751261829},"b2":{"x":3965.2533589692675,"y":4330.121042566048}},"207":{"from_node_id":"2075564","to_node_id":"2076344","b1":{"y":4409.878264736277,"x":3871.033788934875},"b2":{"x":3967.3179632429624,"y":4328.363932545883}},"208":{"from_node_id":"2076343","to_node_id":"2075440","b1":{"x":4071.444583707176,"y":4237.833603793017},"b2":{"x":4116.91874777392,"y":4204.547351185057}},"209":{"from_node_id":"2076343","to_node_id":"2075646","b1":{"x":4060.060271279037,"y":4248.010489145444},"b2":{"x":4080.413422492623,"y":4229.816005484814}},"210":{"from_node_id":"2076343","to_node_id":"2075647","b1":{"x":4066.305243408833,"y":4242.427862544566},"b2":{"x":4101.229996258609,"y":4211.207250148554}}}},"2075964":{"name":"enolase","bigg_id":"ENO","reversibility":true,"label_x":1628.8579,"label_y":3650.7302,"gene_reaction_rule":"b2779","genes":[{"bigg_id":"b2779","name":"b2779"}],"metabolites":[{"coefficient":1,"bigg_id":"h2o_c"},{"coefficient":-1,"bigg_id":"2pg_c"},{"coefficient":1,"bigg_id":"pep_c"}],"segments":{"221":{"from_node_id":"2075602","to_node_id":"2076352","b1":{"y":3575.7302,"x":1618.8579},"b2":{"y":3610.7302,"x":1618.8579}},"222":{"from_node_id":"2076352","to_node_id":"2076351","b1":null,"b2":null},"223":{"from_node_id":"2076351","to_node_id":"2075653","b1":{"y":3716.955180739588,"x":1618.8579},"b2":{"y":3754.8134691319597,"x":1618.8579}},"224":{"from_node_id":"2076351","to_node_id":"2075338","b1":{"y":3717.2302,"x":1618.8579},"b2":{"y":3755.7302,"x":1618.8579}}}},"2075971":{"name":"glyceraldehyde-3-phosphate dehydrogenase","bigg_id":"GAPD","reversibility":true,"label_x":1491.8499654296875,"label_y":2894.698217578125,"gene_reaction_rule":"b1779","genes":[{"bigg_id":"b1779","name":"b1779"}],"metabolites":[{"coefficient":-1,"bigg_id":"nad_c"},{"coefficient":-1,"bigg_id":"g3p_c"},{"coefficient":1,"bigg_id":"13dpg_c"},{"coefficient":-1,"bigg_id":"pi_c"},{"coefficient":1,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"nadh_c"}],"segments":{"264":{"from_node_id":"2076372","to_node_id":"2076371","b1":null,"b2":null},"265":{"from_node_id":"2076371","to_node_id":"2076373","b1":null,"b2":null},"266":{"from_node_id":"2075670","to_node_id":"2076372","b1":{"y":2772.381550626507,"x":1617.8579},"b2":{"y":2804.125605187952,"x":1617.8579}},"267":{"from_node_id":"2075671","to_node_id":"2076372","b1":{"x":1620.5206197265625,"y":2797.864445726291},"b2":{"y":2808.5752832882,"x":1617.8579}},"268":{"from_node_id":"2075576","to_node_id":"2076372","b1":{"y":2763.7302,"x":1617.8579},"b2":{"y":2801.5302,"x":1617.8579}},"269":{"from_node_id":"2076373","to_node_id":"2075672","b1":{"y":2884.120710496809,"x":1619.3042503498937},"b2":{"y":2915.365234989363,"x":1620.3457344996455}},"270":{"from_node_id":"2076373","to_node_id":"2075673","b1":{"y":2888.3273853515684,"x":1619.4444728450521},"b2":{"y":2929.3874845052273,"x":1620.8131428168408}},"271":{"from_node_id":"2076373","to_node_id":"2075408","b1":{"y":2890.2193756860934,"x":1619.5075391895364},"b2":{"y":2935.694118953645,"x":1621.0233639651215}}}},"2075973":{"name":"succinyl-CoA synthetase (ADP-forming)","bigg_id":"SUCOAS","reversibility":true,"label_x":4047.858,"label_y":3466.7302,"gene_reaction_rule":"(b0728 and b0729)","genes":[{"bigg_id":"b0728","name":"b0728"},{"bigg_id":"b0729","name":"b0729"}],"metabolites":[{"coefficient":-1,"bigg_id":"coa_c"},{"coefficient":1,"bigg_id":"succoa_c"},{"coefficient":-1,"bigg_id":"atp_c"},{"coefficient":-1,"bigg_id":"succ_c"},{"coefficient":1,"bigg_id":"pi_c"},{"coefficient":1,"bigg_id":"adp_c"}],"segments":{"278":{"from_node_id":"2076377","to_node_id":"2076378","b1":null,"b2":null},"279":{"from_node_id":"2076378","to_node_id":"2076379","b1":null,"b2":null},"280":{"from_node_id":"2075545","to_node_id":"2076377","b1":{"x":3934.1907463016614,"y":3372.6280212082415},"b2":{"y":3419.4723979249725,"x":3984.2942496717487}},"281":{"from_node_id":"2075676","to_node_id":"2076377","b1":{"y":3408.894901624158,"x":3974.3991724871157},"b2":{"y":3434.6796104872474,"x":3998.520351746135}},"282":{"from_node_id":"2075677","to_node_id":"2076377","b1":{"y":3426.295511143072,"x":3990.677162037068},"b2":{"y":3439.8997933429214,"x":4003.4037486111206}},"283":{"from_node_id":"2076379","to_node_id":"2075678","b1":{"y":3517.0630673368955,"x":4073.869488693657},"b2":{"y":3545.839757789652,"x":4099.5629623121895}},"284":{"from_node_id":"2076379","to_node_id":"2075679","b1":{"y":3521.4022822050883,"x":4077.743787683115},"b2":{"y":3560.303807350295,"x":4112.477292277049}},"285":{"from_node_id":"2076379","to_node_id":"2075680","b1":{"y":3518.5924535105864,"x":4075.235012063024},"b2":{"y":3550.937711701955,"x":4104.114706876746}}}},"2075975":{"name":"aconitase (half-reaction A, Citrate hydro-lyase)","bigg_id":"ACONTa","reversibility":true,"label_x":3439.6831953125,"label_y":4536.4253125,"gene_reaction_rule":"(b0118 or b1276)","genes":[{"bigg_id":"b0118","name":"b0118"},{"bigg_id":"b1276","name":"b1276"}],"metabolites":[{"coefficient":1,"bigg_id":"h2o_c"},{"coefficient":-1,"bigg_id":"cit_c"},{"coefficient":1,"bigg_id":"acon__C_c"}],"segments":{"288":{"from_node_id":"2075384","to_node_id":"2076382","b1":{"x":3427.3109296875,"y":4478.83859375},"b2":{"x":3439.1480390625,"y":4481.384296875}},"289":{"from_node_id":"2076382","to_node_id":"2076381","b1":null,"b2":null},"290":{"from_node_id":"2076381","to_node_id":"2075333","b1":{"x":3508.293070294817,"y":4496.601290399764},"b2":{"x":3526.4596015035563,"y":4501.108910707549}},"291":{"from_node_id":"2076381","to_node_id":"2075563","b1":{"x":3514.3845894648116,"y":4497.297464019192},"b2":{"x":3546.764665403539,"y":4517.853317563975}}}},"2075976":{"name":"phosphofructokinase","bigg_id":"PFK","reversibility":false,"label_x":1673.8579,"label_y":2148.7302,"gene_reaction_rule":"(b3916 or b1723)","genes":[{"bigg_id":"b3916","name":"b3916"},{"bigg_id":"b1723","name":"b1723"}],"metabolites":[{"coefficient":-1,"bigg_id":"f6p_c"},{"coefficient":1,"bigg_id":"h_c"},{"coefficient":-1,"bigg_id":"atp_c"},{"coefficient":1,"bigg_id":"adp_c"},{"coefficient":1,"bigg_id":"fdp_c"}],"segments":{"292":{"from_node_id":"2076384","to_node_id":"2076385","b1":null,"b2":null},"293":{"from_node_id":"2076385","to_node_id":"2076383","b1":null,"b2":null},"294":{"from_node_id":"2075396","to_node_id":"2076384","b1":{"x":1663.8579,"y":2045.5015441634719},"b2":{"y":2079.564801491229,"x":1663.8579}},"295":{"from_node_id":"2075682","to_node_id":"2076384","b1":{"y":2066.7262939883894,"x":1663.8579},"b2":{"y":2089.1290281965166,"x":1663.8579}},"296":{"from_node_id":"2076383","to_node_id":"2075683","b1":{"y":2238.8333911282516,"x":1663.8579},"b2":{"x":1663.8579,"y":2271.7408370941725}},"297":{"from_node_id":"2076383","to_node_id":"2075638","b1":{"y":2246.3140481277087,"x":1663.8579},"b2":{"y":2296.676360425696,"x":1663.8579}},"298":{"from_node_id":"2076383","to_node_id":"2075684","b1":{"y":2238.4073707600655,"x":1663.8579},"b2":{"y":2270.3207692002193,"x":1663.8579}}}},"2075993":{"name":"transketolase","bigg_id":"TKT1","reversibility":true,"label_x":2915.19442578125,"label_y":2195.1667234375,"gene_reaction_rule":"(b2935 or b2465)","genes":[{"bigg_id":"b2935","name":"b2935"},{"bigg_id":"b2465","name":"b2465"}],"metabolites":[{"coefficient":1,"bigg_id":"g3p_c"},{"coefficient":-1,"bigg_id":"xu5p__D_c"},{"coefficient":-1,"bigg_id":"r5p_c"},{"coefficient":1,"bigg_id":"s7p_c"}],"segments":{"387":{"from_node_id":"2076428","to_node_id":"2076429","b1":null,"b2":null},"388":{"from_node_id":"2076429","to_node_id":"2076427","b1":null,"b2":null},"389":{"from_node_id":"2075603","to_node_id":"2076428","b1":{"x":2888.6124263650145,"y":2043.346331230443},"b2":{"x":2892.0880388470046,"y":2088.598157044914}},"390":{"from_node_id":"2075464","to_node_id":"2076428","b1":{"x":2890.7568759860824,"y":2050.66969324974},"b2":{"x":2892.132545608325,"y":2088.9987178967967}},"391":{"from_node_id":"2076427","to_node_id":"2075576","b1":{"x":2896.1632075386083,"y":2715.5546748115066},"b2":{"x":2959.6753259099432,"y":2697.960545725856}},"392":{"from_node_id":"2076427","to_node_id":"2075696","b1":{"x":2892.0815294517133,"y":2517.1477660368037},"b2":{"x":2914.8291367237507,"y":2550.213783934218}}}},"2075994":{"name":"NAD(P) transhydrogenase (periplasm)","bigg_id":"THD2pp","reversibility":false,"label_x":4832.1070234375,"label_y":2836.3807737304687,"gene_reaction_rule":"(b1602 and b1603)","genes":[{"bigg_id":"b1602","name":"b1602"},{"bigg_id":"b1603","name":"b1603"}],"metabolites":[{"coefficient":-2,"bigg_id":"h_p"},{"coefficient":-1,"bigg_id":"nadp_c"},{"coefficient":1,"bigg_id":"nad_c"},{"coefficient":-1,"bigg_id":"nadh_c"},{"coefficient":2,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"nadph_c"}],"segments":{"393":{"from_node_id":"2076430","to_node_id":"2076431","b1":null,"b2":null},"394":{"from_node_id":"2076431","to_node_id":"2076432","b1":null,"b2":null},"395":{"from_node_id":"2075726","to_node_id":"2076430","b1":{"x":4803.353361328125,"y":2634.2195379677264},"b2":{"x":4804.93368359375,"y":2711.421788987974}},"396":{"from_node_id":"2075727","to_node_id":"2076430","b1":{"x":5117.166837890625,"y":2571.6761152390354},"b2":{"x":4804.93368359375,"y":2689.8142736439763}},"397":{"from_node_id":"2075728","to_node_id":"2076430","b1":{"x":4467.614103515625,"y":2601.701200688254},"b2":{"x":4803.353361328125,"y":2661.3694494252263}},"398":{"from_node_id":"2076432","to_node_id":"2075729","b1":{"x":4804.93368359375,"y":2849.6221677734375},"b2":{"x":4804.93368359375,"y":2916.1221677734375}},"399":{"from_node_id":"2076432","to_node_id":"2075730","b1":{"x":4804.93368359375,"y":2861.3713913684337},"b2":{"x":4766.44833203125,"y":2949.788199548425}},"400":{"from_node_id":"2076432","to_node_id":"2075731","b1":{"x":4804.93368359375,"y":2861.3713913684337},"b2":{"x":4826.9253828125,"y":2944.29039681405}}}},"2076004":{"name":"Citrate lyase","bigg_id":"CITL","reversibility":false,"label_x":3221.991544921875,"label_y":4281.536640625,"gene_reaction_rule":"((b0615 and b0616 and b0617) and b0614)","genes":[{"bigg_id":"b0615","name":"b0615"},{"bigg_id":"b0616","name":"b0616"},{"bigg_id":"b0617","name":"b0617"},{"bigg_id":"b0614","name":"b0614"}],"metabolites":[{"coefficient":1,"bigg_id":"ac_c"},{"coefficient":-1,"bigg_id":"cit_c"},{"coefficient":1,"bigg_id":"oaa_c"}],"segments":{"454":{"from_node_id":"2075384","to_node_id":"2076457","b1":{"y":4434.98,"x":3335.808},"b2":{"y":4384.23,"x":3291.358}},"455":{"from_node_id":"2076457","to_node_id":"2076456","b1":null,"b2":null},"456":{"from_node_id":"2076456","to_node_id":"2075295","b1":{"y":4251.351354383391,"x":3156.7453729404388},"b2":{"y":4215.467847944637,"x":3114.4825764681286}},"457":{"from_node_id":"2076456","to_node_id":"2075754","b1":{"y":4259.547706077668,"x":3166.3988538248095},"b2":{"y":4242.789020258894,"x":3146.6608460826988}}}},"2076008":{"name":"succinate dehydrogenase (irreversible)","bigg_id":"SUCDi","reversibility":false,"label_x":3509.070890625,"label_y":3430.937963671875,"gene_reaction_rule":"(b0721 and b0722 and b0723 and b0724)","genes":[{"bigg_id":"b0721","name":"b0721"},{"bigg_id":"b0722","name":"b0722"},{"bigg_id":"b0723","name":"b0723"},{"bigg_id":"b0724","name":"b0724"}],"metabolites":[{"coefficient":1,"bigg_id":"q8h2_c"},{"coefficient":1,"bigg_id":"fum_c"},{"coefficient":-1,"bigg_id":"succ_c"},{"coefficient":-1,"bigg_id":"q8_c"}],"segments":{"468":{"from_node_id":"2076465","to_node_id":"2076464","b1":null,"b2":null},"469":{"from_node_id":"2076464","to_node_id":"2076463","b1":null,"b2":null},"470":{"from_node_id":"2075545","to_node_id":"2076465","b1":{"y":3388.7302,"x":3742.5254411366805},"b2":{"y":3388.7302,"x":3679.7582323410043}},"471":{"from_node_id":"2075759","to_node_id":"2076465","b1":{"y":3388.7302,"x":3704.831550965852},"b2":{"y":3388.7302,"x":3668.450065289756}},"472":{"from_node_id":"2076463","to_node_id":"2075760","b1":{"y":3388.7302,"x":3408.5677935634226},"b2":{"y":3388.7302,"x":3375.223978544742}},"473":{"from_node_id":"2076463","to_node_id":"2075365","b1":{"y":3388.7302,"x":3393.905279920533},"b2":{"y":3388.7302,"x":3326.348933068442}}}},"2076010":{"name":"transaldolase","bigg_id":"TALA","reversibility":true,"label_x":2713.1527908429434,"label_y":2336.693470664108,"gene_reaction_rule":"(b2464 or b0008)","genes":[{"bigg_id":"b2464","name":"b2464"},{"bigg_id":"b0008","name":"b0008"}],"metabolites":[{"coefficient":1,"bigg_id":"f6p_c"},{"coefficient":-1,"bigg_id":"s7p_c"},{"coefficient":-1,"bigg_id":"g3p_c"},{"coefficient":1,"bigg_id":"e4p_c"}],"segments":{"476":{"from_node_id":"2076468","to_node_id":"2076469","b1":null,"b2":null},"477":{"from_node_id":"2076469","to_node_id":"2076467","b1":null,"b2":null},"478":{"from_node_id":"2075576","to_node_id":"2076468","b1":{"x":2487.349455078125,"y":2437.6079780121117},"b2":{"x":2660.98799984928,"y":2520.427616602643}},"479":{"from_node_id":"2075696","to_node_id":"2076468","b1":{"x":2668.0641796244854,"y":2454.970813571239},"b2":{"x":2667.090147457323,"y":2381.5568088005566}},"480":{"from_node_id":"2076467","to_node_id":"2075396","b1":{"x":2662.802534374014,"y":2132.981630256176},"b2":{"x":2239.8168623046877,"y":2218.6959494151606}},"481":{"from_node_id":"2076467","to_node_id":"2075354","b1":{"x":2665.1924743143836,"y":2193.5411049152613},"b2":{"x":2664.6553468739216,"y":2160.945162621386}}}},"2076011":{"name":"transketolase","bigg_id":"TKT2","reversibility":true,"label_x":2197.876798828125,"label_y":1920.343725390625,"gene_reaction_rule":"(b2935 or b2465)","genes":[{"bigg_id":"b2935","name":"b2935"},{"bigg_id":"b2465","name":"b2465"}],"metabolites":[{"coefficient":-1,"bigg_id":"e4p_c"},{"coefficient":-1,"bigg_id":"xu5p__D_c"},{"coefficient":1,"bigg_id":"g3p_c"},{"coefficient":1,"bigg_id":"f6p_c"}],"segments":{"482":{"from_node_id":"2076470","to_node_id":"2076471","b1":null,"b2":null},"483":{"from_node_id":"2076471","to_node_id":"2076472","b1":null,"b2":null},"484":{"from_node_id":"2075603","to_node_id":"2076470","b1":{"x":2592.1910836183065,"y":1951.7852537109375},"b2":{"x":2556.6443752808045,"y":1944.7164060546875}},"485":{"from_node_id":"2075354","to_node_id":"2076470","b1":{"x":2490.8241202639665,"y":1947.5439217710036},"b2":{"x":2482.565134691554,"y":1944.716528125}},"486":{"from_node_id":"2076472","to_node_id":"2075396","b1":{"x":1763.9251155204452,"y":1940.38498515625},"b2":{"x":1765.4729429457548,"y":1938.4683591796875}},"487":{"from_node_id":"2076472","to_node_id":"2075576","b1":{"x":2063.8047937392857,"y":1944.716528125},"b2":{"x":2086.412324443452,"y":1942.15744609375}}}},"2076013":{"name":"2-Oxogluterate dehydrogenase","bigg_id":"AKGDH","reversibility":false,"label_x":4185.5308515625,"label_y":3832.7302,"gene_reaction_rule":"(b0116 and b0726 and b0727)","genes":[{"bigg_id":"b0116","name":"b0116"},{"bigg_id":"b0726","name":"b0726"},{"bigg_id":"b0727","name":"b0727"}],"metabolites":[{"coefficient":-1,"bigg_id":"nad_c"},{"coefficient":-1,"bigg_id":"coa_c"},{"coefficient":-1,"bigg_id":"akg_c"},{"coefficient":1,"bigg_id":"co2_c"},{"coefficient":1,"bigg_id":"succoa_c"},{"coefficient":1,"bigg_id":"nadh_c"}],"segments":{"490":{"from_node_id":"2076474","to_node_id":"2076475","b1":null,"b2":null},"491":{"from_node_id":"2076475","to_node_id":"2076476","b1":null,"b2":null},"492":{"from_node_id":"2075762","to_node_id":"2076474","b1":{"y":3980.657238972404,"x":4179.858},"b2":{"x":4178.4156171875,"y":3917.072569504221}},"493":{"from_node_id":"2075763","to_node_id":"2076474","b1":{"y":3968.0509142803235,"x":4179.858},"b2":{"x":4178.4156171875,"y":3913.290672096597}},"494":{"from_node_id":"2075440","to_node_id":"2076474","b1":{"y":3996.84852893594,"x":4179.858},"b2":{"x":4178.4156171875,"y":3921.929956493282}},"495":{"from_node_id":"2076476","to_node_id":"2075679","b1":{"y":3750.682031512696,"x":4169.486375381713},"b2":{"y":3701.5696383756535,"x":4163.952584605708}},"496":{"from_node_id":"2076476","to_node_id":"2075764","b1":{"y":3755.529572495557,"x":4170.032577182598},"b2":{"y":3717.728108318524,"x":4165.773257275327}},"497":{"from_node_id":"2076476","to_node_id":"2075765","b1":{"y":3755.458414738617,"x":4170.024559407168},"b2":{"y":3717.4909157953903,"x":4165.7465313572275}}}},"2076020":{"name":"fructose-1-phosphate kinase","bigg_id":"FRUK","reversibility":false,"label_x":1242.23241171875,"label_y":2340.0397703125,"gene_reaction_rule":"b2168","genes":[{"bigg_id":"b2168","name":"b2168"}],"metabolites":[{"coefficient":1,"bigg_id":"adp_c"},{"coefficient":-1,"bigg_id":"atp_c"},{"coefficient":1,"bigg_id":"fdp_c"},{"coefficient":1,"bigg_id":"h_c"},{"coefficient":-1,"bigg_id":"f1p_c"}],"segments":{"527":{"from_node_id":"2076490","to_node_id":"2076491","b1":null,"b2":null},"528":{"from_node_id":"2076491","to_node_id":"2076489","b1":null,"b2":null},"529":{"from_node_id":"2075777","to_node_id":"2076490","b1":{"x":1192.7462003733933,"y":2362.47189921875},"b2":{"x":1219.4794194088931,"y":2362.47189921875}},"530":{"from_node_id":"2075481","to_node_id":"2076490","b1":{"x":1140.3953145507812,"y":2362.47189921875},"b2":{"x":1207.38651328125,"y":2362.47189921875}},"531":{"from_node_id":"2076489","to_node_id":"2075778","b1":{"x":1370.916107586714,"y":2362.47189921875},"b2":{"x":1439.165816890609,"y":2359.809057421875}},"532":{"from_node_id":"2076489","to_node_id":"2075779","b1":{"x":1366.0667999025468,"y":2362.47189921875},"b2":{"x":1399.0374686855728,"y":2362.47189921875}},"533":{"from_node_id":"2076489","to_node_id":"2075638","b1":{"x":1630.5481908672928,"y":2362.432592578125},"b2":{"x":1459.2000886331634,"y":2361.564428515625}}}},"2076028":{"name":"NAD transhydrogenase","bigg_id":"NADTRHD","reversibility":false,"label_x":4830.168302734375,"label_y":3194.033178515625,"gene_reaction_rule":"(b3962 or (b1602 and b1603))","genes":[{"bigg_id":"b3962","name":"b3962"},{"bigg_id":"b1602","name":"b1602"},{"bigg_id":"b1603","name":"b1603"}],"metabolites":[{"coefficient":-1,"bigg_id":"nad_c"},{"coefficient":-1,"bigg_id":"nadph_c"},{"coefficient":1,"bigg_id":"nadh_c"},{"coefficient":1,"bigg_id":"nadp_c"}],"segments":{"570":{"from_node_id":"2076510","to_node_id":"2076509","b1":null,"b2":null},"571":{"from_node_id":"2076509","to_node_id":"2076508","b1":null,"b2":null},"572":{"from_node_id":"2075731","to_node_id":"2076510","b1":{"x":4827.9253828125,"y":3063.420823117899},"b2":{"x":4805.93368359375,"y":3126.0105192595884}},"573":{"from_node_id":"2075730","to_node_id":"2076510","b1":{"x":4767.44833203125,"y":3068.109021757391},"b2":{"x":4805.93368359375,"y":3125.767638031123}},"574":{"from_node_id":"2076508","to_node_id":"2075728","b1":{"x":4805.93368359375,"y":3262.459792878984},"b2":{"x":4467.035490234375,"y":3367.7119809507803}},"575":{"from_node_id":"2076508","to_node_id":"2075727","b1":{"x":4804.136076171875,"y":3265.841477763369},"b2":{"x":5110.0464765625,"y":3361.6066190419588}}}},"2076030":{"name":"phosphogluconate dehydrogenase","bigg_id":"GND","reversibility":false,"label_x":2614.997892578125,"label_y":1640.813940234375,"gene_reaction_rule":"b2029","genes":[{"bigg_id":"b2029","name":"b2029"}],"metabolites":[{"coefficient":1,"bigg_id":"co2_c"},{"coefficient":1,"bigg_id":"nadph_c"},{"coefficient":-1,"bigg_id":"6pgc_c"},{"coefficient":-1,"bigg_id":"nadp_c"},{"coefficient":1,"bigg_id":"ru5p__D_c"}],"segments":{"582":{"from_node_id":"2076514","to_node_id":"2076516","b1":null,"b2":null},"583":{"from_node_id":"2076516","to_node_id":"2076515","b1":null,"b2":null},"584":{"from_node_id":"2075798","to_node_id":"2076514","b1":{"x":2588.450571290498,"y":1689.48166484375},"b2":{"x":2612.137065332462,"y":1689.48166484375}},"585":{"from_node_id":"2075444","to_node_id":"2076514","b1":{"x":2535.288419921875,"y":1689.48166484375},"b2":{"x":2596.1884199218753,"y":1689.48166484375}},"586":{"from_node_id":"2076515","to_node_id":"2075465","b1":{"x":2732.0884199218754,"y":1689.48166484375},"b2":{"x":2799.288419921875,"y":1689.48166484375}},"587":{"from_node_id":"2076515","to_node_id":"2075799","b1":{"x":2719.8347186016404,"y":1689.48166484375},"b2":{"x":2758.442748854426,"y":1689.48166484375}},"588":{"from_node_id":"2076515","to_node_id":"2075800","b1":{"x":2719.9984468518355,"y":1689.48166484375},"b2":{"x":2758.9885096884095,"y":1689.48166484375}}}},"2076036":{"name":"fructose-bisphosphate aldolase","bigg_id":"FBA","reversibility":true,"label_x":1626.8579,"label_y":2459.7302,"gene_reaction_rule":"(b2097 or b1773 or b2925)","genes":[{"bigg_id":"b2097","name":"b2097"},{"bigg_id":"b1773","name":"b1773"},{"bigg_id":"b2925","name":"b2925"}],"metabolites":[{"coefficient":1,"bigg_id":"g3p_c"},{"coefficient":1,"bigg_id":"dhap_c"},{"coefficient":-1,"bigg_id":"fdp_c"}],"segments":{"617":{"from_node_id":"2075638","to_node_id":"2076529","b1":{"y":2377.0802,"x":1616.8579},"b2":{"y":2415.2302,"x":1616.8579}},"618":{"from_node_id":"2076529","to_node_id":"2076530","b1":null,"b2":null},"620":{"from_node_id":"2076530","to_node_id":"2075576","b1":{"y":2572.8806658340163,"x":1616.8579},"b2":{"y":2629.231752780055,"x":1616.8579}}}},"2076045":{"name":"oxaloacetate decarboxylase","bigg_id":"OAADC","reversibility":false,"label_x":2416.952970703125,"label_y":4136.23537109375,"gene_reaction_rule":"b1850","genes":[{"bigg_id":"b1850","name":"b1850"}],"metabolites":[{"coefficient":1,"bigg_id":"pyr_c"},{"coefficient":-1,"bigg_id":"oaa_c"},{"coefficient":-1,"bigg_id":"h_c"},{"coefficient":1,"bigg_id":"co2_c"}],"segments":{"662":{"from_node_id":"2076552","to_node_id":"2076550","b1":null,"b2":null},"663":{"from_node_id":"2076550","to_node_id":"2076551","b1":null,"b2":null},"664":{"from_node_id":"2075295","to_node_id":"2076552","b1":{"x":2999.8826758318323,"y":4192.87013671875},"b2":{"x":2895.3480443511125,"y":4164.01955078125}},"665":{"from_node_id":"2075835","to_node_id":"2076552","b1":{"x":2675.733581114015,"y":4145.26857421875},"b2":{"x":2633.6746538263924,"y":4161.614765625}},"666":{"from_node_id":"2076551","to_node_id":"2076584","b1":{"y":4158.73,"x":2306.193132465627},"b2":{"x":2030.2905785963612,"y":4103.0805859375}},"667":{"from_node_id":"2076551","to_node_id":"2075836","b1":{"y":4158.73,"x":2418.0087575950824},"b2":{"y":4158.73,"x":2383.3605253169417}}}},"2076052":{"name":"threonine synthase","bigg_id":"THRS","reversibility":false,"label_x":3496.7512817382812,"label_y":1731.841064453125,"gene_reaction_rule":"b0004","genes":[{"name":"b0004","bigg_id":"b0004"}],"metabolites":[{"bigg_id":"phom_c","coefficient":-1},{"bigg_id":"h2o_c","coefficient":-1},{"bigg_id":"pi_c","coefficient":1},{"bigg_id":"thr__L_c","coefficient":1}],"segments":{"1164":{"from_node_id":"2076626","to_node_id":"2076627","b1":null,"b2":null},"1165":{"from_node_id":"2076628","to_node_id":"2076627","b1":null,"b2":null},"1166":{"from_node_id":"2076626","to_node_id":"2076622","b1":{"x":3598.7512817382812,"y":1763.8056640625},"b2":{"x":3644.2512817382812,"y":1763.8056640625}},"1167":{"from_node_id":"2076626","to_node_id":"2076629","b1":{"x":3602.7512817382812,"y":1763.8056640625},"b2":{"x":3621.7512817382812,"y":1784.8056640625}},"1168":{"from_node_id":"2076628","to_node_id":"2076630","b1":{"x":3490.7512817382812,"y":1763.8056640625},"b2":{"x":3471.7512817382812,"y":1784.8056640625}},"1169":{"from_node_id":"2076628","to_node_id":"2076631","b1":{"x":3494.7512817382812,"y":1763.8056640625},"b2":{"x":3449.2512817382812,"y":1763.8056640625}}}},"2076053":{"name":"Tryptophanase (L-tryptophan)","bigg_id":"TRPAS2","reversibility":true,"label_x":3504.042436241991,"label_y":1970.7489607065845,"gene_reaction_rule":"b3708","genes":[{"name":"b3708","bigg_id":"b3708"}],"metabolites":[{"bigg_id":"h2o_c","coefficient":-1},{"bigg_id":"nh4_c","coefficient":1},{"bigg_id":"pyr_c","coefficient":1},{"bigg_id":"trp__L_c","coefficient":-1},{"bigg_id":"indole_c","coefficient":1}],"segments":{"1170":{"from_node_id":"2076633","to_node_id":"2076634","b1":null,"b2":null},"1171":{"from_node_id":"2076635","to_node_id":"2076634","b1":null,"b2":null},"1172":{"from_node_id":"2076633","to_node_id":"2076632","b1":{"x":3498.0440357597527,"y":2010.3257073180466},"b2":{"x":3479.2032984739826,"y":1989.1827033089567}},"1173":{"from_node_id":"2076635","to_node_id":"2076636","b1":{"x":3610.0408367242294,"y":2011.1722140951251},"b2":{"x":3629.1990140514063,"y":1990.3164177425379}},"1174":{"from_node_id":"2076635","to_node_id":"2076637","b1":{"x":3610.0408367242294,"y":2011.1722140951251},"b2":{"x":3628.881574010001,"y":2032.3152181042142}},"1175":{"from_node_id":"2076633","to_node_id":"2076638","b1":{"x":3502.0439215084853,"y":2010.3559397029458},"b2":{"x":3456.5452211166676,"y":2010.0120463247558}},"1176":{"from_node_id":"2076635","to_node_id":"2076639","b1":{"x":3606.0409509755,"y":2011.1419817102224},"b2":{"x":3651.5396513673145,"y":2011.4858750884168}}}},"2076054":{"name":"phenylalanine transaminase","bigg_id":"PHETA1","reversibility":true,"label_x":3508.151077270508,"label_y":2172.119140625,"gene_reaction_rule":"(b4054 or b0928 or b3770)","genes":[{"name":"b4054","bigg_id":"b4054"},{"name":"b0928","bigg_id":"b0928"},{"name":"b3770","bigg_id":"b3770"}],"metabolites":[{"bigg_id":"akg_c","coefficient":-1},{"bigg_id":"phpyr_c","coefficient":1},{"bigg_id":"glu__L_c","coefficient":1},{"bigg_id":"phe__L_c","coefficient":-1}],"segments":{"1177":{"from_node_id":"2076642","to_node_id":"2076643","b1":null,"b2":null},"1178":{"from_node_id":"2076644","to_node_id":"2076643","b1":null,"b2":null},"1179":{"from_node_id":"2076642","to_node_id":"2076641","b1":{"x":3502.151077270508,"y":2212.119140625},"b2":{"x":3483.151077270508,"y":2191.119140625}},"1180":{"from_node_id":"2076644","to_node_id":"2076645","b1":{"x":3610.151077270508,"y":2212.119140625},"b2":{"x":3655.651077270508,"y":2212.119140625}},"1181":{"from_node_id":"2076644","to_node_id":"2076646","b1":{"x":3614.151077270508,"y":2212.119140625},"b2":{"x":3633.151077270508,"y":2191.119140625}},"1182":{"from_node_id":"2076642","to_node_id":"2076647","b1":{"x":3506.151077270508,"y":2212.119140625},"b2":{"x":3460.651077270508,"y":2212.119140625}}}},"2076055":{"name":"phosphoserine phosphatase (L-serine)","bigg_id":"PSP_L","reversibility":false,"label_x":3497.428955078125,"label_y":1537.315185546875,"gene_reaction_rule":"b4388","genes":[{"name":"b4388","bigg_id":"b4388"}],"metabolites":[{"bigg_id":"h2o_c","coefficient":-1},{"bigg_id":"pi_c","coefficient":1},{"bigg_id":"pser__L_c","coefficient":-1},{"bigg_id":"ser__L_c","coefficient":1}],"segments":{"1183":{"from_node_id":"2076649","to_node_id":"2076650","b1":null,"b2":null},"1184":{"from_node_id":"2076651","to_node_id":"2076650","b1":null,"b2":null},"1185":{"from_node_id":"2076649","to_node_id":"2076648","b1":{"x":3603.428955078125,"y":1577.315185546875},"b2":{"x":3622.428955078125,"y":1598.315185546875}},"1186":{"from_node_id":"2076651","to_node_id":"2076652","b1":{"x":3491.428955078125,"y":1577.315185546875},"b2":{"x":3472.428955078125,"y":1598.315185546875}},"1187":{"from_node_id":"2076649","to_node_id":"2076653","b1":{"x":3599.428955078125,"y":1577.315185546875},"b2":{"x":3644.928955078125,"y":1577.315185546875}},"1188":{"from_node_id":"2076651","to_node_id":"2076654","b1":{"x":3495.428955078125,"y":1577.315185546875},"b2":{"x":3449.928955078125,"y":1577.315185546875}}}},"2076056":{"name":"argininosuccinate lyase","bigg_id":"ARGSL","reversibility":true,"label_x":3291.21826171875,"label_y":2346.2216796875,"gene_reaction_rule":"b3960","genes":[{"name":"b3960","bigg_id":"b3960"}],"metabolites":[{"bigg_id":"argsuc_c","coefficient":-1},{"bigg_id":"fum_c","coefficient":1},{"bigg_id":"arg__L_c","coefficient":1}],"segments":{"1189":{"from_node_id":"2076656","to_node_id":"2076657","b1":null,"b2":null},"1190":{"from_node_id":"2076658","to_node_id":"2076657","b1":null,"b2":null},"1191":{"from_node_id":"2076656","to_node_id":"2076655","b1":{"x":3393.21826171875,"y":2386.2216796875},"b2":{"x":3438.71826171875,"y":2386.2216796875}},"1192":{"from_node_id":"2076658","to_node_id":"2076659","b1":{"x":3285.21826171875,"y":2386.2216796875},"b2":{"x":3266.21826171875,"y":2407.2216796875}},"1193":{"from_node_id":"2076658","to_node_id":"2076660","b1":{"x":3289.21826171875,"y":2386.2216796875},"b2":{"x":3243.71826171875,"y":2386.2216796875}}}},"2076057":{"name":"argininosuccinate synthase","bigg_id":"ARGSS","reversibility":false,"label_x":3599.2537231445312,"label_y":2354.2568359375,"gene_reaction_rule":"b3172","genes":[{"name":"b3172","bigg_id":"b3172"}],"metabolites":[{"bigg_id":"atp_c","coefficient":-1},{"bigg_id":"asp__L_c","coefficient":-1},{"bigg_id":"ppi_c","coefficient":1},{"bigg_id":"argsuc_c","coefficient":1},{"bigg_id":"amp_c","coefficient":1},{"bigg_id":"citr__L_c","coefficient":-1},{"bigg_id":"h_c","coefficient":1}],"segments":{"1194":{"from_node_id":"2076661","to_node_id":"2076662","b1":null,"b2":null},"1195":{"from_node_id":"2076663","to_node_id":"2076662","b1":null,"b2":null},"1196":{"from_node_id":"2076661","to_node_id":"2076664","b1":{"x":3697.21826171875,"y":2386.2216796875},"b2":{"x":3929.1253051757812,"y":2505.8427734375}},"1197":{"from_node_id":"2076661","to_node_id":"2076665","b1":{"x":3697.21826171875,"y":2386.2216796875},"b2":{"x":3740.3248291015625,"y":2391.15087890625}},"1198":{"from_node_id":"2076663","to_node_id":"2076666","b1":{"x":3585.21826171875,"y":2386.2216796875},"b2":{"x":3582.289306640625,"y":2341.115234375}},"1199":{"from_node_id":"2076663","to_node_id":"2076655","b1":{"x":3589.21826171875,"y":2386.2216796875},"b2":{"x":3543.71826171875,"y":2386.2216796875}},"1200":{"from_node_id":"2076663","to_node_id":"2076667","b1":{"x":3585.21826171875,"y":2386.2216796875},"b2":{"x":3566.21826171875,"y":2435.345703125}},"1201":{"from_node_id":"2076661","to_node_id":"2076668","b1":{"x":3693.21826171875,"y":2386.2216796875},"b2":{"x":3742.7359619140625,"y":2382.20361328125}},"1202":{"from_node_id":"2076663","to_node_id":"2076669","b1":{"x":3585.21826171875,"y":2386.2216796875},"b2":{"x":3570.2360229492188,"y":2465.29248046875}}}},"2076062":{"name":"hexokinase (D-glucose:ATP)","bigg_id":"HEX1","reversibility":false,"label_x":1644.8579,"label_y":1510.6070310546875,"gene_reaction_rule":"b2388","genes":[{"name":"b2388","bigg_id":"b2388"}],"metabolites":[{"bigg_id":"glc__D_c","coefficient":-1},{"bigg_id":"g6p_c","coefficient":1},{"bigg_id":"h_c","coefficient":1},{"bigg_id":"atp_c","coefficient":-1},{"bigg_id":"adp_c","coefficient":1}],"segments":{"1231":{"from_node_id":"2076698","to_node_id":"2076699","b1":null,"b2":null},"1232":{"from_node_id":"2076700","to_node_id":"2076699","b1":null,"b2":null},"1233":{"from_node_id":"2076698","to_node_id":"2076701","b1":{"x":1614.8579,"y":1448.6070310546875},"b2":{"x":1614.8579,"y":1360.983862109375}},"1234":{"from_node_id":"2076700","to_node_id":"2075395","b1":{"x":1614.8579,"y":1552.6070310546875},"b2":{"x":1614.8579,"y":1640.2302}},"1235":{"from_node_id":"2076700","to_node_id":"2076702","b1":{"x":1614.8579,"y":1556.6070310546875},"b2":{"x":1593.8579,"y":1575.6070310546875}},"1236":{"from_node_id":"2076698","to_node_id":"2076703","b1":{"x":1614.8579,"y":1444.6070310546875},"b2":{"x":1593.8579,"y":1425.6070310546875}},"1237":{"from_node_id":"2076700","to_node_id":"2076704","b1":{"x":1614.8579,"y":1556.6070310546875},"b2":{"x":1635.8579,"y":1575.6070310546875}}}},"2076065":{"name":"adenylsuccinate lyase","bigg_id":"ADSL1r","reversibility":true,"label_x":4152.8642578125,"label_y":2048.5985107421875,"gene_reaction_rule":"b1131","genes":[{"name":"b1131","bigg_id":"b1131"}],"metabolites":[{"bigg_id":"fum_c","coefficient":1},{"bigg_id":"amp_c","coefficient":1},{"bigg_id":"dcamp_c","coefficient":-1}],"segments":{"1249":{"from_node_id":"2076718","to_node_id":"2076719","b1":null,"b2":null},"1250":{"from_node_id":"2076720","to_node_id":"2076719","b1":null,"b2":null},"1251":{"from_node_id":"2076720","to_node_id":"2076721","b1":{"x":4122.8642578125,"y":2094.5985107421875},"b2":{"x":4143.8642578125,"y":2113.5985107421875}},"1252":{"from_node_id":"2076720","to_node_id":"2076722","b1":{"x":4122.8642578125,"y":2090.5985107421875},"b2":{"x":4122.8642578125,"y":2136.0985107421875}},"1253":{"from_node_id":"2076718","to_node_id":"2076717","b1":{"x":4122.8642578125,"y":1986.5985107421875},"b2":{"x":4122.8642578125,"y":1941.0985107421875}}}},"2076066":{"name":"GMP synthase","bigg_id":"GMPS2","reversibility":false,"label_x":4218.290771484375,"label_y":1778.9654541015625,"gene_reaction_rule":"b2507","genes":[{"name":"b2507","bigg_id":"b2507"}],"metabolites":[{"bigg_id":"xmp_c","coefficient":-1},{"bigg_id":"h2o_c","coefficient":-1},{"bigg_id":"gmp_c","coefficient":1},{"bigg_id":"atp_c","coefficient":-1},{"bigg_id":"glu__L_c","coefficient":1},{"bigg_id":"h_c","coefficient":2},{"bigg_id":"gln__L_c","coefficient":-1},{"bigg_id":"ppi_c","coefficient":1},{"bigg_id":"amp_c","coefficient":1}],"segments":{"1254":{"from_node_id":"2076724","to_node_id":"2076725","b1":null,"b2":null},"1255":{"from_node_id":"2076726","to_node_id":"2076725","b1":null,"b2":null},"1256":{"from_node_id":"2076724","to_node_id":"2076723","b1":{"x":4234.178969430544,"y":1798.3704219575875},"b2":{"x":4188.678981988911,"y":1798.4042274497745}},"1257":{"from_node_id":"2076724","to_node_id":"2076727","b1":{"x":4230.178970534581,"y":1798.3733938689898},"b2":{"x":4216.71813204935,"y":1779.7397539683006}},"1258":{"from_node_id":"2076726","to_node_id":"2076728","b1":{"x":4338.178940725706,"y":1798.2931522611625},"b2":{"x":4383.678928167339,"y":1798.259346768975}},"1259":{"from_node_id":"2076724","to_node_id":"2076729","b1":{"x":4230.178970534581,"y":1798.3733938689898},"b2":{"x":4211.452747328383,"y":1820.2861460237834}},"1260":{"from_node_id":"2076726","to_node_id":"2076730","b1":{"x":4342.178939621669,"y":1798.2901803497607},"b2":{"x":4366.7059440778685,"y":1777.8276235074663}},"1261":{"from_node_id":"2076726","to_node_id":"2076731","b1":{"x":4342.178939621669,"y":1798.2901803497607},"b2":{"x":4361.4405593569,"y":1818.3740155629491}},"1262":{"from_node_id":"2076724","to_node_id":"2076732","b1":{"x":4230.178970534581,"y":1798.3733938689898},"b2":{"x":4182.482666015625,"y":1867.53564453125}},"1263":{"from_node_id":"2076726","to_node_id":"2076733","b1":{"x":4342.178939621669,"y":1798.2901803497607},"b2":{"x":4212.936767578125,"y":2072.64306640625}},"1264":{"from_node_id":"2076726","to_node_id":"2076734","b1":{"x":4342.178939621669,"y":1798.2901803497607},"b2":{"x":4170.936767578125,"y":2072.64306640625}}}},"2076067":{"name":"IMP dehydrogenase","bigg_id":"IMPD","reversibility":false,"label_x":4165.35888671875,"label_y":1688.99267578125,"gene_reaction_rule":"b2508","genes":[{"name":"b2508","bigg_id":"b2508"}],"metabolites":[{"bigg_id":"xmp_c","coefficient":1},{"bigg_id":"h2o_c","coefficient":-1},{"bigg_id":"h_c","coefficient":1},{"bigg_id":"nad_c","coefficient":-1},{"bigg_id":"nadh_c","coefficient":1},{"bigg_id":"imp_c","coefficient":-1}],"segments":{"1265":{"from_node_id":"2076735","to_node_id":"2076736","b1":null,"b2":null},"1266":{"from_node_id":"2076737","to_node_id":"2076736","b1":null,"b2":null},"1267":{"from_node_id":"2076737","to_node_id":"2076723","b1":{"x":4135.35888671875,"y":1730.99267578125},"b2":{"x":4136.678593654909,"y":1750.2513121905351}},"1268":{"from_node_id":"2076735","to_node_id":"2076739","b1":{"x":4135.35888671875,"y":1622.99267578125},"b2":{"x":4156.35888671875,"y":1603.99267578125}},"1269":{"from_node_id":"2076737","to_node_id":"2076740","b1":{"x":4135.35888671875,"y":1734.99267578125},"b2":{"x":4147.525146484375,"y":1752.54248046875}},"1270":{"from_node_id":"2076735","to_node_id":"2076741","b1":{"x":4135.35888671875,"y":1622.99267578125},"b2":{"x":4114.35888671875,"y":1603.99267578125}},"1271":{"from_node_id":"2076737","to_node_id":"2076742","b1":{"x":4135.35888671875,"y":1734.99267578125},"b2":{"x":4105.525146484375,"y":1752.54248046875}},"1272":{"from_node_id":"2076735","to_node_id":"2076710","b1":{"x":4135.35888671875,"y":1626.99267578125},"b2":{"x":4135.35888671875,"y":1581.49267578125}}}},"2076068":{"name":"orotidine-5'-phosphate decarboxylase","bigg_id":"OMPDC","reversibility":false,"label_x":4415.77587890625,"label_y":2037.26123046875,"gene_reaction_rule":"b1281","genes":[{"name":"b1281","bigg_id":"b1281"}],"metabolites":[{"bigg_id":"ump_c","coefficient":1},{"bigg_id":"co2_c","coefficient":1},{"bigg_id":"h_c","coefficient":-1},{"bigg_id":"orot5p_c","coefficient":-1}],"segments":{"1273":{"from_node_id":"2076744","to_node_id":"2076745","b1":null,"b2":null},"1274":{"from_node_id":"2076746","to_node_id":"2076745","b1":null,"b2":null},"1275":{"from_node_id":"2076746","to_node_id":"2076747","b1":{"x":4385.77587890625,"y":2079.26123046875},"b2":{"x":4385.77587890625,"y":2124.76123046875}},"1276":{"from_node_id":"2076746","to_node_id":"2076748","b1":{"x":4385.77587890625,"y":2083.26123046875},"b2":{"x":4406.77587890625,"y":2102.26123046875}},"1277":{"from_node_id":"2076744","to_node_id":"2076743","b1":{"x":4385.77587890625,"y":1971.26123046875},"b2":{"x":4406.77587890625,"y":1952.26123046875}},"1278":{"from_node_id":"2076744","to_node_id":"2076749","b1":{"x":4385.77587890625,"y":1975.26123046875},"b2":{"x":4385.77587890625,"y":1929.76123046875}}}},"2076069":{"name":"glutamate dehydrogenase (NADP)","bigg_id":"GLUDy","reversibility":true,"label_x":4649.9605390625,"label_y":3851.6413328125,"gene_reaction_rule":"b1761","genes":[{"name":"b1761","bigg_id":"b1761"}],"metabolites":[{"bigg_id":"akg_c","coefficient":1},{"bigg_id":"h2o_c","coefficient":-1},{"bigg_id":"nadp_c","coefficient":-1},{"bigg_id":"nadph_c","coefficient":1},{"bigg_id":"glu__L_c","coefficient":-1},{"bigg_id":"h_c","coefficient":1},{"bigg_id":"nh4_c","coefficient":1}],"segments":{"1279":{"from_node_id":"2076750","to_node_id":"2076751","b1":null,"b2":null},"1280":{"from_node_id":"2076752","to_node_id":"2076751","b1":null,"b2":null},"1281":{"from_node_id":"2076752","to_node_id":"2075440","b1":{"x":4647.9605390625,"y":3891.6413328125},"b2":{"x":4393.8746015625,"y":3902.175756640625}},"1282":{"from_node_id":"2076750","to_node_id":"2076753","b1":{"x":4755.9605390625,"y":3891.6413328125},"b2":{"x":4774.9605390625,"y":3870.6413328125}},"1283":{"from_node_id":"2076750","to_node_id":"2076754","b1":{"x":4755.9605390625,"y":3891.6413328125},"b2":{"x":4774.9605390625,"y":3912.6413328125}},"1284":{"from_node_id":"2076752","to_node_id":"2076755","b1":{"x":4643.9605390625,"y":3891.6413328125},"b2":{"x":4627.066984375,"y":3898.031225390625}},"1285":{"from_node_id":"2076750","to_node_id":"2076756","b1":{"x":4859.41415234375,"y":3889.53439921875},"b2":{"x":4934.41122265625,"y":3897.96213359375}},"1286":{"from_node_id":"2076752","to_node_id":"2076757","b1":{"x":4643.9605390625,"y":3891.6413328125},"b2":{"x":4624.9605390625,"y":3912.6413328125}},"1287":{"from_node_id":"2076752","to_node_id":"2076758","b1":{"x":4643.9605390625,"y":3891.6413328125},"b2":{"x":4595.46346875,"y":3895.647436328125}}}},"2076070":{"name":"glutamate synthase (NADPH)","bigg_id":"GLUSy","reversibility":false,"label_x":4641.53329296875,"label_y":4136.07639140625,"gene_reaction_rule":"(b3212 and b3213)","genes":[{"name":"b3212","bigg_id":"b3212"},{"name":"b3213","bigg_id":"b3213"}],"metabolites":[{"bigg_id":"akg_c","coefficient":-1},{"bigg_id":"nadp_c","coefficient":1},{"bigg_id":"nadph_c","coefficient":-1},{"bigg_id":"glu__L_c","coefficient":2},{"bigg_id":"h_c","coefficient":-1},{"bigg_id":"gln__L_c","coefficient":-1}],"segments":{"1288":{"from_node_id":"2076759","to_node_id":"2076760","b1":null,"b2":null},"1289":{"from_node_id":"2076761","to_node_id":"2076760","b1":null,"b2":null},"1290":{"from_node_id":"2076759","to_node_id":"2075440","b1":{"x":4494.154875,"y":4176.07639140625},"b2":{"x":4315.918546875,"y":4178.18381328125}},"1291":{"from_node_id":"2076761","to_node_id":"2076762","b1":{"x":4715.9292890625,"y":4173.9694578125},"b2":{"x":4734.9292890625,"y":4152.9694578125}},"1292":{"from_node_id":"2076759","to_node_id":"2076763","b1":{"x":4589.18075390625,"y":4173.9694578125},"b2":{"x":4584.9292890625,"y":4152.9694578125}},"1293":{"from_node_id":"2076761","to_node_id":"2076756","b1":{"x":4711.9292890625,"y":4173.9694578125},"b2":{"x":4848.02743359375,"y":4171.8630125}},"1294":{"from_node_id":"2076759","to_node_id":"2076765","b1":{"x":4563.89755078125,"y":4173.9694578125},"b2":{"x":4557.53915234375,"y":4178.1139890625}},"1295":{"from_node_id":"2076759","to_node_id":"2076766","b1":{"x":4589.18075390625,"y":4173.9694578125},"b2":{"x":4542.7906171875,"y":4203.2585203125}}}},"2076071":{"name":"glutamine synthetase","bigg_id":"GLNS","reversibility":false,"label_x":4652.03622265625,"label_y":4352.9948484375,"gene_reaction_rule":"(b3870 or b1297)","genes":[{"name":"b3870","bigg_id":"b3870"},{"name":"b1297","bigg_id":"b1297"}],"metabolites":[{"bigg_id":"atp_c","coefficient":-1},{"bigg_id":"glu__L_c","coefficient":-1},{"bigg_id":"h_c","coefficient":1},{"bigg_id":"adp_c","coefficient":1},{"bigg_id":"pi_c","coefficient":1},{"bigg_id":"nh4_c","coefficient":-1},{"bigg_id":"gln__L_c","coefficient":1}],"segments":{"1296":{"from_node_id":"2076767","to_node_id":"2076768","b1":null,"b2":null},"1297":{"from_node_id":"2076769","to_node_id":"2076768","b1":null,"b2":null},"1298":{"from_node_id":"2076767","to_node_id":"2076770","b1":{"x":4745.39462109375,"y":4386.67404765625},"b2":{"x":4764.39462109375,"y":4365.67404765625}},"1299":{"from_node_id":"2076767","to_node_id":"2076756","b1":{"x":4741.39462109375,"y":4386.67404765625},"b2":{"x":4940.7007734375,"y":4405.6374265625}},"1300":{"from_node_id":"2076769","to_node_id":"2076772","b1":{"x":4633.39462109375,"y":4386.67404765625},"b2":{"x":4614.39462109375,"y":4365.67404765625}},"1301":{"from_node_id":"2076769","to_node_id":"2076773","b1":{"x":4633.39462109375,"y":4386.67404765625},"b2":{"x":4614.39462109375,"y":4407.67404765625}},"1302":{"from_node_id":"2076769","to_node_id":"2076774","b1":{"x":4633.39462109375,"y":4386.67404765625},"b2":{"x":4614.39462109375,"y":4449.67404765625}},"1303":{"from_node_id":"2076767","to_node_id":"2076775","b1":{"x":4745.39462109375,"y":4386.67404765625},"b2":{"x":4785.46395703125,"y":4405.5671140625}},"1304":{"from_node_id":"2076769","to_node_id":"2076766","b1":{"x":4637.39462109375,"y":4386.67404765625},"b2":{"x":4549.7564375,"y":4388.78098125}}}},"2076073":{"name":"glutathione oxidoreductase","bigg_id":"GTHOr","reversibility":true,"label_x":3455.4952695344737,"label_y":2775.6108635424653,"gene_reaction_rule":"b3500","genes":[{"name":"b3500","bigg_id":"b3500"}],"metabolites":[{"bigg_id":"nadph_c","coefficient":-1},{"bigg_id":"nadp_c","coefficient":1},{"bigg_id":"gthrd_c","coefficient":2},{"bigg_id":"h_c","coefficient":-1},{"bigg_id":"gthox_c","coefficient":-1}],"segments":{"1311":{"from_node_id":"2076783","to_node_id":"2076784","b1":null,"b2":null},"1312":{"from_node_id":"2076785","to_node_id":"2076784","b1":null,"b2":null},"1313":{"from_node_id":"2076783","to_node_id":"2076786","b1":{"x":3467.385601931809,"y":2804.2755644737117},"b2":{"x":3403.914514975241,"y":2824.720328073328}},"1314":{"from_node_id":"2076785","to_node_id":"2076787","b1":{"x":3579.3813043246455,"y":2805.256709486219},"b2":{"x":3620.340536238984,"y":2826.616341105994}},"1315":{"from_node_id":"2076785","to_node_id":"2076781","b1":{"x":3575.381457810615,"y":2805.221668592915},"b2":{"x":3699.965544337325,"y":2806.3130948934036}},"1316":{"from_node_id":"2076783","to_node_id":"2076788","b1":{"x":3467.385601931809,"y":2804.2755644737117},"b2":{"x":3448.5702956800105,"y":2783.1099260318642}},"1317":{"from_node_id":"2076783","to_node_id":"2076789","b1":{"x":3471.3854484458398,"y":2804.3106053670185},"b2":{"x":3349.937101130149,"y":2806.410345510879}}}}},"nodes":{"2075291":{"node_type":"metabolite","x":3006.858,"y":3627.7302,"bigg_id":"mal__L_c","name":"L-Malate","label_x":3033.7652265625,"label_y":3621.384496875,"node_is_primary":true},"2075292":{"node_type":"metabolite","x":3030.086271484375,"y":3786.964575,"bigg_id":"nad_c","name":"Nicotinamide adenine dinucleotide","label_x":3007.911466796875,"label_y":3827.157934375,"node_is_primary":false},"2075293":{"node_type":"metabolite","x":3047.123380859375,"y":4046.6335203125,"bigg_id":"nadh_c","name":"Nicotinamide adenine dinucleotide - reduced","label_x":3010.294279296875,"label_y":4028.0163328125,"node_is_primary":false},"2075294":{"node_type":"metabolite","x":3040.584318359375,"y":3978.652075,"bigg_id":"h_c","name":"H+","label_x":3026.160490234375,"label_y":3951.997778125,"node_is_primary":false},"2075295":{"node_type":"metabolite","x":3048.858,"y":4170.73,"bigg_id":"oaa_c","name":"Oxaloacetate","label_x":3078.3413984375,"label_y":4166.88234375,"node_is_primary":true},"2075333":{"node_type":"metabolite","x":3607.858,"y":4514.73,"bigg_id":"acon__C_c","name":"cis-Aconitate","label_x":3629.7281171875,"label_y":4536.88966796875,"node_is_primary":true},"2075338":{"node_type":"metabolite","x":1618.8579,"y":3810.7302,"bigg_id":"pep_c","name":"Phosphoenolpyruvate","label_x":1528.8360494140625,"label_y":3814.796850390625,"node_is_primary":true},"2075339":{"node_type":"metabolite","x":1937.270253515625,"y":3732.255590625,"bigg_id":"h2o_c","name":"H2O","label_x":1957.270253515625,"label_y":3732.255590625,"node_is_primary":false},"2075340":{"node_type":"metabolite","x":1867.270253515625,"y":3712.255590625,"bigg_id":"co2_c","name":"CO2","label_x":1877.270253515625,"label_y":3692.255590625,"node_is_primary":false},"2075341":{"node_type":"metabolite","x":2224.270353515625,"y":3811.255590625,"bigg_id":"h_c","name":"H+","label_x":2244.270353515625,"label_y":3811.255590625,"node_is_primary":false},"2075342":{"node_type":"metabolite","x":2274.270353515625,"y":3851.255590625,"bigg_id":"pi_c","name":"Phosphate","label_x":2294.270353515625,"label_y":3851.255590625,"node_is_primary":false},"2075354":{"node_type":"metabolite","x":2662.431386236149,"y":2085.7472361046266,"bigg_id":"e4p_c","name":"D-Erythrose 4-phosphate","label_x":2697.223622564274,"label_y":2111.4322946983766,"node_is_primary":true},"2075365":{"node_type":"metabolite","x":3232.858,"y":3354.7302,"bigg_id":"fum_c","name":"Fumarate","label_x":3210.3003828125,"label_y":3399.849340625,"node_is_primary":true},"2075382":{"node_type":"metabolite","x":2402.858,"y":4379.73,"bigg_id":"accoa_c","name":"Acetyl-CoA","label_x":2329.4917890625,"label_y":4351.6684765625,"node_is_primary":true},"2075383":{"node_type":"metabolite","x":3032.858,"y":4308.73,"bigg_id":"h2o_c","name":"H2O","label_x":3042.858,"label_y":4328.73,"node_is_primary":false},"2075384":{"node_type":"metabolite","x":3354.858,"y":4456.73,"bigg_id":"cit_c","name":"Citrate","label_x":3382.858,"label_y":4438.73,"node_is_primary":true},"2075385":{"node_type":"metabolite","x":3272.858,"y":4521.73,"bigg_id":"h_c","name":"H+","label_x":3248.354826171875,"label_y":4555.34279296875,"node_is_primary":false},"2075386":{"node_type":"metabolite","x":3212.858,"y":4471.73,"bigg_id":"coa_c","name":"Coenzyme A","label_x":3194.858,"label_y":4481.73,"node_is_primary":false},"2075395":{"node_type":"metabolite","x":1614.8579,"y":1692.7302,"bigg_id":"g6p_c","name":"D-Glucose 6-phosphate","label_x":1534.79393515625,"label_y":1733.56223125,"node_is_primary":true},"2075396":{"node_type":"metabolite","x":1614.8579,"y":1980.7302,"bigg_id":"f6p_c","name":"D-Fructose 6-phosphate","label_x":1629.8211568359375,"label_y":1949.3050291015625,"node_is_primary":true},"2075405":{"node_type":"metabolite","x":1708.8579,"y":3240.7302,"bigg_id":"atp_c","name":"ATP","label_x":1724.3890279296875,"label_y":3231.9010984375,"node_is_primary":false},"2075406":{"node_type":"metabolite","x":1618.8579,"y":3310.7302,"bigg_id":"3pg_c","name":"3-Phospho-D-glycerate","label_x":1492.579823828125,"label_y":3308.7302,"node_is_primary":true},"2075407":{"node_type":"metabolite","x":1708.8579,"y":3070.7302,"bigg_id":"adp_c","name":"ADP","label_x":1728.8579,"label_y":3070.7302,"node_is_primary":false},"2075408":{"node_type":"metabolite","x":1618.8579,"y":3000.7302,"bigg_id":"13dpg_c","name":"3-Phospho-D-glyceroyl phosphate","label_x":1448.91502890625,"label_y":3011.1999265625,"node_is_primary":true},"2075424":{"node_type":"metabolite","x":1722.8579,"y":1781.7302,"bigg_id":"nadp_c","name":"Nicotinamide adenine dinucleotide phosphate","label_x":1719.52635703125,"label_y":1813.39035625,"node_is_primary":false},"2075425":{"node_type":"metabolite","x":1954.835683203125,"y":1761.7303220703125,"bigg_id":"nadph_c","name":"Nicotinamide adenine dinucleotide phosphate - reduced","label_x":1938.183827734375,"label_y":1795.7193357421875,"node_is_primary":false},"2075426":{"node_type":"metabolite","x":2009.835683203125,"y":1692.7303220703125,"bigg_id":"6pgl_c","name":"6-phospho-D-glucono-1,5-lactone","label_x":2009.835683203125,"label_y":1663.7303220703125,"node_is_primary":true},"2075427":{"node_type":"metabolite","x":1912.835683203125,"y":1801.7303220703125,"bigg_id":"h_c","name":"H+","label_x":1897.8438619140625,"label_y":1835.056371875,"node_is_primary":false},"2075440":{"node_type":"metabolite","x":4153.858,"y":4070.7302,"bigg_id":"akg_c","name":"2-Oxoglutarate","label_x":4059.047697265625,"label_y":4047.652075,"node_is_primary":true},"2075443":{"node_type":"metabolite","x":2153.80760703125,"y":1743.48166484375,"bigg_id":"h2o_c","name":"H2O","label_x":2140.481679296875,"label_y":1773.476049609375,"node_is_primary":false},"2075444":{"node_type":"metabolite","x":2448.288419921875,"y":1689.48166484375,"bigg_id":"6pgc_c","name":"6-Phospho-D-gluconate","label_x":2447.288419921875,"label_y":1653.48166484375,"node_is_primary":true},"2075445":{"node_type":"metabolite","x":2326.80770703125,"y":1758.48166484375,"bigg_id":"h_c","name":"H+","label_x":2309.8160078125,"label_y":1788.4761716796875,"node_is_primary":false},"2075450":{"node_type":"metabolite","x":4998.9859296875,"y":1625.0582029296875,"bigg_id":"h_p","name":"H+","label_x":5035.180509765625,"label_y":1625.0582029296875,"node_is_primary":true},"2075451":{"node_type":"metabolite","x":4814.0064375,"y":1945.0582029296875,"bigg_id":"adp_c","name":"ADP","label_x":4700.078947265625,"label_y":1948.29709453125,"node_is_primary":true},"2075452":{"node_type":"metabolite","x":4918.9859296875,"y":1995.0582029296875,"bigg_id":"pi_c","name":"Phosphate","label_x":4870.402677734375,"label_y":2044.2081052734375,"node_is_primary":true},"2075453":{"node_type":"metabolite","x":4993.4878828125,"y":2102.02951640625,"bigg_id":"h_c","name":"H+","label_x":5003.204435546875,"label_y":2147.9405271484375,"node_is_primary":true},"2075454":{"node_type":"metabolite","x":5282.9283125,"y":1960.5562498046875,"bigg_id":"atp_c","name":"ATP","label_x":5322.36190625,"label_y":1957.317358203125,"node_is_primary":true},"2075455":{"node_type":"metabolite","x":5128.46786328125,"y":2088.523412890625,"bigg_id":"h2o_c","name":"H2O","label_x":5147.90096875,"label_y":2121.478979296875,"node_is_primary":true},"2075464":{"node_type":"metabolite","x":3066.288419921875,"y":1993.48166484375,"bigg_id":"r5p_c","name":"alpha-D-Ribose 5-phosphate","label_x":3097.288419921875,"label_y":1974.48166484375,"node_is_primary":true},"2075465":{"node_type":"metabolite","x":2895.288419921875,"y":1689.48166484375,"bigg_id":"ru5p__D_c","name":"D-Ribulose 5-phosphate","label_x":2929.288419921875,"label_y":1691.48166484375,"node_is_primary":true},"2075481":{"node_type":"metabolite","x":1061.8953145507812,"y":2362.47189921875,"bigg_id":"f1p_c","name":"D-Fructose 1-phosphate","label_x":1014.5991719726562,"label_y":2440.4538328125,"node_is_primary":true},"2075491":{"node_type":"metabolite","x":1723.4018453125,"y":3954.040991015625,"bigg_id":"adp_c","name":"ADP","label_x":1690.642323828125,"label_y":3936.32248515625,"node_is_primary":false},"2075492":{"node_type":"metabolite","x":1741.012929296875,"y":4001.974584765625,"bigg_id":"h_c","name":"H+","label_x":1706.410634375,"label_y":4043.120580859375,"node_is_primary":false},"2075493":{"node_type":"metabolite","x":1728.5184224609375,"y":4166.1919140625,"bigg_id":"atp_c","name":"ATP","label_x":1683.661366796875,"label_y":4193.88234375,"node_is_primary":false},"2075530":{"node_type":"metabolite","x":1914.448476171875,"y":4305.1391796875,"bigg_id":"nad_c","name":"Nicotinamide adenine dinucleotide","label_x":1920.0626119140625,"label_y":4290.17091796875,"node_is_primary":false},"2075531":{"node_type":"metabolite","x":1878.8579,"y":4340.73,"bigg_id":"coa_c","name":"Coenzyme A","label_x":1811.306874609375,"label_y":4343.6118359375,"node_is_primary":false},"2075532":{"node_type":"metabolite","x":2218.858,"y":4320.73,"bigg_id":"nadh_c","name":"Nicotinamide adenine dinucleotide - reduced","label_x":2228.858,"label_y":4300.73,"node_is_primary":false},"2075533":{"node_type":"metabolite","x":2168.858,"y":4290.73,"bigg_id":"co2_c","name":"CO2","label_x":2158.858,"label_y":4270.73,"node_is_primary":false},"2075544":{"node_type":"metabolite","x":3294.858,"y":3139.7302,"bigg_id":"2dmmql8_c","name":"2-Demethylmenaquinol 8","label_x":3315.936125,"label_y":3145.536840625,"node_is_primary":false},"2075545":{"node_type":"metabolite","x":3812.858,"y":3307.7302,"bigg_id":"succ_c","name":"Succinate","label_x":3724.77596875,"label_y":3293.154028125,"node_is_primary":true},"2075546":{"node_type":"metabolite","x":3812.858,"y":3138.7302,"bigg_id":"2dmmq8_c","name":"2-Demethylmenaquinone 8","label_x":3835.8394453125,"label_y":3145.306371875,"node_is_primary":false},"2075563":{"node_type":"metabolite","x":3605.742765625,"y":4420.4809765625,"bigg_id":"h2o_c","name":"H2O","label_x":3605.742765625,"label_y":4400.4809765625,"node_is_primary":false},"2075564":{"node_type":"metabolite","x":3812.858,"y":4428.73,"bigg_id":"icit_c","name":"Isocitrate","label_x":3741.969328125,"label_y":4406.3618359375,"node_is_primary":true},"2075574":{"node_type":"metabolite","x":3113.858,"y":3361.7302,"bigg_id":"h2o_c","name":"H2O","label_x":3067.895109375,"label_y":3337.306371875,"node_is_primary":false},"2075576":{"node_type":"metabolite","x":1617.8579,"y":2709.7302,"bigg_id":"g3p_c","name":"Glyceraldehyde 3-phosphate","label_x":1637.5325826171875,"label_y":2743.62228984375,"node_is_primary":true},"2075577":{"node_type":"metabolite","x":1746.8579,"y":4491.73,"bigg_id":"coa_c","name":"Coenzyme A","label_x":1749.7397359375,"label_y":4521.81642578125,"node_is_primary":false},"2075578":{"node_type":"metabolite","x":2022.8579,"y":4541.73,"bigg_id":"for_c","name":"Formate","label_x":2033.8579,"label_y":4520.73,"node_is_primary":true},"2075602":{"node_type":"metabolite","x":1618.8579,"y":3560.7302,"bigg_id":"2pg_c","name":"D-Glycerate 2-phosphate","label_x":1469.3471578125,"label_y":3558.7302,"node_is_primary":true},"2075603":{"node_type":"metabolite","x":2723.288419921875,"y":1989.48166484375,"bigg_id":"xu5p__D_c","name":"D-Xylulose 5-phosphate","label_x":2772.10409375,"label_y":1990.9935056640625,"node_is_primary":true},"2075604":{"node_type":"metabolite","x":3402.858,"y":3258.7302,"bigg_id":"mql8_c","name":"Menaquinol 8","label_x":3409.8765546875,"label_y":3250.075903125,"node_is_primary":false},"2075605":{"node_type":"metabolite","x":3684.3970625,"y":3258.7302,"bigg_id":"mqn8_c","name":"Menaquinone 8","label_x":3598.047453125,"label_y":3251.5182859375,"node_is_primary":false},"2075610":{"node_type":"metabolite","x":1528.218495703125,"y":4219.85744140625,"bigg_id":"atp_c","name":"ATP","label_x":1462.0853169921875,"label_y":4216.974140625,"node_is_primary":false},"2075611":{"node_type":"metabolite","x":1534.8685201171875,"y":4174.74123046875,"bigg_id":"h2o_c","name":"H2O","label_x":1464.890858984375,"label_y":4163.20802734375,"node_is_primary":false},"2075612":{"node_type":"metabolite","x":1549.152089453125,"y":3935.368871875,"bigg_id":"amp_c","name":"AMP","label_x":1473.33006796875,"label_y":3936.785619921875,"node_is_primary":false},"2075613":{"node_type":"metabolite","x":1491.035390234375,"y":3968.279760546875,"bigg_id":"pi_c","name":"Phosphate","label_x":1445.0076802734375,"label_y":3997.3073484375,"node_is_primary":false},"2075614":{"node_type":"metabolite","x":1518.0743306640625,"y":4011.174291796875,"bigg_id":"h_c","name":"H+","label_x":1462.707753515625,"label_y":4029.78537578125,"node_is_primary":false},"2075638":{"node_type":"metabolite","x":1616.8579,"y":2360.7302,"bigg_id":"fdp_c","name":"D-Fructose 1,6-bisphosphate","label_x":1647.8579,"label_y":2363.7302,"node_is_primary":true},"2075639":{"node_type":"metabolite","x":1519.8579,"y":2274.7302,"bigg_id":"h2o_c","name":"H2O","label_x":1465.309071875,"label_y":2253.42893046875,"node_is_primary":false},"2075640":{"node_type":"metabolite","x":1497.8579,"y":2047.7302,"bigg_id":"pi_c","name":"Phosphate","label_x":1486.08983359375,"label_y":2074.9460203125,"node_is_primary":false},"2075645":{"node_type":"metabolite","x":3958.7652265625,"y":4450.919453125,"bigg_id":"nadp_c","name":"Nicotinamide adenine dinucleotide phosphate","label_x":3966.042814453125,"label_y":4478.76271484375,"node_is_primary":false},"2075646":{"node_type":"metabolite","x":4129.3374921875,"y":4255.808125,"bigg_id":"co2_c","name":"CO2","label_x":4149.3374921875,"label_y":4265.808125,"node_is_primary":false},"2075647":{"node_type":"metabolite","x":4168.3374921875,"y":4190.808125,"bigg_id":"nadph_c","name":"Nicotinamide adenine dinucleotide phosphate - reduced","label_x":4198.3374921875,"label_y":4190.808125,"node_is_primary":false},"2075653":{"node_type":"metabolite","x":1528.8579,"y":3760.7302,"bigg_id":"h2o_c","name":"H2O","label_x":1453.1136373046875,"label_y":3760.7302,"node_is_primary":false},"2075670":{"node_type":"metabolite","x":1692.8579,"y":2766.7302,"bigg_id":"pi_c","name":"Phosphate","label_x":1714.1893208984375,"label_y":2774.718237109375,"node_is_primary":false},"2075671":{"node_type":"metabolite","x":1696.0213521484375,"y":2805.00754375,"bigg_id":"nad_c","name":"Nicotinamide adenine dinucleotide","label_x":1720.9615376953125,"label_y":2811.66428203125,"node_is_primary":false},"2075672":{"node_type":"metabolite","x":1701.8579,"y":2903.7302,"bigg_id":"h_c","name":"H+","label_x":1721.8579,"label_y":2903.7302,"node_is_primary":false},"2075673":{"node_type":"metabolite","x":1701.8579,"y":2953.7302,"bigg_id":"nadh_c","name":"Nicotinamide adenine dinucleotide - reduced","label_x":1715.8579,"label_y":2971.7302,"node_is_primary":false},"2075676":{"node_type":"metabolite","x":3912.858,"y":3414.7302,"bigg_id":"coa_c","name":"Coenzyme A","label_x":3882.334806640625,"label_y":3440.776342578125,"node_is_primary":false},"2075677":{"node_type":"metabolite","x":3960.858,"y":3468.7302,"bigg_id":"atp_c","name":"ATP","label_x":3922.60751171875,"label_y":3499.70822734375,"node_is_primary":false},"2075678":{"node_type":"metabolite","x":4172.858,"y":3511.7302,"bigg_id":"pi_c","name":"Phosphate","label_x":4202.858,"label_y":3511.7302,"node_is_primary":false},"2075679":{"node_type":"metabolite","x":4133.858,"y":3635.7302,"bigg_id":"succoa_c","name":"Succinyl-CoA","label_x":4160.53915234375,"label_y":3625.070776171875,"node_is_primary":true},"2075680":{"node_type":"metabolite","x":4172.858,"y":3561.7302,"bigg_id":"adp_c","name":"ADP","label_x":4202.858,"label_y":3561.7302,"node_is_primary":false},"2075682":{"node_type":"metabolite","x":1694.8579,"y":2042.7302,"bigg_id":"atp_c","name":"ATP","label_x":1700.87596640625,"label_y":2074.356908984375,"node_is_primary":false},"2075683":{"node_type":"metabolite","x":1749.8579,"y":2262.7302,"bigg_id":"adp_c","name":"ADP","label_x":1769.8579,"label_y":2262.7302,"node_is_primary":false},"2075684":{"node_type":"metabolite","x":1696.8579,"y":2309.7302,"bigg_id":"h_c","name":"H+","label_x":1716.8579,"label_y":2309.7302,"node_is_primary":false},"2075696":{"node_type":"metabolite","x":2667.8371820441785,"y":2546.577310335444,"bigg_id":"s7p_c","name":"Sedoheptulose 7-phosphate","label_x":2545.5837640754285,"label_y":2564.745523226069,"node_is_primary":true},"2075726":{"node_type":"metabolite","x":4805.93368359375,"y":2543.1221677734375,"bigg_id":"h_p","name":"H+","label_x":4827.93368359375,"label_y":2544.1221677734375,"node_is_primary":true},"2075727":{"node_type":"metabolite","x":5124.89266796875,"y":3011.1221677734375,"bigg_id":"nadh_c","name":"Nicotinamide adenine dinucleotide - reduced","label_x":5157.89266796875,"label_y":3012.1221677734375,"node_is_primary":true},"2075728":{"node_type":"metabolite","x":4451.98690625,"y":3011.1221677734375,"bigg_id":"nadp_c","name":"Nicotinamide adenine dinucleotide phosphate","label_x":4347.687345703125,"label_y":3013.309057421875,"node_is_primary":true},"2075729":{"node_type":"metabolite","x":4804.93368359375,"y":3011.1221677734375,"bigg_id":"h_c","name":"H+","label_x":4765.055021484375,"label_y":3053.988744921875,"node_is_primary":true},"2075730":{"node_type":"metabolite","x":4646.44833203125,"y":3055.6241208984375,"bigg_id":"nad_c","name":"Nicotinamide adenine dinucleotide","label_x":4561.999357421875,"label_y":2941.1390134765625,"node_is_primary":true},"2075731":{"node_type":"metabolite","x":4946.9253828125,"y":3050.1263181640625,"bigg_id":"nadph_c","name":"Nicotinamide adenine dinucleotide phosphate - reduced","label_x":4926.593107421875,"label_y":2947.8558103515625,"node_is_primary":true},"2075754":{"node_type":"metabolite","x":3162.858,"y":4193.73,"bigg_id":"ac_c","name":"Acetate","label_x":3182.858,"label_y":4193.73,"node_is_primary":false},"2075759":{"node_type":"metabolite","x":3726.858,"y":3461.7302,"bigg_id":"q8_c","name":"Ubiquinone-8","label_x":3726.858,"label_y":3481.7302,"node_is_primary":false},"2075760":{"node_type":"metabolite","x":3348.858,"y":3448.7302,"bigg_id":"q8h2_c","name":"Ubiquinol-8","label_x":3347.4156171875,"label_y":3488.923559375,"node_is_primary":false},"2075762":{"node_type":"metabolite","x":4270.858,"y":3998.7302,"bigg_id":"nad_c","name":"Nicotinamide adenine dinucleotide","label_x":4292.858,"label_y":3998.7302,"node_is_primary":false},"2075763":{"node_type":"metabolite","x":4270.858,"y":3946.7302,"bigg_id":"coa_c","name":"Coenzyme A","label_x":4294.858,"label_y":3946.7302,"node_is_primary":false},"2075764":{"node_type":"metabolite","x":4218.858,"y":3673.7302,"bigg_id":"nadh_c","name":"Nicotinamide adenine dinucleotide - reduced","label_x":4238.858,"label_y":3673.7302,"node_is_primary":false},"2075765":{"node_type":"metabolite","x":4270.858,"y":3725.7302,"bigg_id":"co2_c","name":"CO2","label_x":4290.858,"label_y":3725.7302,"node_is_primary":false},"2075777":{"node_type":"metabolite","x":1177.93651328125,"y":2307.47189921875,"bigg_id":"atp_c","name":"ATP","label_x":1177.93651328125,"label_y":2287.47189921875,"node_is_primary":false},"2075778":{"node_type":"metabolite","x":1473.5991109375,"y":2315.47775859375,"bigg_id":"h_c","name":"H+","label_x":1490.5991109375,"label_y":2303.47775859375,"node_is_primary":false},"2075779":{"node_type":"metabolite","x":1408.93651328125,"y":2287.47189921875,"bigg_id":"adp_c","name":"ADP","label_x":1408.93651328125,"label_y":2267.47189921875,"node_is_primary":false},"2075798":{"node_type":"metabolite","x":2584.288419921875,"y":1745.48166484375,"bigg_id":"nadp_c","name":"Nicotinamide adenine dinucleotide phosphate","label_x":2597.800626953125,"label_y":1773.104467578125,"node_is_primary":false},"2075799":{"node_type":"metabolite","x":2805.288419921875,"y":1647.48166484375,"bigg_id":"nadph_c","name":"Nicotinamide adenine dinucleotide phosphate - reduced","label_x":2828.288419921875,"label_y":1641.48166484375,"node_is_primary":false},"2075800":{"node_type":"metabolite","x":2770.288419921875,"y":1600.48166484375,"bigg_id":"co2_c","name":"CO2","label_x":2769.288419921875,"label_y":1578.48166484375,"node_is_primary":false},"2075835":{"node_type":"metabolite","x":2678.235685546875,"y":4216.80763671875,"bigg_id":"h_c","name":"H+","label_x":2614.61923046875,"label_y":4220.08009765625,"node_is_primary":false},"2075836":{"node_type":"metabolite","x":2362.858,"y":4228.73,"bigg_id":"co2_c","name":"CO2","label_x":2362.858,"label_y":4248.73,"node_is_primary":false},"2076047":{"node_type":"midmarker","x":2978.104826171875,"y":3900.7116453125},"2076048":{"node_type":"multimarker","x":2978.662443359375,"y":3932.1315671875},"2076049":{"node_type":"multimarker","x":2978.104826171875,"y":3852.079809375},"2076079":{"node_type":"multimarker","x":1990.270253515625,"y":3803.255590625},"2076080":{"node_type":"midmarker","x":2024.270253515625,"y":3822.255590625},"2076081":{"node_type":"multimarker","x":2102.270353515625,"y":3855.255590625},"2076112":{"node_type":"multimarker","x":3227.858,"y":4375.73},"2076113":{"node_type":"midmarker","x":3183.858,"y":4342.73},"2076114":{"node_type":"multimarker","x":3128.858,"y":4290.73},"2076122":{"node_type":"midmarker","x":1614.8579,"y":1830.7302},"2076130":{"node_type":"multimarker","x":1618.8579,"y":3210.7302},"2076131":{"node_type":"midmarker","x":1618.8579,"y":3160.7302},"2076132":{"node_type":"multimarker","x":1618.8579,"y":3100.7302},"2076145":{"node_type":"multimarker","x":1882.835683203125,"y":1692.7303220703125},"2076146":{"node_type":"midmarker","x":1862.835683203125,"y":1692.7303220703125},"2076147":{"node_type":"multimarker","x":1842.835683203125,"y":1692.7303220703125},"2076160":{"node_type":"multimarker","x":2277.80770703125,"y":1689.48166484375},"2076161":{"node_type":"multimarker","x":2185.80770703125,"y":1689.48166484375},"2076162":{"node_type":"midmarker","x":2234.80770703125,"y":1689.48166484375},"2076165":{"node_type":"midmarker","x":4998.9859296875,"y":1825.0582029296875},"2076166":{"node_type":"multimarker","x":5048.9859296875,"y":1825.0582029296875},"2076167":{"node_type":"multimarker","x":4948.9859296875,"y":1825.0582029296875},"2076175":{"node_type":"midmarker","x":2992.288419921875,"y":1867.48166484375},"2076196":{"node_type":"multimarker","x":1669.796620703125,"y":4055.00217265625},"2076197":{"node_type":"multimarker","x":1670.75780234375,"y":4124.985859375},"2076198":{"node_type":"midmarker","x":1669.7967427734375,"y":4094.5971874999996},"2076234":{"node_type":"multimarker","x":1993.8579,"y":4379.73},"2076235":{"node_type":"midmarker","x":2058.858,"y":4379.73},"2076236":{"node_type":"multimarker","x":2118.858,"y":4379.73},"2076245":{"node_type":"multimarker","x":3382.858,"y":3208.7302},"2076246":{"node_type":"multimarker","x":3712.858,"y":3208.7302},"2076247":{"node_type":"midmarker","x":3562.858,"y":3208.7302},"2076263":{"node_type":"multimarker","x":3692.858,"y":4478.73},"2076264":{"node_type":"midmarker","x":3752.858,"y":4458.73},"2076269":{"node_type":"multimarker","x":3113.858,"y":3452.7302},"2076270":{"node_type":"midmarker","x":3073.858,"y":3510.7302},"2076273":{"node_type":"multimarker","x":1818.8579,"y":4430.73},"2076274":{"node_type":"multimarker","x":1932.8579,"y":4431.73},"2076275":{"node_type":"midmarker","x":1882.8579,"y":4431.73},"2076296":{"node_type":"midmarker","x":1618.8579,"y":3430.7302},"2076297":{"node_type":"midmarker","x":2813.288419921875,"y":1835.48166484375},"2076298":{"node_type":"multimarker","x":3592.858,"y":3313.7302},"2076299":{"node_type":"multimarker","x":3468.858,"y":3313.7302},"2076300":{"node_type":"midmarker","x":3572.858,"y":3313.7302},"2076305":{"node_type":"multimarker","x":1602.268788671875,"y":4051.52463359375},"2076306":{"node_type":"midmarker","x":1601.30760703125,"y":4094.6911375},"2076307":{"node_type":"multimarker","x":1602.268788671875,"y":4126.8969921875},"2076333":{"node_type":"multimarker","x":1568.8579,"y":2224.7302},"2076334":{"node_type":"multimarker","x":1570.8579,"y":2096.7302},"2076335":{"node_type":"midmarker","x":1569.8579,"y":2158.7302},"2076343":{"node_type":"multimarker","x":4051.3374921875,"y":4255.808125},"2076344":{"node_type":"multimarker","x":3980.7652265625,"y":4316.919453125},"2076345":{"node_type":"midmarker","x":4009.858,"y":4291.73},"2076351":{"node_type":"multimarker","x":1618.8579,"y":3700.7302},"2076352":{"node_type":"midmarker","x":1618.8579,"y":3660.7302},"2076371":{"node_type":"midmarker","x":1617.8579,"y":2840.7302},"2076372":{"node_type":"multimarker","x":1617.8579,"y":2817.7302},"2076373":{"node_type":"multimarker","x":1618.8579,"y":2870.7302},"2076377":{"node_type":"multimarker","x":4008.858,"y":3445.7302},"2076378":{"node_type":"midmarker","x":4037.858,"y":3476.7302},"2076379":{"node_type":"multimarker","x":4062.858,"y":3504.7302},"2076381":{"node_type":"multimarker","x":3496.7984296875,"y":4495.2876171875},"2076382":{"node_type":"midmarker","x":3468.62753125,"y":4488.73},"2076383":{"node_type":"multimarker","x":1663.8579,"y":2224.7302},"2076384":{"node_type":"multimarker","x":1663.8579,"y":2098.7302},"2076385":{"node_type":"midmarker","x":1663.8579,"y":2158.7302},"2076427":{"node_type":"multimarker","x":2895.292326171875,"y":2183.40158671875},"2076428":{"node_type":"multimarker","x":2895.288419921875,"y":2117.40158671875},"2076429":{"node_type":"midmarker","x":2894.629728515625,"y":2149.407690234375},"2076430":{"node_type":"multimarker","x":4804.93368359375,"y":2741.1221677734375},"2076431":{"node_type":"midmarker","x":4804.93368359375,"y":2781.1221677734375},"2076432":{"node_type":"multimarker","x":4804.93368359375,"y":2821.1221677734375},"2076456":{"node_type":"multimarker","x":3174.858,"y":4266.73},"2076457":{"node_type":"midmarker","x":3227.858,"y":4311.73},"2076463":{"node_type":"multimarker","x":3422.858,"y":3388.7302},"2076464":{"node_type":"midmarker","x":3542.858,"y":3388.7302},"2076465":{"node_type":"multimarker","x":3652.858,"y":3388.7302},"2076467":{"node_type":"multimarker","x":2667.501403262441,"y":2275.048941276132},"2076468":{"node_type":"multimarker","x":2667.2195325361645,"y":2348.0483970884425},"2076469":{"node_type":"midmarker","x":2667.3739822491934,"y":2308.048695273483},"2076470":{"node_type":"multimarker","x":2285.36141796875,"y":1943.27268046875},"2076471":{"node_type":"midmarker","x":2250.938078125,"y":1943.27268046875},"2076472":{"node_type":"multimarker","x":2212.69432578125,"y":1943.27268046875},"2076474":{"node_type":"multimarker","x":4178.4156171875,"y":3899.0944578125},"2076475":{"node_type":"midmarker","x":4175.5308515625,"y":3842.7302},"2076476":{"node_type":"multimarker","x":4171.858,"y":3771.7302},"2076489":{"node_type":"multimarker","x":1351.93651328125,"y":2362.47189921875},"2076490":{"node_type":"multimarker","x":1230.93651328125,"y":2362.47189921875},"2076491":{"node_type":"midmarker","x":1305.93651328125,"y":2362.47189921875},"2076508":{"node_type":"multimarker","x":4805.93368359375,"y":3218.1221677734375},"2076509":{"node_type":"midmarker","x":4805.93368359375,"y":3178.1221677734375},"2076510":{"node_type":"multimarker","x":4805.93368359375,"y":3148.1221677734375},"2076514":{"node_type":"multimarker","x":2622.288419921875,"y":1689.48166484375},"2076515":{"node_type":"multimarker","x":2703.288419921875,"y":1689.48166484375},"2076516":{"node_type":"midmarker","x":2664.288419921875,"y":1689.48166484375},"2076529":{"node_type":"midmarker","x":1616.8579,"y":2469.7302},"2076530":{"node_type":"multimarker","x":1616.8579,"y":2548.7302},"2076550":{"node_type":"midmarker","x":2532.858,"y":4158.73},"2076551":{"node_type":"multimarker","x":2432.858,"y":4158.73},"2076552":{"node_type":"multimarker","x":2622.858,"y":4158.73},"2076584":{"node_type":"metabolite","x":1618.3294576171875,"y":4379.5415234375,"bigg_id":"pyr_c","name":"Pyruvate","label_x":1661.9907125,"label_y":4369.8012890625,"node_is_primary":true},"2076622":{"node_type":"metabolite","x":3696.7512817382812,"y":1763.8056640625,"bigg_id":"phom_c","name":"O-Phospho-L-homoserine","label_x":3727.1062927246094,"label_y":1735.85888671875,"node_is_primary":true},"2076626":{"node_type":"multimarker","x":3566.7512817382812,"y":1763.8056640625},"2076627":{"node_type":"midmarker","x":3546.7512817382812,"y":1763.8056640625},"2076628":{"node_type":"multimarker","x":3526.7512817382812,"y":1763.8056640625},"2076629":{"node_type":"metabolite","x":3656.7512817382812,"y":1803.8056640625,"bigg_id":"h2o_c","name":"H2O","label_x":3610.769012451172,"label_y":1832.107421875,"node_is_primary":false},"2076630":{"node_type":"metabolite","x":3436.7512817382812,"y":1803.8056640625,"bigg_id":"pi_c","name":"Phosphate","label_x":3390.769012451172,"label_y":1836.125244140625,"node_is_primary":false},"2076631":{"node_type":"metabolite","x":3396.7512817382812,"y":1763.8056640625,"bigg_id":"thr__L_c","name":"L-Threonine","label_x":3274.4318084716797,"label_y":1808.17822265625,"node_is_primary":true},"2076632":{"node_type":"metabolite","x":3444.347902000837,"y":1969.918712634645,"bigg_id":"h2o_c","name":"H2O","label_x":3394.347902000837,"label_y":1929.918712634645,"node_is_primary":false},"2076633":{"node_type":"multimarker","x":3534.043007498336,"y":2010.597798782107},"2076634":{"node_type":"midmarker","x":3554.042436241991,"y":2010.7489607065845},"2076635":{"node_type":"multimarker","x":3574.04186498565,"y":2010.9001226310602},"2076636":{"node_type":"metabolite","x":3664.341618181057,"y":1971.5814938038993,"bigg_id":"nh4_c","name":"Ammonium","label_x":3614.341618181057,"label_y":1931.5814938038993,"node_is_primary":false},"2076637":{"node_type":"metabolite","x":3663.736970483146,"y":2051.579208778524,"bigg_id":"pyr_c","name":"Pyruvate","label_x":3678.020906030021,"label_y":2079.880966591024,"node_is_primary":false},"2076638":{"node_type":"metabolite","x":3404.04672066457,"y":2009.6152462730024,"bigg_id":"trp__L_c","name":"L-Tryptophan","label_x":3265.301260154316,"label_y":2043.7216915855024,"node_is_primary":true},"2076639":{"node_type":"metabolite","x":3704.0381518194145,"y":2011.8826751401702,"bigg_id":"indole_c","name":"Indole","label_x":3722.3399096319145,"label_y":1975.9002532651702,"node_is_primary":true},"2076641":{"node_type":"metabolite","x":3448.151077270508,"y":2172.119140625,"bigg_id":"akg_c","name":"2-Oxoglutarate","label_x":3402.1688079833984,"label_y":2144.17236328125,"node_is_primary":false},"2076642":{"node_type":"multimarker","x":3538.151077270508,"y":2212.119140625},"2076643":{"node_type":"midmarker","x":3558.151077270508,"y":2212.119140625},"2076644":{"node_type":"multimarker","x":3578.151077270508,"y":2212.119140625},"2076645":{"node_type":"metabolite","x":3708.151077270508,"y":2212.119140625,"bigg_id":"phpyr_c","name":"Phenylpyruvate","label_x":3730.4705352783203,"label_y":2180.15478515625,"node_is_primary":true},"2076646":{"node_type":"metabolite","x":3668.151077270508,"y":2172.119140625,"bigg_id":"glu__L_c","name":"L-Glutamate","label_x":3658.328567504883,"label_y":2148.18994140625,"node_is_primary":false},"2076647":{"node_type":"metabolite","x":3408.151077270508,"y":2212.119140625,"bigg_id":"phe__L_c","name":"L-Phenylalanine","label_x":3273.4233627319336,"label_y":2230.154296875,"node_is_primary":true},"2076648":{"node_type":"metabolite","x":3657.428955078125,"y":1617.315185546875,"bigg_id":"h2o_c","name":"H2O","label_x":3651.624267578125,"label_y":1657.670654296875,"node_is_primary":false},"2076649":{"node_type":"multimarker","x":3567.428955078125,"y":1577.315185546875},"2076650":{"node_type":"midmarker","x":3547.428955078125,"y":1577.315185546875},"2076651":{"node_type":"multimarker","x":3527.428955078125,"y":1577.315185546875},"2076652":{"node_type":"metabolite","x":3437.428955078125,"y":1617.315185546875,"bigg_id":"pi_c","name":"Phosphate","label_x":3403.499969482422,"label_y":1661.687744140625,"node_is_primary":false},"2076653":{"node_type":"metabolite","x":3697.428955078125,"y":1577.315185546875,"bigg_id":"pser__L_c","name":"O-Phospho-L-serine","label_x":3723.4112548828125,"label_y":1551.155517578125,"node_is_primary":true},"2076654":{"node_type":"metabolite","x":3397.428955078125,"y":1577.315185546875,"bigg_id":"ser__L_c","name":"L-Serine","label_x":3263.0562133789062,"label_y":1613.652099609375,"node_is_primary":true},"2076655":{"node_type":"metabolite","x":3491.21826171875,"y":2386.2216796875,"bigg_id":"argsuc_c","name":"N(omega)-(L-Arginino)succinate","label_x":3448.8987426757812,"label_y":2352.02685546875,"node_is_primary":true},"2076656":{"node_type":"multimarker","x":3361.21826171875,"y":2386.2216796875},"2076657":{"node_type":"midmarker","x":3341.21826171875,"y":2386.2216796875},"2076658":{"node_type":"multimarker","x":3321.21826171875,"y":2386.2216796875},"2076659":{"node_type":"metabolite","x":3231.21826171875,"y":2426.2216796875,"bigg_id":"fum_c","name":"Fumarate","label_x":3197.289276123047,"label_y":2462.55908203125,"node_is_primary":false},"2076660":{"node_type":"metabolite","x":3191.21826171875,"y":2386.2216796875,"bigg_id":"arg__L_c","name":"L-Arginine","label_x":3072.916519165039,"label_y":2358.27490234375,"node_is_primary":true},"2076661":{"node_type":"multimarker","x":3661.21826171875,"y":2386.2216796875},"2076662":{"node_type":"midmarker","x":3641.21826171875,"y":2386.2216796875},"2076663":{"node_type":"multimarker","x":3621.21826171875,"y":2386.2216796875},"2076664":{"node_type":"metabolite","x":3976.1785278320312,"y":2591.30419921875,"bigg_id":"atp_c","name":"ATP","label_x":4010.55126953125,"label_y":2587.46435546875,"node_is_primary":false},"2076665":{"node_type":"metabolite","x":3791.3958129882812,"y":2446.310546875,"bigg_id":"asp__L_c","name":"L-Aspartate","label_x":3817.7330322265625,"label_y":2498.71875,"node_is_primary":true},"2076666":{"node_type":"metabolite","x":3547.289306640625,"y":2322.115234375,"bigg_id":"ppi_c","name":"Diphosphate","label_x":3497.289306640625,"label_y":2282.115234375,"node_is_primary":false},"2076667":{"node_type":"metabolite","x":3531.21826171875,"y":2454.345703125,"bigg_id":"amp_c","name":"AMP","label_x":3461.1295166015625,"label_y":2482.64794921875,"node_is_primary":false},"2076668":{"node_type":"metabolite","x":3795.2359619140625,"y":2325.955078125,"bigg_id":"citr__L_c","name":"L-Citrulline","label_x":3805.502197265625,"label_y":2293.99072265625,"node_is_primary":true},"2076669":{"node_type":"metabolite","x":3535.2360229492188,"y":2522.29248046875,"bigg_id":"h_c","name":"H+","label_x":3549.5199584960938,"label_y":2538.541015625,"node_is_primary":false},"2076698":{"node_type":"multimarker","x":1614.8579,"y":1480.6070310546875},"2076699":{"node_type":"midmarker","x":1614.8579,"y":1500.6070310546875},"2076700":{"node_type":"multimarker","x":1614.8579,"y":1520.6070310546875},"2076701":{"node_type":"metabolite","x":1614.8579,"y":1308.483862109375,"bigg_id":"glc__D_c","name":"D-Glucose","label_x":1644.8579,"label_y":1318.483862109375,"node_is_primary":true},"2076702":{"node_type":"metabolite","x":1574.8579,"y":1610.6070310546875,"bigg_id":"h_c","name":"H+","label_x":1502.558827734375,"label_y":1614.589330859375,"node_is_primary":false},"2076703":{"node_type":"metabolite","x":1574.8579,"y":1390.6070310546875,"bigg_id":"atp_c","name":"ATP","label_x":1484.5059712890625,"label_y":1400.6070310546875,"node_is_primary":false},"2076704":{"node_type":"metabolite","x":1654.8579,"y":1610.6070310546875,"bigg_id":"adp_c","name":"ADP","label_x":1684.8579,"label_y":1620.6070310546875,"node_is_primary":false},"2076710":{"node_type":"metabolite","x":4135.35888671875,"y":1528.99267578125,"bigg_id":"imp_c","name":"IMP","label_x":4204.51416015625,"label_y":1515.78955078125,"node_is_primary":true},"2076717":{"node_type":"metabolite","x":4122.8642578125,"y":1888.5985107421875,"bigg_id":"dcamp_c","name":"N6-(1,2-Dicarboxyethyl)-AMP","label_x":4152.8642578125,"label_y":1898.5985107421875,"node_is_primary":true},"2076718":{"node_type":"multimarker","x":4122.8642578125,"y":2018.5985107421875},"2076719":{"node_type":"midmarker","x":4122.8642578125,"y":2038.5985107421875},"2076720":{"node_type":"multimarker","x":4122.8642578125,"y":2058.5985107421875},"2076721":{"node_type":"metabolite","x":4162.8642578125,"y":2148.5985107421875,"bigg_id":"fum_c","name":"Fumarate","label_x":4192.8642578125,"label_y":2158.5985107421875,"node_is_primary":false},"2076722":{"node_type":"metabolite","x":4122.8642578125,"y":2188.5985107421875,"bigg_id":"amp_c","name":"AMP","label_x":4087.46630859375,"label_y":2244.0911865234375,"node_is_primary":true},"2076723":{"node_type":"metabolite","x":4136.178996479337,"y":1798.4432337869139,"bigg_id":"xmp_c","name":"Xanthosine 5'-phosphate","label_x":4045.449992573087,"label_y":1837.8096888650389,"node_is_primary":true},"2076724":{"node_type":"multimarker","x":4266.178960598287,"y":1798.3466466663797},"2076725":{"node_type":"midmarker","x":4286.178955078125,"y":1798.331787109375},"2076726":{"node_type":"multimarker","x":4306.178949557963,"y":1798.3169275523703},"2076727":{"node_type":"metabolite","x":4181.478772717662,"y":1761.1874615522152,"bigg_id":"h2o_c","name":"H2O","label_x":4211.478772717662,"label_y":1771.1874615522152,"node_is_primary":false},"2076728":{"node_type":"metabolite","x":4436.178913676913,"y":1798.2203404318357,"bigg_id":"gmp_c","name":"GMP","label_x":4426.752155864413,"label_y":1856.7457310568361,"node_is_primary":true},"2076729":{"node_type":"metabolite","x":4176.697794380103,"y":1839.7307659882576,"bigg_id":"atp_c","name":"ATP","label_x":4118.745645942603,"label_y":1834.5664593476326,"node_is_primary":false},"2076730":{"node_type":"metabolite","x":4401.460897026147,"y":1758.3830035429924,"bigg_id":"glu__L_c","name":"L-Glutamate","label_x":4431.460897026147,"label_y":1768.3830035429926,"node_is_primary":false},"2076731":{"node_type":"metabolite","x":4396.679918688586,"y":1836.9263079790353,"bigg_id":"h_c","name":"H+","label_x":4366.023180407336,"label_y":1862.0903704790362,"node_is_primary":false},"2076732":{"node_type":"metabolite","x":4125.482666015625,"y":1832.53564453125,"bigg_id":"gln__L_c","name":"L-Glutamine","label_x":4019.005126953125,"label_y":1851.63427734375,"node_is_primary":false},"2076733":{"node_type":"metabolite","x":4155.936767578125,"y":2107.64306640625,"bigg_id":"ppi_c","name":"Diphosphate","label_x":4110.11572265625,"label_y":2135.840087890625,"node_is_primary":false},"2076734":{"node_type":"metabolite","x":4075.936767578125,"y":2107.64306640625,"bigg_id":"amp_c","name":"AMP","label_x":3987.65625,"label_y":2123.708740234375,"node_is_primary":false},"2076735":{"node_type":"multimarker","x":4135.35888671875,"y":1658.99267578125},"2076736":{"node_type":"midmarker","x":4135.35888671875,"y":1678.99267578125},"2076737":{"node_type":"multimarker","x":4135.35888671875,"y":1698.99267578125},"2076739":{"node_type":"metabolite","x":4175.35888671875,"y":1568.99267578125,"bigg_id":"h2o_c","name":"H2O","label_x":4205.35888671875,"label_y":1578.99267578125,"node_is_primary":false},"2076740":{"node_type":"metabolite","x":4166.525146484375,"y":1787.54248046875,"bigg_id":"h_c","name":"H+","label_x":4196.525146484375,"label_y":1797.54248046875,"node_is_primary":false},"2076741":{"node_type":"metabolite","x":4095.35888671875,"y":1568.99267578125,"bigg_id":"nad_c","name":"Nicotinamide adenine dinucleotide","label_x":4007.078125,"label_y":1585.058349609375,"node_is_primary":false},"2076742":{"node_type":"metabolite","x":4086.525146484375,"y":1787.54248046875,"bigg_id":"nadh_c","name":"Nicotinamide adenine dinucleotide - reduced","label_x":3992.1787109375,"label_y":1788.44384765625,"node_is_primary":false},"2076743":{"node_type":"metabolite","x":4425.77587890625,"y":1917.26123046875,"bigg_id":"h_c","name":"H+","label_x":4455.77587890625,"label_y":1927.26123046875,"node_is_primary":false},"2076744":{"node_type":"multimarker","x":4385.77587890625,"y":2007.26123046875},"2076745":{"node_type":"midmarker","x":4385.77587890625,"y":2027.26123046875},"2076746":{"node_type":"multimarker","x":4385.77587890625,"y":2047.26123046875},"2076747":{"node_type":"metabolite","x":4385.77587890625,"y":2177.26123046875,"bigg_id":"ump_c","name":"UMP","label_x":4381.494140625,"label_y":2242.905029296875,"node_is_primary":true},"2076748":{"node_type":"metabolite","x":4425.77587890625,"y":2137.26123046875,"bigg_id":"co2_c","name":"CO2","label_x":4455.77587890625,"label_y":2147.26123046875,"node_is_primary":false},"2076749":{"node_type":"metabolite","x":4385.77587890625,"y":1877.26123046875,"bigg_id":"orot5p_c","name":"Orotidine 5'-phosphate","label_x":4415.77587890625,"label_y":1887.26123046875,"node_is_primary":true},"2076750":{"node_type":"multimarker","x":4719.9605390625,"y":3891.6413328125},"2076751":{"node_type":"midmarker","x":4699.9605390625,"y":3891.6413328125},"2076752":{"node_type":"multimarker","x":4679.9605390625,"y":3891.6413328125},"2076753":{"node_type":"metabolite","x":4809.9605390625,"y":3851.6413328125,"bigg_id":"h2o_c","name":"H2O","label_x":4759.9605390625,"label_y":3811.6413328125,"node_is_primary":false},"2076754":{"node_type":"metabolite","x":4809.9605390625,"y":3931.6413328125,"bigg_id":"nadp_c","name":"Nicotinamide adenine dinucleotide phosphate","label_x":4759.9605390625,"label_y":3973.81174296875,"node_is_primary":false},"2076755":{"node_type":"metabolite","x":4585.746671875,"y":3994.91232890625,"bigg_id":"nadph_c","name":"Nicotinamide adenine dinucleotide phosphate - reduced","label_x":4491.50106640625,"label_y":4001.264623828125,"node_is_primary":false},"2076756":{"node_type":"metabolite","x":4955.30721875,"y":4169.756323046875,"bigg_id":"glu__L_c","name":"L-Glutamate","label_x":4989.5845625,"label_y":4146.611791796875,"node_is_primary":true},"2076757":{"node_type":"metabolite","x":4589.9605390625,"y":3931.6413328125,"bigg_id":"h_c","name":"H+","label_x":4531.5328046875,"label_y":3916.9245359375,"node_is_primary":false},"2076758":{"node_type":"metabolite","x":4535.180265625,"y":3800.94846171875,"bigg_id":"nh4_c","name":"Ammonium","label_x":4563.13680859375,"label_y":3775.696996875,"node_is_primary":true},"2076759":{"node_type":"multimarker","x":4639.9292890625,"y":4173.9694578125},"2076760":{"node_type":"midmarker","x":4659.9292890625,"y":4173.9694578125},"2076761":{"node_type":"multimarker","x":4679.9292890625,"y":4173.9694578125},"2076762":{"node_type":"metabolite","x":4769.9292890625,"y":4133.9694578125,"bigg_id":"nadp_c","name":"Nicotinamide adenine dinucleotide phosphate","label_x":4719.9292890625,"label_y":4093.9694578125,"node_is_primary":false},"2076763":{"node_type":"metabolite","x":4549.9292890625,"y":4133.9694578125,"bigg_id":"nadph_c","name":"Nicotinamide adenine dinucleotide phosphate - reduced","label_x":4499.9292890625,"label_y":4093.9694578125,"node_is_primary":false},"2076765":{"node_type":"metabolite","x":4522.53915234375,"y":4197.1139890625,"bigg_id":"h_c","name":"H+","label_x":4464.11141796875,"label_y":4188.71799296875,"node_is_primary":false},"2076766":{"node_type":"metabolite","x":4516.2183515625,"y":4289.755590625,"bigg_id":"gln__L_c","name":"L-Glutamine","label_x":4398.7964765625,"label_y":4270.8249265625,"node_is_primary":true},"2076767":{"node_type":"multimarker","x":4709.39462109375,"y":4386.67404765625},"2076768":{"node_type":"midmarker","x":4689.39462109375,"y":4386.67404765625},"2076769":{"node_type":"multimarker","x":4669.39462109375,"y":4386.67404765625},"2076770":{"node_type":"metabolite","x":4799.39462109375,"y":4346.67404765625,"bigg_id":"atp_c","name":"ATP","label_x":4749.39462109375,"label_y":4306.67404765625,"node_is_primary":false},"2076772":{"node_type":"metabolite","x":4579.39462109375,"y":4346.67404765625,"bigg_id":"h_c","name":"H+","label_x":4529.39462109375,"label_y":4306.67404765625,"node_is_primary":false},"2076773":{"node_type":"metabolite","x":4579.39462109375,"y":4426.67404765625,"bigg_id":"adp_c","name":"ADP","label_x":4529.39462109375,"label_y":4386.67404765625,"node_is_primary":false},"2076774":{"node_type":"metabolite","x":4579.39462109375,"y":4506.67404765625,"bigg_id":"pi_c","name":"Phosphate","label_x":4529.39462109375,"label_y":4466.67404765625,"node_is_primary":false},"2076775":{"node_type":"metabolite","x":4816.25008984375,"y":4464.59885234375,"bigg_id":"nh4_c","name":"Ammonium","label_x":4831.56454296875,"label_y":4445.66818828125,"node_is_primary":true},"2076781":{"node_type":"metabolite","x":3752.463529833967,"y":2806.7730066180147,"bigg_id":"gthrd_c","name":"Reduced glutathione","label_x":3785.726469287092,"label_y":2797.1953698992647,"node_is_primary":true},"2076783":{"node_type":"multimarker","x":3503.3842205580786,"y":2804.590932513449},"2076784":{"node_type":"midmarker","x":3523.3834531282237,"y":2804.7661369799653},"2076785":{"node_type":"multimarker","x":3543.3826856983787,"y":2804.9413414464857},"2076786":{"node_type":"metabolite","x":3368.222859295115,"y":2903.5181066620726,"bigg_id":"nadph_c","name":"Nicotinamide adenine dinucleotide phosphate - reduced","label_x":3398.222859295115,"label_y":2913.5181066620726,"node_is_primary":true},"2076787":{"node_type":"metabolite","x":3654.7570490210364,"y":2893.37352401681,"bigg_id":"nadp_c","name":"Nicotinamide adenine dinucleotide phosphate","label_x":3684.7570490210364,"label_y":2903.37352401681,"node_is_primary":true},"2076788":{"node_type":"metabolite","x":3413.7380829254435,"y":2763.8040472738157,"bigg_id":"h_c","name":"H+","label_x":3443.7380829254435,"label_y":2773.8040472738157,"node_is_primary":false},"2076789":{"node_type":"metabolite","x":3297.439115633505,"y":2805.9504337862677,"bigg_id":"gthox_c","name":"Oxidized glutathione","label_x":3190.395658602255,"label_y":2786.5839787081427,"node_is_primary":true}},"text_labels":{"2076558":{"x":4360.415861328125,"y":2413.1468259765625,"text":"Transhydrogenase"},"2076583":{"x":4817.43221875,"y":1402.7503616015624,"text":"ATP"},"2076585":{"x":4807.142912109375,"y":1476.0937864257812,"text":"Synthase"},"2076602":{"x":3439.878951072693,"y":1408.43896484375,"text":"Amino acids"},"2076603":{"x":3518.51904296875,"y":3883.634521484375,"text":"TCA"},"2076604":{"x":1144.3695068359375,"y":1928.7747802734375,"text":"Glycolysis"},"2076605":{"x":2444.319580078125,"y":1539.8134765625,"text":"PPP"},"2076606":{"x":4095.632568359375,"y":1397.7613525390625,"text":"Nucleotides"},"2076608":{"x":4613.81005859375,"y":1819.7628173828125,"text":""},"2076610":{"x":3366.799560546875,"y":2656.33056640625,"text":"Glutathione"},"2076611":{"x":4691.6357421875,"y":3743.687744140625,"text":"Ammonium assimilation"}},"canvas":{"x":962.229121729248,"y":1219.659251690918,"width":4529.184961677001,"height":3483.0749365278316}}]

/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
* @license
*
* Escher
* Author: Zachary King
*
* The MIT License (MIT)
*
* This software is Copyright © 2015 The Regents of the University of
* California. All Rights Reserved.
*
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/

// ESCHER_VERSION provided by webpack plugin or main-node
/* global ESCHER_VERSION */

module.exports = {
  version: "1.7.0-alpha",
  Builder: __webpack_require__(149).default,
  Map: __webpack_require__(95),
  Behavior: __webpack_require__(96),
  KeyManager: __webpack_require__(118),
  DataMenu: __webpack_require__(363),
  UndoStack: __webpack_require__(117),
  CobraModel: __webpack_require__(45),
  utils: __webpack_require__(1),
  SearchIndex: __webpack_require__(120),
  Settings: __webpack_require__(122),
  data_styles: __webpack_require__(20),
  static: __webpack_require__(364),
  ZoomContainer: __webpack_require__(80),
  libs: {
    '_': __webpack_require__(2),
    'underscore': __webpack_require__(2),
    'preact': __webpack_require__(3),
    'baconjs': __webpack_require__(58),
    'mousetrap': __webpack_require__(119),
    'vkbeautify': __webpack_require__(71),
    'd3_selection': __webpack_require__(0),
    'd3_select': __webpack_require__(0).select,
    'd3_json': __webpack_require__(16).json
  }
};

/***/ }),
/* 149 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _preact = __webpack_require__(3);

var _preact2 = _interopRequireDefault(_preact);

var _ReactWrapper = __webpack_require__(61);

var _ReactWrapper2 = _interopRequireDefault(_ReactWrapper);

var _BuilderSettingsMenu = __webpack_require__(150);

var _BuilderSettingsMenu2 = _interopRequireDefault(_BuilderSettingsMenu);

var _ButtonPanel = __webpack_require__(203);

var _ButtonPanel2 = _interopRequireDefault(_ButtonPanel);

var _BuilderMenuBar = __webpack_require__(206);

var _BuilderMenuBar2 = _interopRequireDefault(_BuilderMenuBar);

var _SearchBar = __webpack_require__(211);

var _SearchBar2 = _interopRequireDefault(_SearchBar);

var _utils = __webpack_require__(1);

var utils = _interopRequireWildcard(_utils);

var _BuildInput = __webpack_require__(228);

var _BuildInput2 = _interopRequireDefault(_BuildInput);

var _ZoomContainer = __webpack_require__(80);

var _ZoomContainer2 = _interopRequireDefault(_ZoomContainer);

var _Map = __webpack_require__(95);

var _Map2 = _interopRequireDefault(_Map);

var _CobraModel = __webpack_require__(45);

var _CobraModel2 = _interopRequireDefault(_CobraModel);

var _Brush = __webpack_require__(339);

var _Brush2 = _interopRequireDefault(_Brush);

var _CallbackManager = __webpack_require__(17);

var _CallbackManager2 = _interopRequireDefault(_CallbackManager);

var _Settings = __webpack_require__(122);

var _Settings2 = _interopRequireDefault(_Settings);

var _TextEditInput = __webpack_require__(344);

var _TextEditInput2 = _interopRequireDefault(_TextEditInput);

var _QuickJump = __webpack_require__(345);

var _QuickJump2 = _interopRequireDefault(_QuickJump);

var _data_styles = __webpack_require__(20);

var _data_styles2 = _interopRequireDefault(_data_styles);

var _TooltipContainer = __webpack_require__(346);

var _TooltipContainer2 = _interopRequireDefault(_TooltipContainer);

var _DefaultTooltip = __webpack_require__(347);

var _DefaultTooltip2 = _interopRequireDefault(_DefaultTooltip);

var _TimeSeriesBarPreact = __webpack_require__(350);

var _TimeSeriesBarPreact2 = _interopRequireDefault(_TimeSeriesBarPreact);

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _d3Selection = __webpack_require__(0);

var _d3Request = __webpack_require__(16);

__webpack_require__(353);

__webpack_require__(360);

var _BuilderEmbed = __webpack_require__(362);

var _BuilderEmbed2 = _interopRequireDefault(_BuilderEmbed);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } } /* eslint-disable indent,camelcase,no-trailing-spaces */
/**
 * For documentation of this class, see docs/javascript_api.rst
 */

/** @jsx h */


// Include custom font set for icons


// Include GUI CSS normally with webpack


// Import CSS as a string to embed. This also works from lib because css/src get
// uploaded to NPM.


var Builder = function () {
  function Builder(map_data, model_data, embedded_css, selection, options) {
    var _this = this;

    _classCallCheck(this, Builder);

    // Defaults
    if (!selection) {
      selection = (0, _d3Selection.select)('body').append('div');
    } else if (selection instanceof _d3Selection.selection) {
      // D3 V4 selection
    } else if ('node' in selection) {
      // If user passes in a selection from an different d3 version/instance,
      // then reselect.
      selection = (0, _d3Selection.select)(selection.node());
    } else {
      // HTML Element
      selection = (0, _d3Selection.select)(selection);
    }
    if (!options) {
      options = {};
    }
    if (!embedded_css) {
      embedded_css = _BuilderEmbed2.default;
    }

    this.map_data = map_data;
    this.model_data = model_data;
    this.embedded_css = embedded_css;
    this.selection = selection;
    this.menu_div = null;
    this.button_div = null;
    this.settings_div = null;
    this.settingsMenuRef = null;
    this.search_bar_div = null;
    this.time_series_bar_div = null;
    this.searchBarRef = null;
    this.reference = 0;
    this.target = 0;

    // apply this object as data for the selection
    this.selection.datum(this);
    this.selection.__builder__ = this;

    // Remember if the user provided a custom value for reaction_styles
    this.has_custom_reaction_styles = Boolean(options.reaction_styles);

    // set defaults
    this.options = utils.set_options(options, {
      // view options
      menu: 'all',
      scroll_behavior: 'pan',
      use_3d_transform: !utils.check_browser('safari'),
      enable_editing: true,
      enable_keys: true,
      enable_search: true,
      fill_screen: false,
      zoom_to_element: null,
      full_screen_button: false,
      ignore_bootstrap: false,
      disabled_buttons: null,
      // map, model, and styles
      starting_reaction: null,
      never_ask_before_quit: false,
      unique_map_id: null,
      primary_metabolite_radius: 20,
      secondary_metabolite_radius: 10,
      marker_radius: 5,
      gene_font_size: 18,
      hide_secondary_metabolites: false,
      show_gene_reaction_rules: false,
      hide_all_labels: false,
      canvas_size_and_loc: null,
      // applied data
      // reaction
      reaction_data: null,
      reaction_styles: ['color', 'size', 'text'],
      reaction_compare_style: 'log2_fold',
      reaction_scale: [{ type: 'min', color: '#c8c8c8', size: 12 }, { type: 'median', color: '#9696ff', size: 20 }, { type: 'max', color: '#ff0000', size: 25 }],
      reaction_no_data_color: '#dcdcdc',
      reaction_no_data_size: 8,
      // gene
      gene_data: null,
      and_method_in_gene_reaction_rule: 'mean',
      // metabolite
      metabolite_data: null,
      metabolite_styles: ['color', 'size', 'text'],
      metabolite_compare_style: 'log2_fold',
      metabolite_scale: [{ type: 'min', color: '#fffaf0', size: 20 }, { type: 'median', color: '#f1c470', size: 30 }, { type: 'max', color: '#800000', size: 40 }],
      metabolite_no_data_color: '#ffffff',
      metabolite_no_data_size: 10,
      // View and build options
      identifiers_on_map: 'bigg_id',
      highlight_missing: false,
      allow_building_duplicate_reactions: false,
      cofactors: ['atp', 'adp', 'nad', 'nadh', 'nadp', 'nadph', 'gtp', 'gdp', 'h', 'coa', 'ump', 'h20', 'ppi'],
      // Extensions
      tooltip_component: _DefaultTooltip2.default,
      enable_tooltips: true,
      reaction_scale_preset: null,
      metabolite_scale_preset: null,
      // Callbacks
      first_load_callback: null
    }, {
      primary_metabolite_radius: true,
      secondary_metabolite_radius: true,
      marker_radius: true,
      gene_font_size: true,
      reaction_no_data_size: true,
      metabolite_no_data_size: true
    });

    // Check the location
    if (utils.check_for_parent_tag(this.selection, 'svg')) {
      throw new Error('Builder cannot be placed within an svg node ' + 'because UI elements are html-based.');
    }

    // Initialize the settings
    var set_option = function (option, new_value) {
      this.options[option] = new_value;
    }.bind(this);
    var get_option = function (option) {
      return this.options[option];
    }.bind(this);
    // the options that are erased when the settings menu is canceled
    var conditional = ['hide_secondary_metabolites', 'show_gene_reaction_rules', 'hide_all_labels', 'scroll_behavior', 'reaction_styles', 'reaction_compare_style', 'reaction_scale', 'reaction_no_data_color', 'reaction_no_data_size', 'and_method_in_gene_reaction_rule', 'metabolite_styles', 'metabolite_compare_style', 'metabolite_scale', 'metabolite_no_data_color', 'metabolite_no_data_size', 'identifiers_on_map', 'highlight_missing', 'allow_building_duplicate_reactions', 'enable_tooltips'];
    this.settings = new _Settings2.default(set_option, get_option, conditional);

    // Check the scales have max and min
    var scales = ['reaction_scale', 'metabolite_scale'];
    scales.forEach(function (name) {
      this.settings.streams[name].onValue(function (val) {
        var types = ['min', 'max'];
        types.forEach(function (type) {
          var has = val.reduce(function (has_found, scale_el) {
            return has_found || scale_el.type === type;
          }, false);
          if (!has) {
            val.push({ type: type, color: '#ffffff', size: 10 });
            this.settings.set_conditional(name, val);
          }
        }.bind(this));
      }.bind(this));
    }.bind(this));
    // TODO warn about repeated types in the scale

    // Set up this callback manager
    this.callback_manager = (0, _CallbackManager2.default)();
    if (this.options.first_load_callback !== null) {
      this.callback_manager.set('first_load', this.options.first_load_callback);
    }

    // Set up the zoom container
    this.zoom_container = new _ZoomContainer2.default(this.selection, this.options.scroll_behavior, this.options.use_3d_transform, this.options.fill_screen);
    // Zoom container status changes
    this.zoom_container.callback_manager.set('svg_start', function () {
      if (this.map) this.map.set_status('Drawing ...');
    }.bind(this));
    this.zoom_container.callback_manager.set('svg_finish', function () {
      if (this.map) this.map.set_status('');
    }.bind(this));

    // Set up the tooltip container
    this.tooltip_container = new _TooltipContainer2.default(this.selection, this.options.tooltip_component, this.zoom_container);

    // Status in both modes
    this._create_status(this.selection);

    // Load the model, map, and update data in both
    this.load_model(this.model_data, false);

    // Need to defer map loading to let webpack CSS load properly
    _underscore2.default.defer(function () {
      _this.load_map(_this.map_data, false);
      var message_fn = _this._reaction_check_add_abs();
      _this._update_data(true, true);

      _underscore2.default.mapObject(_this.settings.streams, function (stream, key) {
        stream.onValue(function (value) {
          // TODO optional if it makes sense:
          // if (key in keysICareAbout) {
          _this.pass_settings_menu_props(_extends({}, _this.options, {
            map: _this.map,
            settings: _this.settings
          }));
          if (key === 'reaction_styles' || key === 'metabolite_styles') {
            _this._update_data(false, true);
          }
          // }
        });
      });

      // Setting callbacks. TODO enable atomic updates. Right now, every time the
      // menu closes, everything is drawn.
      _this.settings.status_bus.onValue(function (x) {
        if (x === 'accept') {
          _this._update_data(true, true, ['reaction', 'metabolite'], false);
          if (_this.zoom_container !== null) {
            var new_behavior = _this.settings.get_option('scroll_behavior');
            _this.zoom_container.set_scroll_behavior(new_behavior);
          }
          if (_this.map !== null) {
            _this.map.draw_all_nodes(false);
            _this.map.draw_all_reactions(true, false);
            _this.map.select_none();
          }
        }
      });

      // Set up quick jump
      _this._setup_quick_jump(_this.selection);

      _this.callback_manager.run('first_load', _this);

      if (message_fn !== null) setTimeout(message_fn, 500);
    });
  }

  /**
   * For documentation of this function, see docs/javascript_api.rst.
   */


  Builder.prototype.load_model = function load_model(model_data, should_update_data) {
    if (_underscore2.default.isUndefined(should_update_data)) {
      should_update_data = true;
    }

    // Check the cobra model
    if (_underscore2.default.isNull(model_data)) {
      this.cobra_model = null;
    } else {
      this.cobra_model = _CobraModel2.default.from_cobra_json(model_data);
    }

    if (this.map) {
      this.map.cobra_model = this.cobra_model;
      if (should_update_data) {
        this._update_data(true, false);
      }
      if (this.settings.get_option('highlight_missing')) {
        this.map.draw_all_reactions(false, false);
      }
    }

    this.callback_manager.run('load_model', null, model_data, should_update_data);
  };

  /**
   * For documentation of this function, see docs/javascript_api.rst
   */


  Builder.prototype.load_map = function load_map(map_data, should_update_data) {
    var _this2 = this;

    if (_underscore2.default.isUndefined(should_update_data)) should_update_data = true;

    // Begin with some definitions
    var selectable_mousedown_enabled = true;
    var shift_key_on = false;

    // remove the old builder
    utils.remove_child_nodes(this.zoom_container.zoomed_sel);

    var zoomed_sel = this.zoom_container.zoomed_sel;
    var svg = this.zoom_container.svg;

    // remove the old map side effects
    if (this.map) this.map.key_manager.toggle(false);

    if (map_data !== null) {
      // import map
      this.map = _Map2.default.from_data(map_data, svg, this.embedded_css, zoomed_sel, this.zoom_container, this.settings, this.cobra_model, this.options.enable_search);
    } else {
      // new map
      this.map = new _Map2.default(svg, this.embedded_css, zoomed_sel, this.zoom_container, this.settings, this.cobra_model, this.options.canvas_size_and_loc, this.options.enable_search);
    }

    // Connect status bar
    this._setup_status(this.map);

    // Set the data for the map
    if (should_update_data) this._update_data(false, true);

    // Set up the reaction input with complete.ly
    this.build_input = new _BuildInput2.default(this.selection, this.map, this.zoom_container, this.settings);

    // Set up the text edit input
    this.text_edit_input = new _TextEditInput2.default(this.selection, this.map, this.zoom_container);

    // Connect the tooltip
    this.tooltip_container.setup_map_callbacks(this.map);

    // Set up the Brush
    this.brush = new _Brush2.default(zoomed_sel, false, this.map, '.canvas-group');
    this.map.canvas.callback_manager.set('resize', function () {
      this.brush.toggle(true);
    }.bind(this));

    // Set up the modes
    this._setup_modes(this.map, this.brush, this.zoom_container);

    var s = this.selection.append('div').attr('class', 'search-menu-container').append('div').attr('class', 'search-menu-container-inline');
    this.menu_div = s.append('div');
    this.search_bar_div = s.append('div');
    this.time_series_bar_div = s.append('div');
    this.button_div = this.selection.append('div');
    this.settings_div = this.selection.append('div');

    // set up attributes for time series
    this.type_of_data = '';
    this.difference_mode = false;
    this.reference = 0;
    this.target = 0;

    this.reaction_data_names = [];
    this.gene_data_names = [];
    this.metabolite_data_names = [];

    // set up the time series bar
    this.time_series_bar = new _TimeSeriesBarPreact2.default(false, this); //this.time_series_bar_div, this.map, this, this.type_of_data)
    // // Set up the hide callbacks
    // this.time_series_bar.callback_manager.set('show', function() {
    //   this.time_series_bar.toggle(false)
    // }.bind(this))


    // Set up settings menu
    _preact2.default.render((0, _preact.h)(_ReactWrapper2.default, {
      display: false,
      callbackManager: this.callback_manager,
      component: _BuilderSettingsMenu2.default,
      refProp: function refProp(instance) {
        _this2.settingsMenuRef = instance;
      },
      closeMenu: function closeMenu() {
        return _this2.pass_settings_menu_props({ display: false });
      }
    }), this.settings_div.node(), this.settings_div.node().children.length > 0 ? this.settings_div.node().firstChild : undefined);

    this.renderSearchBar(true);
    this.renderTimeSeriesBar(true); // TODO: set true and make button work

    // Set up key manager
    var keys = this._get_keys(this.map, this.zoom_container, this.search_bar, this.settings_bar, this.options.enable_editing, this.options.full_screen_button);
    this.map.key_manager.assigned_keys = keys;
    // Tell the key manager about the reaction input and search bar
    this.map.key_manager.input_list = [this.build_input, this.searchBarRef, function () {
      return _this2.settingsMenuRef;
    }, this.text_edit_input, this.tooltip_container];
    // Make sure the key manager remembers all those changes
    this.map.key_manager.update();
    // Turn it on/off
    this.map.key_manager.toggle(this.options.enable_keys);

    // Disable clears
    if (!this.options.reaction_data && this.options.disabled_buttons) {
      this.options.disabled_buttons.push('Clear reaction data');
    }
    if (!this.options.gene_data && this.options.disabled_buttons) {
      this.options.disabled_buttons.push('Clear gene data');
    }
    if (!this.options.metabolite_data && this.options.disabled_buttons) {
      this.options.disabled_buttons.push('Clear metabolite data');
    }

    // Setup selection box
    if (this.options.zoom_to_element) {
      var type = this.options.zoom_to_element.type,
          element_id = this.options.zoom_to_element.id;
      if (_underscore2.default.isUndefined(type) || ['reaction', 'node'].indexOf(type) === -1) {
        throw new Error('zoom_to_element type must be "reaction" or "node"');
      }
      if (_underscore2.default.isUndefined(element_id)) {
        throw new Error('zoom_to_element must include id');
      }
      if (type === 'reaction') {
        this.map.zoom_to_reaction(element_id);
      } else if (type === 'node') {
        this.map.zoom_to_node(element_id);
      }
    } else if (map_data !== null) {
      this.map.zoom_extent_canvas();
    } else {
      if (this.options.starting_reaction !== null && this.cobra_model !== null) {
        // Draw default reaction if no map is provided
        var size = this.zoom_container.get_size();
        var start_coords = { x: size.width / 2, y: size.height / 4 };
        this.map.new_reaction_from_scratch(this.options.starting_reaction, start_coords, 90);
        this.map.zoom_extent_nodes();
      } else {
        this.map.zoom_extent_canvas();
      }
    }

    // Start in zoom mode for builder, view mode for viewer
    if (this.options.enable_editing) {
      this.zoom_mode();
    } else {
      this.view_mode();
    }

    // confirm before leaving the page
    if (this.options.enable_editing) {
      this._setup_confirm_before_exit();
    }

    // draw
    this.map.draw_everything();
  };

  Builder.prototype.renderMenu = function renderMenu(mode) {
    var _this3 = this;

    var menuDivNode = this.menu_div.node();
    if (this.options.menu === 'all') {
      _preact2.default.render((0, _preact.h)(_BuilderMenuBar2.default, _extends({}, this.options, this.map, {
        mode: mode,
        settings: this.settings,
        saveMap: function saveMap() {
          return _this3.map.save();
        },
        loadMap: function loadMap(file) {
          return _this3.load_map(file);
        },
        saveSvg: function saveSvg() {
          return _this3.map.save_svg();
        },
        savePng: function savePng() {
          return _this3.map.save_png();
        },
        clearMap: function clearMap() {
          return _this3.map.clear_map();
        },
        loadModel: function loadModel(file) {
          return _this3.load_model(file, true);
        },
        updateRules: function updateRules() {
          return _this3.map.convert_map();
        },
        loadReactionData: function loadReactionData(file) {
          _this3.set_reaction_data(file);
          _this3._set_mode(mode);
        },
        loadGeneData: function loadGeneData(file) {
          _this3.set_gene_data(file);
          _this3._set_mode(mode);
        },
        loadMetaboliteData: function loadMetaboliteData(file) {
          _this3.set_metabolite_data(file);
          _this3._set_mode(mode);
        },
        setMode: function setMode(newMode) {
          return _this3._set_mode(newMode);
        },
        deleteSelected: function deleteSelected() {
          return _this3.map.delete_selected();
        },
        undo: function undo() {
          return _this3.map.undo_stack.undo();
        },
        redo: function redo() {
          return _this3.map.undo_stack.redo();
        },
        togglePrimary: function togglePrimary() {
          return _this3.map.toggle_selected_node_primary();
        },
        cyclePrimary: function cyclePrimary() {
          return _this3.map.cycle_primary_node();
        },
        selectAll: function selectAll() {
          return _this3.map.select_all();
        },
        selectNone: function selectNone() {
          return _this3.map.select_none();
        },
        invertSelection: function invertSelection() {
          return _this3.map.invert_selection();
        },
        zoomIn: function zoomIn() {
          return _this3.zoom_container.zoom_in();
        },
        zoomOut: function zoomOut() {
          return _this3.zoom_container.zoom_out();
        },
        zoomExtentNodes: function zoomExtentNodes() {
          return _this3.map.zoom_extent_nodes();
        },
        zoomExtentCanvas: function zoomExtentCanvas() {
          return _this3.map.zoom_extent_canvas();
        },
        search: function search() {
          return _this3.renderSearchBar();
        },
        timeSeriesBar: function timeSeriesBar() {
          return _this3.renderTimeSeriesBar();
        },
        toggleBeziers: function toggleBeziers() {
          return _this3.map.toggle_beziers();
        },
        renderSettingsMenu: function renderSettingsMenu() {
          return _this3.pass_settings_menu_props(_extends({}, _this3.options, {
            map: _this3.map,
            settings: _this3.settings,
            display: true
          }));
        }
      })), menuDivNode, menuDivNode.children.length > 0 // If there is already a div, re-render it. Otherwise make a new one
      ? menuDivNode.firstChild : undefined);
    }
  };

  Builder.prototype.renderTimeSeriesBar = function renderTimeSeriesBar(hide) {
    var timeSeriesBarNode = this.time_series_bar_div.node();
    _preact2.default.render((0, _preact.h)(_TimeSeriesBarPreact2.default, {
      visible: !hide,
      builder: this,
      map: this.map
    }), timeSeriesBarNode, timeSeriesBarNode.children.length > 0 // If there is already a div, re-render it. Otherwise make a new one
    ? timeSeriesBarNode.firstChild : undefined);
  };

  Builder.prototype.renderSearchBar = function renderSearchBar(hide) {
    var _this4 = this;

    var searchBarNode = this.search_bar_div.node();
    _preact2.default.render((0, _preact.h)(_SearchBar2.default, {
      visible: !hide,
      searchIndex: this.map.search_index,
      map: this.map,
      ref: function ref(instance) {
        _this4.searchBarRef = instance;
      }
    }), searchBarNode, searchBarNode.children.length > 0 // If there is already a div, re-render it. Otherwise make a new one
    ? searchBarNode.firstChild : undefined);
  };

  Builder.prototype.renderButtonPanel = function renderButtonPanel(mode) {
    var _this5 = this;

    var buttonPanelDivNode = this.button_div.node();
    _preact2.default.render((0, _preact.h)(_ButtonPanel2.default, {
      setMode: function setMode(newMode) {
        return _this5._set_mode(newMode);
      },
      zoomContainer: this.zoom_container,
      map: this.map,
      mode: mode,
      buildInput: this.build_input
    }), buttonPanelDivNode, buttonPanelDivNode.children.length > 0 // If there is already a div, re-render it. Otherwise make a new one
    ? buttonPanelDivNode.firstChild : undefined);
  };

  Builder.prototype._set_mode = function _set_mode(mode) {
    this.renderMenu(mode);
    this.renderButtonPanel(mode);
    // input
    this.build_input.toggle(mode == 'build');
    this.build_input.direction_arrow.toggle(mode == 'build');
    // brush
    this.brush.toggle(mode == 'brush');
    // zoom
    this.zoom_container.toggle_pan_drag(mode == 'zoom' || mode == 'view');
    // resize canvas
    this.map.canvas.toggle_resize(mode == 'zoom' || mode == 'brush');
    // Behavior. Be careful of the order becuase rotation and
    // toggle_selectable_drag both use Behavior.selectable_drag.
    if (mode == 'rotate') {
      this.map.behavior.toggle_selectable_drag(false); // before toggle_rotation_mode
      this.map.behavior.toggle_rotation_mode(true);
    } else {
      this.map.behavior.toggle_rotation_mode(mode == 'rotate'); // before toggle_selectable_drag
      this.map.behavior.toggle_selectable_drag(mode == 'brush');
    }
    this.map.behavior.toggle_selectable_click(mode == 'build' || mode == 'brush');
    this.map.behavior.toggle_label_drag(mode == 'brush');
    this.map.behavior.toggle_label_mouseover(true);
    this.map.behavior.toggle_label_touch(true);
    this.map.behavior.toggle_text_label_edit(mode == 'text');
    this.map.behavior.toggle_bezier_drag(mode == 'brush');
    // edit selections
    if (mode == 'view' || mode == 'text') this.map.select_none();
    if (mode == 'rotate') this.map.deselect_text_labels();
    this.map.draw_everything();
  };

  Builder.prototype.view_mode = function view_mode() {
    /** For documentation of this function, see docs/javascript_api.rst.  */
    this.callback_manager.run('view_mode');
    this._set_mode('view');
  };

  Builder.prototype.build_mode = function build_mode() {
    /** For documentation of this function, see docs/javascript_api.rst.  */
    this.callback_manager.run('build_mode');
    this._set_mode('build');
  };

  Builder.prototype.brush_mode = function brush_mode() {
    console.log('pressed');
    /** For documentation of this function, see docs/javascript_api.rst.  */
    this.callback_manager.run('brush_mode');
    this._set_mode('brush');
  };

  Builder.prototype.zoom_mode = function zoom_mode() {
    /** For documentation of this function, see docs/javascript_api.rst.  */
    this.callback_manager.run('zoom_mode');
    this._set_mode('zoom');
  };

  Builder.prototype.rotate_mode = function rotate_mode() {
    /** For documentation of this function, see docs/javascript_api.rst.  */
    this.callback_manager.run('rotate_mode');
    this._set_mode('rotate');
  };

  Builder.prototype.text_mode = function text_mode() {
    /** For documentation of this function, see docs/javascript_api.rst.  */
    this.callback_manager.run('text_mode');
    this._set_mode('text');
  };

  Builder.prototype._reaction_check_add_abs = function _reaction_check_add_abs() {
    var curr_style = this.options.reaction_styles;
    var did_abs = false;
    if (this.options.reaction_data !== null && !this.has_custom_reaction_styles && !_underscore2.default.contains(curr_style, 'abs')) {
      this.settings.set_conditional('reaction_styles', curr_style.concat('abs'));
      return function () {
        this.map.set_status('Visualizing absolute value of reaction data. ' + 'Change this option in Settings.', 5000);
      }.bind(this);
    }
    return null;
  };

  /**
   * Function to get props for the tooltip component
   * @param {Object} props - Props that the tooltip will use
   */


  Builder.prototype.pass_tooltip_component_props = function pass_tooltip_component_props(props) {
    this.tooltip_container.callback_manager.run('setState', null, props);
  };

  /**
   * Function to get props for the settings menu
   * @param {Object} props - Props that the settings menu will use
   */


  Builder.prototype.pass_settings_menu_props = function pass_settings_menu_props(props) {
    // if (this.settings_menu.visible) { // <- pseudocode
    // pass the props
    // }
    this.callback_manager.run('setState', null, props);
  };

  /**
   * For documentation of this function, see docs/javascript_api.rst.
   */


  Builder.prototype.set_reaction_data = function set_reaction_data(data) {

    this.reaction_data_names = [];
    this.reaction_data_names.length = 0;

    // new data is [array of names][array of numbers]
    if (data === null) {

      this.reaction_data_names = null;
      this.options.reaction_data = null;
      this.time_series_bar.update(this);
    } else if (_underscore2.default.isArray(data) && data.length === 2 && _underscore2.default.isArray(data[0]) && _underscore2.default.isArray(data[1])) {
      // new data style with names
      this.reaction_data_names = data[0];
      this.options.reaction_data = data[1];

      this.type_of_data = 'reaction';
      this.time_series_bar.openTab(this);
    } else if (_underscore2.default.isArray(data)) {
      // new data style without names or diff data
      for (var i = 0; i < data.length; i++) {
        this.reaction_data_names.push("reaction data set " + (i + 1));
      }

      this.options.reaction_data = data;
      this.type_of_data = 'reaction';
      this.time_series_bar.openTab(this);
    } else if (!_underscore2.default.isArray(data) && _underscore2.default.isObject(data)) {
      // old style
      this.reaction_data_names = ["reaction data set"];

      this.options.reaction_data = [data];
      this.type_of_data = 'reaction';
      this.time_series_bar.openTab(this);
    } else {
      // something went wrong
      this.map.set_status('Error reading data');
    }

    var message_fn = this._reaction_check_add_abs();
    this._update_data(true, true, 'reaction', undefined, true);
    if (message_fn) {
      message_fn();
    } else {
      this.map.set_status('');
    }
  };

  /**
   * For documentation of this function, see docs/javascript_api.rst.
   */


  Builder.prototype.set_gene_data = function set_gene_data(data, clear_gene_reaction_rules) {
    if (clear_gene_reaction_rules) {
      // default undefined
      this.settings.set_conditional('show_gene_reaction_rules', false);
    }
    this.gene_data_names = [];
    //this.gene_data_names.length = 0


    // new data is [array of names][array of numbers]
    // new case for reset to null, because crashes on null[1]
    if (data === null) {

      this.gene_data_names = null;
      this.options.gene_data = null;
      this.time_series_bar.update(this);
    } else if (_underscore2.default.isArray(data) && data.length === 2 && _underscore2.default.isArray(data[0]) && _underscore2.default.isArray(data[1])) {
      // new data style with names
      this.gene_data_names = data[0];
      this.options.gene_data = data[1];

      this.type_of_data = 'gene';
      this.time_series_bar.openTab(this);
    } else if (_underscore2.default.isArray(data)) {
      // new data style without names or diff data
      for (var i = 0; i < data.length; i++) {
        this.gene_data_names.push("gene data set " + (i + 1));
      }

      this.options.gene_data = data;
      this.type_of_data = 'gene';
      this.time_series_bar.openTab(this);
    } else if (!_underscore2.default.isArray(data) && _underscore2.default.isObject(data)) {
      // old style
      this.gene_data_names = ["gene data set"];

      this.options.gene_data = [data];
      this.type_of_data = 'gene';
      this.time_series_bar.openTab(this);
    } else {
      // something went wrong
      this.map.set_status('Error reading data');
    }

    this._update_data(true, true, 'reaction', undefined, true);
    this.map.set_status('');
  };

  Builder.prototype.set_metabolite_data = function set_metabolite_data(data) {

    this.metabolite_data_names = [];
    this.metabolite_data_names.length = 0;

    // new data is [array of names][array of numbers]
    // new case for reset to null, because crashes on null[1]
    if (data === null) {

      this.metabolite_data_names = null;
      this.options.metabolite_data = null;
      this.time_series_bar.update(this);
    } else if (_underscore2.default.isArray(data) && data.length === 2 && _underscore2.default.isArray(data[0]) && _underscore2.default.isArray(data[1])) {
      // new data style with names
      this.metabolite_data_names = data[0];
      this.options.metabolite_data = data[1];

      this.type_of_data = 'metabolite';
      this.time_series_bar.openTab(this);
    } else if (_underscore2.default.isArray(data)) {
      // new data style without names or diff data
      for (var i = 0; i < data.length; i++) {
        this.metabolite_data_names.push("reaction data set " + (i + 1));
      }

      this.options.metabolite_data = data;
      this.type_of_data = 'metabolite';
      this.time_series_bar.openTab(this);
    } else if (!_underscore2.default.isArray(data) && _underscore2.default.isObject(data)) {
      // old style
      this.metabolite_data_names = ["metabolite data set"];

      this.options.metabolite_data = [data];
      this.type_of_data = 'metabolite';
      this.time_series_bar.openTab(this);
    } else {
      // something went wrong
      this.map.set_status('Error reading data');
    }

    this._update_data(true, true, 'metabolite', undefined, true);
    this.map.set_status('');
  };

  /**
   * Set data and settings for the model.
   * update_model: (Boolean) Update data for the model.
   * update_map: (Boolean) Update data for the map.
   * kind: (Optional, Default: all) An array defining which data is being updated
   * that can include any of: ['reaction', 'metabolite'].
   * should_draw: (Optional, Default: true) Whether to redraw the update sections
   * of the map.
   */


  Builder.prototype._update_data = function _update_data(update_model, update_map, kind, should_draw, update_stats) {
    // defaults
    if (kind === undefined) {
      kind = ['reaction', 'metabolite'];
    }
    if (should_draw === undefined) {
      should_draw = true;
    }

    var update_metabolite_data = kind.indexOf('metabolite') !== -1;
    var update_reaction_data = kind.indexOf('reaction') !== -1;
    var met_data_object;
    var reaction_data_object;
    var gene_data_object;

    // -------------------
    // First map, and draw
    // -------------------

    // metabolite data
    if (update_metabolite_data && update_map && this.map !== null) {

      if (this.difference_mode && this.options.metabolite_data !== null) {

        var difference_metabolite_data = [this.options.metabolite_data[this.reference], this.options.metabolite_data[this.target]];
        met_data_object = _data_styles2.default.import_and_check(difference_metabolite_data, 'metabolite_data');
      } else {
        if (this.options.metabolite_data !== null) {
          if (_underscore2.default.isArray(this.options.metabolite_data)) {

            met_data_object = _data_styles2.default.import_and_check(this.options.metabolite_data[this.reference], 'metabolite_data');
          } else {
            met_data_object = _data_styles2.default.import_and_check(this.options.metabolite_data, 'metabolite_data');
          }
        } else {
          met_data_object = _data_styles2.default.import_and_check(this.options.metabolite_data, 'metabolite_data');
        }
      }

      // calculates the scales with all the values in the data sets
      if (update_stats && this.options.metabolite_data !== null) {
        var metabolite_for_data_scales = [];

        for (var i in this.options.metabolite_data) {
          metabolite_for_data_scales = metabolite_for_data_scales.concat(Object.values(this.options.metabolite_data[i]));
        }
        this.map.set_nodes_for_data_scales(metabolite_for_data_scales);
      }

      this.map.apply_metabolite_data_to_map(met_data_object);
      if (should_draw) {
        this.map.draw_all_nodes(false);
      }
    }

    // reaction data
    if (update_reaction_data) {

      if (this.options.reaction_data !== null && update_map && this.map !== null) {

        if (this.difference_mode) {

          var difference_reaction_data = [this.options.reaction_data[this.reference], this.options.reaction_data[this.target]];
          reaction_data_object = _data_styles2.default.import_and_check(difference_reaction_data, 'reaction_data');
        } else {
          if (_underscore2.default.isArray(this.options.reaction_data)) {

            reaction_data_object = _data_styles2.default.import_and_check(this.options.reaction_data[this.reference], 'reaction_data');
          } else {
            reaction_data_object = _data_styles2.default.import_and_check(this.options.reaction_data, 'reaction_data');
          }
        }

        if (update_stats && this.options.reaction_data !== null) {
          var reaction_for_data_scales = [];

          for (var i in this.options.reaction_data) {
            reaction_for_data_scales = reaction_for_data_scales.concat(Object.values(this.options.reaction_data[i]));
          }
          this.map.set_reactions_for_data_scales(reaction_for_data_scales);
        }

        this.map.apply_reaction_data_to_map(reaction_data_object);

        if (should_draw) this.map.draw_all_reactions(false, false);
        // gene data
      } else if (this.options.gene_data !== null && update_map && this.map !== null) {

        if (this.difference_mode) {
          var difference_gene_data = [this.options.gene_data[this.reference], this.options.gene_data[this.target]];
          gene_data_object = make_gene_data_object(difference_gene_data, this.cobra_model, this.map);
        } else {

          if (_underscore2.default.isArray(this.options.gene_data)) {
            gene_data_object = make_gene_data_object(this.options.gene_data[this.reference], this.cobra_model, this.map);
          } else {
            gene_data_object = make_gene_data_object(this.options.gene_data, this.cobra_model, this.map);
          }
        }

        if (update_stats && this.options.gene_data !== null) {
          var genes_for_data_scales = [];

          for (var i in this.options.gene_data) {
            genes_for_data_scales = genes_for_data_scales.concat(Object.values(this.options.gene_data[i]));
          }
          this.map.set_reactions_for_data_scales(genes_for_data_scales);
        }

        this.map.apply_gene_data_to_map(gene_data_object);
        if (should_draw) this.map.draw_all_reactions(false, false);
      } else if (update_map && this.map !== null) {
        // clear the data
        this.map.apply_reaction_data_to_map(null);
        if (should_draw) this.map.draw_all_reactions(false, false);
      }
    }

    // ----------------------------------------------------------------
    // Then the model, after drawing. Delay by 5ms so the the map draws
    // first.
    // ----------------------------------------------------------------

    // If this function runs again, cancel the previous model update
    if (this.update_model_timer) {
      clearTimeout(this.update_model_timer);
    }

    var delay = 5;
    this.update_model_timer = setTimeout(function () {

      // metabolite_data
      // this.options.metabolite_data !== null &&
      if (update_metabolite_data) {

        if (this.options.metabolite_data !== null && update_model && this.cobra_model !== null) {
          // if we haven't already made this

          if (!met_data_object) {
            met_data_object = _data_styles2.default.import_and_check(this.options.metabolite_data, 'metabolite_data');
          }
          this.cobra_model.apply_metabolite_data(met_data_object, this.options.metabolite_styles, this.options.metabolite_compare_style);
        } else if (update_model && this.cobra_model !== null) {
          // clear the data
          this.cobra_model.apply_metabolite_data(null, this.options.reaction_styles, this.options.reaction_compare_style);
        }
      }

      // reaction data
      if (update_reaction_data) {
        if (this.options.reaction_data !== null && update_model && this.cobra_model !== null) {
          // if we haven't already made this
          if (!reaction_data_object) {
            reaction_data_object = _data_styles2.default.import_and_check(this.options.reaction_data, 'reaction_data');
          }
          this.cobra_model.apply_reaction_data(reaction_data_object, this.options.reaction_styles, this.options.reaction_compare_style);
        } else if (this.options.gene_data !== null && update_model && this.cobra_model !== null) {
          if (!gene_data_object) {
            gene_data_object = make_gene_data_object(this.options.gene_data, this.cobra_model, this.map);
          }
          this.cobra_model.apply_gene_data(gene_data_object, this.options.reaction_styles, this.options.identifiers_on_map, this.options.reaction_compare_style, this.options.and_method_in_gene_reaction_rule);
        } else if (update_model && this.cobra_model !== null) {
          // clear the data
          this.cobra_model.apply_reaction_data(null, this.options.reaction_styles, this.options.reaction_compare_style);
        }
      }

      // callback
      this.callback_manager.run('update_data', null, update_model, update_map, kind, should_draw);
    }.bind(this), delay);

    // definitions
    function make_gene_data_object(gene_data, cobra_model, map) {
      var all_reactions = {};
      if (cobra_model !== null) utils.extend(all_reactions, cobra_model.reactions);
      // extend, overwrite
      if (map !== null) utils.extend(all_reactions, map.reactions, true);

      // this object has reaction keys and values containing associated genes

      // TODO: handle here +2 data sets?
      if (gene_data.length > 2) {
        return _data_styles2.default.import_and_check(gene_data, 'gene_data', all_reactions);
      } else {
        return _data_styles2.default.import_and_check(gene_data, 'gene_data', all_reactions);
      }
    }
  };

  Builder.prototype._create_status = function _create_status(selection) {
    this.status_bar = selection.append('div').attr('id', 'status');
  };

  Builder.prototype._setup_status = function _setup_status(map) {
    var _this6 = this;

    map.callback_manager.set('set_status', function (status) {
      return _this6.status_bar.html(status);
    });
  };

  Builder.prototype._setup_quick_jump = function _setup_quick_jump(selection) {
    // function to load a map
    var load_fn = function (new_map_name, quick_jump_path, callback) {
      if (this.options.enable_editing && !this.options.never_ask_before_quit) {
        if (!confirm('You will lose any unsaved changes.\n\n' + 'Are you sure you want to switch maps?')) {
          if (callback) callback(false);
          return;
        }
      }
      this.map.set_status('Loading map ' + new_map_name + ' ...');
      var url = utils.name_to_url(new_map_name, quick_jump_path);
      (0, _d3Request.json)(url, function (error, data) {
        if (error) {
          console.warn('Could not load data: ' + error);
          this.map.set_status('Could not load map', 2000);
          if (callback) callback(false);
          return;
        }
        // run callback before load_map so the new map has the correct
        // quick_jump menu
        if (callback) callback(true);
        // now reload
        this.load_map(data);
        this.map.set_status('');
      }.bind(this));
    }.bind(this);

    // make the quick jump object
    this.quick_jump = (0, _QuickJump2.default)(selection, load_fn);
  };

  Builder.prototype._setup_modes = function _setup_modes(map, brush, zoom_container) {
    // set up zoom+pan and brush modes
    var was_enabled = {};
    map.callback_manager.set('start_rotation', function () {
      was_enabled.brush = brush.enabled;
      brush.toggle(false);
      was_enabled.zoom = zoom_container.zoom_on;
      zoom_container.toggle_pan_drag(false);
      was_enabled.selectable_mousedown = map.behavior.selectable_mousedown !== null;
      map.behavior.toggle_selectable_click(false);
      was_enabled.label_mouseover = map.behavior.label_mouseover !== null;
      was_enabled.label_touch = map.behavior.label_touch !== null;
      map.behavior.toggle_label_mouseover(false);
      map.behavior.toggle_label_touch(false);
    });
    map.callback_manager.set('end_rotation', function () {
      brush.toggle(was_enabled.brush);
      zoom_container.toggle_pan_drag(was_enabled.zoom);
      map.behavior.toggle_selectable_click(was_enabled.selectable_mousedown);
      map.behavior.toggle_label_mouseover(was_enabled.label_mouseover);
      map.behavior.toggle_label_touch(was_enabled.label_touch);
      was_enabled = {};
    });
  };

  /**
   * Define keyboard shortcuts
   */


  Builder.prototype._get_keys = function _get_keys(map, zoom_container, search_bar, settings_bar, enable_editing, full_screen_button) {
    var _this7 = this;

    var keys = {
      save: {
        key: 'ctrl+s',
        target: map,
        fn: map.save
      },
      save_svg: {
        key: 'ctrl+shift+s',
        target: map,
        fn: map.save_svg
      },
      save_png: {
        key: 'ctrl+shift+p',
        target: map,
        fn: map.save_png
      },
      load: {
        key: 'ctrl+o',
        fn: null // defined by button
      },
      convert_map: {
        target: map,
        fn: map.convert_map
      },
      clear_map: {
        target: map,
        fn: map.clear_map
      },
      load_model: {
        key: 'ctrl+m',
        fn: null // defined by button
      },
      clear_model: {
        fn: this.load_model.bind(this, null, true)
      },
      load_reaction_data: { fn: null }, // defined by button
      clear_reaction_data: {
        target: this,
        fn: function fn() {
          this.set_reaction_data(null);
        }
      },
      load_metabolite_data: { fn: null }, // defined by button
      clear_metabolite_data: {
        target: this,
        fn: function fn() {
          this.set_metabolite_data(null);
        }
      },
      load_gene_data: { fn: null }, // defined by button
      clear_gene_data: {
        target: this,
        fn: function fn() {
          this.set_gene_data(null, true);
        }
      },
      zoom_in_ctrl: {
        key: 'ctrl+=',
        target: zoom_container,
        fn: zoom_container.zoom_in
      },
      zoom_in: {
        key: '=',
        target: zoom_container,
        fn: zoom_container.zoom_in,
        ignore_with_input: true
      },
      zoom_out_ctrl: {
        key: 'ctrl+-',
        target: zoom_container,
        fn: zoom_container.zoom_out
      },
      zoom_out: {
        key: '-',
        target: zoom_container,
        fn: zoom_container.zoom_out,
        ignore_with_input: true
      },
      extent_nodes_ctrl: {
        key: 'ctrl+0',
        target: map,
        fn: map.zoom_extent_nodes
      },
      extent_nodes: {
        key: '0',
        target: map,
        fn: map.zoom_extent_nodes,
        ignore_with_input: true
      },
      extent_canvas_ctrl: {
        key: 'ctrl+1',
        target: map,
        fn: map.zoom_extent_canvas
      },
      extent_canvas: {
        key: '1',
        target: map,
        fn: map.zoom_extent_canvas,
        ignore_with_input: true
      },
      search_ctrl: {
        key: 'ctrl+f',
        fn: function fn() {
          return _this7.renderSearchBar();
        }
      },
      search: {
        key: 'f',
        fn: function fn() {
          return _this7.renderSearchBar();
        },
        ignore_with_input: true
      },
      view_mode: {
        target: this,
        fn: this.view_mode,
        ignore_with_input: true
      },
      show_settings_ctrl: {
        key: 'ctrl+,',
        target: settings_bar,
        fn: function fn() {
          return _this7.pass_settings_menu_props(_extends({}, _this7.options, {
            map: _this7.map,
            settings: _this7.settings,
            display: true
          }));
        }
      },
      show_settings: {
        key: ',',
        target: this,
        fn: function fn() {
          return _this7.pass_settings_menu_props(_extends({}, _this7.options, {
            map: _this7.map,
            settings: _this7.settings,
            display: true
          }));
        },
        ignore_with_input: true
      }
    };
    if (full_screen_button) {
      utils.extend(keys, {
        full_screen_ctrl: {
          key: 'ctrl+2',
          target: map,
          fn: map.full_screen
        },
        full_screen: {
          key: '2',
          target: map,
          fn: map.full_screen,
          ignore_with_input: true
        }
      });
    }
    if (enable_editing) {
      utils.extend(keys, {
        build_mode: {
          key: 'n',
          target: this,
          fn: this.build_mode,
          ignore_with_input: true
        },
        zoom_mode: {
          key: 'z',
          target: this,
          fn: this.zoom_mode,
          ignore_with_input: true
        },
        brush_mode: {
          key: 'v',
          target: this,
          fn: this.brush_mode,
          ignore_with_input: true
        },
        rotate_mode: {
          key: 'r',
          target: this,
          fn: this.rotate_mode,
          ignore_with_input: true
        },
        text_mode: {
          key: 't',
          target: this,
          fn: this.text_mode,
          ignore_with_input: true
        },
        toggle_beziers: {
          key: 'b',
          target: map,
          fn: map.toggle_beziers,
          ignore_with_input: true
        },
        delete_ctrl: {
          key: 'ctrl+backspace',
          target: map,
          fn: map.delete_selected,
          ignore_with_input: true
        },
        delete: {
          key: 'backspace',
          target: map,
          fn: map.delete_selected,
          ignore_with_input: true
        },
        delete_del: {
          key: 'del',
          target: map,
          fn: map.delete_selected,
          ignore_with_input: true
        },
        toggle_primary: {
          key: 'p',
          target: map,
          fn: map.toggle_selected_node_primary,
          ignore_with_input: true
        },
        cycle_primary: {
          key: 'c',
          target: map,
          fn: map.cycle_primary_node,
          ignore_with_input: true
        },
        direction_arrow_right: {
          key: 'right',
          target: this.build_input.direction_arrow,
          fn: this.build_input.direction_arrow.right,
          ignore_with_input: true
        },
        direction_arrow_down: {
          key: 'down',
          target: this.build_input.direction_arrow,
          fn: this.build_input.direction_arrow.down,
          ignore_with_input: true
        },
        direction_arrow_left: {
          key: 'left',
          target: this.build_input.direction_arrow,
          fn: this.build_input.direction_arrow.left,
          ignore_with_input: true
        },
        direction_arrow_up: {
          key: 'up',
          target: this.build_input.direction_arrow,
          fn: this.build_input.direction_arrow.up,
          ignore_with_input: true
        },
        undo: {
          key: 'ctrl+z',
          target: map.undo_stack,
          fn: map.undo_stack.undo
        },
        redo: {
          key: 'ctrl+shift+z',
          target: map.undo_stack,
          fn: map.undo_stack.redo
        },
        select_all: {
          key: 'ctrl+a',
          target: map,
          fn: map.select_all
        },
        select_none: {
          key: 'ctrl+shift+a',
          target: map,
          fn: map.select_none
        },
        invert_selection: {
          target: map,
          fn: map.invert_selection
        }
      });
    }
    return keys;
  };

  /**
   * Ask if the user wants to exit the page (to avoid unplanned refresh).
   */


  Builder.prototype._setup_confirm_before_exit = function _setup_confirm_before_exit() {
    window.onbeforeunload = function (e) {
      // If we haven't been passed the event get the window.event
      e = e || window.event;
      return this.options.never_ask_before_quit ? null : 'You will lose any unsaved changes.';
    }.bind(this);
  };

  /*
  * reference: required
  * target: only required for difference mode
  */

  Builder.prototype.set_data_indices = function set_data_indices(type_of_data, ref, tar) {
    this.reference = ref;

    // TODO: was null before, but this way I loose the target index when I only set ref?
    this.target = tar || this.target;

    if (type_of_data === 'gene') {
      type_of_data = 'reaction';
    }
    this._update_data(true, true, type_of_data, true);
  };

  return Builder;
}();

exports.default = utils.class_with_optional_new(Builder);

/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

var _ScaleSelector = __webpack_require__(151);

var _ScaleSelector2 = _interopRequireDefault(_ScaleSelector);

var _ScaleSlider = __webpack_require__(152);

var _ScaleSlider2 = _interopRequireDefault(_ScaleSlider);

var _ScaleSelection = __webpack_require__(199);

var _ScaleSelection2 = _interopRequireDefault(_ScaleSelection);

var _immutabilityHelper = __webpack_require__(70);

var _immutabilityHelper2 = _interopRequireDefault(_immutabilityHelper);

var _underscore = __webpack_require__(2);

var _ = _interopRequireWildcard(_underscore);

__webpack_require__(200);

var _ColorPresets = __webpack_require__(202);

var _ColorPresets2 = _interopRequireDefault(_ColorPresets);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */


/**
 * SettingsMenu. Handles the functions associated with the UI for changing
 * settings. Implements Settings.js but otherwise only uses
 * Preact.
 */

var BuilderSettingsMenu = function (_Component) {
  _inherits(BuilderSettingsMenu, _Component);

  function BuilderSettingsMenu(props) {
    _classCallCheck(this, BuilderSettingsMenu);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {
      display: props.display
    };
    if (props.display) {
      _this.componentWillAppear();
    }
    if (props.reaction_scale_preset) {
      props.settings.set_conditional('reaction_scale', _ColorPresets2.default[props.reaction_scale_preset]);
    }
    if (props.metabolite_scale_preset) {
      props.settings.set_conditional('metabolite_scale', _ColorPresets2.default[props.metabolite_scale_preset]);
    }
    return _this;
  }

  BuilderSettingsMenu.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
    this.setState({ display: nextProps.display });
    if (nextProps.display && !this.props.display) {
      this.componentWillAppear();
    }
    if (!nextProps.display && this.props.display) {
      this.componentWillDisappear();
    }
  };

  BuilderSettingsMenu.prototype.componentWillAppear = function componentWillAppear() {
    var _this2 = this;

    this.props.settings.hold_changes();
    this.setState({
      clearEscape: this.props.map.key_manager.add_escape_listener(function () {
        return _this2.abandonChanges();
      }, true),
      clearEnter: this.props.map.key_manager.add_key_listener(['enter'], function () {
        return _this2.saveChanges();
      }, true)
    });
  };

  BuilderSettingsMenu.prototype.componentWillDisappear = function componentWillDisappear() {
    this.props.closeMenu(); // Function to pass display = false to the settings menu
    this.state.clearEscape();
    this.state.clearEnter();
  };

  BuilderSettingsMenu.prototype.abandonChanges = function abandonChanges() {
    this.props.settings.abandon_changes();
    this.componentWillDisappear();
  };

  BuilderSettingsMenu.prototype.saveChanges = function saveChanges() {
    this.props.settings.accept_changes();
    this.componentWillDisappear();
  };

  /**
   * Function to handle changes to the reaction or metabolite styling.
   * @param {String} value - the style option to be added or removed
   * @param {String} type - reaction_style or metabolite_style
   */


  BuilderSettingsMenu.prototype.handleStyle = function handleStyle(value, type) {
    if (this.props[type].indexOf(value) === -1) {
      this.props.settings.set_conditional(type, (0, _immutabilityHelper2.default)(this.props[type], { $push: [value] }));
    } else if (this.props[type].indexOf(value) > -1) {
      this.props.settings.set_conditional(type, (0, _immutabilityHelper2.default)(this.props[type], { $splice: [[this.props[type].indexOf(value), 1]] }));
    }
  };

  BuilderSettingsMenu.prototype.is_visible = function is_visible() {
    return this.state.display;
  };

  BuilderSettingsMenu.prototype.render = function render() {
    var _this3 = this;

    return (0, _preact.h)(
      'div',
      {
        className: 'settingsBackground',
        style: this.props.display ? { display: 'block' } : { display: 'none' }
      },
      (0, _preact.h)(
        'div',
        { className: 'settingsBoxContainer' },
        (0, _preact.h)(
          'button',
          { className: 'discardChanges btn', onClick: function onClick() {
              return _this3.abandonChanges();
            } },
          (0, _preact.h)('i', { className: 'icon-cancel', 'aria-hidden': 'true' })
        ),
        (0, _preact.h)(
          'button',
          { className: 'saveChanges btn', onClick: function onClick() {
              return _this3.saveChanges();
            } },
          (0, _preact.h)('i', { className: 'icon-ok', 'aria-hidden': 'true' })
        ),
        (0, _preact.h)(
          'div',
          { className: 'settingsBox' },
          (0, _preact.h)(
            'div',
            { className: 'settingsTip' },
            (0, _preact.h)(
              'i',
              null,
              'Tip: Hover over an option to see more details about it.'
            )
          ),
          (0, _preact.h)('hr', null),
          (0, _preact.h)(
            'div',
            { className: 'title' },
            'View and build options'
          ),
          (0, _preact.h)(
            'div',
            { className: 'settingsContainer' },
            (0, _preact.h)(
              'table',
              { className: 'radioSelection' },
              (0, _preact.h)(
                'tr',
                { title: 'The identifiers that are show in the reaction, gene, and metabolite labels on the map.' },
                (0, _preact.h)(
                  'td',
                  { className: 'optionLabel' },
                  'Identifiers:'
                ),
                (0, _preact.h)(
                  'td',
                  { className: 'singleLine' },
                  (0, _preact.h)(
                    'label',
                    { className: 'optionGroup' },
                    (0, _preact.h)('input', {
                      type: 'radio',
                      name: 'identifiers',
                      onClick: function onClick() {
                        _this3.props.settings.set_conditional('identifiers_on_map', 'bigg_id');
                      },
                      checked: this.props.identifiers_on_map === 'bigg_id'
                    }),
                    'ID\'s'
                  ),
                  (0, _preact.h)(
                    'label',
                    { className: 'optionGroup' },
                    (0, _preact.h)('input', {
                      type: 'radio',
                      name: 'identifiers',
                      onClick: function onClick() {
                        _this3.props.settings.set_conditional('identifiers_on_map', 'name');
                      },
                      checked: this.props.identifiers_on_map === 'name'
                    }),
                    'Descriptive names'
                  )
                )
              )
            ),
            (0, _preact.h)(
              'label',
              { title: 'If checked, then the scroll wheel and trackpad will control zoom rather than pan.' },
              (0, _preact.h)('input', {
                type: 'checkbox',
                onClick: function onClick() {
                  _this3.props.scroll_behavior === 'zoom' ? _this3.props.settings.set_conditional('scroll_behavior', 'pan') : _this3.props.settings.set_conditional('scroll_behavior', 'zoom');
                },
                checked: this.props.scroll_behavior === 'zoom'
              }),
              'Scroll to zoom (instead of scroll to pan)'
            ),
            (0, _preact.h)(
              'label',
              { title: 'If checked, then only the primary metabolites will be displayed.' },
              (0, _preact.h)('input', {
                type: 'checkbox',
                onClick: function onClick() {
                  return _this3.props.settings.set_conditional('hide_secondary_metabolites', !_this3.props.hide_secondary_metabolites);
                },
                checked: this.props.hide_secondary_metabolites
              }),
              'Hide secondary metabolites'
            ),
            (0, _preact.h)(
              'label',
              {
                title: 'If checked, then gene reaction rules will be displayed below each reaction label. (Gene reaction rules are always shown when gene data is loaded.)'
              },
              (0, _preact.h)('input', {
                type: 'checkbox',
                onClick: function onClick() {
                  return _this3.props.settings.set_conditional('show_gene_reaction_rules', !_this3.props.show_gene_reaction_rules);
                },
                checked: this.props.show_gene_reaction_rules
              }),
              'Show gene reaction rules'
            ),
            (0, _preact.h)(
              'label',
              { title: 'If checked, hide all reaction, gene, and metabolite labels' },
              (0, _preact.h)('input', {
                type: 'checkbox',
                onClick: function onClick() {
                  return _this3.props.settings.set_conditional('hide_all_labels', !_this3.props.hide_all_labels);
                },
                checked: this.props.hide_all_labels
              }),
              'Hide reaction, gene, and metabolite labels'
            ),
            (0, _preact.h)(
              'label',
              { title: 'If checked, then allow duplicate reactions during model building.' },
              (0, _preact.h)('input', {
                type: 'checkbox',
                onClick: function onClick() {
                  return _this3.props.settings.set_conditional('allow_building_duplicate_reactions', !_this3.props.allow_building_duplicate_reactions);
                },
                checked: this.props.allow_building_duplicate_reactions
              }),
              'Allow duplicate reactions'
            ),
            (0, _preact.h)(
              'label',
              { title: 'If checked, then highlight in red all the reactions on the map that are not present in the loaded model.' },
              (0, _preact.h)('input', {
                type: 'checkbox',
                onClick: function onClick() {
                  _this3.props.settings.set_conditional('highlight_missing', !_this3.props.highlight_missing);
                },
                checked: this.props.highlight_missing
              }),
              'Highlight reactions not in model'
            ),
            (0, _preact.h)(
              'label',
              { title: 'Show tooltips when hovering over reactions, metabolites, and genes' },
              (0, _preact.h)('input', {
                type: 'checkbox',
                onClick: function onClick() {
                  return _this3.props.settings.set_conditional('enable_tooltips', !_this3.props.enable_tooltips);
                },
                checked: this.props.enable_tooltips
              }),
              'Show tooltips'
            )
          ),
          (0, _preact.h)(
            'div',
            { className: 'settingsTip', style: { marginTop: '16px' } },
            (0, _preact.h)(
              'i',
              null,
              'Tip: To increase map performance, turn off text boxes (i.e. labels and gene reaction rules).'
            )
          ),
          (0, _preact.h)('hr', null),
          (0, _preact.h)(
            'div',
            { className: 'scaleTitle' },
            (0, _preact.h)(
              'div',
              { className: 'title' },
              'Reactions'
            ),
            (0, _preact.h)(
              _ScaleSelector2.default,
              null,
              Object.values(_.mapObject(_ColorPresets2.default, function (value, key) {
                return (0, _preact.h)(_ScaleSelection2.default, {
                  name: key,
                  scale: value,
                  onClick: function onClick() {
                    return _this3.props.settings.set_conditional('reaction_scale', value);
                  }
                });
              }))
            )
          ),
          (0, _preact.h)(_ScaleSlider2.default, {
            scale: this.props.reaction_scale,
            settings: this.props.settings,
            type: 'Reaction',
            stats: this.props.map.get_data_statistics().reaction,
            noDataColor: this.props.reaction_no_data_color,
            noDataSize: this.props.reaction_no_data_size,
            onChange: function onChange(scale) {
              _this3.props.settings.set_conditional('reaction_scale', scale);
            },
            abs: this.props.reaction_styles.indexOf('abs') > -1
          }),
          (0, _preact.h)(
            'div',
            { className: 'subheading' },
            'Reaction or Gene data'
          ),
          (0, _preact.h)(
            'table',
            { className: 'radioSelection' },
            (0, _preact.h)(
              'tr',
              null,
              (0, _preact.h)(
                'td',
                {
                  className: 'optionLabel',
                  title: 'Options for reactions data'
                },
                'Options:'
              ),
              (0, _preact.h)(
                'td',
                null,
                (0, _preact.h)(
                  'label',
                  {
                    className: 'optionGroup',
                    title: 'If checked, use the absolute value when calculating colors and sizes of reactions on the map'
                  },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'reactionStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('abs', 'reaction_styles');
                    },
                    checked: this.props.reaction_styles.indexOf('abs') > -1
                  }),
                  'Absolute value'
                ),
                (0, _preact.h)(
                  'label',
                  {
                    className: 'optionGroup',
                    title: 'If checked, then size the thickness of reaction lines according to the value of the reaction data'
                  },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'reactionStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('size', 'reaction_styles');
                    },
                    checked: this.props.reaction_styles.indexOf('size') > -1
                  }),
                  'Size'
                ),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup', title: 'If checked, then color the reaction lines according to the value of the reaction data' },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'reactionStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('color', 'reaction_styles');
                    },
                    checked: this.props.reaction_styles.indexOf('color') > -1
                  }),
                  'Color'
                ),
                (0, _preact.h)('br', null),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup', title: 'If checked, then show data values in the reaction labels' },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'reactionStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('text', 'reaction_styles');
                    },
                    checked: this.props.reaction_styles.indexOf('text') > -1
                  }),
                  'Text (Show data in label)'
                )
              )
            ),
            (0, _preact.h)(
              'tr',
              { title: 'The function that will be used to compare datasets, when paired data is loaded' },
              (0, _preact.h)(
                'td',
                { className: 'optionLabel' },
                'Comparison'
              ),
              (0, _preact.h)(
                'td',
                null,
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'reactionCompare',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('reaction_compare_style', 'fold');
                    },
                    checked: this.props.reaction_compare_style === 'fold'
                  }),
                  'Fold Change'
                ),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'reactionCompare',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('reaction_compare_style', 'log2_fold');
                    },
                    checked: this.props.reaction_compare_style === 'log2_fold'
                  }),
                  'Log2 (Fold Change)'
                ),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'reactionCompare',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('reaction_compare_style', 'diff');
                    },
                    checked: this.props.reaction_compare_style === 'diff'
                  }),
                  'Difference'
                )
              )
            )
          ),
          (0, _preact.h)(
            'table',
            { className: 'radioSelection' },
            (0, _preact.h)(
              'tr',
              {
                title: 'The function that will be used to evaluate AND connections in gene reaction rules (AND connections generally connect components of an enzyme complex)'
              },
              (0, _preact.h)(
                'td',
                { className: 'optionLabelWide' },
                'Method for evaluating AND:'
              ),
              (0, _preact.h)(
                'td',
                null,
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'andMethod',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('and_method_in_gene_reaction_rule', 'mean');
                    },
                    checked: this.props.and_method_in_gene_reaction_rule === 'mean'
                  }),
                  'Mean'
                ),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'andMethod',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('and_method_in_gene_reaction_rule', 'min');
                    },
                    checked: this.props.and_method_in_gene_reaction_rule === 'min'
                  }),
                  'Min'
                )
              )
            )
          ),
          (0, _preact.h)('hr', null),
          (0, _preact.h)(
            'div',
            { className: 'scaleTitle' },
            (0, _preact.h)(
              'div',
              { className: 'title' },
              'Metabolites'
            ),
            (0, _preact.h)(
              _ScaleSelector2.default,
              null,
              Object.values(_.mapObject(_ColorPresets2.default, function (value, key) {
                return (0, _preact.h)(_ScaleSelection2.default, {
                  name: key,
                  scale: value,
                  onClick: function onClick() {
                    return _this3.props.settings.set_conditional('reaction_scale', value);
                  }
                });
              }))
            )
          ),
          (0, _preact.h)(_ScaleSlider2.default, {
            scale: this.props.metabolite_scale,
            settings: this.props.settings,
            type: 'Metabolite',
            stats: this.props.map.get_data_statistics().metabolite,
            noDataColor: this.props.metabolite_no_data_color,
            noDataSize: this.props.metabolite_no_data_size
          }),
          (0, _preact.h)(
            'div',
            { className: 'subheading' },
            'Metabolite data'
          ),
          (0, _preact.h)(
            'table',
            { className: 'radioSelection' },
            (0, _preact.h)(
              'tr',
              null,
              (0, _preact.h)(
                'td',
                {
                  className: 'optionLabel',
                  title: 'Options for metabolite data'
                },
                'Options:'
              ),
              (0, _preact.h)(
                'td',
                null,
                (0, _preact.h)(
                  'label',
                  {
                    className: 'optionGroup',
                    title: 'If checked, use the absolute value when calculating colors and sizes of metabolites on the map'
                  },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'metaboliteStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('abs', 'metabolite_styles');
                    },
                    checked: this.props.metabolite_styles.indexOf('abs') > -1
                  }),
                  'Absolute value'
                ),
                (0, _preact.h)(
                  'label',
                  {
                    className: 'optionGroup',
                    title: 'If checked, then size the thickness of reaction lines according to the value of the metabolite data'
                  },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'metaboliteStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('size', 'metabolite_styles');
                    },
                    checked: this.props.metabolite_styles.indexOf('size') > -1
                  }),
                  'Size'
                ),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup', title: 'If checked, then color the reaction lines according to the value of the metabolite data' },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'metaboliteStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('color', 'metabolite_styles');
                    },
                    checked: this.props.metabolite_styles.indexOf('color') > -1
                  }),
                  'Color'
                ),
                (0, _preact.h)('br', null),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup', title: 'If checked, then show data values in the metabolite labels' },
                  (0, _preact.h)('input', {
                    type: 'checkbox',
                    name: 'metaboliteStyle',
                    onClick: function onClick() {
                      return _this3.handleStyle('text', 'metabolite_styles');
                    },
                    checked: this.props.metabolite_styles.indexOf('text') > -1
                  }),
                  'Text (Show data in label)'
                )
              )
            ),
            (0, _preact.h)(
              'tr',
              { title: 'The function that will be used to compare datasets, when paired data is loaded' },
              (0, _preact.h)(
                'td',
                { className: 'optionLabel' },
                'Comparison'
              ),
              (0, _preact.h)(
                'td',
                null,
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'metaboliteCompare',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('metabolite_compare_style', 'fold');
                    },
                    checked: this.props.metabolite_compare_style === 'fold'
                  }),
                  'Fold Change'
                ),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'metaboliteCompare',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('metabolite_compare_style', 'log2_fold');
                    },
                    checked: this.props.metabolite_compare_style === 'log2_fold'
                  }),
                  'Log2 (Fold Change)'
                ),
                (0, _preact.h)(
                  'label',
                  { className: 'optionGroup' },
                  (0, _preact.h)('input', {
                    type: 'radio',
                    name: 'metaboliteCompare',
                    onClick: function onClick() {
                      _this3.props.settings.set_conditional('metabolite_compare_style', 'diff');
                    },
                    checked: this.props.metabolite_compare_style === 'diff'
                  }),
                  'Difference'
                )
              )
            )
          )
        )
      )
    );
  };

  return BuilderSettingsMenu;
}(_preact.Component);

exports.default = BuilderSettingsMenu;

/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */


/**
 * TODO what is this component used for?
 */
var ScaleSelector = function (_Component) {
  _inherits(ScaleSelector, _Component);

  function ScaleSelector(props) {
    _classCallCheck(this, ScaleSelector);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.setWrapperRef = _this.setWrapperRef.bind(_this);
    _this.handleClickOutside = _this.handleClickOutside.bind(_this);
    _this.state = {
      visible: false
    };
    return _this;
  }

  ScaleSelector.prototype.componentDidMount = function componentDidMount() {
    document.addEventListener('mouseup', this.handleClickOutside);
  };

  // Reference for hiding the menu when a mouse event happens outside


  ScaleSelector.prototype.setWrapperRef = function setWrapperRef(node) {
    this.wrapperRef = node;
  };

  ScaleSelector.prototype.handleClickOutside = function handleClickOutside(event) {
    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {
      this.setState({ visible: false });
    }
  };

  ScaleSelector.prototype.render = function render() {
    var _this2 = this;

    return (0, _preact.h)(
      'div',
      { className: 'selector' },
      (0, _preact.h)(
        'div',
        {
          className: 'selectorTitle',
          ref: this.setWrapperRef,
          onClick: function onClick() {
            return _this2.setState({ visible: !_this2.state.visible });
          }
        },
        'Preset Scale Selections',
        (0, _preact.h)('i', { className: 'icon-down-dir' })
      ),
      (0, _preact.h)(
        'div',
        {
          className: 'selectorMenu',
          style: this.state.visible ? { display: 'block' } : { display: 'none' }
        },
        this.props.children.map(function (listItem) {
          return listItem;
        })
      )
    );
  };

  return ScaleSelector;
}(_preact.Component);

exports.default = ScaleSelector;

/***/ }),
/* 152 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

var _Picker = __webpack_require__(153);

var _Picker2 = _interopRequireDefault(_Picker);

var _immutabilityHelper = __webpack_require__(70);

var _immutabilityHelper2 = _interopRequireDefault(_immutabilityHelper);

var _underscore = __webpack_require__(2);

var _ = _interopRequireWildcard(_underscore);

__webpack_require__(197);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */

var ScaleSlider = function (_Component) {
  _inherits(ScaleSlider, _Component);

  function ScaleSlider(props) {
    _classCallCheck(this, ScaleSlider);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {
      keys: null
    };
    return _this;
  }

  /**
   * Sorts the color scale for makeGradient
   */


  ScaleSlider.prototype.sortScale = function sortScale() {
    var _this2 = this;

    var newScale = _.sortBy(this.props.scale, function (element) {
      if (element.type === 'value') {
        return element.value;
      } else {
        return _this2.props.stats[element.type];
      }
    });
    return newScale;
  };

  /**
   * Places the pickers as a percentage of the max
   */


  ScaleSlider.prototype.placePickers = function placePickers() {
    var max = this.props.abs ? this.props.stats.max : this.props.stats.max + Math.abs(this.props.stats.min);
    var positions = {};
    for (var i = 0; i < this.props.scale.length; i++) {
      var scaleValue = this.props.scale[i].value ? this.props.scale[i].value : this.props.stats[this.props.scale[i].type];
      var value = this.props.abs ? scaleValue : scaleValue + Math.abs(this.props.stats.min);
      positions[i] = value / max < 0.04 ? 4 : value / max > 0.8 && value / max < 0.95 ? value / max * 100 - 18 : value / max >= 0.95 ? 77 : value / max * 100;
    }
    return positions;
  };

  /**
   * Function enabling modification of any color scale attribute
   * @param {number} index - index of the scale object to be modified
   * @param {string} parameter - the parameter to be replaced
   * @param {(number|string)} value - the new value of the parameter
   */


  ScaleSlider.prototype.scaleChange = function scaleChange(index, parameter, value) {
    if (parameter === 'value' && (parseFloat(value) > this.props.stats.max || value < this.props.stats.min)) {
      console.warn('Invalid color scale');
    } else {
      var newScale = null;
      if (parameter === 'type' && value !== 'value') {
        var _index, _update;

        newScale = (0, _immutabilityHelper2.default)(this.props.scale, (_update = {}, _update[index] = (_index = {}, _index[parameter] = { $set: value }, _index.$unset = ['value'], _index), _update));
        this.props.onChange(newScale);
      } else if (value === 'value') {
        var _index2, _update2;

        newScale = (0, _immutabilityHelper2.default)(this.props.scale, (_update2 = {}, _update2[index] = (_index2 = {}, _index2[parameter] = { $set: value }, _index2.$merge = { 'value': this.props.stats[this.props.scale[index].type] }, _index2), _update2));
        this.props.onChange(newScale);
      } else if (!isNaN(parseFloat(value))) {
        var _index3, _update3;

        newScale = (0, _immutabilityHelper2.default)(this.props.scale, (_update3 = {}, _update3[index] = (_index3 = {}, _index3[parameter] = { $set: value }, _index3), _update3));
        this.props.onChange(newScale);
      }
    }
  };

  ScaleSlider.prototype.addColorStop = function addColorStop(event) {
    var newScale = (0, _immutabilityHelper2.default)(this.props.scale, {
      $push: [{
        type: 'value',
        value: event.layerX / event.target.clientWidth * this.props.stats.max,
        color: '#9696ff',
        size: 20
      }]
    });
    this.props.onChange(newScale);
  };

  /**
   * Sorts and then returns a string that can be fed into the HTML linear-gradient style
   */


  ScaleSlider.prototype.makeGradient = function makeGradient() {
    var min = this.props.abs ? 0 : Math.abs(this.props.stats.min);
    var scale = this.sortScale();
    var gradientArray = [];
    for (var i = 0; i < scale.length; i++) {
      if (scale[i].type === 'value') {
        gradientArray.push(' ' + scale[i].color + ' ' + (scale[i].value + min) / (this.props.stats.max + min) * 100 + '%');
      } else {
        var value = this.props.stats[scale[i].type];
        gradientArray.push(' ' + scale[i].color + ' ' + (value + min) / (this.props.stats.max + min) * 100 + '%');
      }
    }
    return gradientArray.toString();
  };

  ScaleSlider.prototype.removeColorStop = function removeColorStop(index) {
    var newScale = (0, _immutabilityHelper2.default)(this.props.scale, { $splice: [[[index], 1]] });
    this.props.onChange(newScale);
  };

  ScaleSlider.prototype.render = function render() {
    var _this3 = this;

    var pickerLocations = this.placePickers();
    return (0, _preact.h)(
      'div',
      { className: 'scaleEditor' },
      this.props.stats !== null && this.props.stats !== undefined && this.props.stats.min !== null && this.props.stats.min !== undefined && this.props.stats.max !== null && this.props.stats.max !== undefined ? (0, _preact.h)(
        'div',
        null,
        (0, _preact.h)(
          'i',
          { className: 'settingsTip' },
          'To add a color stop to the scale, click the gradient'
        ),
        (0, _preact.h)(
          'div',
          {
            className: 'scaleTrack'
          },
          (0, _preact.h)('div', {
            className: 'gradient',
            onClick: function onClick(event) {
              return _this3.addColorStop(event);
            },
            style: {
              background: 'linear-gradient(to right,' + this.makeGradient() + ')'
            }
          }),
          this.props.scale.map(function (listItem, i) {
            if (listItem.value === null || listItem.value === undefined) {
              return (0, _preact.h)(_Picker2.default, {
                id: listItem.type,
                color: listItem.color,
                left: pickerLocations[i],
                onChange: function onChange(parameter, value) {
                  return _this3.scaleChange(i, parameter, value);
                },
                focus: function focus() {
                  return _this3.setState({ focusedPicker: i });
                },
                value: parseFloat(_this3.props.stats[listItem.type].toFixed(2)),
                max: _this3.props.stats.max,
                size: listItem.size,
                zIndex: _this3.state.focusedPicker === i ? '2' : '0'
              });
            } else {
              return (0, _preact.h)(_Picker2.default, {
                value: parseFloat(listItem.value.toFixed(2)),
                onChange: function onChange(parameter, value) {
                  return _this3.scaleChange(i, parameter, value);
                },
                focus: function focus() {
                  return _this3.setState({ focusedPicker: i });
                },
                remove: function remove() {
                  return _this3.removeColorStop(i);
                },
                max: _this3.props.stats.max + (_this3.props.abs ? 0 : Math.abs(_this3.props.stats.min)),
                min: _this3.props.abs ? 0 : Math.abs(_this3.props.stats.min),
                color: listItem.color,
                size: listItem.size,
                left: pickerLocations[i],
                zIndex: _this3.state.focusedPicker === i ? '2' : '0'
              });
            }
          })
        )
      ) : (0, _preact.h)(
        'div',
        null,
        (0, _preact.h)(
          'div',
          {
            className: 'scaleTrack',
            style: {
              background: '#f1ecfa',
              color: '#b19ec0',
              padding: '4px 0',
              justifyContent: 'center'
            }
          },
          this.props.type,
          ' data not loaded',
          (0, _preact.h)(_Picker2.default, { id: 'min', focus: function focus() {
              return null;
            }, value: 0.00, color: '', disabled: true }),
          (0, _preact.h)(_Picker2.default, { id: 'max', focus: function focus() {
              return null;
            }, value: 1.00, color: '', disabled: true })
        )
      ),
      (0, _preact.h)(
        'div',
        { className: 'scaleLabels' },
        (0, _preact.h)(
          'label',
          null,
          'Value:'
        ),
        (0, _preact.h)(
          'label',
          null,
          'Color:'
        ),
        (0, _preact.h)(
          'label',
          null,
          'Size:'
        )
      ),
      (0, _preact.h)(
        'div',
        { className: 'noDataStyle' },
        (0, _preact.h)(
          'label',
          { className: 'styleHeader' },
          'Styles for reactions with no data'
        ),
        (0, _preact.h)('br', null),
        (0, _preact.h)(
          'label',
          null,
          'Color:'
        ),
        (0, _preact.h)('input', { type: 'text', className: 'colorInput', value: this.props.noDataColor }),
        (0, _preact.h)('input', { type: 'color', className: 'colorWheel', value: this.props.noDataColor }),
        (0, _preact.h)(
          'label',
          null,
          'Size:'
        ),
        (0, _preact.h)('input', { type: 'text', className: 'sizeInput', value: this.props.noDataSize })
      )
    );
  };

  return ScaleSlider;
}(_preact.Component);

exports.default = ScaleSlider;

/***/ }),
/* 153 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

__webpack_require__(154);

var _d3Selection = __webpack_require__(0);

var _d3Drag = __webpack_require__(15);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */

var Picker = function (_Component) {
  _inherits(Picker, _Component);

  function Picker(props) {
    _classCallCheck(this, Picker);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {};
    return _this;
  }

  Picker.prototype.componentDidMount = function componentDidMount() {
    var _this2 = this;

    var xPos = null;
    var drag = (0, _d3Drag.drag)().on('drag', function () {
      if (_this2.props.id === 'max' || _this2.props.id === 'min') {
        console.warn('Min/Max not draggable');
      } else {
        if (_this2.props.id !== undefined && _this2.props.id !== 'value') {
          _this2.props.onChange('type', 'value');
        }
        if (_this2.props.value / _this2.props.max < 0.04) {
          xPos = 0.04 * _this2.props.max + _d3Selection.event.dx * (_this2.props.max / 400);
        } else if (_this2.props.value / _this2.props.max > 0.95) {
          xPos = 0.95 * _this2.props.max + _d3Selection.event.dx * (_this2.props.max / 400);
        } else {
          xPos = _this2.props.value + _d3Selection.event.dx * (_this2.props.max / 400);
        }
        _this2.props.onChange('value', xPos);
      }
    }).container(function () {
      return _this2.base.parentNode.parentNode;
    });
    (0, _d3Selection.select)(this.base).select('.pickerBox').call(drag);
  };

  Picker.prototype.componentWillUnmount = function componentWillUnmount() {
    console.log('component unmounted');
    (0, _d3Selection.select)(this.base).select('.pickerBox').on('mousedown.drag', null);
  };

  Picker.prototype.render = function render() {
    var _this3 = this;

    return (0, _preact.h)(
      'div',
      {
        className: 'picker',
        id: this.props.id,
        style: !(this.props.id === 'min' || this.props.id === 'max') ? { left: this.props.left + '%', zIndex: this.props.zIndex } : { zIndex: this.props.zIndex }
      },
      (0, _preact.h)(
        'div',
        {
          className: 'trashDiv',
          id: this.props.id === 'max' || this.props.value / this.props.max > 0.8 ? 'rightOptions' : null,
          style: this.props.id === 'min' || this.props.id === 'max' ? { display: 'none' } : { display: 'block' }
        },
        (0, _preact.h)('i', {
          className: 'icon-trash-empty',
          'aria-hidden': 'true',
          onClick: function onClick() {
            return _this3.props.remove();
          }
        })
      ),
      (0, _preact.h)('div', {
        className: 'pickerBox',
        id: this.props.id === 'max' || this.props.value / this.props.max > 0.8 ? 'rightOptions' : null,
        onMouseDown: function onMouseDown() {
          return _this3.props.focus();
        }
      }),
      (0, _preact.h)(
        'div',
        { className: 'pickerOptions' },
        (0, _preact.h)('input', {
          type: 'text',
          className: 'option',
          value: this.props.id ? this.props.id + ' (' + this.props.value + ')' : this.props.value,
          disabled: this.props.id,
          onInput: function onInput(event) {
            _this3.props.onChange('value', parseFloat(event.target.value));
          },
          onFocus: function onFocus(event) {
            event.target.select();
            _this3.props.focus();
          }
        }),
        (0, _preact.h)(
          'select',
          {
            className: 'typePicker',
            style: this.props.id === 'min' || this.props.id === 'max' ? { display: 'none' } : null,
            onChange: function onChange(event) {
              return _this3.props.onChange('type', event.target.value);
            }
          },
          (0, _preact.h)(
            'option',
            { value: 'value' },
            'Value'
          ),
          (0, _preact.h)(
            'option',
            { value: 'mean' },
            'Mean'
          ),
          (0, _preact.h)(
            'option',
            { value: 'Q1' },
            'Q1'
          ),
          (0, _preact.h)(
            'option',
            { value: 'median' },
            'Median'
          ),
          (0, _preact.h)(
            'option',
            { value: 'Q3' },
            'Q3'
          )
        ),
        (0, _preact.h)(
          'div',
          { className: 'colorOptions' },
          (0, _preact.h)('input', {
            type: 'text',
            className: 'colorText',
            onInput: function onInput(event) {
              _this3.props.onChange('color', event.target.value);
            },
            onFocus: function onFocus(event) {
              event.target.select();
              _this3.props.focus();
            },
            value: this.props.color,
            disabled: this.props.disabled
          }),
          (0, _preact.h)('input', {
            type: 'color',
            className: 'colorWheel',
            onInput: function onInput(event) {
              _this3.props.onChange('color', event.target.value);
            },
            onFocus: function onFocus(event) {
              event.target.select();
              _this3.props.focus();
            },
            value: this.props.color,
            disabled: this.props.disabled
          })
        ),
        (0, _preact.h)('input', {
          type: 'text',
          className: 'option',
          onInput: function onInput(event) {
            _this3.props.onChange('size', parseInt(event.target.value));
          },
          onFocus: function onFocus(event) {
            event.target.select();
            _this3.props.focus();
          },
          value: this.props.size,
          disabled: this.props.disabled
        })
      )
    );
  };

  return Picker;
}(_preact.Component);

exports.default = Picker;

/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(155);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./Picker.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./Picker.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 155 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .picker{top:35px;margin-left:-7px;position:absolute}.escher-container .pickerBox{position:absolute;cursor:pointer;background:rgba(0,0,0,.375);width:14px;height:35px;top:-35px}.escher-container .scaleTrack #min{margin-left:0;left:-7px}.escher-container .scaleTrack #max{margin-left:0;right:-7px}.escher-container .scaleTrack #rightOptions{margin-left:auto;right:1px}.escher-container .trashDiv#rightOptions{margin-right:-4px}.escher-container .pickerOptions{box-shadow:0 2px 14px #c5c5c5;margin-top:1px;display:inline-flex;flex-direction:column;width:90px}.escher-container .pickerOptions *{font-size:12px}.escher-container .pickerOptions .option{padding:3px 0}.escher-container .pickerOptions .typePicker{width:20px;position:absolute;left:70px;top:1px;right:0;height:14px;background-color:#e8e8e8}.escher-container .pickerOptions .colorOptions{display:inline-flex}.escher-container .colorOptions .colorText{padding:3px 0;width:-webkit-fill-available}.escher-container .colorOptions .colorWheel{padding:0 2px;position:absolute;right:0;width:24px}.escher-container .picker .trashDiv{position:absolute;top:-56px;font-size:17px}.escher-container .picker .trashDiv *{font-size:17px;cursor:pointer}.escher-container .picker .icon-trash-empty{margin:-5px}.escher-container .scaleEditor :disabled{background:#f1ecfa}.escher-container .scaleEditor input[type=color]:disabled{margin-top:1px}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/Picker.css"],"names":[],"mappings":"AAAA,0BACE,SAAU,AACV,iBAAkB,AAClB,iBAAmB,CACpB,AAED,6BACE,kBAAmB,AACnB,eAAgB,AAChB,4BAAiC,AACjC,WAAY,AACZ,YAAa,AACb,SAAU,CACX,AAED,mCACE,cAAe,AACf,SAAW,CACZ,AAED,mCACE,cAAe,AACf,UAAY,CACb,AAED,4CACE,iBAAkB,AAClB,SAAW,CACZ,AAED,yCACE,iBAAmB,CACpB,AAED,iCACE,8BAA+B,AAC/B,eAAgB,AAChB,oBAAqB,AACrB,sBAAuB,AACvB,UAAY,CACb,AAED,mCACE,cAAgB,CACjB,AAED,yCACE,aAAiB,CAClB,AAED,6CACE,WAAY,AACZ,kBAAmB,AACnB,UAAW,AACX,QAAS,AACT,QAAW,AACX,YAAa,AACb,wBAAqC,CACtC,AAED,+CACE,mBAAqB,CACtB,AAED,2CACE,cAAiB,AACjB,4BAA8B,CAC/B,AAED,4CACE,cAAiB,AACjB,kBAAmB,AACnB,QAAS,AACT,UAAW,CACZ,AAED,oCACE,kBAAmB,AACnB,UAAW,AACX,cAAgB,CACjB,AAED,sCACE,eAAgB,AAChB,cAAgB,CACjB,AAED,4CACE,WAAa,CACd,AAED,yCACE,kBAAoB,CACrB,AAED,0DACE,cAAgB,CACjB","file":"Picker.css","sourcesContent":[".escher-container .picker {\n  top: 35px;\n  margin-left: -7px;\n  position: absolute;\n}\n\n.escher-container .pickerBox {\n  position: absolute;\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.375);\n  width: 14px;\n  height: 35px;\n  top: -35px\n}\n\n.escher-container .scaleTrack #min {\n  margin-left: 0;\n  left: -7px;\n}\n\n.escher-container .scaleTrack #max {\n  margin-left: 0;\n  right: -7px;\n}\n\n.escher-container .scaleTrack #rightOptions {\n  margin-left: auto;\n  right: 1px;\n}\n\n.escher-container .trashDiv#rightOptions {\n  margin-right: -4px;\n}\n\n.escher-container .pickerOptions {\n  box-shadow: 0 2px 14px #c5c5c5;\n  margin-top: 1px;\n  display: inline-flex;\n  flex-direction: column;\n  width: 90px;\n}\n\n.escher-container .pickerOptions * {\n  font-size: 12px;\n}\n\n.escher-container .pickerOptions .option {\n  padding: 3px 0px;\n}\n\n.escher-container .pickerOptions .typePicker {\n  width: 20px;\n  position: absolute;\n  left: 70px;\n  top: 1px;\n  right: 0px;\n  height: 14px;\n  background-color: rgb(232, 232, 232);\n}\n\n.escher-container .pickerOptions .colorOptions {\n  display: inline-flex;\n}\n\n.escher-container .colorOptions .colorText {\n  padding: 3px 0px;\n  width: -webkit-fill-available;\n}\n\n.escher-container .colorOptions .colorWheel {\n  padding: 0px 2px;\n  position: absolute;\n  right: 0;\n  width: 24px\n}\n\n.escher-container .picker .trashDiv {\n  position: absolute;\n  top: -56px;\n  font-size: 17px;\n}\n\n.escher-container .picker .trashDiv * {\n  font-size: 17px;\n  cursor: pointer;\n}\n\n.escher-container .picker .icon-trash-empty {\n  margin: -5px;\n}\n\n.escher-container .scaleEditor :disabled {\n  background: #f1ecfa;\n}\n\n.escher-container .scaleEditor input[type=color]:disabled {\n  margin-top: 1px;\n}"],"sourceRoot":""}]);

// exports


/***/ }),
/* 156 */
/***/ (function(module, exports) {


/**
 * When source maps are enabled, `style-loader` uses a link element with a data-uri to
 * embed the css on the page. This breaks all relative urls because now they are relative to a
 * bundle instead of the current page.
 *
 * One solution is to only use full urls, but that may be impossible.
 *
 * Instead, this function "fixes" the relative urls to be absolute according to the current page location.
 *
 * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
 *
 */

module.exports = function (css) {
  // get current location
  var location = typeof window !== "undefined" && window.location;

  if (!location) {
    throw new Error("fixUrls requires window.location");
  }

	// blank or null?
	if (!css || typeof css !== "string") {
	  return css;
  }

  var baseUrl = location.protocol + "//" + location.host;
  var currentDir = baseUrl + location.pathname.replace(/\/[^\/]*$/, "/");

	// convert each url(...)
	/*
	This regular expression is just a way to recursively match brackets within
	a string.

	 /url\s*\(  = Match on the word "url" with any whitespace after it and then a parens
	   (  = Start a capturing group
	     (?:  = Start a non-capturing group
	         [^)(]  = Match anything that isn't a parentheses
	         |  = OR
	         \(  = Match a start parentheses
	             (?:  = Start another non-capturing groups
	                 [^)(]+  = Match anything that isn't a parentheses
	                 |  = OR
	                 \(  = Match a start parentheses
	                     [^)(]*  = Match anything that isn't a parentheses
	                 \)  = Match a end parentheses
	             )  = End Group
              *\) = Match anything and then a close parens
          )  = Close non-capturing group
          *  = Match anything
       )  = Close capturing group
	 \)  = Match a close parens

	 /gi  = Get all matches, not the first.  Be case insensitive.
	 */
	var fixedCss = css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(fullMatch, origUrl) {
		// strip quotes (if they exist)
		var unquotedOrigUrl = origUrl
			.trim()
			.replace(/^"(.*)"$/, function(o, $1){ return $1; })
			.replace(/^'(.*)'$/, function(o, $1){ return $1; });

		// already a full url? no change
		if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl)) {
		  return fullMatch;
		}

		// convert the url to a full url
		var newUrl;

		if (unquotedOrigUrl.indexOf("//") === 0) {
		  	//TODO: should we add protocol?
			newUrl = unquotedOrigUrl;
		} else if (unquotedOrigUrl.indexOf("/") === 0) {
			// path should be relative to the base url
			newUrl = baseUrl + unquotedOrigUrl; // already starts with '/'
		} else {
			// path should be relative to current directory
			newUrl = currentDir + unquotedOrigUrl.replace(/^\.\//, ""); // Strip leading './'
		}

		// send back the fixed url(...)
		return "url(" + JSON.stringify(newUrl) + ")";
	});

	// send back the fixed css
	return fixedCss;
};


/***/ }),
/* 157 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__creator__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__select__ = __webpack_require__(62);



/* harmony default export */ __webpack_exports__["a"] = (function(name) {
  return Object(__WEBPACK_IMPORTED_MODULE_1__select__["a" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_0__creator__["a" /* default */])(name).call(document.documentElement));
});


/***/ }),
/* 158 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__selector__ = __webpack_require__(36);



/* harmony default export */ __webpack_exports__["a"] = (function(select) {
  if (typeof select !== "function") select = Object(__WEBPACK_IMPORTED_MODULE_1__selector__["a" /* default */])(select);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node) subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Selection */](subgroups, this._parents);
});


/***/ }),
/* 159 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__selectorAll__ = __webpack_require__(63);



/* harmony default export */ __webpack_exports__["a"] = (function(select) {
  if (typeof select !== "function") select = Object(__WEBPACK_IMPORTED_MODULE_1__selectorAll__["a" /* default */])(select);

  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        subgroups.push(select.call(node, node.__data__, i, group));
        parents.push(node);
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Selection */](subgroups, parents);
});


/***/ }),
/* 160 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__matcher__ = __webpack_require__(64);



/* harmony default export */ __webpack_exports__["a"] = (function(match) {
  if (typeof match !== "function") match = Object(__WEBPACK_IMPORTED_MODULE_1__matcher__["a" /* default */])(match);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Selection */](subgroups, this._parents);
});


/***/ }),
/* 161 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__enter__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constant__ = __webpack_require__(162);




var keyPrefix = "$"; // Protect against keys like “__proto__”.

function bindIndex(parent, group, enter, update, exit, data) {
  var i = 0,
      node,
      groupLength = group.length,
      dataLength = data.length;

  // Put any non-null nodes that fit into update.
  // Put any null nodes into enter.
  // Put any remaining data into enter.
  for (; i < dataLength; ++i) {
    if (node = group[i]) {
      node.__data__ = data[i];
      update[i] = node;
    } else {
      enter[i] = new __WEBPACK_IMPORTED_MODULE_1__enter__["a" /* EnterNode */](parent, data[i]);
    }
  }

  // Put any non-null nodes that don’t fit into exit.
  for (; i < groupLength; ++i) {
    if (node = group[i]) {
      exit[i] = node;
    }
  }
}

function bindKey(parent, group, enter, update, exit, data, key) {
  var i,
      node,
      nodeByKeyValue = {},
      groupLength = group.length,
      dataLength = data.length,
      keyValues = new Array(groupLength),
      keyValue;

  // Compute the key for each node.
  // If multiple nodes have the same key, the duplicates are added to exit.
  for (i = 0; i < groupLength; ++i) {
    if (node = group[i]) {
      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);
      if (keyValue in nodeByKeyValue) {
        exit[i] = node;
      } else {
        nodeByKeyValue[keyValue] = node;
      }
    }
  }

  // Compute the key for each datum.
  // If there a node associated with this key, join and add it to update.
  // If there is not (or the key is a duplicate), add it to enter.
  for (i = 0; i < dataLength; ++i) {
    keyValue = keyPrefix + key.call(parent, data[i], i, data);
    if (node = nodeByKeyValue[keyValue]) {
      update[i] = node;
      node.__data__ = data[i];
      nodeByKeyValue[keyValue] = null;
    } else {
      enter[i] = new __WEBPACK_IMPORTED_MODULE_1__enter__["a" /* EnterNode */](parent, data[i]);
    }
  }

  // Add any remaining nodes that were not bound to data to exit.
  for (i = 0; i < groupLength; ++i) {
    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {
      exit[i] = node;
    }
  }
}

/* harmony default export */ __webpack_exports__["a"] = (function(value, key) {
  if (!value) {
    data = new Array(this.size()), j = -1;
    this.each(function(d) { data[++j] = d; });
    return data;
  }

  var bind = key ? bindKey : bindIndex,
      parents = this._parents,
      groups = this._groups;

  if (typeof value !== "function") value = Object(__WEBPACK_IMPORTED_MODULE_2__constant__["a" /* default */])(value);

  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {
    var parent = parents[j],
        group = groups[j],
        groupLength = group.length,
        data = value.call(parent, parent && parent.__data__, j, parents),
        dataLength = data.length,
        enterGroup = enter[j] = new Array(dataLength),
        updateGroup = update[j] = new Array(dataLength),
        exitGroup = exit[j] = new Array(groupLength);

    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);

    // Now connect the enter nodes to their following update node, such that
    // appendChild can insert the materialized enter node before this node,
    // rather than at the end of the parent node.
    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {
      if (previous = enterGroup[i0]) {
        if (i0 >= i1) i1 = i0 + 1;
        while (!(next = updateGroup[i1]) && ++i1 < dataLength);
        previous._next = next || null;
      }
    }
  }

  update = new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Selection */](update, parents);
  update._enter = enter;
  update._exit = exit;
  return update;
});


/***/ }),
/* 162 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return function() {
    return x;
  };
});


/***/ }),
/* 163 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sparse__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index__ = __webpack_require__(5);



/* harmony default export */ __webpack_exports__["a"] = (function() {
  return new __WEBPACK_IMPORTED_MODULE_1__index__["a" /* Selection */](this._exit || this._groups.map(__WEBPACK_IMPORTED_MODULE_0__sparse__["a" /* default */]), this._parents);
});


/***/ }),
/* 164 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(5);


/* harmony default export */ __webpack_exports__["a"] = (function(selection) {

  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }

  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }

  return new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Selection */](merges, this._parents);
});


/***/ }),
/* 165 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function() {

  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {
    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {
      if (node = group[i]) {
        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);
        next = node;
      }
    }
  }

  return this;
});


/***/ }),
/* 166 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(5);


/* harmony default export */ __webpack_exports__["a"] = (function(compare) {
  if (!compare) compare = ascending;

  function compareNode(a, b) {
    return a && b ? compare(a.__data__, b.__data__) : !a - !b;
  }

  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        sortgroup[i] = node;
      }
    }
    sortgroup.sort(compareNode);
  }

  return new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Selection */](sortgroups, this._parents).order();
});

function ascending(a, b) {
  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;
}


/***/ }),
/* 167 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function() {
  var callback = arguments[0];
  arguments[0] = this;
  callback.apply(null, arguments);
  return this;
});


/***/ }),
/* 168 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function() {
  var nodes = new Array(this.size()), i = -1;
  this.each(function() { nodes[++i] = this; });
  return nodes;
});


/***/ }),
/* 169 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function() {

  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {
      var node = group[i];
      if (node) return node;
    }
  }

  return null;
});


/***/ }),
/* 170 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function() {
  var size = 0;
  this.each(function() { ++size; });
  return size;
});


/***/ }),
/* 171 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function() {
  return !this.node();
});


/***/ }),
/* 172 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(callback) {

  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {
    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {
      if (node = group[i]) callback.call(node, node.__data__, i, group);
    }
  }

  return this;
});


/***/ }),
/* 173 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__namespace__ = __webpack_require__(34);


function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}

function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}

function attrConstant(name, value) {
  return function() {
    this.setAttribute(name, value);
  };
}

function attrConstantNS(fullname, value) {
  return function() {
    this.setAttributeNS(fullname.space, fullname.local, value);
  };
}

function attrFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttribute(name);
    else this.setAttribute(name, v);
  };
}

function attrFunctionNS(fullname, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);
    else this.setAttributeNS(fullname.space, fullname.local, v);
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value) {
  var fullname = Object(__WEBPACK_IMPORTED_MODULE_0__namespace__["a" /* default */])(name);

  if (arguments.length < 2) {
    var node = this.node();
    return fullname.local
        ? node.getAttributeNS(fullname.space, fullname.local)
        : node.getAttribute(fullname);
  }

  return this.each((value == null
      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === "function"
      ? (fullname.local ? attrFunctionNS : attrFunction)
      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));
});


/***/ }),
/* 174 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function propertyRemove(name) {
  return function() {
    delete this[name];
  };
}

function propertyConstant(name, value) {
  return function() {
    this[name] = value;
  };
}

function propertyFunction(name, value) {
  return function() {
    var v = value.apply(this, arguments);
    if (v == null) delete this[name];
    else this[name] = v;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value) {
  return arguments.length > 1
      ? this.each((value == null
          ? propertyRemove : typeof value === "function"
          ? propertyFunction
          : propertyConstant)(name, value))
      : this.node()[name];
});


/***/ }),
/* 175 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function classArray(string) {
  return string.trim().split(/^|\s+/);
}

function classList(node) {
  return node.classList || new ClassList(node);
}

function ClassList(node) {
  this._node = node;
  this._names = classArray(node.getAttribute("class") || "");
}

ClassList.prototype = {
  add: function(name) {
    var i = this._names.indexOf(name);
    if (i < 0) {
      this._names.push(name);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  remove: function(name) {
    var i = this._names.indexOf(name);
    if (i >= 0) {
      this._names.splice(i, 1);
      this._node.setAttribute("class", this._names.join(" "));
    }
  },
  contains: function(name) {
    return this._names.indexOf(name) >= 0;
  }
};

function classedAdd(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n) list.add(names[i]);
}

function classedRemove(node, names) {
  var list = classList(node), i = -1, n = names.length;
  while (++i < n) list.remove(names[i]);
}

function classedTrue(names) {
  return function() {
    classedAdd(this, names);
  };
}

function classedFalse(names) {
  return function() {
    classedRemove(this, names);
  };
}

function classedFunction(names, value) {
  return function() {
    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value) {
  var names = classArray(name + "");

  if (arguments.length < 2) {
    var list = classList(this.node()), i = -1, n = names.length;
    while (++i < n) if (!list.contains(names[i])) return false;
    return true;
  }

  return this.each((typeof value === "function"
      ? classedFunction : value
      ? classedTrue
      : classedFalse)(names, value));
});


/***/ }),
/* 176 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function textRemove() {
  this.textContent = "";
}

function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}

function textFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.textContent = v == null ? "" : v;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(value) {
  return arguments.length
      ? this.each(value == null
          ? textRemove : (typeof value === "function"
          ? textFunction
          : textConstant)(value))
      : this.node().textContent;
});


/***/ }),
/* 177 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function htmlRemove() {
  this.innerHTML = "";
}

function htmlConstant(value) {
  return function() {
    this.innerHTML = value;
  };
}

function htmlFunction(value) {
  return function() {
    var v = value.apply(this, arguments);
    this.innerHTML = v == null ? "" : v;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(value) {
  return arguments.length
      ? this.each(value == null
          ? htmlRemove : (typeof value === "function"
          ? htmlFunction
          : htmlConstant)(value))
      : this.node().innerHTML;
});


/***/ }),
/* 178 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function raise() {
  if (this.nextSibling) this.parentNode.appendChild(this);
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  return this.each(raise);
});


/***/ }),
/* 179 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function lower() {
  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  return this.each(lower);
});


/***/ }),
/* 180 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__creator__ = __webpack_require__(26);


/* harmony default export */ __webpack_exports__["a"] = (function(name) {
  var create = typeof name === "function" ? name : Object(__WEBPACK_IMPORTED_MODULE_0__creator__["a" /* default */])(name);
  return this.select(function() {
    return this.appendChild(create.apply(this, arguments));
  });
});


/***/ }),
/* 181 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__creator__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__selector__ = __webpack_require__(36);



function constantNull() {
  return null;
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, before) {
  var create = typeof name === "function" ? name : Object(__WEBPACK_IMPORTED_MODULE_0__creator__["a" /* default */])(name),
      select = before == null ? constantNull : typeof before === "function" ? before : Object(__WEBPACK_IMPORTED_MODULE_1__selector__["a" /* default */])(before);
  return this.select(function() {
    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);
  });
});


/***/ }),
/* 182 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function remove() {
  var parent = this.parentNode;
  if (parent) parent.removeChild(this);
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  return this.each(remove);
});


/***/ }),
/* 183 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function selection_cloneShallow() {
  return this.parentNode.insertBefore(this.cloneNode(false), this.nextSibling);
}

function selection_cloneDeep() {
  return this.parentNode.insertBefore(this.cloneNode(true), this.nextSibling);
}

/* harmony default export */ __webpack_exports__["a"] = (function(deep) {
  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);
});


/***/ }),
/* 184 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(value) {
  return arguments.length
      ? this.property("__data__", value)
      : this.node().__data__;
});


/***/ }),
/* 185 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__window__ = __webpack_require__(37);


function dispatchEvent(node, type, params) {
  var window = Object(__WEBPACK_IMPORTED_MODULE_0__window__["a" /* default */])(node),
      event = window.CustomEvent;

  if (typeof event === "function") {
    event = new event(type, params);
  } else {
    event = window.document.createEvent("Event");
    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;
    else event.initEvent(type, false, false);
  }

  node.dispatchEvent(event);
}

function dispatchConstant(type, params) {
  return function() {
    return dispatchEvent(this, type, params);
  };
}

function dispatchFunction(type, params) {
  return function() {
    return dispatchEvent(this, type, params.apply(this, arguments));
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(type, params) {
  return this.each((typeof params === "function"
      ? dispatchFunction
      : dispatchConstant)(type, params));
});


/***/ }),
/* 186 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = local;
var nextId = 0;

function local() {
  return new Local;
}

function Local() {
  this._ = "@" + (++nextId).toString(36);
}

Local.prototype = local.prototype = {
  constructor: Local,
  get: function(node) {
    var id = this._;
    while (!(id in node)) if (!(node = node.parentNode)) return;
    return node[id];
  },
  set: function(node, value) {
    return node[this._] = value;
  },
  remove: function(node) {
    return this._ in node && delete node[this._];
  },
  toString: function() {
    return this._;
  }
};


/***/ }),
/* 187 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sourceEvent__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__point__ = __webpack_require__(27);



/* harmony default export */ __webpack_exports__["a"] = (function(node) {
  var event = Object(__WEBPACK_IMPORTED_MODULE_0__sourceEvent__["a" /* default */])();
  if (event.changedTouches) event = event.changedTouches[0];
  return Object(__WEBPACK_IMPORTED_MODULE_1__point__["a" /* default */])(node, event);
});


/***/ }),
/* 188 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__selection_index__ = __webpack_require__(5);


/* harmony default export */ __webpack_exports__["a"] = (function(selector) {
  return typeof selector === "string"
      ? new __WEBPACK_IMPORTED_MODULE_0__selection_index__["a" /* Selection */]([document.querySelectorAll(selector)], [document.documentElement])
      : new __WEBPACK_IMPORTED_MODULE_0__selection_index__["a" /* Selection */]([selector == null ? [] : selector], __WEBPACK_IMPORTED_MODULE_0__selection_index__["c" /* root */]);
});


/***/ }),
/* 189 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sourceEvent__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__point__ = __webpack_require__(27);



/* harmony default export */ __webpack_exports__["a"] = (function(node, touches, identifier) {
  if (arguments.length < 3) identifier = touches, touches = Object(__WEBPACK_IMPORTED_MODULE_0__sourceEvent__["a" /* default */])().changedTouches;

  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {
    if ((touch = touches[i]).identifier === identifier) {
      return Object(__WEBPACK_IMPORTED_MODULE_1__point__["a" /* default */])(node, touch);
    }
  }

  return null;
});


/***/ }),
/* 190 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sourceEvent__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__point__ = __webpack_require__(27);



/* harmony default export */ __webpack_exports__["a"] = (function(node, touches) {
  if (touches == null) touches = Object(__WEBPACK_IMPORTED_MODULE_0__sourceEvent__["a" /* default */])().touches;

  for (var i = 0, n = touches ? touches.length : 0, points = new Array(n); i < n; ++i) {
    points[i] = Object(__WEBPACK_IMPORTED_MODULE_1__point__["a" /* default */])(node, touches[i]);
  }

  return points;
});


/***/ }),
/* 191 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_dispatch__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__nodrag__ = __webpack_require__(68);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__noevent__ = __webpack_require__(69);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__constant__ = __webpack_require__(193);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event__ = __webpack_require__(194);







// Ignore right-click, since that should open the context menu.
function defaultFilter() {
  return !__WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].button;
}

function defaultContainer() {
  return this.parentNode;
}

function defaultSubject(d) {
  return d == null ? {x: __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].x, y: __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].y} : d;
}

function defaultTouchable() {
  return "ontouchstart" in this;
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  var filter = defaultFilter,
      container = defaultContainer,
      subject = defaultSubject,
      touchable = defaultTouchable,
      gestures = {},
      listeners = Object(__WEBPACK_IMPORTED_MODULE_0_d3_dispatch__["a" /* dispatch */])("start", "drag", "end"),
      active = 0,
      mousedownx,
      mousedowny,
      mousemoving,
      touchending,
      clickDistance2 = 0;

  function drag(selection) {
    selection
        .on("mousedown.drag", mousedowned)
      .filter(touchable)
        .on("touchstart.drag", touchstarted)
        .on("touchmove.drag", touchmoved)
        .on("touchend.drag touchcancel.drag", touchended)
        .style("touch-action", "none")
        .style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }

  function mousedowned() {
    if (touchending || !filter.apply(this, arguments)) return;
    var gesture = beforestart("mouse", container.apply(this, arguments), __WEBPACK_IMPORTED_MODULE_1_d3_selection__["mouse"], this, arguments);
    if (!gesture) return;
    Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["select"])(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].view).on("mousemove.drag", mousemoved, true).on("mouseup.drag", mouseupped, true);
    Object(__WEBPACK_IMPORTED_MODULE_2__nodrag__["a" /* default */])(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].view);
    Object(__WEBPACK_IMPORTED_MODULE_3__noevent__["b" /* nopropagation */])();
    mousemoving = false;
    mousedownx = __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].clientX;
    mousedowny = __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].clientY;
    gesture("start");
  }

  function mousemoved() {
    Object(__WEBPACK_IMPORTED_MODULE_3__noevent__["a" /* default */])();
    if (!mousemoving) {
      var dx = __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].clientX - mousedownx, dy = __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].clientY - mousedowny;
      mousemoving = dx * dx + dy * dy > clickDistance2;
    }
    gestures.mouse("drag");
  }

  function mouseupped() {
    Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["select"])(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].view).on("mousemove.drag mouseup.drag", null);
    Object(__WEBPACK_IMPORTED_MODULE_2__nodrag__["b" /* yesdrag */])(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].view, mousemoving);
    Object(__WEBPACK_IMPORTED_MODULE_3__noevent__["a" /* default */])();
    gestures.mouse("end");
  }

  function touchstarted() {
    if (!filter.apply(this, arguments)) return;
    var touches = __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].changedTouches,
        c = container.apply(this, arguments),
        n = touches.length, i, gesture;

    for (i = 0; i < n; ++i) {
      if (gesture = beforestart(touches[i].identifier, c, __WEBPACK_IMPORTED_MODULE_1_d3_selection__["touch"], this, arguments)) {
        Object(__WEBPACK_IMPORTED_MODULE_3__noevent__["b" /* nopropagation */])();
        gesture("start");
      }
    }
  }

  function touchmoved() {
    var touches = __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].changedTouches,
        n = touches.length, i, gesture;

    for (i = 0; i < n; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        Object(__WEBPACK_IMPORTED_MODULE_3__noevent__["a" /* default */])();
        gesture("drag");
      }
    }
  }

  function touchended() {
    var touches = __WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].changedTouches,
        n = touches.length, i, gesture;

    if (touchending) clearTimeout(touchending);
    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!
    for (i = 0; i < n; ++i) {
      if (gesture = gestures[touches[i].identifier]) {
        Object(__WEBPACK_IMPORTED_MODULE_3__noevent__["b" /* nopropagation */])();
        gesture("end");
      }
    }
  }

  function beforestart(id, container, point, that, args) {
    var p = point(container, id), s, dx, dy,
        sublisteners = listeners.copy();

    if (!Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["customEvent"])(new __WEBPACK_IMPORTED_MODULE_5__event__["a" /* default */](drag, "beforestart", s, id, active, p[0], p[1], 0, 0, sublisteners), function() {
      if ((__WEBPACK_IMPORTED_MODULE_1_d3_selection__["event"].subject = s = subject.apply(that, args)) == null) return false;
      dx = s.x - p[0] || 0;
      dy = s.y - p[1] || 0;
      return true;
    })) return;

    return function gesture(type) {
      var p0 = p, n;
      switch (type) {
        case "start": gestures[id] = gesture, n = active++; break;
        case "end": delete gestures[id], --active; // nobreak
        case "drag": p = point(container, id), n = active; break;
      }
      Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["customEvent"])(new __WEBPACK_IMPORTED_MODULE_5__event__["a" /* default */](drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);
    };
  }

  drag.filter = function(_) {
    return arguments.length ? (filter = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_4__constant__["a" /* default */])(!!_), drag) : filter;
  };

  drag.container = function(_) {
    return arguments.length ? (container = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_4__constant__["a" /* default */])(_), drag) : container;
  };

  drag.subject = function(_) {
    return arguments.length ? (subject = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_4__constant__["a" /* default */])(_), drag) : subject;
  };

  drag.touchable = function(_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_4__constant__["a" /* default */])(!!_), drag) : touchable;
  };

  drag.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? drag : value;
  };

  drag.clickDistance = function(_) {
    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);
  };

  return drag;
});


/***/ }),
/* 192 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var noop = {value: function() {}};

function dispatch() {
  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {
    if (!(t = arguments[i] + "") || (t in _)) throw new Error("illegal type: " + t);
    _[t] = [];
  }
  return new Dispatch(_);
}

function Dispatch(_) {
  this._ = _;
}

function parseTypenames(typenames, types) {
  return typenames.trim().split(/^|\s+/).map(function(t) {
    var name = "", i = t.indexOf(".");
    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);
    if (t && !types.hasOwnProperty(t)) throw new Error("unknown type: " + t);
    return {type: t, name: name};
  });
}

Dispatch.prototype = dispatch.prototype = {
  constructor: Dispatch,
  on: function(typename, callback) {
    var _ = this._,
        T = parseTypenames(typename + "", _),
        t,
        i = -1,
        n = T.length;

    // If no callback was specified, return the callback of the given type and name.
    if (arguments.length < 2) {
      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;
      return;
    }

    // If a type was specified, set the callback for the given type and name.
    // Otherwise, if a null callback was specified, remove callbacks of the given name.
    if (callback != null && typeof callback !== "function") throw new Error("invalid callback: " + callback);
    while (++i < n) {
      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);
      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);
    }

    return this;
  },
  copy: function() {
    var copy = {}, _ = this._;
    for (var t in _) copy[t] = _[t].slice();
    return new Dispatch(copy);
  },
  call: function(type, that) {
    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);
    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);
  },
  apply: function(type, that, args) {
    if (!this._.hasOwnProperty(type)) throw new Error("unknown type: " + type);
    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);
  }
};

function get(type, name) {
  for (var i = 0, n = type.length, c; i < n; ++i) {
    if ((c = type[i]).name === name) {
      return c.value;
    }
  }
}

function set(type, name, callback) {
  for (var i = 0, n = type.length; i < n; ++i) {
    if (type[i].name === name) {
      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));
      break;
    }
  }
  if (callback != null) type.push({name: name, value: callback});
  return type;
}

/* harmony default export */ __webpack_exports__["a"] = (dispatch);


/***/ }),
/* 193 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return function() {
    return x;
  };
});


/***/ }),
/* 194 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = DragEvent;
function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {
  this.target = target;
  this.type = type;
  this.subject = subject;
  this.identifier = id;
  this.active = active;
  this.x = x;
  this.y = y;
  this.dx = dx;
  this.dy = dy;
  this._ = dispatch;
}

DragEvent.prototype.on = function() {
  var value = this._.on.apply(this._, arguments);
  return value === this._ ? this : value;
};


/***/ }),
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {/**
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */



/**
 * Use invariant() to assert state which your program assumes to be true.
 *
 * Provide sprintf-style format (only %s is supported) and arguments
 * to provide information about what broke and what you were
 * expecting.
 *
 * The invariant message will be stripped in production, but the invariant
 * will remain to ensure logic does not differ in production.
 */

var invariant = function(condition, format, a, b, c, d, e, f) {
  if (process.env.NODE_ENV !== 'production') {
    if (format === undefined) {
      throw new Error('invariant requires an error message argument');
    }
  }

  if (!condition) {
    var error;
    if (format === undefined) {
      error = new Error(
        'Minified exception occurred; use the non-minified dev environment ' +
        'for the full error message and additional helpful warnings.'
      );
    } else {
      var args = [a, b, c, d, e, f];
      var argIndex = 0;
      error = new Error(
        format.replace(/%s/g, function() { return args[argIndex++]; })
      );
      error.name = 'Invariant Violation';
    }

    error.framesToPop = 1; // we don't care about invariant's own frame
    throw error;
  }
};

module.exports = invariant;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(196)))

/***/ }),
/* 196 */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),
/* 197 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(198);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./ScaleSlider.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./ScaleSlider.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 198 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .scaleEditor *{font-size:12px;color:#777;box-sizing:border-box}.escher-container .scaleEditor{position:relative;display:flex;justify-content:center;flex-direction:column}.escher-container .scaleTrack{position:relative;display:flex;width:400px;height:30px;margin-bottom:9px;margin-top:17px;margin-left:55px;font-size:15px}.escher-container .gradient{position:absolute;width:100%;height:100%;cursor:pointer}.escher-container .scaleLabels{display:inline-flex;flex-direction:column;font-size:12px}.escher-container .scaleLabels label{margin-bottom:6px}.escher-container .noDataStyle{position:relative;margin-top:10px}.escher-container .noDataStyle .styleHeader{font-size:12px;font-weight:700}.escher-container .noDataStyle label{margin-right:5px}.escher-container .noDataStyle input[type=text]{margin-right:10px;padding:3px 0;width:86px}.escher-container .noDataStyle input[type=color]{position:absolute;padding:0 2px;border:1px solid #a9a9a9;margin-left:-34px;height:23px;width:24px}.escher-container .scaleEditor .icon-plus{cursor:pointer;position:absolute;font-size:14px;right:19px}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/ScaleSlider.css"],"names":[],"mappings":"AAAA,iCACE,eAAgB,AAChB,WAAY,AACZ,qBAAuB,CACxB,AAED,+BACE,kBAAmB,AACnB,aAAc,AACd,uBAAwB,AACxB,qBAAuB,CACxB,AAED,8BACE,kBAAmB,AACnB,aAAc,AACd,YAAa,AACb,YAAa,AACb,kBAAmB,AACnB,gBAAiB,AACjB,iBAAkB,AAClB,cAAgB,CACjB,AAED,4BACE,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,cAAgB,CACjB,AAED,+BACE,oBAAqB,AACrB,sBAAuB,AACvB,cAAgB,CACjB,AAED,qCACE,iBAAmB,CACpB,AAED,+BACE,kBAAmB,AACnB,eAAiB,CAClB,AAED,4CACE,eAAgB,AAChB,eAAkB,CACnB,AAED,qCACE,gBAAkB,CACnB,AAED,gDACE,kBAAmB,AACnB,cAAiB,AACjB,UAAY,CACb,AAED,iDACE,kBAAmB,AACnB,cAAiB,AACjB,yBAA2B,AAC3B,kBAAmB,AACnB,YAAa,AACb,UAAY,CACb,AAED,0CACE,eAAgB,AAChB,kBAAmB,AACnB,eAAgB,AAChB,UAAY,CACb","file":"ScaleSlider.css","sourcesContent":[".escher-container .scaleEditor * {\n  font-size: 12px;\n  color: #777;\n  box-sizing: border-box;\n}\n\n.escher-container .scaleEditor {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.escher-container .scaleTrack {\n  position: relative;\n  display: flex;\n  width: 400px;\n  height: 30px;\n  margin-bottom: 9px;\n  margin-top: 17px;\n  margin-left: 55px;\n  font-size: 15px;\n}\n\n.escher-container .gradient {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n\n.escher-container .scaleLabels {\n  display: inline-flex;\n  flex-direction: column;\n  font-size: 12px;\n}\n\n.escher-container .scaleLabels label {\n  margin-bottom: 6px;\n}\n\n.escher-container .noDataStyle {\n  position: relative;\n  margin-top: 10px;\n}\n\n.escher-container .noDataStyle .styleHeader {\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.escher-container .noDataStyle label {\n  margin-right: 5px;\n}\n\n.escher-container .noDataStyle input[type=text] {\n  margin-right: 10px;\n  padding: 3px 0px;\n  width: 86px;\n}\n\n.escher-container .noDataStyle input[type=color] {\n  position: absolute;\n  padding: 0px 2px;\n  border: 1px solid darkgrey;\n  margin-left: -34px;\n  height: 23px;\n  width: 24px;\n}\n\n.escher-container .scaleEditor .icon-plus {\n  cursor: pointer;\n  position: absolute;\n  font-size: 14px;\n  right: 19px;\n}"],"sourceRoot":""}]);

// exports


/***/ }),
/* 199 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */


var ScaleSelection = function (_Component) {
  _inherits(ScaleSelection, _Component);

  function ScaleSelection(props) {
    _classCallCheck(this, ScaleSelection);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    var colors = [];
    if (props.scale) {
      for (var i = 0; i < props.scale.length; i++) {
        colors.push(props.scale[i].color);
      }
    }
    _this.state = {
      colors: colors
    };
    return _this;
  }

  ScaleSelection.prototype.render = function render() {
    var _this2 = this;

    return (0, _preact.h)(
      'div',
      { className: 'scaleSelection', onClick: function onClick() {
          return _this2.props.onClick();
        } },
      (0, _preact.h)(
        'div',
        { className: 'scaleName' },
        this.props.name
      ),
      (0, _preact.h)(
        'div',
        { className: 'scaleColors' },
        this.state.colors.map(function (color) {
          return (0, _preact.h)('i', { className: 'icon-blank', style: { color: color } });
        })
      )
    );
  };

  return ScaleSelection;
}(_preact.Component);

exports.default = ScaleSelection;

/***/ }),
/* 200 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(201);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./BuilderSettingsMenu.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./BuilderSettingsMenu.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 201 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .settingsBackground{box-sizing:border-box;position:absolute;top:0;left:0;width:100%;height:100%;z-index:9;background:rgba(0,0,0,.4);padding:5% 0 80px;text-align:center}.escher-container .scale-editor .domain-input{color:#333}.escher-container .settingsBoxContainer button{position:absolute;top:5px;right:20px;z-index:10;text-align:center;vertical-align:middle;font-weight:400!important;width:34px;height:30px;margin:0;padding:unset;font-size:14px!important;border-radius:3px;-ms-touch-action:none;touch-action:none}.escher-container .settingsBoxContainer button:active{background-image:linear-gradient(#3f4141,#474949 6%,#4f5151)}.escher-container .settingsBoxContainer .discardChanges{right:60px}.escher-container .settingsBoxContainer{color:#777;display:inline-block;position:relative;width:90%;max-width:520px;height:100%;z-index:10}.escher-container .settingsBox{font-size:13px;box-sizing:border-box;display:inline-block;max-height:100%;width:100%;overflow-y:scroll;overflow-x:hidden;background:hsla(0,0%,100%,.953);padding:8px;margin:0;border:1px solid #ddd;text-align:left}.escher-container .settingsBox *{box-sizing:border-box}.escher-container .settingsBox .title{font-size:17px;font-weight:700;color:#777}.escher-container .settingsBox .subheading{font-size:13px;font-weight:700;margin-top:15px;color:#777}.escher-container .settingsBox table{border-collapse:collapse}.escher-container .settingsBox .radioSelection{cursor:default}.escher-container .radioSelection td{padding:3px 5px}.escher-container .radioSelection input[type=radio]{margin:0;margin-top:4px;margin-right:4px}.escher-container .radioSelection .optionLabel{width:88px}.escher-container .radioSelection .optionLabelWide{width:192px}.escher-container .radioSelection .optionGroup{margin-right:10px}.escher-container .radioSelection .singleLine{display:flex}.escher-container .settingsContainer label{display:block;margin-bottom:0}.escher-container .settingsBoxContainer input[type=checkbox]{margin:0;margin-top:4px;margin-right:4px}.escher-container .settingsTip{font-size:13px}.escher-container .settingsBoxContainer hr{margin:18px 0;border:0;border-top:1px solid #ddd}.escher-container .scaleTitle{margin-top:15px;display:flex;justify-content:space-between}.escher-container .selector{position:relative;user-select:none;padding-top:2px}.escher-container .selectorTitle{background:#fff;border:1px solid #a9a9a9;padding-left:4px;cursor:default;width:162px}.escher-container .selectorTitle:hover{border-color:#000}.escher-container .selectorMenu{position:absolute;z-index:4;background-color:#fff;border:1px solid #a9a9a9;min-width:162px}.escher-container .scaleSelection{cursor:default;padding:0 6px;display:flex;justify-content:space-between}.escher-container .scaleSelection:hover{background-color:#1e90ff;color:#fff}.escher-container .icon-blank{margin:-3px}.escher-container .scaleName{margin-right:15px}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/BuilderSettingsMenu.css"],"names":[],"mappings":"AAAA,sCACE,sBAAuB,AACvB,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,WAAY,AACZ,YAAa,AACb,UAAW,AACX,0BAA2B,AAC3B,kBAAmB,AACnB,iBAAmB,CACpB,AAED,8CACE,UAAY,CACb,AAED,+CACE,kBAAmB,AACnB,QAAS,AACT,WAAY,AACZ,WAAY,AACZ,kBAAmB,AACnB,sBAAuB,AACvB,0BAA8B,AAC9B,WAAY,AACZ,YAAa,AACb,SAAU,AACV,cAAe,AACf,yBAA0B,AAC1B,kBAAmB,AACnB,sBAAuB,AACvB,iBAAmB,CACpB,AAED,sDACE,4DAAgE,CACjE,AAED,wDACE,UAAY,CACb,AAED,wCACE,WAA0B,AAC1B,qBAAsB,AACtB,kBAAmB,AACnB,UAAW,AACX,gBAAiB,AACjB,YAAa,AACb,UAAY,CACb,AAED,+BACE,eAAgB,AAChB,sBAAuB,AACvB,qBAAsB,AACtB,gBAAiB,AACjB,WAAY,AACZ,kBAAmB,AACnB,kBAAmB,AACnB,gCAAuC,AACvC,YAAa,AACb,SAAU,AACV,sBAAuB,AACvB,eAAiB,CAClB,AAED,iCACE,qBAAuB,CACxB,AAED,sCACE,eAAgB,AAChB,gBAAiB,AACjB,UAAe,CAChB,AAED,2CACE,eAAgB,AAChB,gBAAiB,AACjB,gBAAiB,AACjB,UAAe,CAChB,AAED,qCACE,wBAA0B,CAC3B,AAED,+CACE,cAAgB,CACjB,AAED,qCACE,eAAiB,CAClB,AAED,oDACE,SAAU,AACV,eAAgB,AAChB,gBAAkB,CACnB,AAED,+CACE,UAAY,CACb,AAED,mDACE,WAAa,CACd,AAED,+CACE,iBAAkB,CACnB,AAED,8CACE,YAAc,CACf,AAED,2CACE,cAAe,AACf,eAAiB,CAClB,AAED,6DACE,SAAU,AACV,eAAgB,AAChB,gBAAkB,CACnB,AAED,+BACE,cAAgB,CACjB,AAED,2CACE,cAAe,AACf,SAAU,AACV,yBAA8B,CAC/B,AAED,8BACE,gBAAiB,AACjB,aAAc,AACd,6BAA+B,CAChC,AAED,4BACE,kBAAmB,AACnB,iBAAkB,AAClB,eAAiB,CAClB,AAED,iCACE,gBAAkB,AAClB,yBAA0B,AAC1B,iBAAkB,AAClB,eAAgB,AAChB,WAAa,CACd,AAED,uCACE,iBAAoB,CACrB,AAED,gCACE,kBAAmB,AACnB,UAAW,AACX,sBAAwB,AACxB,yBAA0B,AAC1B,eAAiB,CAClB,AAED,kCACE,eAAgB,AAChB,cAAe,AACf,aAAc,AACd,6BAA+B,CAChC,AAED,wCACE,yBAA6B,AAC7B,UAAa,CACd,AAED,8BACE,WAAkB,CACnB,AAED,6BACE,iBAAmB,CACpB","file":"BuilderSettingsMenu.css","sourcesContent":[".escher-container .settingsBackground {\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9;\n  background: rgba(0,0,0,.4);\n  padding: 5% 0 80px;\n  text-align: center;\n}\n\n.escher-container .scale-editor .domain-input {\n  color: #333;\n}\n\n.escher-container .settingsBoxContainer button {\n  position: absolute;\n  top: 5px;\n  right: 20px;\n  z-index: 10;\n  text-align: center;\n  vertical-align: middle;\n  font-weight: normal!important;\n  width: 34px;\n  height: 30px;\n  margin: 0;\n  padding: unset;\n  font-size: 14px!important;\n  border-radius: 3px;\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n.escher-container .settingsBoxContainer button:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .settingsBoxContainer .discardChanges {\n  right: 60px;\n}\n\n.escher-container .settingsBoxContainer {\n  color: rgb(119, 119, 119);\n  display: inline-block;\n  position: relative;\n  width: 90%;\n  max-width: 520px;\n  height: 100%;\n  z-index: 10;\n}\n\n.escher-container .settingsBox {\n  font-size: 13px;\n  box-sizing: border-box;\n  display: inline-block;\n  max-height: 100%;\n  width: 100%;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  background: rgba(255, 255, 255, 0.953);\n  padding: 8px;\n  margin: 0;\n  border: 1px solid #ddd;\n  text-align: left;\n}\n\n.escher-container .settingsBox * {\n  box-sizing: border-box;\n}\n\n.escher-container .settingsBox .title {\n  font-size: 17px;\n  font-weight: 700;\n  color: #777777;\n}\n\n.escher-container .settingsBox .subheading {\n  font-size: 13px;\n  font-weight: 700;\n  margin-top: 15px;\n  color: #777777;\n}\n\n.escher-container .settingsBox table {\n  border-collapse: collapse;\n}\n\n.escher-container .settingsBox .radioSelection {\n  cursor: default;\n}\n\n.escher-container .radioSelection td {\n  padding: 3px 5px;\n}\n\n.escher-container .radioSelection input[type=radio] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .radioSelection .optionLabel {\n  width: 88px;\n}\n\n.escher-container .radioSelection .optionLabelWide {\n  width: 192px;\n}\n\n.escher-container .radioSelection .optionGroup {\n  margin-right: 10px\n}\n\n.escher-container .radioSelection .singleLine {\n  display: flex;\n}\n\n.escher-container .settingsContainer label {\n  display: block;\n  margin-bottom: 0;\n}\n\n.escher-container .settingsBoxContainer input[type=checkbox] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .settingsTip {\n  font-size: 13px;\n}\n\n.escher-container .settingsBoxContainer hr {\n  margin: 18px 0;\n  border: 0;\n  border-top: 1px solid #dddddd;\n}\n\n.escher-container .scaleTitle {\n  margin-top: 15px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .selector {\n  position: relative;\n  user-select: none;\n  padding-top: 2px;\n}\n\n.escher-container .selectorTitle {\n  background: white;\n  border: 1px solid #a9a9a9;\n  padding-left: 4px;\n  cursor: default;\n  width: 162px;\n}\n\n.escher-container .selectorTitle:hover {\n  border-color: black;\n}\n\n.escher-container .selectorMenu {\n  position: absolute;\n  z-index: 4;\n  background-color: white;\n  border: 1px solid #a9a9a9;\n  min-width: 162px;\n}\n\n.escher-container .scaleSelection {\n  cursor: default;\n  padding: 0 6px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .scaleSelection:hover {\n  background-color: dodgerblue;\n  color: white;\n}\n\n.escher-container .icon-blank {\n  margin: -3px -3px;\n}\n\n.escher-container .scaleName {\n  margin-right: 15px;\n}\n"],"sourceRoot":""}]);

// exports


/***/ }),
/* 202 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;
var scalePresets = {
  GaBuGeRd: [{ type: 'min', color: '#c8c8c8', size: 12 }, { type: 'value', value: 0.01, color: '#9696ff', size: 16 }, { type: 'value', value: 20, color: '#209123', size: 20 }, { type: 'max', color: '#ff0000', size: 25 }],
  GaBuRd: [{ type: 'min', color: '#c8c8c8', size: 12 }, { type: 'median', color: '#9696ff', size: 20 }, { type: 'max', color: '#ff0000', size: 25 }],
  RdYlBu: [{ type: 'min', color: '#d7191c', size: 12 }, { type: 'median', color: '#ffffbf', size: 20 }, { type: 'max', color: '#2c7bb6', size: 25 }],
  GeGaRd: [{ type: 'min', color: '#209123', size: 25 }, { type: 'value', value: 0, color: '#c8c8c8', size: 12 }, { type: 'max', color: '#ff0000', size: 25 }]
};

exports.default = scalePresets;

/***/ }),
/* 203 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

__webpack_require__(204);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */


/**
 * ButtonPanel. Sets up the button panel for Builder. Currently calls a
 * re-render on itself every time the mode is changed. This can be removed upon
 * porting Builder to Preact
 */
var ButtonPanel = function (_Component) {
  _inherits(ButtonPanel, _Component);

  function ButtonPanel() {
    _classCallCheck(this, ButtonPanel);

    return _possibleConstructorReturn(this, _Component.apply(this, arguments));
  }

  ButtonPanel.prototype.render = function render() {
    var _this2 = this;

    return (0, _preact.h)(
      'ul',
      { className: 'buttonPanel' },
      (0, _preact.h)(
        'li',
        null,
        (0, _preact.h)(
          'button',
          {
            className: 'button btn',
            onClick: function onClick() {
              return _this2.props.zoomContainer.zoom_in();
            },
            title: 'Zoom in (+)'
          },
          (0, _preact.h)('i', { className: 'icon-zoom-in' })
        )
      ),
      (0, _preact.h)(
        'li',
        null,
        (0, _preact.h)(
          'button',
          {
            className: 'button btn',
            onClick: function onClick() {
              return _this2.props.zoomContainer.zoom_out();
            },
            title: 'Zoom out (-)'
          },
          (0, _preact.h)('i', { className: 'icon-zoom-out' })
        )
      ),
      (0, _preact.h)(
        'li',
        null,
        (0, _preact.h)(
          'button',
          {
            className: 'button btn',
            onClick: function onClick() {
              return _this2.props.map.zoom_extent_canvas();
            },
            title: 'Zoom to canvas (1)'
          },
          (0, _preact.h)('i', { className: 'icon-resize-full' })
        )
      ),
      (0, _preact.h)(
        'li',
        { className: 'grouping' },
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Pan mode (Z)',
            'for': 'zoom',
            id: this.props.mode === 'zoom' ? 'currentMode' : null,
            onClick: function onClick() {
              return _this2.props.setMode('zoom');
            }
          },
          (0, _preact.h)('i', { className: 'icon-move' })
        ),
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Select mode (V)',
            'for': 'brush',
            id: this.props.mode === 'brush' ? 'currentMode' : null,
            onClick: function onClick() {
              return _this2.props.setMode('brush');
            }
          },
          (0, _preact.h)('i', { className: 'icon-mouse-pointer' })
        ),
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Add reaction mode (N)',
            'for': 'build',
            onClick: function onClick() {
              return _this2.props.setMode('build');
            },
            id: this.props.mode === 'build' ? 'currentMode' : null },
          (0, _preact.h)('i', { className: 'icon-wrench' })
        ),
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Rotate mode (R)',
            'for': 'rotate',
            id: this.props.mode === 'rotate' ? 'currentMode' : null,
            onClick: function onClick() {
              return _this2.props.setMode('rotate');
            }
          },
          (0, _preact.h)('i', { className: 'icon-cw' })
        ),
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Text mode (T)',
            'for': 'text',
            id: this.props.mode === 'text' ? 'currentMode' : null,
            onClick: function onClick() {
              return _this2.props.setMode('text');
            }
          },
          (0, _preact.h)('i', { className: 'icon-font' })
        )
      ),
      (0, _preact.h)(
        'li',
        {
          className: 'grouping',
          style: this.props.mode === 'build' ? { display: 'block' } : { display: 'none' }
        },
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Direction arrow (\u2190)',
            onClick: function onClick() {
              return _this2.props.buildInput.direction_arrow.left();
            }
          },
          (0, _preact.h)('i', { className: 'icon-left-big' })
        ),
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Direction arrow (\u2192)',
            onClick: function onClick() {
              return _this2.props.buildInput.direction_arrow.right();
            }
          },
          (0, _preact.h)('i', { className: 'icon-right-big' })
        ),
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Direction arrow (\u2191)',
            onClick: function onClick() {
              return _this2.props.buildInput.direction_arrow.up();
            }
          },
          (0, _preact.h)('i', { className: 'icon-up-big' })
        ),
        (0, _preact.h)(
          'button',
          {
            className: 'buttonGroup btn',
            title: 'Direction arrow (\u2193)',
            onClick: function onClick() {
              return _this2.props.buildInput.direction_arrow.down();
            }
          },
          (0, _preact.h)('i', { className: 'icon-down-big' })
        )
      )
    );
  };

  return ButtonPanel;
}(_preact.Component);

exports.default = ButtonPanel;

/***/ }),
/* 204 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(205);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./ButtonPanel.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./ButtonPanel.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 205 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .buttonPanel *{box-sizing:border-box}.escher-container .buttonPanel{position:absolute;left:4px;top:20%;margin-top:-32px;padding-left:0;-ms-touch-action:none;touch-action:none}.escher-container .buttonPanel>li{margin-top:5px}.escher-container .grouping{display:block}.escher-container .buttonGroup{display:block;margin-bottom:-1px;padding:5px 0;border-radius:0}.escher-container .grouping>.buttonGroup:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.escher-container .grouping>.buttonGroup:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px}.escher-container .buttonPanel>.grouping:last-child{margin-top:4px}.escher-container #currentMode{background-image:linear-gradient(#8f4f3f,#834c3c 6%,#8d3a2d)}.escher-container .buttonGroup.btn{margin-top:-1px}.escher-container .button{border-radius:4px}.escher-container .button.btn,.escher-container .buttonGroup.btn{padding:unset;color:#fff!important;border:1px solid #474949;background-image:linear-gradient(#4f5151,#474949 6%,#3f4141);background-color:#fff;text-align:center;vertical-align:middle;cursor:pointer;font-size:14px!important;font-weight:400;width:40px;height:40px}.escher-container .buttonGroup label:active,.escher-container .buttonPanel .button:active,.escher-container .buttonPanel .buttonGroup:active{background-image:linear-gradient(#3f4141,#474949 6%,#4f5151)}.escher-container .buttonPanel .fa{font-size:24px}.escher-container .buttonPanel [class^=icon-]{font-size:23px}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/ButtonPanel.css"],"names":[],"mappings":"AAAA,iCACE,qBAAuB,CACxB,AAED,+BACE,kBAAmB,AACnB,SAAU,AACV,QAAS,AACT,iBAAkB,AAClB,eAAgB,AAChB,sBAAuB,AACvB,iBAAmB,CACpB,AAED,kCACE,cAAgB,CACjB,AAED,4BACE,aAAe,CAChB,AAED,+BACE,cAAe,AACf,mBAAoB,AACpB,cAAiB,AACjB,eAAiB,CAClB,AAED,qDACE,2BAA4B,AAC5B,2BAA6B,CAC9B,AAED,oDACE,8BAA+B,AAC/B,8BAAgC,CACjC,AAED,oDACE,cAAgB,CACjB,AAED,+BACE,4DAA8D,CAC/D,AAED,mCACE,eAAiB,CAClB,AAED,0BACE,iBAAmB,CACpB,AAED,iEACE,cAAe,AACf,qBAAuB,AACvB,yBAA0B,AAC1B,6DAAgE,AAChE,sBAAwB,AACxB,kBAAmB,AACnB,sBAAuB,AACvB,eAAgB,AAChB,yBAA0B,AAC1B,gBAAiB,AACjB,WAAY,AACZ,WAAa,CACd,AAED,6IACE,4DAAgE,CACjE,AAED,mCACE,cAAgB,CACjB,AAGD,8CACE,cAAgB,CACjB","file":"ButtonPanel.css","sourcesContent":[".escher-container .buttonPanel * {\n  box-sizing: border-box;\n}\n\n.escher-container .buttonPanel {\n  position: absolute;\n  left: 4px;\n  top: 20%;\n  margin-top: -32px;\n  padding-left: 0;\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n.escher-container .buttonPanel>li {\n  margin-top: 5px;\n}\n\n.escher-container .grouping {\n  display: block;\n}\n\n.escher-container .buttonGroup {\n  display: block;\n  margin-bottom: -1px;\n  padding: 5px 0px;\n  border-radius: 0;\n}\n\n.escher-container .grouping>.buttonGroup:first-child {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n}\n\n.escher-container .grouping>.buttonGroup:last-child {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n.escher-container .buttonPanel>.grouping:last-child {\n  margin-top: 4px;\n}\n\n.escher-container #currentMode {\n  background-image: linear-gradient(#8F4F3F,#834c3c 6%,#8d3a2d);\n}\n\n.escher-container .buttonGroup.btn {\n  margin-top: -1px;\n}\n\n.escher-container .button {\n  border-radius: 4px;\n}\n\n.escher-container .button.btn, .escher-container .buttonGroup.btn {\n  padding: unset;\n  color: white!important;\n  border: 1px solid #474949;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  font-size: 14px!important;\n  font-weight: 400;\n  width: 40px;\n  height: 40px;\n}\n\n.escher-container .buttonPanel .button:active, .escher-container .buttonGroup label:active, .escher-container .buttonPanel .buttonGroup:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .buttonPanel .fa {\n  font-size: 24px;\n}\n\n/* Icons */\n.escher-container .buttonPanel [class^='icon-'] {\n  font-size: 23px;\n}\n"],"sourceRoot":""}]);

// exports


/***/ }),
/* 206 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

var _Dropdown = __webpack_require__(207);

var _Dropdown2 = _interopRequireDefault(_Dropdown);

var _MenuButton = __webpack_require__(210);

var _MenuButton2 = _interopRequireDefault(_MenuButton);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx h */


/**
 * BuilderMenuBar. Wrapper class that implements generic Dropdown and MenuButton
 * objects to create the Builder menu bar. Currently re-renders every time an
 * edit mode is chosen. This can be changed once Builder is ported to Preact.
 */
var BuilderMenuBar = function (_Component) {
  _inherits(BuilderMenuBar, _Component);

  function BuilderMenuBar() {
    _classCallCheck(this, BuilderMenuBar);

    return _possibleConstructorReturn(this, _Component.apply(this, arguments));
  }

  BuilderMenuBar.prototype.render = function render() {
    var _this2 = this;

    return (0, _preact.h)(
      'ul',
      { className: 'menuBar' },
      (0, _preact.h)(
        _Dropdown2.default,
        { name: 'Map' },
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Save map JSON' + (this.props.enable_keys ? ' (Ctrl+S)' : ''),
          onClick: function onClick() {
            return _this2.props.saveMap();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Load map JSON' + (this.props.enable_keys ? ' (Ctrl+O)' : ''),
          onClick: function onClick(file) {
            return _this2.props.loadMap(file);
          },
          type: 'load',
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Export as SVG' + (this.props.enable_keys ? ' (Ctrl+Shift+S)' : ''),
          onClick: function onClick() {
            return _this2.props.saveSvg();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Export as PNG' + (this.props.enable_keys ? ' (Ctrl+Shift+P)' : ''),
          onClick: function onClick() {
            return _this2.props.savePng();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Clear map',
          onClick: function onClick() {
            return _this2.props.clearMap();
          },
          disabledButtons: this.props.disabled_buttons
        })
      ),
      (0, _preact.h)(
        _Dropdown2.default,
        { name: 'Model' },
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Load COBRA model JSON' + (this.props.enable_keys ? ' (Ctrl+M)' : ''),
          onClick: function onClick(file) {
            return _this2.props.loadModel(file);
          },
          type: 'load',
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Update names and gene reaction rules using model',
          onClick: function onClick() {
            return _this2.props.updateRules();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Clear model',
          onClick: function onClick() {
            return _this2.props.loadModel(null);
          },
          disabledButtons: this.props.disabled_buttons
        })
      ),
      (0, _preact.h)(
        _Dropdown2.default,
        { name: 'Data' },
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Load reaction data',
          onClick: function onClick(file) {
            return _this2.props.loadReactionData(file);
          },
          type: 'load',
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Clear reaction data',
          onClick: function onClick() {
            return _this2.props.loadReactionData(null);
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)('li', { name: 'divider' }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Load gene data',
          onClick: function onClick(file) {
            return _this2.props.loadGeneData(file);
          },
          type: 'load',
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Clear gene data',
          onClick: function onClick() {
            return _this2.props.loadGeneData(null);
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)('li', { name: 'divider' }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Load metabolite data',
          onClick: function onClick(file) {
            return _this2.props.loadMetaboliteData(file);
          },
          type: 'load',
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Clear metabolite data',
          onClick: function onClick() {
            return _this2.props.loadMetaboliteData(null);
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)('li', { name: 'divider' }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Time Series / Difference Mode',
          onClick: function onClick() {
            return _this2.props.timeSeriesBar();
          },
          disabledButtons: this.props.disabled_buttons
        })
      ),
      (0, _preact.h)(
        _Dropdown2.default,
        { name: 'Edit', rightMenu: 'true' },
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Pan mode' + (this.props.enable_keys ? ' (Z)' : ''),
          modeName: 'zoom',
          mode: this.props.mode,
          onClick: function onClick() {
            return _this2.props.setMode('zoom');
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Select mode' + (this.props.enable_keys ? ' (V)' : ''),
          modeName: 'brush',
          mode: this.props.mode,
          onClick: function onClick() {
            return _this2.props.setMode('brush');
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Add reaction mode' + (this.props.enable_keys ? ' (N)' : ''),
          modeName: 'build',
          mode: this.props.mode,
          onClick: function onClick() {
            return _this2.props.setMode('build');
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Rotate mode' + (this.props.enable_keys ? ' (R)' : ''),
          modeName: 'rotate',
          mode: this.props.mode,
          onClick: function onClick() {
            return _this2.props.setMode('rotate');
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Text mode' + (this.props.enable_keys ? ' (T)' : ''),
          modeName: 'text',
          mode: this.props.mode,
          onClick: function onClick() {
            return _this2.props.setMode('text');
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)('li', { name: 'divider' }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Delete' + (this.props.enable_keys ? ' (Del)' : ''),
          onClick: function onClick() {
            return _this2.props.deleteSelected();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Undo' + (this.props.enable_keys ? ' (Ctrl+Z)' : ''),
          onClick: function onClick() {
            return _this2.props.undo();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Redo' + (this.props.enable_keys ? ' (Ctrl+Shift+Z)' : ''),
          onClick: function onClick() {
            return _this2.props.redo();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Toggle primary/secondary' + (this.props.enable_keys ? ' (P)' : ''),
          onClick: function onClick() {
            return _this2.props.togglePrimary();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Rotate reactant locations' + (this.props.enable_keys ? ' (C)' : ''),
          onClick: function onClick() {
            return _this2.props.cyclePrimary();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Select all' + (this.props.enable_keys ? ' (Ctrl+A)' : ''),
          onClick: function onClick() {
            return _this2.props.selectAll();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Select none' + (this.props.enable_keys ? ' (Ctrl+Shift+A)' : ''),
          onClick: function onClick() {
            return _this2.props.selectNone();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Invert selection',
          onClick: function onClick() {
            return _this2.props.invertSelection();
          },
          disabledButtons: this.props.disabled_buttons
        })
      ),
      (0, _preact.h)(
        _Dropdown2.default,
        { name: 'View', rightMenu: 'true' },
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Zoom in' + (this.props.enable_keys ? ' (+)' : ''),
          onClick: function onClick() {
            return _this2.props.zoomIn();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Zoom out' + (this.props.enable_keys ? ' (-)' : ''),
          onClick: function onClick() {
            return _this2.props.zoomOut();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Zoom to nodes' + (this.props.enable_keys ? ' (0)' : ''),
          onClick: function onClick() {
            return _this2.props.zoomExtentNodes();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Zoom to canvas' + (this.props.enable_keys ? ' (1)' : ''),
          onClick: function onClick() {
            return _this2.props.zoomExtentCanvas();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Find' + (this.props.enable_keys ? ' (F)' : ''),
          onClick: function onClick() {
            return _this2.props.search();
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)(_MenuButton2.default, {
          name: !this.props.beziers_enabled ? 'Show control points' + (this.props.enable_keys ? ' (B)' : '') : 'Hide control points' + (this.props.enable_keys ? ' (B)' : ''),
          onClick: function onClick() {
            _this2.props.toggleBeziers();
            _this2.props.setMode(_this2.props.mode);
          },
          disabledButtons: this.props.disabled_buttons
        }),
        (0, _preact.h)('li', { name: 'divider' }),
        (0, _preact.h)(_MenuButton2.default, {
          name: 'Settings' + (this.props.enable_keys ? ' (,)' : ''),
          onClick: function onClick() {
            return _this2.props.renderSettingsMenu();
          },
          disabledButtons: this.props.disabled_buttons,
          type: 'settings'
        })
      ),
      (0, _preact.h)(
        'a',
        { className: 'helpButton', target: '#', href: 'https://escher.readthedocs.org' },
        '?'
      )
    );
  };

  return BuilderMenuBar;
}(_preact.Component);

exports.default = BuilderMenuBar;

/***/ }),
/* 207 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

__webpack_require__(208);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Dropdown. Handles the behavior of the menu bar and the dropdowns. Composed of
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * a menu button and a corresponding menu that displays when the button is
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * clicked.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */

/** @jsx h */


var Dropdown = function (_Component) {
  _inherits(Dropdown, _Component);

  function Dropdown(props) {
    _classCallCheck(this, Dropdown);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {
      visible: null
    };
    _this.setWrapperRef = _this.setWrapperRef.bind(_this);
    _this.handleClickOutside = _this.handleClickOutside.bind(_this);
    return _this;
  }

  Dropdown.prototype.componentWillMount = function componentWillMount() {
    this.setState({
      visible: false
    });
  };

  Dropdown.prototype.componentDidMount = function componentDidMount() {
    document.addEventListener('mouseup', this.handleClickOutside);
  };

  // Reference for hiding the menu when a mouse event happens outside


  Dropdown.prototype.setWrapperRef = function setWrapperRef(node) {
    this.wrapperRef = node;
  };

  Dropdown.prototype.handleClickOutside = function handleClickOutside(event) {
    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {
      this.setState({ visible: false });
    }
  };

  Dropdown.prototype.render = function render() {
    var _this2 = this;

    return (0, _preact.h)(
      'li',
      { className: 'dropdown' },
      (0, _preact.h)(
        'div',
        {
          className: 'dropdownButton',
          tabindex: '0',
          ref: this.setWrapperRef,
          onClick: function onClick() {
            return _this2.setState({ visible: !_this2.state.visible });
          }
        },
        this.props.name,
        '\xA0',
        (0, _preact.h)('i', { className: 'icon-down-dir', style: { fontSize: '14px' } })
      ),
      (0, _preact.h)(
        'ul',
        {
          className: 'menu',
          style: this.state.visible ? { display: 'block' } : { display: 'none' },
          id: this.props.rightMenu === 'true' ? 'rightMenu' : ''
        },
        this.props.children.map(function (listItem) {
          if (listItem.attributes.name === 'divider') {
            return (0, _preact.h)('li', {
              style: {
                height: '1px',
                backgroundColor: '#e5e5e5',
                padding: '0',
                margin: '8px 0'
              }
            });
          } else {
            return listItem;
          }
        })
      )
    );
  };

  return Dropdown;
}(_preact.Component);

exports.default = Dropdown;

/***/ }),
/* 208 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(209);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./Dropdown.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./Dropdown.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 209 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .menuBar{list-style-type:none;padding:0 3px;position:relative;margin:5px 0;background-color:#fff;border:1px solid #ddd;display:inline-flex;box-sizing:border-box;width:310px}.escher-container .dropdown{position:relative;float:left;box-sizing:border-box;font-size:12px;border-radius:3px;margin-bottom:0;font-weight:400!important;text-align:center;vertical-align:middle;-ms-touch-action:none;touch-action:none;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.escher-container .dropdownButton{color:#d9230f!important;border:1px solid transparent;padding:6px 4px}.escher-container .helpButton{color:#d9230f!important;padding:0 5px;background-color:#f5f5f5!important;border:0!important;text-decoration:unset;height:fit-content;position:absolute;right:0;font-size:12px}.escher-container .dropdownButton:focus,.escher-container .dropdownButton:hover,.escher-container .helpButton:focus,.escher-container .helpButton:hover{color:#91170a!important;text-decoration:underline}@media (min-width:550px){.escher-container .menuBar{width:410px;padding:0 3px}.escher-container .dropdown{font-size:18px}.escher-container .dropdownButton{padding:6px 7px}.escher-container .helpButton{font-size:16px}}.escher-container .menu{box-sizing:border-box;font-weight:400!important;word-spacing:0;position:absolute;white-space:nowrap;top:103%;left:-1%;z-index:1000;display:block;float:none;min-width:160px;padding:5px 0;list-style:none;font-size:13px;box-shadow:0 6px 12px rgba(0,0,0,.175);background-clip:padding-box;border:1px solid #ddd;background-color:hsla(0,0%,100%,.95);border-radius:0;margin:0;text-align:left}.escher-container #rightMenu{left:auto;right:-2%}.escher-container .menu li:hover{background-color:#d9230f;color:#fff}.escher-container .menu li,.menu label{font-size:15px;display:block;font-weight:400!important;color:#444}.escher-container .menuBar>.dropdown+.dropdown{margin-left:2px}.escher-container .menu.ul.li{background-color:hsla(0,0%,100%,.95)}.escher-container .menuButton{box-sizing:border-box;width:100%;padding:5px 20px;margin:0;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.escher-container .menuButton:hover,.escher-container label:focus,.menuButton:focus{background-color:#d9230f;color:#fff}.escher-container input[type=file]{display:none}.escher-container #disabled{color:#e0e0e0}#disabled:focus,.escher-container #disabled:hover{background-color:hsla(0,0%,100%,.95);cursor:default}.escher-container .menuBar .icon-down-dir{margin-left:-5px}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/Dropdown.css"],"names":[],"mappings":"AAAA,2BAEE,qBAAsB,AACtB,cAAe,AACf,kBAAmB,AACnB,aAAgB,AAChB,sBAAwB,AACxB,sBAAuB,AACvB,oBAAqB,AACrB,sBAAuB,AACvB,WAAa,CACd,AAED,4BACE,kBAAmB,AACnB,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,kBAAmB,AACnB,gBAAiB,AACjB,0BAA8B,AAC9B,kBAAmB,AACnB,sBAAuB,AACvB,sBAAuB,AACvB,kBAAmB,AACnB,eAAgB,AAChB,2BAA4B,AAC5B,yBAA0B,AAC1B,wBAAyB,AACzB,sBAAuB,AACvB,qBAAsB,AACtB,gBAAkB,CACnB,AAED,kCACE,wBAAyB,AACzB,6BAA8B,AAC9B,eAAiB,CAClB,AAED,8BACE,wBAAyB,AACzB,cAAiB,AACjB,mCAAoC,AACpC,mBAAoB,AACpB,sBAAuB,AACvB,mBAAoB,AACpB,kBAAmB,AACnB,QAAS,AACT,cAAgB,CACjB,AAOD,wJACE,wBAAyB,AACzB,yBAA2B,CAC5B,AAED,yBACE,2BACE,YAAa,AACb,aAAe,CAChB,AAED,4BACE,cAAgB,CACjB,AAED,kCACE,eAAiB,CAClB,AAED,8BACE,cAAgB,CACjB,CACF,AAED,wBACE,sBAAuB,AACvB,0BAA8B,AAC9B,eAAgB,AAChB,kBAAmB,AACnB,mBAAoB,AACpB,SAAU,AACV,SAAU,AACV,aAAc,AACd,cAAe,AACf,WAAY,AACZ,gBAAiB,AACjB,cAAe,AACf,gBAAiB,AACjB,eAAgB,AAChB,uCAAyC,AACzC,4BAA6B,AAC7B,sBAAuB,AACvB,qCAA4C,AAC5C,gBAAiB,AACjB,SAAU,AACV,eAAiB,CAClB,AAED,6BACE,UAAW,AACX,SAAW,CACZ,AAED,iCACE,yBAA0B,AAC1B,UAAe,CAChB,AAED,uCACE,eAAgB,AAChB,cAAe,AACf,0BAA8B,AAC9B,UAAe,CAChB,AAED,+CACE,eAAgB,CACjB,AAED,8BACE,oCAA4C,CAC7C,AAED,8BACE,sBAAuB,AACvB,WAAY,AACZ,iBAAkB,AAClB,SAAU,AACV,eAAgB,AAChB,2BAA4B,AAC5B,yBAA0B,AAC1B,wBAAyB,AACzB,sBAAuB,AACvB,qBAAsB,AACtB,gBAAkB,CACnB,AAOD,oFACE,yBAA0B,AAC1B,UAAe,CAChB,AAED,mCACE,YAAc,CACf,AAED,4BACE,aAAe,CAChB,AAED,kDACE,qCAA4C,AAC5C,cAAgB,CACjB,AAED,0CACE,gBAAkB,CACnB","file":"Dropdown.css","sourcesContent":[".escher-container .menuBar {\n  box-sizing: border-box;\n  list-style-type: none;\n  padding: 0 3px;\n  position: relative;\n  margin: 5px 0px;\n  background-color: white;\n  border: 1px solid #ddd;\n  display: inline-flex;\n  box-sizing: border-box;\n  width: 310px;\n}\n\n.escher-container .dropdown {\n  position: relative;\n  float: left;\n  box-sizing: border-box;\n  font-size: 12px;\n  border-radius: 3px;\n  margin-bottom: 0;\n  font-weight: normal!important;\n  text-align: center;\n  vertical-align: middle;\n  -ms-touch-action: none;\n  touch-action: none;\n  cursor: pointer;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .dropdownButton {\n  color: #d9230f!important;\n  border: 1px solid transparent;\n  padding: 6px 4px;\n}\n\n.escher-container .helpButton {\n  color: #d9230f!important;\n  padding: 0px 5px;\n  background-color: #f5f5f5!important;\n  border: 0!important;\n  text-decoration: unset;\n  height: fit-content;\n  position: absolute;\n  right: 0;\n  font-size: 12px;\n}\n\n.escher-container .dropdownButton:focus, .escher-container .helpButton:focus {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n.escher-container .dropdownButton:hover, .escher-container .helpButton:hover {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n@media (min-width: 550px) {\n  .escher-container .menuBar {\n    width: 410px;\n    padding: 0 3px;\n  }\n\n  .escher-container .dropdown {\n    font-size: 18px;\n  }\n\n  .escher-container .dropdownButton {\n    padding: 6px 7px;\n  }\n\n  .escher-container .helpButton {\n    font-size: 16px;\n  }\n}\n\n.escher-container .menu {\n  box-sizing: border-box;\n  font-weight: normal!important;\n  word-spacing: 0;\n  position: absolute;\n  white-space: nowrap;\n  top: 103%;\n  left: -1%;\n  z-index: 1000;\n  display: block;\n  float: none;\n  min-width: 160px;\n  padding: 5px 0;\n  list-style: none;\n  font-size: 13px;\n  box-shadow: 0 6px 12px rgba(0,0,0,0.175);\n  background-clip: padding-box;\n  border: 1px solid #ddd;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 0;\n  margin: 0;\n  text-align: left;\n}\n\n.escher-container #rightMenu {\n  left: auto;\n  right: -2%;\n}\n\n.escher-container .menu li:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menu li, .menu label {\n  font-size: 15px;\n  display: block;\n  font-weight: normal!important;\n  color: #444444;\n}\n\n.escher-container .menuBar>.dropdown+.dropdown {\n  margin-left: 2px\n}\n\n.escher-container .menu.ul.li {\n  background-color: rgba(255, 255, 255, 0.95);\n}\n\n.escher-container .menuButton {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 5px 20px;\n  margin: 0;\n  cursor: pointer;\n  -webkit-touch-callout: none; /* Prevents text selection on touch devices */\n  -webkit-user-select: none; /* Prevents text selection. Other */\n  -khtml-user-select: none; /* Prevents text selection in Chrome, Safari, Opera */\n  -moz-user-select: none; /* Prevents text selection in Firefox */\n  -ms-user-select: none; /* Prevents text selection in IE */\n  user-select: none; /* Prevents text selection. Default */\n}\n\n.escher-container label:focus, .menuButton:focus {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menuButton:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container input[type=\"file\"] {\n  display: none;\n}\n\n.escher-container #disabled {\n  color: #e0e0e0;\n}\n\n.escher-container #disabled:hover, #disabled:focus {\n  background-color: rgba(255, 255, 255, 0.95);\n  cursor: default;\n}\n\n.escher-container .menuBar .icon-down-dir {\n  margin-left: -5px;\n}\n"],"sourceRoot":""}]);

// exports


/***/ }),
/* 210 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

var _underscore = __webpack_require__(2);

var _ = _interopRequireWildcard(_underscore);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MenuButton. Handles the individual menu items within the Dropdown menus.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Takes in a name and a function and binds the function to a button. If the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * type prop is defined as 'load' will instead render a label with an attached
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * hidden input[file] element. If the modeName prop is given and the mode prop
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * matches modeName (both strings) it will render a checkmark to the left of the
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * text to signify the current mode.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */

/** @jsx h */


var MenuButton = function (_Component) {
  _inherits(MenuButton, _Component);

  function MenuButton(props) {
    _classCallCheck(this, MenuButton);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {
      disabled: _.contains(props.disabledButtons, props.name)
    };
    return _this;
  }

  MenuButton.prototype.handleFileInput = function handleFileInput(file) {
    var _this2 = this;

    var reader = new window.FileReader();
    reader.onload = function (event) {
      _this2.props.onClick(JSON.parse(event.target.result));
    };
    if (file !== undefined) {
      reader.readAsText(file);
    }
  };

  MenuButton.prototype.render = function render() {
    var _this3 = this;

    if (this.props.type === 'load') {
      return (0, _preact.h)(
        'label',
        {
          className: 'menuButton',
          tabindex: this.state.disabled ? '-1' : '0',
          id: this.state.disabled ? 'disabled' : ''
        },
        (0, _preact.h)('input', {
          type: 'file',
          onChange: function onChange(event) {
            return _this3.handleFileInput(event.target.files[0]);
          },
          disabled: this.state.disabled
        }),
        this.props.name
      );
    } else if (this.props.modeName !== undefined && this.props.mode === this.props.modeName) {
      return (0, _preact.h)(
        'li',
        {
          className: 'menuButton',
          tabindex: this.state.disabled ? '-1' : '0',
          onClick: this.props.onClick,
          id: this.state.disabled ? 'disabled' : ''
        },
        (0, _preact.h)(
          'i',
          { className: 'icon-ok', 'aria-hidden': 'true' },
          '\xA0'
        ),
        this.props.name
      );
    } else {
      return (0, _preact.h)(
        'li',
        {
          className: 'menuButton',
          tabindex: this.state.disabled ? '-1' : '0',
          onClick: this.state.disabled ? null : this.props.onClick,
          id: this.state.disabled ? 'disabled' : ''
        },
        this.props.name
      );
    }
  };

  return MenuButton;
}(_preact.Component);

exports.default = MenuButton;

/***/ }),
/* 211 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _preact = __webpack_require__(3);

__webpack_require__(212);

var _underscore = __webpack_require__(2);

var _ = _interopRequireWildcard(_underscore);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** SearchBar */

/** @jsx h */


var SearchBar = function (_Component) {
  _inherits(SearchBar, _Component);

  function SearchBar(props) {
    _classCallCheck(this, SearchBar);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {
      visible: props.visible,
      current: 0,
      searchItem: null,
      counter: '',
      clearEscape: _this.props.map.key_manager.add_escape_listener(function () {
        return _this.close();
      }, true),
      clearNext: _this.props.map.key_manager.add_key_listener(['enter', 'ctrl+g'], function () {
        return _this.next();
      }, false),
      clearPrevious: _this.props.map.key_manager.add_key_listener(['shift+enter', 'shift+ctrl+g'], function () {
        return _this.previous();
      }, false)
    };
    return _this;
  }

  SearchBar.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {
    var _this2 = this;

    this.setState(_extends({}, nextProps, {
      current: 0,
      results: null,
      searchItem: null,
      counter: '',
      clearEscape: this.props.map.key_manager.add_escape_listener(function () {
        return _this2.close();
      }, true),
      clearNext: this.props.map.key_manager.add_key_listener(['enter', 'ctrl+g'], function () {
        return _this2.next();
      }, false),
      clearPrevious: this.props.map.key_manager.add_key_listener(['shift+enter', 'shift+ctrl+g'], function () {
        return _this2.previous();
      }, false)
    }));
  };

  SearchBar.prototype.componentDidUpdate = function componentDidUpdate() {
    this.inputRef.focus();
  };

  /**
   * Updates map focus and search bar counter when new search term is entered.
   * @param {string} value - Search term
   */


  SearchBar.prototype.handleInput = function handleInput(value) {
    if (!this.state.visible) {
      return;
    }
    var results = this.dropDuplicates(this.props.map.search_index.find(value));
    var counter = '';
    if (results === null || !value) {
      this.props.map.highlight(null);
    } else if (results.length === 0) {
      counter = '0 / 0';
      this.props.map.highlight(null);
    } else {
      // Catches case where new search term shortens results to less than current index
      if (this.state.current >= results.length) {
        this.setState({
          current: 0
        });
      }
      counter = this.state.current + 1 + '/' + results.length;
      var r = results[this.state.current];
      if (r.type === 'reaction') {
        this.props.map.zoom_to_reaction(r.reaction_id);
        this.props.map.highlight_reaction(r.reaction_id);
      } else if (r.type === 'metabolite') {
        this.props.map.zoom_to_node(r.node_id);
        this.props.map.highlight_node(r.node_id);
      } else if (r.type === 'text_label') {
        this.props.map.zoom_to_text_label(r.text_label_id);
        this.props.map.highlight_text_label(r.text_label_id);
      } else {
        throw new Error('Bad search index data type: ' + r.type);
      }
    }
    this.setState({
      searchItem: value,
      current: 0,
      counter: counter,
      results: results
    });
  };

  SearchBar.prototype.dropDuplicates = function dropDuplicates(results) {
    var compKeys = {
      metabolite: {
        type: 'm',
        key: 'node_id'
      },
      reaction: {
        type: 'r',
        key: 'reaction_id'
      },
      text_label: {
        type: 't',
        key: 'text_label_id'
      }
    };
    return _.uniq(results, function (item) {
      // make a string for fast comparison
      var _compKeys$item$type = compKeys[item.type],
          type = _compKeys$item$type.type,
          key = _compKeys$item$type.key;

      return '' + type + item[key];
    });
  };

  SearchBar.prototype.next = function next() {
    if (!(this.state.results && this.state.results.length > 0)) {
      return;
    }
    this.update((this.state.current + 1) % this.state.results.length);
  };

  SearchBar.prototype.previous = function previous() {
    if (!(this.state.results && this.state.results.length > 0)) {
      return;
    }
    this.update((this.state.current + this.state.results.length - 1) % this.state.results.length);
  };

  /**
   * Updates the map focus and search bar counter for when buttons are clicked.
   * @param {number} current - index of current search result
   */


  SearchBar.prototype.update = function update(current) {
    this.setState({
      current: current,
      counter: current + 1 + '/' + this.state.results.length
    });
    var r = this.state.results[current];
    if (r.type === 'reaction') {
      this.props.map.zoom_to_reaction(r.reaction_id);
      this.props.map.highlight_reaction(r.reaction_id);
    } else if (r.type === 'metabolite') {
      this.props.map.zoom_to_node(r.node_id);
      this.props.map.highlight_node(r.node_id);
    } else if (r.type === 'text_label') {
      this.props.map.zoom_to_text_label(r.text_label_id);
      this.props.map.highlight_text_label(r.text_label_id);
    } else {
      throw new Error('Bad search index data type: ' + r.type);
    }
  };

  SearchBar.prototype.close = function close() {
    this.props.map.highlight(null);
    this.setState({ visible: false });
    this.state.clearNext();
    this.state.clearPrevious();
    this.state.clearEscape();
  };

  SearchBar.prototype.is_visible = function is_visible() {
    return this.state.visible;
  };

  SearchBar.prototype.render = function render() {
    var _this3 = this;

    return (0, _preact.h)(
      'div',
      {
        className: 'searchContainer',
        style: this.state.visible ? { display: 'inline-flex' } : { display: 'none' } },
      (0, _preact.h)(
        'div',
        { className: 'searchPanel' },
        (0, _preact.h)('input', {
          className: 'searchField',
          value: this.state.searchItem,
          onInput: function onInput(event) {
            return _this3.handleInput(event.target.value);
          },
          ref: function ref(input) {
            _this3.inputRef = input;
          }
        }),
        (0, _preact.h)(
          'button',
          { className: 'searchBarButton left btn', onClick: function onClick() {
              return _this3.previous();
            } },
          (0, _preact.h)('i', { className: 'icon-left-open' })
        ),
        (0, _preact.h)(
          'button',
          { className: 'searchBarButton right btn', onClick: function onClick() {
              return _this3.next();
            } },
          (0, _preact.h)('i', { className: 'icon-right-open' })
        ),
        (0, _preact.h)(
          'div',
          { className: 'searchCounter' },
          this.state.counter
        )
      ),
      (0, _preact.h)(
        'button',
        {
          className: 'searchBarButton btn',
          onClick: function onClick() {
            return _this3.close();
          }
        },
        (0, _preact.h)('i', { className: 'icon-cancel', style: { marginTop: '-2px', verticalAlign: 'middle' } })
      )
    );
  };

  return SearchBar;
}(_preact.Component);

exports.default = SearchBar;

/***/ }),
/* 212 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(213);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./SearchBar.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./SearchBar.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 213 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .searchContainer *{box-sizing:border-box}.escher-container .searchContainer{box-sizing:border-box;display:inline-flex;justify-content:space-between;background-color:hsla(0,0%,100%,.95);padding:3px;border:1px solid #ddd;margin:-2px 0 0;width:410px}.escher-container .searchContainer .searchBarButton{border-radius:4px;text-align:center;vertical-align:middle;font-size:14px!important;font-weight:400;height:29px;width:34px;padding-top:0}.escher-container .searchContainer .searchBarButton.left{border-top-right-radius:0;border-bottom-right-radius:0}.escher-container .searchContainer .searchBarButton.right{border-top-left-radius:0;border-bottom-left-radius:0;margin-left:-1px}.escher-container .searchContainer .searchBarButton:active{background-image:linear-gradient(#3f4141,#474949 6%,#4f5151)}.escher-container .searchContainer .searchField{color:#777;display:inline-block;border:1px solid #ddd;margin-right:4px;width:114px;height:29px;border-radius:3px;font-size:13px}.escher-container .searchContainer .searchCounter{display:inline-flex;color:#777;padding:0 8px;font-size:13px}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/SearchBar.css"],"names":[],"mappings":"AAAA,qCACE,qBAAuB,CACxB,AAED,mCACE,sBAAuB,AACvB,oBAAqB,AACrB,8BAA+B,AAC/B,qCAA4C,AAC5C,YAAa,AACb,sBAAuB,AACvB,gBAAiB,AACjB,WAAa,CACd,AAED,oDACE,kBAAmB,AACnB,kBAAmB,AACnB,sBAAuB,AACvB,yBAA0B,AAC1B,gBAAiB,AACjB,YAAa,AACb,WAAY,AACZ,aAAiB,CAClB,AAED,yDACE,0BAA6B,AAC7B,4BAAgC,CACjC,AAED,0DACE,yBAA4B,AAC5B,4BAA+B,AAC/B,gBAAkB,CACnB,AAED,2DACE,4DAAgE,CACjE,AAED,gDACE,WAAY,AACZ,qBAAsB,AACtB,sBAAuB,AACvB,iBAAkB,AAClB,YAAa,AACb,YAAa,AACb,kBAAmB,AACnB,cAAgB,CACjB,AAED,kDACE,oBAAqB,AACrB,WAAY,AACZ,cAAe,AACf,cAAgB,CACjB","file":"SearchBar.css","sourcesContent":[".escher-container .searchContainer * {\n  box-sizing: border-box;\n}\n\n.escher-container .searchContainer {\n  box-sizing: border-box;\n  display: inline-flex;\n  justify-content: space-between;\n  background-color: rgba(255, 255, 255, 0.95);\n  padding: 3px;\n  border: 1px solid #DDD;\n  margin: -2px 0 0;\n  width: 410px;\n}\n\n.escher-container .searchContainer .searchBarButton {\n  border-radius: 4px;\n  text-align: center;\n  vertical-align: middle;\n  font-size: 14px!important;\n  font-weight: 400;\n  height: 29px;\n  width: 34px;\n  padding-top: 0px;\n}\n\n.escher-container .searchContainer .searchBarButton.left {\n  border-top-right-radius: 0px;\n  border-bottom-right-radius: 0px;\n}\n\n.escher-container .searchContainer .searchBarButton.right {\n  border-top-left-radius: 0px;\n  border-bottom-left-radius: 0px;\n  margin-left: -1px;\n}\n\n.escher-container .searchContainer .searchBarButton:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .searchContainer .searchField {\n  color: #777;\n  display: inline-block;\n  border: 1px solid #DDD;\n  margin-right: 4px;\n  width: 114px;\n  height: 29px;\n  border-radius: 3px;\n  font-size: 13px;\n}\n\n.escher-container .searchContainer .searchCounter {\n  display: inline-flex;\n  color: #777;\n  padding: 0 8px;\n  font-size: 13px;\n}"],"sourceRoot":""}]);

// exports


/***/ }),
/* 214 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__map__ = __webpack_require__(41);


/* unused harmony default export */ var _unused_webpack_default_export = (function() {
  var keys = [],
      sortKeys = [],
      sortValues,
      rollup,
      nest;

  function apply(array, depth, createResult, setResult) {
    if (depth >= keys.length) {
      if (sortValues != null) array.sort(sortValues);
      return rollup != null ? rollup(array) : array;
    }

    var i = -1,
        n = array.length,
        key = keys[depth++],
        keyValue,
        value,
        valuesByKey = Object(__WEBPACK_IMPORTED_MODULE_0__map__["a" /* default */])(),
        values,
        result = createResult();

    while (++i < n) {
      if (values = valuesByKey.get(keyValue = key(value = array[i]) + "")) {
        values.push(value);
      } else {
        valuesByKey.set(keyValue, [value]);
      }
    }

    valuesByKey.each(function(values, key) {
      setResult(result, key, apply(values, depth, createResult, setResult));
    });

    return result;
  }

  function entries(map, depth) {
    if (++depth > keys.length) return map;
    var array, sortKey = sortKeys[depth - 1];
    if (rollup != null && depth >= keys.length) array = map.entries();
    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });
    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;
  }

  return nest = {
    object: function(array) { return apply(array, 0, createObject, setObject); },
    map: function(array) { return apply(array, 0, createMap, setMap); },
    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },
    key: function(d) { keys.push(d); return nest; },
    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },
    sortValues: function(order) { sortValues = order; return nest; },
    rollup: function(f) { rollup = f; return nest; }
  };
});

function createObject() {
  return {};
}

function setObject(object, key, value) {
  object[key] = value;
}

function createMap() {
  return Object(__WEBPACK_IMPORTED_MODULE_0__map__["a" /* default */])();
}

function setMap(map, key, value) {
  map.set(key, value);
}


/***/ }),
/* 215 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__map__ = __webpack_require__(41);


function Set() {}

var proto = __WEBPACK_IMPORTED_MODULE_0__map__["a" /* default */].prototype;

Set.prototype = set.prototype = {
  constructor: Set,
  has: proto.has,
  add: function(value) {
    value += "";
    this[__WEBPACK_IMPORTED_MODULE_0__map__["b" /* prefix */] + value] = value;
    return this;
  },
  remove: proto.remove,
  clear: proto.clear,
  values: proto.keys,
  size: proto.size,
  empty: proto.empty,
  each: proto.each
};

function set(object, f) {
  var set = new Set;

  // Copy constructor.
  if (object instanceof Set) object.each(function(value) { set.add(value); });

  // Otherwise, assume it’s an array.
  else if (object) {
    var i = -1, n = object.length;
    if (f == null) while (++i < n) set.add(object[i]);
    else while (++i < n) set.add(f(object[i], i, object));
  }

  return set;
}

/* unused harmony default export */ var _unused_webpack_default_export = (set);


/***/ }),
/* 216 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(map) {
  var keys = [];
  for (var key in map) keys.push(key);
  return keys;
});


/***/ }),
/* 217 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(map) {
  var values = [];
  for (var key in map) values.push(map[key]);
  return values;
});


/***/ }),
/* 218 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(map) {
  var entries = [];
  for (var key in map) entries.push({key: key, value: map[key]});
  return entries;
});


/***/ }),
/* 219 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__type__ = __webpack_require__(28);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__type__["a" /* default */])("text/html", function(xhr) {
  return document.createRange().createContextualFragment(xhr.responseText);
}));


/***/ }),
/* 220 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__type__ = __webpack_require__(28);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__type__["a" /* default */])("application/json", function(xhr) {
  return JSON.parse(xhr.responseText);
}));


/***/ }),
/* 221 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__type__ = __webpack_require__(28);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__type__["a" /* default */])("text/plain", function(xhr) {
  return xhr.responseText;
}));


/***/ }),
/* 222 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__type__ = __webpack_require__(28);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__type__["a" /* default */])("application/xml", function(xhr) {
  var xml = xhr.responseXML;
  if (!xml) throw new Error("parse error");
  return xml;
}));


/***/ }),
/* 223 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_dsv__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dsv__ = __webpack_require__(73);



/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_1__dsv__["a" /* default */])("text/csv", __WEBPACK_IMPORTED_MODULE_0_d3_dsv__["csvParse"]));


/***/ }),
/* 224 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return csvParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return csvParseRows; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return csvFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return csvFormatRows; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dsv__ = __webpack_require__(43);


var csv = Object(__WEBPACK_IMPORTED_MODULE_0__dsv__["a" /* default */])(",");

var csvParse = csv.parse;
var csvParseRows = csv.parseRows;
var csvFormat = csv.format;
var csvFormatRows = csv.formatRows;


/***/ }),
/* 225 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return tsvParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return tsvParseRows; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return tsvFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return tsvFormatRows; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dsv__ = __webpack_require__(43);


var tsv = Object(__WEBPACK_IMPORTED_MODULE_0__dsv__["a" /* default */])("\t");

var tsvParse = tsv.parse;
var tsvParseRows = tsv.parseRows;
var tsvFormat = tsv.format;
var tsvFormatRows = tsv.formatRows;


/***/ }),
/* 226 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_dsv__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dsv__ = __webpack_require__(73);



/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_1__dsv__["a" /* default */])("text/tab-separated-values", __WEBPACK_IMPORTED_MODULE_0_d3_dsv__["tsvParse"]));


/***/ }),
/* 227 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/* FileSaver.js
 * A saveAs() FileSaver implementation.
 * 1.3.2
 * 2016-06-16 18:25:19
 *
 * By Eli Grey, http://eligrey.com
 * License: MIT
 *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md
 */

/*global self */
/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

var saveAs = saveAs || (function(view) {
	"use strict";
	// IE <10 is explicitly unsupported
	if (typeof view === "undefined" || typeof navigator !== "undefined" && /MSIE [1-9]\./.test(navigator.userAgent)) {
		return;
	}
	var
		  doc = view.document
		  // only get URL when necessary in case Blob.js hasn't overridden it yet
		, get_URL = function() {
			return view.URL || view.webkitURL || view;
		}
		, save_link = doc.createElementNS("http://www.w3.org/1999/xhtml", "a")
		, can_use_save_link = "download" in save_link
		, click = function(node) {
			var event = new MouseEvent("click");
			node.dispatchEvent(event);
		}
		, is_safari = /constructor/i.test(view.HTMLElement) || view.safari
		, is_chrome_ios =/CriOS\/[\d]+/.test(navigator.userAgent)
		, throw_outside = function(ex) {
			(view.setImmediate || view.setTimeout)(function() {
				throw ex;
			}, 0);
		}
		, force_saveable_type = "application/octet-stream"
		// the Blob API is fundamentally broken as there is no "downloadfinished" event to subscribe to
		, arbitrary_revoke_timeout = 1000 * 40 // in ms
		, revoke = function(file) {
			var revoker = function() {
				if (typeof file === "string") { // file is an object URL
					get_URL().revokeObjectURL(file);
				} else { // file is a File
					file.remove();
				}
			};
			setTimeout(revoker, arbitrary_revoke_timeout);
		}
		, dispatch = function(filesaver, event_types, event) {
			event_types = [].concat(event_types);
			var i = event_types.length;
			while (i--) {
				var listener = filesaver["on" + event_types[i]];
				if (typeof listener === "function") {
					try {
						listener.call(filesaver, event || filesaver);
					} catch (ex) {
						throw_outside(ex);
					}
				}
			}
		}
		, auto_bom = function(blob) {
			// prepend BOM for UTF-8 XML and text/* types (including HTML)
			// note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF
			if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
				return new Blob([String.fromCharCode(0xFEFF), blob], {type: blob.type});
			}
			return blob;
		}
		, FileSaver = function(blob, name, no_auto_bom) {
			if (!no_auto_bom) {
				blob = auto_bom(blob);
			}
			// First try a.download, then web filesystem, then object URLs
			var
				  filesaver = this
				, type = blob.type
				, force = type === force_saveable_type
				, object_url
				, dispatch_all = function() {
					dispatch(filesaver, "writestart progress write writeend".split(" "));
				}
				// on any filesys errors revert to saving with object URLs
				, fs_error = function() {
					if ((is_chrome_ios || (force && is_safari)) && view.FileReader) {
						// Safari doesn't allow downloading of blob urls
						var reader = new FileReader();
						reader.onloadend = function() {
							var url = is_chrome_ios ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');
							var popup = view.open(url, '_blank');
							if(!popup) view.location.href = url;
							url=undefined; // release reference before dispatching
							filesaver.readyState = filesaver.DONE;
							dispatch_all();
						};
						reader.readAsDataURL(blob);
						filesaver.readyState = filesaver.INIT;
						return;
					}
					// don't create more object URLs than needed
					if (!object_url) {
						object_url = get_URL().createObjectURL(blob);
					}
					if (force) {
						view.location.href = object_url;
					} else {
						var opened = view.open(object_url, "_blank");
						if (!opened) {
							// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html
							view.location.href = object_url;
						}
					}
					filesaver.readyState = filesaver.DONE;
					dispatch_all();
					revoke(object_url);
				}
			;
			filesaver.readyState = filesaver.INIT;

			if (can_use_save_link) {
				object_url = get_URL().createObjectURL(blob);
				setTimeout(function() {
					save_link.href = object_url;
					save_link.download = name;
					click(save_link);
					dispatch_all();
					revoke(object_url);
					filesaver.readyState = filesaver.DONE;
				});
				return;
			}

			fs_error();
		}
		, FS_proto = FileSaver.prototype
		, saveAs = function(blob, name, no_auto_bom) {
			return new FileSaver(blob, name || blob.name || "download", no_auto_bom);
		}
	;
	// IE 10+ (native saveAs)
	if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) {
		return function(blob, name, no_auto_bom) {
			name = name || blob.name || "download";

			if (!no_auto_bom) {
				blob = auto_bom(blob);
			}
			return navigator.msSaveOrOpenBlob(blob, name);
		};
	}

	FS_proto.abort = function(){};
	FS_proto.readyState = FS_proto.INIT = 0;
	FS_proto.WRITING = 1;
	FS_proto.DONE = 2;

	FS_proto.error =
	FS_proto.onwritestart =
	FS_proto.onprogress =
	FS_proto.onwrite =
	FS_proto.onabort =
	FS_proto.onerror =
	FS_proto.onwriteend =
		null;

	return saveAs;
}(
	   typeof self !== "undefined" && self
	|| typeof window !== "undefined" && window
	|| this.content
));
// `self` is undefined in Firefox for Android content script context
// while `this` is nsIContentFrameMessageManager
// with an attribute `content` that corresponds to the window

if (typeof module !== "undefined" && module.exports) {
  module.exports.saveAs = saveAs;
} else if (("function" !== "undefined" && __webpack_require__(74) !== null) && (__webpack_require__(75) !== null)) {
  !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
    return saveAs;
  }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
}


/***/ }),
/* 228 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** BuildInput

    Arguments
    ---------

    selection: A d3 selection for the BuildInput.

    map: A Map instance.

    zoom_container: A ZoomContainer instance.

    settings: A Settings instance.

*/

var utils = __webpack_require__(1);
var PlacedDiv = __webpack_require__(44);
var completely = __webpack_require__(229);
var DirectionArrow = __webpack_require__(230);
var CobraModel = __webpack_require__(45);
var _ = __webpack_require__(2);
var d3_select = __webpack_require__(0).select;
var d3_mouse = __webpack_require__(0).mouse;

var BuildInput = utils.make_class();
BuildInput.prototype = {
  init: init,
  setup_map_callbacks: setup_map_callbacks,
  setup_zoom_callbacks: setup_zoom_callbacks,
  is_visible: is_visible,
  toggle: toggle,
  show_dropdown: show_dropdown,
  hide_dropdown: hide_dropdown,
  place_at_selected: place_at_selected,
  place: place,
  reload_at_selected: reload_at_selected,
  reload: reload,
  toggle_start_reaction_listener: toggle_start_reaction_listener,
  hide_target: hide_target,
  show_target: show_target
};
module.exports = BuildInput;

function init(selection, map, zoom_container, settings) {
  // set up container
  var new_sel = selection.append('div').attr('id', 'rxn-input');
  this.placed_div = PlacedDiv(new_sel, map, { x: 240, y: 0 });
  this.placed_div.hide();

  // set up complete.ly
  var c = completely(new_sel.node(), { backgroundColor: '#eee' });

  d3_select(c.input);
  this.completely = c;
  // close button
  new_sel.append('button').attr('class', 'button input-close-button').text("×").on('mousedown', function () {
    this.hide_dropdown();
  }.bind(this));

  // map
  this.map = map;
  // set up the reaction direction arrow
  var default_angle = 90; // degrees
  this.direction_arrow = new DirectionArrow(map.sel);
  this.direction_arrow.set_rotation(default_angle);
  this.setup_map_callbacks(map);

  // zoom container
  this.zoom_container = zoom_container;
  this.setup_zoom_callbacks(zoom_container);

  // settings
  this.settings = settings;

  // toggle off
  this.toggle(false);
  this.target_coords = null;
}

function setup_map_callbacks(map) {
  // input
  map.callback_manager.set('select_metabolite_with_id.input', function (selected_node, coords) {
    if (this.is_active) {
      this.reload(selected_node, coords, false);
      this.show_dropdown(coords);
    }
    this.hide_target();
  }.bind(this));
  map.callback_manager.set('select_selectable.input', function (count, selected_node, coords) {
    this.hide_target();
    if (count == 1 && this.is_active && coords) {
      this.reload(selected_node, coords, false);
      this.show_dropdown(coords);
    } else {
      this.toggle(false);
    }
  }.bind(this));
  map.callback_manager.set('deselect_nodes', function () {
    this.direction_arrow.hide();
    this.hide_dropdown();
  }.bind(this));

  // svg export
  map.callback_manager.set('before_svg_export', function () {
    this.direction_arrow.hide();
    this.hide_target();
  }.bind(this));
}

function setup_zoom_callbacks(zoom_container) {
  zoom_container.callback_manager.set('zoom.input', function () {
    if (this.is_active) {
      this.place_at_selected();
    }
  }.bind(this));
}

function is_visible() {
  return this.placed_div.is_visible();
}

function toggle(on_off) {
  if (on_off === undefined) this.is_active = !this.is_active;else this.is_active = on_off;
  if (this.is_active) {
    this.toggle_start_reaction_listener(true);
    if (_.isNull(this.target_coords)) this.reload_at_selected();else this.placed_div.place(this.target_coords);
    this.show_dropdown();
    this.map.set_status('Click on the canvas or an existing metabolite');
    this.direction_arrow.show();
  } else {
    this.toggle_start_reaction_listener(false);
    this.hide_dropdown();
    this.map.set_status(null);
    this.direction_arrow.hide();
  }
}

function show_dropdown(coords) {
  // escape key
  this.clear_escape = this.map.key_manager.add_escape_listener(function () {
    this.hide_dropdown();
  }.bind(this), true);
  // dropdown
  this.completely.input.blur();
  this.completely.repaint();
  this.completely.setText('');
  this.completely.input.focus();
}

function hide_dropdown() {
  // escape key
  if (this.clear_escape) this.clear_escape();
  this.clear_escape = null;
  // dropdown
  this.placed_div.hide();
  this.completely.input.blur();
  this.completely.hideDropDown();
}

function place_at_selected() {
  /** Place autocomplete box at the first selected node. */
  // get the selected node
  this.map.deselect_text_labels();
  var selected_node = this.map.select_single_node();
  if (selected_node == null) return;
  var coords = { x: selected_node.x, y: selected_node.y };
  this.place(coords);
}

function place(coords) {
  this.placed_div.place(coords);
  this.direction_arrow.set_location(coords);
  this.direction_arrow.show();
}

function reload_at_selected() {
  /** Reload data for autocomplete box and redraw box at the first selected
      node. */
  // get the selected node
  this.map.deselect_text_labels();
  var selected_node = this.map.select_single_node();
  if (selected_node == null) return false;
  var coords = { x: selected_node.x, y: selected_node.y
    // reload the reaction input
  };this.reload(selected_node, coords, false);
  return true;
}

/**
 * Reload data for autocomplete box and redraw box at the new coordinates.
 */
function reload(selected_node, coords, starting_from_scratch) {
  // Try finding the selected node
  if (!starting_from_scratch && !selected_node) {
    console.error('No selected node, and not starting from scratch');
    return;
  }

  this.place(coords);

  if (this.map.cobra_model === null) {
    this.completely.setText('Cannot add: No model.');
    return;
  }

  // settings
  var show_names = this.settings.get_option('identifiers_on_map') === 'name';
  var allow_duplicates = this.settings.get_option('allow_building_duplicate_reactions');

  // Find selected
  var options = [],
      cobra_reactions = this.map.cobra_model.reactions,
      cobra_metabolites = this.map.cobra_model.metabolites,
      reactions = this.map.reactions,
      has_data_on_reactions = this.map.has_data_on_reactions,
      reaction_data = this.map.reaction_data,
      reaction_data_styles = this.map.reaction_data_styles,
      selected_m_name = selected_node ? show_names ? selected_node.name : selected_node.bigg_id : '',
      bold_mets_in_str = function bold_mets_in_str(str, mets) {
    return str.replace(new RegExp('(^| )(' + mets.join('|') + ')($| )', 'g'), '$1<b>$2</b>$3');
  };

  // for reactions
  var reaction_suggestions = {};
  for (var bigg_id in cobra_reactions) {
    var reaction = cobra_reactions[bigg_id];
    var reaction_name = reaction.name;
    var show_r_name = show_names ? reaction_name : bigg_id;

    // ignore drawn reactions
    if (!allow_duplicates && already_drawn(bigg_id, reactions)) {
      continue;
    }

    // check segments for match to selected metabolite
    for (var met_bigg_id in reaction.metabolites) {

      // if starting with a selected metabolite, check for that id
      if (starting_from_scratch || met_bigg_id == selected_node.bigg_id) {

        // don't add suggestions twice
        if (bigg_id in reaction_suggestions) continue;

        var met_name = cobra_metabolites[met_bigg_id].name;

        if (has_data_on_reactions) {
          options.push({ reaction_data: reaction.data,
            html: '<b>' + show_r_name + '</b>' + ': ' + reaction.data_string,
            matches: [show_r_name],
            id: bigg_id });
          reaction_suggestions[bigg_id] = true;
        } else {
          // get the metabolite names or IDs
          var mets = {};
          var show_met_names = [];
          var met_id;
          if (show_names) {
            for (met_id in reaction.metabolites) {
              var name = cobra_metabolites[met_id].name;
              mets[name] = reaction.metabolites[met_id];
              show_met_names.push(name);
            }
          } else {
            mets = utils.clone(reaction.metabolites);
            for (met_id in reaction.metabolites) {
              show_met_names.push(met_id);
            }
          }
          var show_gene_names = _.flatten(reaction.genes.map(function (g_obj) {
            return [g_obj.name, g_obj.bigg_id];
          }));
          // get the reaction string
          var reaction_string = CobraModel.build_reaction_string(mets, reaction.reversibility, reaction.lower_bound, reaction.upper_bound);
          options.push({
            html: '<b>' + show_r_name + '</b>' + '\t' + bold_mets_in_str(reaction_string, [selected_m_name]),
            matches: [show_r_name].concat(show_met_names).concat(show_gene_names),
            id: bigg_id
          });
          reaction_suggestions[bigg_id] = true;
        }
      }
    }
  }

  // Generate the array of reactions to suggest and sort it
  var sort_fn;
  if (has_data_on_reactions) {
    sort_fn = function sort_fn(x, y) {
      return Math.abs(y.reaction_data) - Math.abs(x.reaction_data);
    };
  } else {
    sort_fn = function sort_fn(x, y) {
      return x.html.toLowerCase() < y.html.toLowerCase() ? -1 : 1;
    };
  }
  options = options.sort(sort_fn);
  // set up the box with data
  var complete = this.completely;
  complete.options = options;

  // TODO test this behavior
  // if (strings_to_display.length==1) complete.setText(strings_to_display[0])
  // else complete.setText("")
  complete.setText('');

  var direction_arrow = this.direction_arrow,
      check_and_build = function (id) {
    if (id !== null) {
      // make sure the selected node exists, in case changes were made in the meantime
      if (starting_from_scratch) {
        this.map.new_reaction_from_scratch(id, coords, direction_arrow.get_rotation());
      } else {
        if (!(selected_node.node_id in this.map.nodes)) {
          console.error('Selected node no longer exists');
          this.hide_dropdown();
          return;
        }
        this.map.new_reaction_for_metabolite(id, selected_node.node_id, direction_arrow.get_rotation());
      }
    }
  }.bind(this);
  complete.onEnter = function (id) {
    this.setText('');
    this.onChange('');
    check_and_build(id);
  };

  //definitions
  function already_drawn(bigg_id, reactions) {
    for (var drawn_id in reactions) {
      if (reactions[drawn_id].bigg_id === bigg_id) return true;
    }
    return false;
  }
}

/**
 * Toggle listening for a click to place a new reaction on the canvas.
 */
function toggle_start_reaction_listener(on_off) {
  if (on_off === undefined) {
    this.start_reaction_listener = !this.start_reaction_listener;
  } else if (this.start_reaction_listener === on_off) {
    return;
  } else {
    this.start_reaction_listener = on_off;
  }

  if (this.start_reaction_listener) {
    this.map.sel.on('click.start_reaction', function (node) {
      // TODO fix this hack
      if (this.direction_arrow.dragging) return;
      // reload the reaction input
      var coords = { x: d3_mouse(node)[0],
        y: d3_mouse(node)[1]
        // unselect metabolites
      };this.map.deselect_nodes();
      this.map.deselect_text_labels();
      // reload the reaction input
      this.reload(null, coords, true);
      // generate the target symbol
      this.show_target(this.map, coords);
      // show the dropdown
      this.show_dropdown(coords);
    }.bind(this, this.map.sel.node()));
    this.map.sel.classed('start-reaction-cursor', true);
  } else {
    this.map.sel.on('click.start_reaction', null);
    this.map.sel.classed('start-reaction-cursor', false);
    this.hide_target();
  }
}

function hide_target() {
  if (this.target_coords) {
    this.map.sel.selectAll('.start-reaction-target').remove();
  }
  this.target_coords = null;
}

function show_target(map, coords) {
  var s = map.sel.selectAll('.start-reaction-target').data([12, 5]);
  s.enter().append('circle').classed('start-reaction-target', true).attr('r', function (d) {
    return d;
  }).style('stroke-width', 4).merge(s).style('visibility', 'visible').attr('transform', 'translate(' + coords.x + ',' + coords.y + ')');
  this.target_coords = coords;
}

/***/ }),
/* 229 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * @license
 *
 * complete.ly 1.0.0
 * MIT Licensing
 * Copyright (c) 2013 Lorenzo Puccetti
 *
 * This Software shall be used for doing good things, not bad things.
 *
 *
 * Modified by Zachary King (c) 2014.
 *
 **/

var utils = __webpack_require__(1);

module.exports = function (container, config) {
    var thisDocument = utils.get_document(container);
    var thisWindow = utils.get_window(container);

    config = config || {};
    config.fontSize = config.fontSize || '13px';
    config.fontFamily = config.fontFamily || 'sans-serif';
    config.promptInnerHTML = config.promptInnerHTML || '';
    config.color = config.color || '#333';
    config.hintColor = config.hintColor || '#aaa';
    config.backgroundColor = config.backgroundColor || '#fff';
    config.dropDownBorderColor = config.dropDownBorderColor || '#aaa';
    config.dropDownZIndex = config.dropDownZIndex || '100'; // to ensure we are in front of everybody
    config.dropDownOnHoverBackgroundColor = config.dropDownOnHoverBackgroundColor || '#ddd';

    var txtInput = thisDocument.createElement('input');
    txtInput.type = 'text';
    txtInput.spellcheck = false;
    txtInput.style.fontSize = config.fontSize;
    txtInput.style.fontFamily = config.fontFamily;
    txtInput.style.color = config.color;
    txtInput.style.backgroundColor = config.backgroundColor;
    txtInput.style.width = '100%';
    txtInput.style.outline = '0';
    txtInput.style.border = '0';
    txtInput.style.margin = '0';
    txtInput.style.padding = '0';

    var txtHint = txtInput.cloneNode();
    txtHint.disabled = '';
    txtHint.style.position = 'absolute';
    txtHint.style.top = '0';
    txtHint.style.left = '0';
    txtHint.style.borderColor = 'transparent';
    txtHint.style.boxShadow = 'none';
    txtHint.style.color = config.hintColor;

    txtInput.style.backgroundColor = 'transparent';
    txtInput.style.verticalAlign = 'top';
    txtInput.style.position = 'relative';

    var wrapper = thisDocument.createElement('div');
    wrapper.style.position = 'relative';
    wrapper.style.outline = '0';
    wrapper.style.border = '0';
    wrapper.style.margin = '0';
    wrapper.style.padding = '0';

    var prompt = thisDocument.createElement('div');
    prompt.style.position = 'absolute';
    prompt.style.outline = '0';
    prompt.style.margin = '0';
    prompt.style.padding = '0';
    prompt.style.border = '0';
    prompt.style.fontSize = config.fontSize;
    prompt.style.fontFamily = config.fontFamily;
    prompt.style.color = config.color;
    prompt.style.backgroundColor = config.backgroundColor;
    prompt.style.top = '0';
    prompt.style.left = '0';
    prompt.style.overflow = 'hidden';
    prompt.innerHTML = config.promptInnerHTML;
    prompt.style.background = 'transparent';
    if (thisDocument.body === undefined) {
        throw 'thisDocument.body is undefined. The library was wired up incorrectly.';
    }
    thisDocument.body.appendChild(prompt);
    var w = prompt.getBoundingClientRect().right; // works out the width of the prompt.
    wrapper.appendChild(prompt);
    prompt.style.visibility = 'visible';
    prompt.style.left = '-' + w + 'px';
    wrapper.style.marginLeft = w + 'px';

    wrapper.appendChild(txtHint);
    wrapper.appendChild(txtInput);

    var dropDown = thisDocument.createElement('div');
    dropDown.style.position = 'absolute';
    dropDown.style.visibility = 'hidden';
    dropDown.style.outline = '0';
    dropDown.style.margin = '0';
    dropDown.style.padding = '0';
    dropDown.style.textAlign = 'left';
    dropDown.style.fontSize = config.fontSize;
    dropDown.style.fontFamily = config.fontFamily;
    dropDown.style.backgroundColor = config.backgroundColor;
    dropDown.style.zIndex = config.dropDownZIndex;
    dropDown.style.cursor = 'default';
    dropDown.style.borderStyle = 'solid';
    dropDown.style.borderWidth = '1px';
    dropDown.style.borderColor = config.dropDownBorderColor;
    dropDown.style.overflowX = 'hidden';
    dropDown.style.whiteSpace = 'pre';
    dropDown.style.overflowY = 'scroll';

    var createDropDownController = function createDropDownController(elem) {
        var rows = [];
        var ix = 0;
        var oldIndex = -1;
        var current_row = null;

        var onMouseOver = function onMouseOver() {
            this.style.outline = '1px solid #ddd';
        };
        var onMouseOut = function onMouseOut() {
            this.style.outline = '0';
        };
        var onDblClick = function onDblClick(e) {
            e.preventDefault();
            p.onmouseselection(this.id);
        };

        var p = {
            hide: function hide() {
                elem.style.visibility = 'hidden';
            },
            refresh: function refresh(token, options) {
                elem.style.visibility = 'hidden';
                ix = 0;
                elem.innerHTML = '';
                var vph = thisWindow.innerHeight || thisDocument.documentElement.clientHeight;
                var rect = elem.parentNode.getBoundingClientRect();
                var distanceToTop = rect.top - 6; // heuristic give 6px
                var distanceToBottom = vph - rect.bottom - 6; // distance from the browser border.

                rows = [];
                for (var i = 0; i < options.length; i++) {
                    // ignore case
                    var found = options[i].matches.filter(function (match) {
                        return match.toLowerCase().indexOf(token.toLowerCase()) == 0;
                    });
                    if (found.length == 0) continue;
                    var divRow = thisDocument.createElement('div');
                    divRow.style.color = config.color;
                    divRow.onmouseover = onMouseOver;
                    divRow.onmouseout = onMouseOut;
                    // prevent selection for double click
                    divRow.onmousedown = function (e) {
                        e.preventDefault();
                    };
                    divRow.ondblclick = onDblClick;
                    divRow.__hint = found[0];
                    divRow.id = options[i].id;
                    divRow.innerHTML = options[i].html;
                    rows.push(divRow);
                    elem.appendChild(divRow);
                    // limit results and add a note at the buttom
                    if (rows.length >= rs.display_limit) {
                        var divRow2 = thisDocument.createElement('div');
                        divRow2.innerHTML = ' ' + (options.length - rows.length) + ' more';
                        rows.push(divRow2);
                        elem.appendChild(divRow2);
                        break;
                    }
                }
                if (rows.length === 0) {
                    return; // nothing to show.
                }
                p.highlight(0);

                // Heuristic (only when the distance to the to top is 4
                // times more than distance to the bottom
                if (distanceToTop > distanceToBottom * 3) {
                    // we display the dropDown on the top of the input text
                    elem.style.maxHeight = distanceToTop + 'px';
                    elem.style.top = '';
                    elem.style.bottom = '100%';
                } else {
                    elem.style.top = '100%';
                    elem.style.bottom = '';
                    elem.style.maxHeight = distanceToBottom + 'px';
                }
                elem.style.visibility = 'visible';
            },
            highlight: function highlight(index) {
                if (oldIndex != -1 && rows[oldIndex]) {
                    rows[oldIndex].style.backgroundColor = config.backgroundColor;
                }
                rows[index].style.backgroundColor = config.dropDownOnHoverBackgroundColor; // <-- should be config
                oldIndex = index;
                current_row = rows[index];
            },
            // moves the selection either up or down (unless it's not
            // possible) step is either +1 or -1.
            move: function move(step) {
                // nothing to move if there is no dropDown. (this happens if
                // the user hits escape and then down or up)
                if (elem.style.visibility === 'hidden') return '';
                // No circular scrolling
                if (ix + step === -1 || ix + step === rows.length) return rows[ix].__hint;
                ix += step;
                p.highlight(ix);
                return rows[ix].__hint;
            },
            onmouseselection: function onmouseselection() {},
            get_current_row: function get_current_row() {
                return current_row;
            }
        };
        return p;
    };

    var dropDownController = createDropDownController(dropDown);

    dropDownController.onmouseselection = function (id) {
        rs.onEnter(id);
        rs.input.focus();
    };

    wrapper.appendChild(dropDown);
    container.appendChild(wrapper);

    var spacer,
    // This will contain the leftSide part of the textfield (the bit that
    // was already autocompleted)
    leftSide;

    function calculateWidthForText(text) {
        if (spacer === undefined) {
            // on first call only.
            spacer = thisDocument.createElement('span');
            spacer.style.visibility = 'hidden';
            spacer.style.position = 'fixed';
            spacer.style.outline = '0';
            spacer.style.margin = '0';
            spacer.style.padding = '0';
            spacer.style.border = '0';
            spacer.style.left = '0';
            spacer.style.whiteSpace = 'pre';
            spacer.style.fontSize = config.fontSize;
            spacer.style.fontFamily = config.fontFamily;
            spacer.style.fontWeight = 'normal';
            thisDocument.body.appendChild(spacer);
        }

        // Used to encode an HTML string into a plain text.
        // taken from http://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding
        spacer.innerHTML = String(text).replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        return spacer.getBoundingClientRect().right;
    }

    var rs = {
        get_hint: function get_hint(x) {
            return x;
        },
        display_limit: 1000,
        onArrowDown: function onArrowDown() {}, // defaults to no action.
        onArrowUp: function onArrowUp() {}, // defaults to no action.
        onEnter: function onEnter() {}, // defaults to no action.
        onTab: function onTab() {}, // defaults to no action.
        onChange: function onChange() {
            rs.repaint();
        }, // defaults to repainting.
        startFrom: 0,
        options: [],

        // Only to allow easy access to the HTML elements to the final user
        // (possibly for minor customizations)
        wrapper: wrapper,
        input: txtInput,
        hint: txtHint,
        dropDown: dropDown,

        prompt: prompt,
        setText: function setText(text) {
            txtHint.value = text;
            txtInput.value = text;
        },
        getText: function getText() {
            return txtInput.value;
        },
        hideDropDown: function hideDropDown() {
            dropDownController.hide();
        },
        repaint: function repaint() {
            var text = txtInput.value;
            var startFrom = rs.startFrom;
            var options = rs.options;
            var optionsLength = options.length;

            // breaking text in leftSide and token.
            var token = text.substring(startFrom);
            leftSide = text.substring(0, startFrom);

            // updating the hint.
            txtHint.value = '';
            for (var i = 0; i < optionsLength; i++) {
                var found = options[i].matches.filter(function (match) {
                    return match.toLowerCase().indexOf(token.toLowerCase()) == 0;
                });
                if (found.length == 0) continue;
                txtHint.value = rs.get_hint(found[0]);
                break;
            }

            // moving the dropDown and refreshing it.
            dropDown.style.left = calculateWidthForText(leftSide) + 'px';
            dropDownController.refresh(token, rs.options);
        }
    };

    var registerOnTextChangeOldValue;

    // Register a callback function to detect changes to the content of the
    // input-type-text.  Those changes are typically followed by user's
    // action: a key-stroke event but sometimes it might be a mouse click.
    var registerOnTextChange = function registerOnTextChange(txt, callback) {
        registerOnTextChangeOldValue = txt.value;
        var handler = function handler() {
            var value = txt.value;
            if (registerOnTextChangeOldValue !== value) {
                registerOnTextChangeOldValue = value;
                callback(value);
            }
        };

        // For user's actions, we listen to both input events and key up events
        // It appears that input events are not enough so we defensively listen to key up events too.
        // source: http://help.dottoro.com/ljhxklln.php
        //
        // The cost of listening to three sources should be negligible as the handler will invoke callback function
        // only if the text.value was effectively changed.
        txt.addEventListener("input", handler, false);
        txt.addEventListener('keyup', handler, false);
        txt.addEventListener('change', handler, false);
    };

    registerOnTextChange(txtInput, function (text) {
        // note the function needs to be wrapped as API-users will define their onChange
        rs.onChange(text);
        rs.repaint();
    });

    var keyDownHandler = function keyDownHandler(e) {
        e = e || thisWindow.event;
        var keyCode = e.keyCode;

        if (keyCode == 33) {
            return;
        } // page up (do nothing)
        if (keyCode == 34) {
            return;
        } // page down (do nothing);

        // right,  end, tab  (autocomplete triggered)
        if (keyCode == 39 || keyCode == 35 || keyCode == 9) {
            // for tabs we need to ensure that we override the default
            // behaviour: move to the next focusable HTML-element
            if (keyCode == 9) {
                e.preventDefault();
                e.stopPropagation();
                if (txtHint.value.length == 0) {
                    // tab was called with no action.
                    rs.onTab();
                }
            }
            // if there is a hint
            if (txtHint.value.length > 0) {
                txtInput.value = txtHint.value;
                var hasTextChanged = registerOnTextChangeOldValue != txtInput.value;
                // avoid dropDown to appear again
                registerOnTextChangeOldValue = txtInput.value;
                // for example imagine the array contains the following
                // words: bee, beef, beetroot. User has hit enter to get
                // 'bee' it would be prompted with the dropDown again (as
                // beef and beetroot also match)
                if (hasTextChanged) {
                    // force it.
                    rs.onChange(txtInput.value);
                }
            }
            return;
        }

        if (keyCode == 13) {
            // enter
            // get current
            var id = dropDownController.get_current_row().id;
            rs.onEnter(id);
            return;
        }

        if (keyCode == 40) {
            // down
            var m = dropDownController.move(+1);
            if (m == '') {
                rs.onArrowDown();
            }
            txtHint.value = rs.get_hint(m);
            return;
        }

        if (keyCode == 38) {
            // up
            var m = dropDownController.move(-1);
            if (m == '') {
                rs.onArrowUp();
            }
            txtHint.value = rs.get_hint(m);
            e.preventDefault();
            e.stopPropagation();
            return;
        }

        // it's important to reset the txtHint on key down. Think: user
        // presses a letter (e.g. 'x') and never releases. You get
        // (xxxxxxxxxxxxxxxxx) and you would see still the hint. Reset the
        // txtHint. (it might be updated onKeyUp).
        txtHint.value = '';
    };

    txtInput.addEventListener("keydown", keyDownHandler, false);
    return rs;
};

/***/ }),
/* 230 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** DirectionArrow. A constructor for an arrow that can be rotated and dragged,
 and supplies its direction. */

var utils = __webpack_require__(1);
var d3_drag = __webpack_require__(15).drag;
var d3_mouse = __webpack_require__(0).mouse;
var d3_selection = __webpack_require__(0);

var DirectionArrow = utils.make_class();
DirectionArrow.prototype = {
    init: init,
    set_location: set_location,
    set_rotation: set_rotation,
    displace_rotation: displace_rotation,
    get_rotation: get_rotation,
    toggle: toggle,
    show: show,
    hide: hide,
    right: right,
    left: left,
    up: up,
    down: down,
    _setup_drag: _setup_drag
};
module.exports = DirectionArrow;

// definitions
function init(sel) {
    this.arrow_container = sel.append('g').attr('id', 'direction-arrow-container').attr('transform', 'translate(0,0)rotate(0)');
    this.arrow = this.arrow_container.append('path').classed('direction-arrow', true).attr('d', path_for_arrow()).style('visibility', 'hidden').attr('transform', 'translate(30,0)scale(2.5)');

    this.sel = sel;
    this.center = { x: 0, y: 0 };

    this._setup_drag();
    this.dragging = false;

    this.is_visible = false;
    this.show();

    // definitions
    function path_for_arrow() {
        return "M0 -5 L0 5 L20 5 L20 10 L30 0 L20 -10 L20 -5 Z";
    }
}
function set_location(coords) {
    /** Move the arrow to coords.
     */
    this.center = coords;
    var transform = utils.d3_transform_catch(this.arrow_container.attr('transform'));
    this.arrow_container.attr('transform', 'translate(' + coords.x + ',' + coords.y + ')rotate(' + transform.rotate + ')');
}
function set_rotation(rotation) {
    /** Rotate the arrow to rotation.
     */
    var transform = utils.d3_transform_catch(this.arrow_container.attr('transform'));
    this.arrow_container.attr('transform', 'translate(' + transform.translate + ')rotate(' + rotation + ')');
}
function displace_rotation(d_rotation) {
    /** Displace the arrow rotation by a set amount.
     */
    var transform = utils.d3_transform_catch(this.arrow_container.attr('transform'));
    this.arrow_container.attr('transform', 'translate(' + transform.translate + ')' + 'rotate(' + (transform.rotate + d_rotation) + ')');
}
function get_rotation() {
    /** Returns the arrow rotation.
     */
    return utils.d3_transform_catch(this.arrow_container.attr('transform')).rotate;
}
function toggle(on_off) {
    if (on_off === undefined) this.is_visible = !this.is_visible;else this.is_visible = on_off;
    this.arrow.style('visibility', this.is_visible ? 'visible' : 'hidden');
}
function show() {
    this.toggle(true);
}
function hide() {
    this.toggle(false);
}
function right() {
    this.set_rotation(0);
}
function down() {
    this.set_rotation(90);
}
function left() {
    this.set_rotation(180);
}
function up() {
    this.set_rotation(270);
}

function _setup_drag() {
    var b = d3_drag().on("start", function (d) {
        // silence other listeners
        d3_selection.event.sourceEvent.stopPropagation();
        this.dragging = true;
    }.bind(this)).on("drag.direction_arrow", function (d) {
        var displacement = { x: d3_selection.event.dx,
            y: d3_selection.event.dy },
            location = { x: d3_mouse(this.sel.node())[0],
            y: d3_mouse(this.sel.node())[1] },
            d_angle = utils.angle_for_event(displacement, location, this.center);
        this.displace_rotation(utils.to_degrees(d_angle));
    }.bind(this)).on("end", function (d) {
        setTimeout(function () {
            this.dragging = false;
        }.bind(this), 200);
    }.bind(this));
    this.arrow_container.call(b);
}

/***/ }),
/* 231 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return format; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return formatPrefix; });
/* harmony export (immutable) */ __webpack_exports__["a"] = defaultLocale;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__locale__ = __webpack_require__(76);


var locale;
var format;
var formatPrefix;

defaultLocale({
  decimal: ".",
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});

function defaultLocale(definition) {
  locale = Object(__WEBPACK_IMPORTED_MODULE_0__locale__["a" /* default */])(definition);
  format = locale.format;
  formatPrefix = locale.formatPrefix;
  return locale;
}


/***/ }),
/* 232 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(grouping, thousands) {
  return function(value, width) {
    var i = value.length,
        t = [],
        j = 0,
        g = grouping[0],
        length = 0;

    while (i > 0 && g > 0) {
      if (length + g + 1 > width) g = Math.max(1, width - length);
      t.push(value.substring(i -= g, i + g));
      if ((length += g + 1) > width) break;
      g = grouping[j = (j + 1) % grouping.length];
    }

    return t.reverse().join(thousands);
  };
});


/***/ }),
/* 233 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(numerals) {
  return function(value) {
    return value.replace(/[0-9]/g, function(i) {
      return numerals[+i];
    });
  };
});


/***/ }),
/* 234 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x, p) {
  x = x.toPrecision(p);

  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {
    switch (x[i]) {
      case ".": i0 = i1 = i; break;
      case "0": if (i0 === 0) i0 = i; i1 = i; break;
      case "e": break out;
      default: if (i0 > 0) i0 = 0; break;
    }
  }

  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;
});


/***/ }),
/* 235 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__formatDecimal__ = __webpack_require__(46);


/* harmony default export */ __webpack_exports__["a"] = (function(x, p) {
  var d = Object(__WEBPACK_IMPORTED_MODULE_0__formatDecimal__["a" /* default */])(x, p);
  if (!d) return x + "";
  var coefficient = d[0],
      exponent = d[1];
  return exponent < 0 ? "0." + new Array(-exponent).join("0") + coefficient
      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + "." + coefficient.slice(exponent + 1)
      : coefficient + new Array(exponent - coefficient.length + 2).join("0");
});


/***/ }),
/* 236 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return x;
});


/***/ }),
/* 237 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__exponent__ = __webpack_require__(29);


/* harmony default export */ __webpack_exports__["a"] = (function(step) {
  return Math.max(0, -Object(__WEBPACK_IMPORTED_MODULE_0__exponent__["a" /* default */])(Math.abs(step)));
});


/***/ }),
/* 238 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__exponent__ = __webpack_require__(29);


/* harmony default export */ __webpack_exports__["a"] = (function(step, value) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(Object(__WEBPACK_IMPORTED_MODULE_0__exponent__["a" /* default */])(value) / 3))) * 3 - Object(__WEBPACK_IMPORTED_MODULE_0__exponent__["a" /* default */])(Math.abs(step)));
});


/***/ }),
/* 239 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__exponent__ = __webpack_require__(29);


/* harmony default export */ __webpack_exports__["a"] = (function(step, max) {
  step = Math.abs(step), max = Math.abs(max) - step;
  return Math.max(0, Object(__WEBPACK_IMPORTED_MODULE_0__exponent__["a" /* default */])(max) - Object(__WEBPACK_IMPORTED_MODULE_0__exponent__["a" /* default */])(step)) + 1;
});


/***/ }),
/* 240 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_dispatch__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_drag__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3_interpolate__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d3_transition__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__constant__ = __webpack_require__(285);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__event__ = __webpack_require__(286);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__transform__ = __webpack_require__(94);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__noevent__ = __webpack_require__(287);










// Ignore right-click, since that should open the context menu.
function defaultFilter() {
  return !__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].button;
}

function defaultExtent() {
  var e = this, w, h;
  if (e instanceof SVGElement) {
    e = e.ownerSVGElement || e;
    w = e.width.baseVal.value;
    h = e.height.baseVal.value;
  } else {
    w = e.clientWidth;
    h = e.clientHeight;
  }
  return [[0, 0], [w, h]];
}

function defaultTransform() {
  return this.__zoom || __WEBPACK_IMPORTED_MODULE_7__transform__["c" /* identity */];
}

function defaultWheelDelta() {
  return -__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].deltaY * (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].deltaMode ? 120 : 1) / 500;
}

function defaultTouchable() {
  return "ontouchstart" in this;
}

function defaultConstrain(transform, extent, translateExtent) {
  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],
      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],
      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],
      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];
  return transform.translate(
    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),
    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)
  );
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  var filter = defaultFilter,
      extent = defaultExtent,
      constrain = defaultConstrain,
      wheelDelta = defaultWheelDelta,
      touchable = defaultTouchable,
      scaleExtent = [0, Infinity],
      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],
      duration = 250,
      interpolate = __WEBPACK_IMPORTED_MODULE_2_d3_interpolate__["i" /* interpolateZoom */],
      gestures = [],
      listeners = Object(__WEBPACK_IMPORTED_MODULE_0_d3_dispatch__["a" /* dispatch */])("start", "zoom", "end"),
      touchstarting,
      touchending,
      touchDelay = 500,
      wheelDelay = 150,
      clickDistance2 = 0;

  function zoom(selection) {
    selection
        .property("__zoom", defaultTransform)
        .on("wheel.zoom", wheeled)
        .on("mousedown.zoom", mousedowned)
        .on("dblclick.zoom", dblclicked)
      .filter(touchable)
        .on("touchstart.zoom", touchstarted)
        .on("touchmove.zoom", touchmoved)
        .on("touchend.zoom touchcancel.zoom", touchended)
        .style("touch-action", "none")
        .style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }

  zoom.transform = function(collection, transform) {
    var selection = collection.selection ? collection.selection() : collection;
    selection.property("__zoom", defaultTransform);
    if (collection !== selection) {
      schedule(collection, transform);
    } else {
      selection.interrupt().each(function() {
        gesture(this, arguments)
            .start()
            .zoom(null, typeof transform === "function" ? transform.apply(this, arguments) : transform)
            .end();
      });
    }
  };

  zoom.scaleBy = function(selection, k) {
    zoom.scaleTo(selection, function() {
      var k0 = this.__zoom.k,
          k1 = typeof k === "function" ? k.apply(this, arguments) : k;
      return k0 * k1;
    });
  };

  zoom.scaleTo = function(selection, k) {
    zoom.transform(selection, function() {
      var e = extent.apply(this, arguments),
          t0 = this.__zoom,
          p0 = centroid(e),
          p1 = t0.invert(p0),
          k1 = typeof k === "function" ? k.apply(this, arguments) : k;
      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);
    });
  };

  zoom.translateBy = function(selection, x, y) {
    zoom.transform(selection, function() {
      return constrain(this.__zoom.translate(
        typeof x === "function" ? x.apply(this, arguments) : x,
        typeof y === "function" ? y.apply(this, arguments) : y
      ), extent.apply(this, arguments), translateExtent);
    });
  };

  zoom.translateTo = function(selection, x, y) {
    zoom.transform(selection, function() {
      var e = extent.apply(this, arguments),
          t = this.__zoom,
          p = centroid(e);
      return constrain(__WEBPACK_IMPORTED_MODULE_7__transform__["c" /* identity */].translate(p[0], p[1]).scale(t.k).translate(
        typeof x === "function" ? -x.apply(this, arguments) : -x,
        typeof y === "function" ? -y.apply(this, arguments) : -y
      ), e, translateExtent);
    });
  };

  function scale(transform, k) {
    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));
    return k === transform.k ? transform : new __WEBPACK_IMPORTED_MODULE_7__transform__["a" /* Transform */](k, transform.x, transform.y);
  }

  function translate(transform, p0, p1) {
    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;
    return x === transform.x && y === transform.y ? transform : new __WEBPACK_IMPORTED_MODULE_7__transform__["a" /* Transform */](transform.k, x, y);
  }

  function centroid(extent) {
    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];
  }

  function schedule(transition, transform, center) {
    transition
        .on("start.zoom", function() { gesture(this, arguments).start(); })
        .on("interrupt.zoom end.zoom", function() { gesture(this, arguments).end(); })
        .tween("zoom", function() {
          var that = this,
              args = arguments,
              g = gesture(that, args),
              e = extent.apply(that, args),
              p = center || centroid(e),
              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),
              a = that.__zoom,
              b = typeof transform === "function" ? transform.apply(that, args) : transform,
              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));
          return function(t) {
            if (t === 1) t = b; // Avoid rounding error on end.
            else { var l = i(t), k = w / l[2]; t = new __WEBPACK_IMPORTED_MODULE_7__transform__["a" /* Transform */](k, p[0] - l[0] * k, p[1] - l[1] * k); }
            g.zoom(null, t);
          };
        });
  }

  function gesture(that, args) {
    for (var i = 0, n = gestures.length, g; i < n; ++i) {
      if ((g = gestures[i]).that === that) {
        return g;
      }
    }
    return new Gesture(that, args);
  }

  function Gesture(that, args) {
    this.that = that;
    this.args = args;
    this.index = -1;
    this.active = 0;
    this.extent = extent.apply(that, args);
  }

  Gesture.prototype = {
    start: function() {
      if (++this.active === 1) {
        this.index = gestures.push(this) - 1;
        this.emit("start");
      }
      return this;
    },
    zoom: function(key, transform) {
      if (this.mouse && key !== "mouse") this.mouse[1] = transform.invert(this.mouse[0]);
      if (this.touch0 && key !== "touch") this.touch0[1] = transform.invert(this.touch0[0]);
      if (this.touch1 && key !== "touch") this.touch1[1] = transform.invert(this.touch1[0]);
      this.that.__zoom = transform;
      this.emit("zoom");
      return this;
    },
    end: function() {
      if (--this.active === 0) {
        gestures.splice(this.index, 1);
        this.index = -1;
        this.emit("end");
      }
      return this;
    },
    emit: function(type) {
      Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["customEvent"])(new __WEBPACK_IMPORTED_MODULE_6__event__["a" /* default */](zoom, type, this.that.__zoom), listeners.apply, listeners, [type, this.that, this.args]);
    }
  };

  function wheeled() {
    if (!filter.apply(this, arguments)) return;
    var g = gesture(this, arguments),
        t = this.__zoom,
        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),
        p = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["mouse"])(this);

    // If the mouse is in the same location as before, reuse it.
    // If there were recent wheel events, reset the wheel idle timeout.
    if (g.wheel) {
      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {
        g.mouse[1] = t.invert(g.mouse[0] = p);
      }
      clearTimeout(g.wheel);
    }

    // If this wheel event won’t trigger a transform change, ignore it.
    else if (t.k === k) return;

    // Otherwise, capture the mouse point and location at the start.
    else {
      g.mouse = [p, t.invert(p)];
      Object(__WEBPACK_IMPORTED_MODULE_4_d3_transition__["a" /* interrupt */])(this);
      g.start();
    }

    Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["a" /* default */])();
    g.wheel = setTimeout(wheelidled, wheelDelay);
    g.zoom("mouse", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));

    function wheelidled() {
      g.wheel = null;
      g.end();
    }
  }

  function mousedowned() {
    if (touchending || !filter.apply(this, arguments)) return;
    var g = gesture(this, arguments),
        v = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].view).on("mousemove.zoom", mousemoved, true).on("mouseup.zoom", mouseupped, true),
        p = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["mouse"])(this),
        x0 = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].clientX,
        y0 = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].clientY;

    Object(__WEBPACK_IMPORTED_MODULE_1_d3_drag__["dragDisable"])(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].view);
    Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["b" /* nopropagation */])();
    g.mouse = [p, this.__zoom.invert(p)];
    Object(__WEBPACK_IMPORTED_MODULE_4_d3_transition__["a" /* interrupt */])(this);
    g.start();

    function mousemoved() {
      Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["a" /* default */])();
      if (!g.moved) {
        var dx = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].clientX - x0, dy = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].clientY - y0;
        g.moved = dx * dx + dy * dy > clickDistance2;
      }
      g.zoom("mouse", constrain(translate(g.that.__zoom, g.mouse[0] = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["mouse"])(g.that), g.mouse[1]), g.extent, translateExtent));
    }

    function mouseupped() {
      v.on("mousemove.zoom mouseup.zoom", null);
      Object(__WEBPACK_IMPORTED_MODULE_1_d3_drag__["dragEnable"])(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].view, g.moved);
      Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["a" /* default */])();
      g.end();
    }
  }

  function dblclicked() {
    if (!filter.apply(this, arguments)) return;
    var t0 = this.__zoom,
        p0 = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["mouse"])(this),
        p1 = t0.invert(p0),
        k1 = t0.k * (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].shiftKey ? 0.5 : 2),
        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, arguments), translateExtent);

    Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["a" /* default */])();
    if (duration > 0) Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(this).transition().duration(duration).call(schedule, t1, p0);
    else Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(this).call(zoom.transform, t1);
  }

  function touchstarted() {
    if (!filter.apply(this, arguments)) return;
    var g = gesture(this, arguments),
        touches = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].changedTouches,
        started,
        n = touches.length, i, t, p;

    Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["b" /* nopropagation */])();
    for (i = 0; i < n; ++i) {
      t = touches[i], p = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["touch"])(this, touches, t.identifier);
      p = [p, this.__zoom.invert(p), t.identifier];
      if (!g.touch0) g.touch0 = p, started = true;
      else if (!g.touch1) g.touch1 = p;
    }

    // If this is a dbltap, reroute to the (optional) dblclick.zoom handler.
    if (touchstarting) {
      touchstarting = clearTimeout(touchstarting);
      if (!g.touch1) {
        g.end();
        p = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(this).on("dblclick.zoom");
        if (p) p.apply(this, arguments);
        return;
      }
    }

    if (started) {
      touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);
      Object(__WEBPACK_IMPORTED_MODULE_4_d3_transition__["a" /* interrupt */])(this);
      g.start();
    }
  }

  function touchmoved() {
    var g = gesture(this, arguments),
        touches = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].changedTouches,
        n = touches.length, i, t, p, l;

    Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["a" /* default */])();
    if (touchstarting) touchstarting = clearTimeout(touchstarting);
    for (i = 0; i < n; ++i) {
      t = touches[i], p = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["touch"])(this, touches, t.identifier);
      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;
      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;
    }
    t = g.that.__zoom;
    if (g.touch1) {
      var p0 = g.touch0[0], l0 = g.touch0[1],
          p1 = g.touch1[0], l1 = g.touch1[1],
          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,
          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;
      t = scale(t, Math.sqrt(dp / dl));
      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];
      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];
    }
    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];
    else return;
    g.zoom("touch", constrain(translate(t, p, l), g.extent, translateExtent));
  }

  function touchended() {
    var g = gesture(this, arguments),
        touches = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].changedTouches,
        n = touches.length, i, t;

    Object(__WEBPACK_IMPORTED_MODULE_8__noevent__["b" /* nopropagation */])();
    if (touchending) clearTimeout(touchending);
    touchending = setTimeout(function() { touchending = null; }, touchDelay);
    for (i = 0; i < n; ++i) {
      t = touches[i];
      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;
      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;
    }
    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;
    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);
    else g.end();
  }

  zoom.wheelDelta = function(_) {
    return arguments.length ? (wheelDelta = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_5__constant__["a" /* default */])(+_), zoom) : wheelDelta;
  };

  zoom.filter = function(_) {
    return arguments.length ? (filter = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_5__constant__["a" /* default */])(!!_), zoom) : filter;
  };

  zoom.touchable = function(_) {
    return arguments.length ? (touchable = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_5__constant__["a" /* default */])(!!_), zoom) : touchable;
  };

  zoom.extent = function(_) {
    return arguments.length ? (extent = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_5__constant__["a" /* default */])([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;
  };

  zoom.scaleExtent = function(_) {
    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];
  };

  zoom.translateExtent = function(_) {
    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];
  };

  zoom.constrain = function(_) {
    return arguments.length ? (constrain = _, zoom) : constrain;
  };

  zoom.duration = function(_) {
    return arguments.length ? (duration = +_, zoom) : duration;
  };

  zoom.interpolate = function(_) {
    return arguments.length ? (interpolate = _, zoom) : interpolate;
  };

  zoom.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? zoom : value;
  };

  zoom.clickDistance = function(_) {
    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);
  };

  return zoom;
});


/***/ }),
/* 241 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = lab;
/* unused harmony export Lab */
/* harmony export (immutable) */ __webpack_exports__["b"] = hcl;
/* unused harmony export Hcl */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(81);




var Kn = 18,
    Xn = 0.950470, // D65 standard referent
    Yn = 1,
    Zn = 1.088830,
    t0 = 4 / 29,
    t1 = 6 / 29,
    t2 = 3 * t1 * t1,
    t3 = t1 * t1 * t1;

function labConvert(o) {
  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);
  if (o instanceof Hcl) {
    var h = o.h * __WEBPACK_IMPORTED_MODULE_2__math__["a" /* deg2rad */];
    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);
  }
  if (!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__["b" /* Rgb */])) o = Object(__WEBPACK_IMPORTED_MODULE_1__color__["h" /* rgbConvert */])(o);
  var b = rgb2xyz(o.r),
      a = rgb2xyz(o.g),
      l = rgb2xyz(o.b),
      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),
      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),
      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);
  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);
}

function lab(l, a, b, opacity) {
  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);
}

function Lab(l, a, b, opacity) {
  this.l = +l;
  this.a = +a;
  this.b = +b;
  this.opacity = +opacity;
}

Object(__WEBPACK_IMPORTED_MODULE_0__define__["a" /* default */])(Lab, lab, Object(__WEBPACK_IMPORTED_MODULE_0__define__["b" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* Color */], {
  brighter: function(k) {
    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  darker: function(k) {
    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);
  },
  rgb: function() {
    var y = (this.l + 16) / 116,
        x = isNaN(this.a) ? y : y + this.a / 500,
        z = isNaN(this.b) ? y : y - this.b / 200;
    y = Yn * lab2xyz(y);
    x = Xn * lab2xyz(x);
    z = Zn * lab2xyz(z);
    return new __WEBPACK_IMPORTED_MODULE_1__color__["b" /* Rgb */](
      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB
      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),
      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),
      this.opacity
    );
  }
}));

function xyz2lab(t) {
  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;
}

function lab2xyz(t) {
  return t > t1 ? t * t * t : t2 * (t - t0);
}

function xyz2rgb(x) {
  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);
}

function rgb2xyz(x) {
  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);
}

function hclConvert(o) {
  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);
  if (!(o instanceof Lab)) o = labConvert(o);
  var h = Math.atan2(o.b, o.a) * __WEBPACK_IMPORTED_MODULE_2__math__["b" /* rad2deg */];
  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);
}

function hcl(h, c, l, opacity) {
  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);
}

function Hcl(h, c, l, opacity) {
  this.h = +h;
  this.c = +c;
  this.l = +l;
  this.opacity = +opacity;
}

Object(__WEBPACK_IMPORTED_MODULE_0__define__["a" /* default */])(Hcl, hcl, Object(__WEBPACK_IMPORTED_MODULE_0__define__["b" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* Color */], {
  brighter: function(k) {
    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);
  },
  darker: function(k) {
    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);
  },
  rgb: function() {
    return labConvert(this).rgb();
  }
}));


/***/ }),
/* 242 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = cubehelix;
/* unused harmony export Cubehelix */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(81);




var A = -0.14861,
    B = +1.78277,
    C = -0.29227,
    D = -0.90649,
    E = +1.97294,
    ED = E * D,
    EB = E * B,
    BC_DA = B * C - D * A;

function cubehelixConvert(o) {
  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__["b" /* Rgb */])) o = Object(__WEBPACK_IMPORTED_MODULE_1__color__["h" /* rgbConvert */])(o);
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),
      bl = b - l,
      k = (E * (g - l) - C * bl) / D,
      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1
      h = s ? Math.atan2(k, bl) * __WEBPACK_IMPORTED_MODULE_2__math__["b" /* rad2deg */] - 120 : NaN;
  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);
}

function cubehelix(h, s, l, opacity) {
  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);
}

function Cubehelix(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

Object(__WEBPACK_IMPORTED_MODULE_0__define__["a" /* default */])(Cubehelix, cubehelix, Object(__WEBPACK_IMPORTED_MODULE_0__define__["b" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* Color */], {
  brighter: function(k) {
    k = k == null ? __WEBPACK_IMPORTED_MODULE_1__color__["c" /* brighter */] : Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__["c" /* brighter */], k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  darker: function(k) {
    k = k == null ? __WEBPACK_IMPORTED_MODULE_1__color__["d" /* darker */] : Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__["d" /* darker */], k);
    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);
  },
  rgb: function() {
    var h = isNaN(this.h) ? 0 : (this.h + 120) * __WEBPACK_IMPORTED_MODULE_2__math__["a" /* deg2rad */],
        l = +this.l,
        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),
        cosh = Math.cos(h),
        sinh = Math.sin(h);
    return new __WEBPACK_IMPORTED_MODULE_1__color__["b" /* Rgb */](
      255 * (l + a * (A * cosh + B * sinh)),
      255 * (l + a * (C * cosh + D * sinh)),
      255 * (l + a * (E * cosh)),
      this.opacity
    );
  }
}));


/***/ }),
/* 243 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(a, b) {
  return a = +a, b -= a, function(t) {
    return Math.round(a + b * t);
  };
});


/***/ }),
/* 244 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return interpolateTransformCss; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return interpolateTransformSvg; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__parse__ = __webpack_require__(245);



function interpolateTransform(parse, pxComma, pxParen, degParen) {

  function pop(s) {
    return s.length ? s.pop() + " " : "";
  }

  function translate(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push("translate(", null, pxComma, null, pxParen);
      q.push({i: i - 4, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(xa, xb)}, {i: i - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(ya, yb)});
    } else if (xb || yb) {
      s.push("translate(" + xb + pxComma + yb + pxParen);
    }
  }

  function rotate(a, b, s, q) {
    if (a !== b) {
      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path
      q.push({i: s.push(pop(s) + "rotate(", null, degParen) - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(a, b)});
    } else if (b) {
      s.push(pop(s) + "rotate(" + b + degParen);
    }
  }

  function skewX(a, b, s, q) {
    if (a !== b) {
      q.push({i: s.push(pop(s) + "skewX(", null, degParen) - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(a, b)});
    } else if (b) {
      s.push(pop(s) + "skewX(" + b + degParen);
    }
  }

  function scale(xa, ya, xb, yb, s, q) {
    if (xa !== xb || ya !== yb) {
      var i = s.push(pop(s) + "scale(", null, ",", null, ")");
      q.push({i: i - 4, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(xa, xb)}, {i: i - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(ya, yb)});
    } else if (xb !== 1 || yb !== 1) {
      s.push(pop(s) + "scale(" + xb + "," + yb + ")");
    }
  }

  return function(a, b) {
    var s = [], // string constants and placeholders
        q = []; // number interpolators
    a = parse(a), b = parse(b);
    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);
    rotate(a.rotate, b.rotate, s, q);
    skewX(a.skewX, b.skewX, s, q);
    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);
    a = b = null; // gc
    return function(t) {
      var i = -1, n = q.length, o;
      while (++i < n) s[(o = q[i]).i] = o.x(t);
      return s.join("");
    };
  };
}

var interpolateTransformCss = interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__["a" /* parseCss */], "px, ", "px)", "deg)");
var interpolateTransformSvg = interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__["b" /* parseSvg */], ", ", ")", ")");


/***/ }),
/* 245 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = parseCss;
/* harmony export (immutable) */ __webpack_exports__["b"] = parseSvg;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__decompose__ = __webpack_require__(246);


var cssNode,
    cssRoot,
    cssView,
    svgNode;

function parseCss(value) {
  if (value === "none") return __WEBPACK_IMPORTED_MODULE_0__decompose__["b" /* identity */];
  if (!cssNode) cssNode = document.createElement("DIV"), cssRoot = document.documentElement, cssView = document.defaultView;
  cssNode.style.transform = value;
  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue("transform");
  cssRoot.removeChild(cssNode);
  value = value.slice(7, -1).split(",");
  return Object(__WEBPACK_IMPORTED_MODULE_0__decompose__["a" /* default */])(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);
}

function parseSvg(value) {
  if (value == null) return __WEBPACK_IMPORTED_MODULE_0__decompose__["b" /* identity */];
  if (!svgNode) svgNode = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svgNode.setAttribute("transform", value);
  if (!(value = svgNode.transform.baseVal.consolidate())) return __WEBPACK_IMPORTED_MODULE_0__decompose__["b" /* identity */];
  value = value.matrix;
  return Object(__WEBPACK_IMPORTED_MODULE_0__decompose__["a" /* default */])(value.a, value.b, value.c, value.d, value.e, value.f);
}


/***/ }),
/* 246 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return identity; });
var degrees = 180 / Math.PI;

var identity = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};

/* harmony default export */ __webpack_exports__["a"] = (function(a, b, c, d, e, f) {
  var scaleX, scaleY, skewX;
  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;
  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;
  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;
  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;
  return {
    translateX: e,
    translateY: f,
    rotate: Math.atan2(b, a) * degrees,
    skewX: Math.atan(skewX) * degrees,
    scaleX: scaleX,
    scaleY: scaleY
  };
});


/***/ }),
/* 247 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var rho = Math.SQRT2,
    rho2 = 2,
    rho4 = 4,
    epsilon2 = 1e-12;

function cosh(x) {
  return ((x = Math.exp(x)) + 1 / x) / 2;
}

function sinh(x) {
  return ((x = Math.exp(x)) - 1 / x) / 2;
}

function tanh(x) {
  return ((x = Math.exp(2 * x)) - 1) / (x + 1);
}

// p0 = [ux0, uy0, w0]
// p1 = [ux1, uy1, w1]
/* harmony default export */ __webpack_exports__["a"] = (function(p0, p1) {
  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],
      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],
      dx = ux1 - ux0,
      dy = uy1 - uy0,
      d2 = dx * dx + dy * dy,
      i,
      S;

  // Special case for u0 ≅ u1.
  if (d2 < epsilon2) {
    S = Math.log(w1 / w0) / rho;
    i = function(t) {
      return [
        ux0 + t * dx,
        uy0 + t * dy,
        w0 * Math.exp(rho * t * S)
      ];
    }
  }

  // General case.
  else {
    var d1 = Math.sqrt(d2),
        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),
        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),
        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),
        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);
    S = (r1 - r0) / rho;
    i = function(t) {
      var s = t * S,
          coshr0 = cosh(r0),
          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));
      return [
        ux0 + u * dx,
        uy0 + u * dy,
        w0 * coshr0 / cosh(rho * s + r0)
      ];
    }
  }

  i.duration = S * 1000;

  return i;
});


/***/ }),
/* 248 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export hslLong */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(22);



function hsl(hue) {
  return function(start, end) {
    var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["d" /* hsl */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["d" /* hsl */])(end)).h),
        s = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.s, end.s),
        l = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.l, end.l),
        opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.opacity, end.opacity);
    return function(t) {
      start.h = h(t);
      start.s = s(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }
}

/* unused harmony default export */ var _unused_webpack_default_export = (hsl(__WEBPACK_IMPORTED_MODULE_1__color__["c" /* hue */]));
var hslLong = hsl(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */]);


/***/ }),
/* 249 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export default */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(22);



function lab(start, end) {
  var l = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["e" /* lab */])(start)).l, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["e" /* lab */])(end)).l),
      a = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.a, end.a),
      b = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.b, end.b),
      opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.opacity, end.opacity);
  return function(t) {
    start.l = l(t);
    start.a = a(t);
    start.b = b(t);
    start.opacity = opacity(t);
    return start + "";
  };
}


/***/ }),
/* 250 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export hclLong */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(22);



function hcl(hue) {
  return function(start, end) {
    var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["c" /* hcl */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["c" /* hcl */])(end)).h),
        c = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.c, end.c),
        l = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.l, end.l),
        opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.opacity, end.opacity);
    return function(t) {
      start.h = h(t);
      start.c = c(t);
      start.l = l(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }
}

/* unused harmony default export */ var _unused_webpack_default_export = (hcl(__WEBPACK_IMPORTED_MODULE_1__color__["c" /* hue */]));
var hclLong = hcl(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */]);


/***/ }),
/* 251 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return cubehelixLong; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(22);



function cubehelix(hue) {
  return (function cubehelixGamma(y) {
    y = +y;

    function cubehelix(start, end) {
      var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(end)).h),
          s = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.s, end.s),
          l = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.l, end.l),
          opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */])(start.opacity, end.opacity);
      return function(t) {
        start.h = h(t);
        start.s = s(t);
        start.l = l(Math.pow(t, y));
        start.opacity = opacity(t);
        return start + "";
      };
    }

    cubehelix.gamma = cubehelixGamma;

    return cubehelix;
  })(1);
}

/* unused harmony default export */ var _unused_webpack_default_export = (cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__["c" /* hue */]));
var cubehelixLong = cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__["a" /* default */]);


/***/ }),
/* 252 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(interpolator, n) {
  var samples = new Array(n);
  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));
  return samples;
});


/***/ }),
/* 253 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__interrupt__ = __webpack_require__(254);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__transition__ = __webpack_require__(257);




__WEBPACK_IMPORTED_MODULE_0_d3_selection__["selection"].prototype.interrupt = __WEBPACK_IMPORTED_MODULE_1__interrupt__["a" /* default */];
__WEBPACK_IMPORTED_MODULE_0_d3_selection__["selection"].prototype.transition = __WEBPACK_IMPORTED_MODULE_2__transition__["a" /* default */];


/***/ }),
/* 254 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interrupt__ = __webpack_require__(90);


/* harmony default export */ __webpack_exports__["a"] = (function(name) {
  return this.each(function() {
    Object(__WEBPACK_IMPORTED_MODULE_0__interrupt__["a" /* default */])(this, name);
  });
});


/***/ }),
/* 255 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__timer__ = __webpack_require__(52);


/* harmony default export */ __webpack_exports__["a"] = (function(callback, delay, time) {
  var t = new __WEBPACK_IMPORTED_MODULE_0__timer__["a" /* Timer */];
  delay = delay == null ? 0 : +delay;
  t.restart(function(elapsed) {
    t.stop();
    callback(elapsed + delay);
  }, delay, time);
  return t;
});


/***/ }),
/* 256 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__timer__ = __webpack_require__(52);


/* unused harmony default export */ var _unused_webpack_default_export = (function(callback, delay, time) {
  var t = new __WEBPACK_IMPORTED_MODULE_0__timer__["a" /* Timer */], total = delay;
  if (delay == null) return t.restart(callback, delay, time), t;
  delay = +delay, time = time == null ? Object(__WEBPACK_IMPORTED_MODULE_0__timer__["b" /* now */])() : +time;
  t.restart(function tick(elapsed) {
    elapsed += total;
    t.restart(tick, total += delay, time);
    callback(elapsed);
  }, delay, time);
  return t;
});


/***/ }),
/* 257 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__transition_index__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__transition_schedule__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3_ease__ = __webpack_require__(93);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3_timer__ = __webpack_require__(91);





var defaultTiming = {
  time: null, // Set on use.
  delay: 0,
  duration: 250,
  ease: __WEBPACK_IMPORTED_MODULE_2_d3_ease__["easeCubicInOut"]
};

function inherit(node, id) {
  var timing;
  while (!(timing = node.__transition) || !(timing = timing[id])) {
    if (!(node = node.parentNode)) {
      return defaultTiming.time = Object(__WEBPACK_IMPORTED_MODULE_3_d3_timer__["a" /* now */])(), defaultTiming;
    }
  }
  return timing;
}

/* harmony default export */ __webpack_exports__["a"] = (function(name) {
  var id,
      timing;

  if (name instanceof __WEBPACK_IMPORTED_MODULE_0__transition_index__["a" /* Transition */]) {
    id = name._id, name = name._name;
  } else {
    id = Object(__WEBPACK_IMPORTED_MODULE_0__transition_index__["b" /* newId */])(), (timing = defaultTiming).time = Object(__WEBPACK_IMPORTED_MODULE_3_d3_timer__["a" /* now */])(), name = name == null ? null : name + "";
  }

  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        Object(__WEBPACK_IMPORTED_MODULE_1__transition_schedule__["e" /* default */])(node, name, id, i, group, timing || inherit(node, id));
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_0__transition_index__["a" /* Transition */](groups, this._parents, name, id);
});


/***/ }),
/* 258 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_interpolate__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tween__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interpolate__ = __webpack_require__(92);





function attrRemove(name) {
  return function() {
    this.removeAttribute(name);
  };
}

function attrRemoveNS(fullname) {
  return function() {
    this.removeAttributeNS(fullname.space, fullname.local);
  };
}

function attrConstant(name, interpolate, value1) {
  var value00,
      interpolate0;
  return function() {
    var value0 = this.getAttribute(name);
    return value0 === value1 ? null
        : value0 === value00 ? interpolate0
        : interpolate0 = interpolate(value00 = value0, value1);
  };
}

function attrConstantNS(fullname, interpolate, value1) {
  var value00,
      interpolate0;
  return function() {
    var value0 = this.getAttributeNS(fullname.space, fullname.local);
    return value0 === value1 ? null
        : value0 === value00 ? interpolate0
        : interpolate0 = interpolate(value00 = value0, value1);
  };
}

function attrFunction(name, interpolate, value) {
  var value00,
      value10,
      interpolate0;
  return function() {
    var value0, value1 = value(this);
    if (value1 == null) return void this.removeAttribute(name);
    value0 = this.getAttribute(name);
    return value0 === value1 ? null
        : value0 === value00 && value1 === value10 ? interpolate0
        : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

function attrFunctionNS(fullname, interpolate, value) {
  var value00,
      value10,
      interpolate0;
  return function() {
    var value0, value1 = value(this);
    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);
    value0 = this.getAttributeNS(fullname.space, fullname.local);
    return value0 === value1 ? null
        : value0 === value00 && value1 === value10 ? interpolate0
        : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value) {
  var fullname = Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["namespace"])(name), i = fullname === "transform" ? __WEBPACK_IMPORTED_MODULE_0_d3_interpolate__["h" /* interpolateTransformSvg */] : __WEBPACK_IMPORTED_MODULE_3__interpolate__["a" /* default */];
  return this.attrTween(name, typeof value === "function"
      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, Object(__WEBPACK_IMPORTED_MODULE_2__tween__["b" /* tweenValue */])(this, "attr." + name, value))
      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)
      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value + ""));
});


/***/ }),
/* 259 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);


function attrTweenNS(fullname, value) {
  function tween() {
    var node = this, i = value.apply(node, arguments);
    return i && function(t) {
      node.setAttributeNS(fullname.space, fullname.local, i(t));
    };
  }
  tween._value = value;
  return tween;
}

function attrTween(name, value) {
  function tween() {
    var node = this, i = value.apply(node, arguments);
    return i && function(t) {
      node.setAttribute(name, i(t));
    };
  }
  tween._value = value;
  return tween;
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value) {
  var key = "attr." + name;
  if (arguments.length < 2) return (key = this.tween(key)) && key._value;
  if (value == null) return this.tween(key, null);
  if (typeof value !== "function") throw new Error;
  var fullname = Object(__WEBPACK_IMPORTED_MODULE_0_d3_selection__["namespace"])(name);
  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));
});


/***/ }),
/* 260 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__schedule__ = __webpack_require__(6);


function delayFunction(id, value) {
  return function() {
    Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["g" /* init */])(this, id).delay = +value.apply(this, arguments);
  };
}

function delayConstant(id, value) {
  return value = +value, function() {
    Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["g" /* init */])(this, id).delay = value;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(value) {
  var id = this._id;

  return arguments.length
      ? this.each((typeof value === "function"
          ? delayFunction
          : delayConstant)(id, value))
      : Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["f" /* get */])(this.node(), id).delay;
});


/***/ }),
/* 261 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__schedule__ = __webpack_require__(6);


function durationFunction(id, value) {
  return function() {
    Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["h" /* set */])(this, id).duration = +value.apply(this, arguments);
  };
}

function durationConstant(id, value) {
  return value = +value, function() {
    Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["h" /* set */])(this, id).duration = value;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(value) {
  var id = this._id;

  return arguments.length
      ? this.each((typeof value === "function"
          ? durationFunction
          : durationConstant)(id, value))
      : Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["f" /* get */])(this.node(), id).duration;
});


/***/ }),
/* 262 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__schedule__ = __webpack_require__(6);


function easeConstant(id, value) {
  if (typeof value !== "function") throw new Error;
  return function() {
    Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["h" /* set */])(this, id).ease = value;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(value) {
  var id = this._id;

  return arguments.length
      ? this.each(easeConstant(id, value))
      : Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["f" /* get */])(this.node(), id).ease;
});


/***/ }),
/* 263 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index__ = __webpack_require__(13);



/* harmony default export */ __webpack_exports__["a"] = (function(match) {
  if (typeof match !== "function") match = Object(__WEBPACK_IMPORTED_MODULE_0_d3_selection__["matcher"])(match);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {
      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {
        subgroup.push(node);
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_1__index__["a" /* Transition */](subgroups, this._parents, this._name, this._id);
});


/***/ }),
/* 264 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(13);


/* harmony default export */ __webpack_exports__["a"] = (function(transition) {
  if (transition._id !== this._id) throw new Error;

  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {
    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {
      if (node = group0[i] || group1[i]) {
        merge[i] = node;
      }
    }
  }

  for (; j < m0; ++j) {
    merges[j] = groups0[j];
  }

  return new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Transition */](merges, this._parents, this._name, this._id);
});


/***/ }),
/* 265 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__schedule__ = __webpack_require__(6);


function start(name) {
  return (name + "").trim().split(/^|\s+/).every(function(t) {
    var i = t.indexOf(".");
    if (i >= 0) t = t.slice(0, i);
    return !t || t === "start";
  });
}

function onFunction(id, name, listener) {
  var on0, on1, sit = start(name) ? __WEBPACK_IMPORTED_MODULE_0__schedule__["g" /* init */] : __WEBPACK_IMPORTED_MODULE_0__schedule__["h" /* set */];
  return function() {
    var schedule = sit(this, id),
        on = schedule.on;

    // If this node shared a dispatch with the previous node,
    // just assign the updated shared dispatch and we’re done!
    // Otherwise, copy-on-write.
    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);

    schedule.on = on1;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, listener) {
  var id = this._id;

  return arguments.length < 2
      ? Object(__WEBPACK_IMPORTED_MODULE_0__schedule__["f" /* get */])(this.node(), id).on.on(name)
      : this.each(onFunction(id, name, listener));
});


/***/ }),
/* 266 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function removeFunction(id) {
  return function() {
    var parent = this.parentNode;
    for (var i in this.__transition) if (+i !== id) return;
    if (parent) parent.removeChild(this);
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  return this.on("end.remove", removeFunction(this._id));
});


/***/ }),
/* 267 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__schedule__ = __webpack_require__(6);




/* harmony default export */ __webpack_exports__["a"] = (function(select) {
  var name = this._name,
      id = this._id;

  if (typeof select !== "function") select = Object(__WEBPACK_IMPORTED_MODULE_0_d3_selection__["selector"])(select);

  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {
      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {
        if ("__data__" in node) subnode.__data__ = node.__data__;
        subgroup[i] = subnode;
        Object(__WEBPACK_IMPORTED_MODULE_2__schedule__["e" /* default */])(subgroup[i], name, id, i, subgroup, Object(__WEBPACK_IMPORTED_MODULE_2__schedule__["f" /* get */])(node, id));
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_1__index__["a" /* Transition */](subgroups, this._parents, name, id);
});


/***/ }),
/* 268 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__schedule__ = __webpack_require__(6);




/* harmony default export */ __webpack_exports__["a"] = (function(select) {
  var name = this._name,
      id = this._id;

  if (typeof select !== "function") select = Object(__WEBPACK_IMPORTED_MODULE_0_d3_selection__["selectorAll"])(select);

  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        for (var children = select.call(node, node.__data__, i, group), child, inherit = Object(__WEBPACK_IMPORTED_MODULE_2__schedule__["f" /* get */])(node, id), k = 0, l = children.length; k < l; ++k) {
          if (child = children[k]) {
            Object(__WEBPACK_IMPORTED_MODULE_2__schedule__["e" /* default */])(child, name, id, k, children, inherit);
          }
        }
        subgroups.push(children);
        parents.push(node);
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_1__index__["a" /* Transition */](subgroups, parents, name, id);
});


/***/ }),
/* 269 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);


var Selection = __WEBPACK_IMPORTED_MODULE_0_d3_selection__["selection"].prototype.constructor;

/* harmony default export */ __webpack_exports__["a"] = (function() {
  return new Selection(this._groups, this._parents);
});


/***/ }),
/* 270 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_interpolate__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tween__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interpolate__ = __webpack_require__(92);





function styleRemove(name, interpolate) {
  var value00,
      value10,
      interpolate0;
  return function() {
    var value0 = Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["style"])(this, name),
        value1 = (this.style.removeProperty(name), Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["style"])(this, name));
    return value0 === value1 ? null
        : value0 === value00 && value1 === value10 ? interpolate0
        : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

function styleRemoveEnd(name) {
  return function() {
    this.style.removeProperty(name);
  };
}

function styleConstant(name, interpolate, value1) {
  var value00,
      interpolate0;
  return function() {
    var value0 = Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["style"])(this, name);
    return value0 === value1 ? null
        : value0 === value00 ? interpolate0
        : interpolate0 = interpolate(value00 = value0, value1);
  };
}

function styleFunction(name, interpolate, value) {
  var value00,
      value10,
      interpolate0;
  return function() {
    var value0 = Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["style"])(this, name),
        value1 = value(this);
    if (value1 == null) value1 = (this.style.removeProperty(name), Object(__WEBPACK_IMPORTED_MODULE_1_d3_selection__["style"])(this, name));
    return value0 === value1 ? null
        : value0 === value00 && value1 === value10 ? interpolate0
        : interpolate0 = interpolate(value00 = value0, value10 = value1);
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value, priority) {
  var i = (name += "") === "transform" ? __WEBPACK_IMPORTED_MODULE_0_d3_interpolate__["g" /* interpolateTransformCss */] : __WEBPACK_IMPORTED_MODULE_3__interpolate__["a" /* default */];
  return value == null ? this
          .styleTween(name, styleRemove(name, i))
          .on("end.style." + name, styleRemoveEnd(name))
      : this.styleTween(name, typeof value === "function"
          ? styleFunction(name, i, Object(__WEBPACK_IMPORTED_MODULE_2__tween__["b" /* tweenValue */])(this, "style." + name, value))
          : styleConstant(name, i, value + ""), priority);
});


/***/ }),
/* 271 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
function styleTween(name, value, priority) {
  function tween() {
    var node = this, i = value.apply(node, arguments);
    return i && function(t) {
      node.style.setProperty(name, i(t), priority);
    };
  }
  tween._value = value;
  return tween;
}

/* harmony default export */ __webpack_exports__["a"] = (function(name, value, priority) {
  var key = "style." + (name += "");
  if (arguments.length < 2) return (key = this.tween(key)) && key._value;
  if (value == null) return this.tween(key, null);
  if (typeof value !== "function") throw new Error;
  return this.tween(key, styleTween(name, value, priority == null ? "" : priority));
});


/***/ }),
/* 272 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__tween__ = __webpack_require__(31);


function textConstant(value) {
  return function() {
    this.textContent = value;
  };
}

function textFunction(value) {
  return function() {
    var value1 = value(this);
    this.textContent = value1 == null ? "" : value1;
  };
}

/* harmony default export */ __webpack_exports__["a"] = (function(value) {
  return this.tween("text", typeof value === "function"
      ? textFunction(Object(__WEBPACK_IMPORTED_MODULE_0__tween__["b" /* tweenValue */])(this, "text", value))
      : textConstant(value == null ? "" : value + ""));
});


/***/ }),
/* 273 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__index__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__schedule__ = __webpack_require__(6);



/* harmony default export */ __webpack_exports__["a"] = (function() {
  var name = this._name,
      id0 = this._id,
      id1 = Object(__WEBPACK_IMPORTED_MODULE_0__index__["b" /* newId */])();

  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {
    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {
      if (node = group[i]) {
        var inherit = Object(__WEBPACK_IMPORTED_MODULE_1__schedule__["f" /* get */])(node, id0);
        Object(__WEBPACK_IMPORTED_MODULE_1__schedule__["e" /* default */])(node, name, id1, i, group, {
          time: inherit.time + inherit.delay + inherit.duration,
          delay: 0,
          duration: inherit.duration,
          ease: inherit.ease
        });
      }
    }
  }

  return new __WEBPACK_IMPORTED_MODULE_0__index__["a" /* Transition */](groups, this._parents, name, id1);
});


/***/ }),
/* 274 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = linear;
function linear(t) {
  return +t;
}


/***/ }),
/* 275 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = quadIn;
/* harmony export (immutable) */ __webpack_exports__["c"] = quadOut;
/* harmony export (immutable) */ __webpack_exports__["b"] = quadInOut;
function quadIn(t) {
  return t * t;
}

function quadOut(t) {
  return t * (2 - t);
}

function quadInOut(t) {
  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;
}


/***/ }),
/* 276 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = cubicIn;
/* harmony export (immutable) */ __webpack_exports__["c"] = cubicOut;
/* harmony export (immutable) */ __webpack_exports__["b"] = cubicInOut;
function cubicIn(t) {
  return t * t * t;
}

function cubicOut(t) {
  return --t * t * t + 1;
}

function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}


/***/ }),
/* 277 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return polyIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return polyOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return polyInOut; });
var exponent = 3;

var polyIn = (function custom(e) {
  e = +e;

  function polyIn(t) {
    return Math.pow(t, e);
  }

  polyIn.exponent = custom;

  return polyIn;
})(exponent);

var polyOut = (function custom(e) {
  e = +e;

  function polyOut(t) {
    return 1 - Math.pow(1 - t, e);
  }

  polyOut.exponent = custom;

  return polyOut;
})(exponent);

var polyInOut = (function custom(e) {
  e = +e;

  function polyInOut(t) {
    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;
  }

  polyInOut.exponent = custom;

  return polyInOut;
})(exponent);


/***/ }),
/* 278 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = sinIn;
/* harmony export (immutable) */ __webpack_exports__["c"] = sinOut;
/* harmony export (immutable) */ __webpack_exports__["b"] = sinInOut;
var pi = Math.PI,
    halfPi = pi / 2;

function sinIn(t) {
  return 1 - Math.cos(t * halfPi);
}

function sinOut(t) {
  return Math.sin(t * halfPi);
}

function sinInOut(t) {
  return (1 - Math.cos(pi * t)) / 2;
}


/***/ }),
/* 279 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = expIn;
/* harmony export (immutable) */ __webpack_exports__["c"] = expOut;
/* harmony export (immutable) */ __webpack_exports__["b"] = expInOut;
function expIn(t) {
  return Math.pow(2, 10 * t - 10);
}

function expOut(t) {
  return 1 - Math.pow(2, -10 * t);
}

function expInOut(t) {
  return ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2;
}


/***/ }),
/* 280 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = circleIn;
/* harmony export (immutable) */ __webpack_exports__["c"] = circleOut;
/* harmony export (immutable) */ __webpack_exports__["b"] = circleInOut;
function circleIn(t) {
  return 1 - Math.sqrt(1 - t * t);
}

function circleOut(t) {
  return Math.sqrt(1 - --t * t);
}

function circleInOut(t) {
  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;
}


/***/ }),
/* 281 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = bounceIn;
/* harmony export (immutable) */ __webpack_exports__["c"] = bounceOut;
/* harmony export (immutable) */ __webpack_exports__["b"] = bounceInOut;
var b1 = 4 / 11,
    b2 = 6 / 11,
    b3 = 8 / 11,
    b4 = 3 / 4,
    b5 = 9 / 11,
    b6 = 10 / 11,
    b7 = 15 / 16,
    b8 = 21 / 22,
    b9 = 63 / 64,
    b0 = 1 / b1 / b1;

function bounceIn(t) {
  return 1 - bounceOut(1 - t);
}

function bounceOut(t) {
  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;
}

function bounceInOut(t) {
  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;
}


/***/ }),
/* 282 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return backIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return backOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return backInOut; });
var overshoot = 1.70158;

var backIn = (function custom(s) {
  s = +s;

  function backIn(t) {
    return t * t * ((s + 1) * t - s);
  }

  backIn.overshoot = custom;

  return backIn;
})(overshoot);

var backOut = (function custom(s) {
  s = +s;

  function backOut(t) {
    return --t * t * ((s + 1) * t + s) + 1;
  }

  backOut.overshoot = custom;

  return backOut;
})(overshoot);

var backInOut = (function custom(s) {
  s = +s;

  function backInOut(t) {
    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;
  }

  backInOut.overshoot = custom;

  return backInOut;
})(overshoot);


/***/ }),
/* 283 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return elasticIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return elasticOut; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return elasticInOut; });
var tau = 2 * Math.PI,
    amplitude = 1,
    period = 0.3;

var elasticIn = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticIn(t) {
    return a * Math.pow(2, 10 * --t) * Math.sin((s - t) / p);
  }

  elasticIn.amplitude = function(a) { return custom(a, p * tau); };
  elasticIn.period = function(p) { return custom(a, p); };

  return elasticIn;
})(amplitude, period);

var elasticOut = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticOut(t) {
    return 1 - a * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / p);
  }

  elasticOut.amplitude = function(a) { return custom(a, p * tau); };
  elasticOut.period = function(p) { return custom(a, p); };

  return elasticOut;
})(amplitude, period);

var elasticInOut = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticInOut(t) {
    return ((t = t * 2 - 1) < 0
        ? a * Math.pow(2, 10 * t) * Math.sin((s - t) / p)
        : 2 - a * Math.pow(2, -10 * t) * Math.sin((s + t) / p)) / 2;
  }

  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };
  elasticInOut.period = function(p) { return custom(a, p); };

  return elasticInOut;
})(amplitude, period);


/***/ }),
/* 284 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__transition_index__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__transition_schedule__ = __webpack_require__(6);



var root = [null];

/* unused harmony default export */ var _unused_webpack_default_export = (function(node, name) {
  var schedules = node.__transition,
      schedule,
      i;

  if (schedules) {
    name = name == null ? null : name + "";
    for (i in schedules) {
      if ((schedule = schedules[i]).state > __WEBPACK_IMPORTED_MODULE_1__transition_schedule__["c" /* SCHEDULED */] && schedule.name === name) {
        return new __WEBPACK_IMPORTED_MODULE_0__transition_index__["a" /* Transition */]([[node]], root, name, +i);
      }
    }
  }

  return null;
});


/***/ }),
/* 285 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return function() {
    return x;
  };
});


/***/ }),
/* 286 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = ZoomEvent;
function ZoomEvent(target, type, transform) {
  this.target = target;
  this.type = type;
  this.transform = transform;
}


/***/ }),
/* 287 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = nopropagation;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);


function nopropagation() {
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].stopImmediatePropagation();
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].preventDefault();
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].stopImmediatePropagation();
});


/***/ }),
/* 288 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Draw. Manages creating, updating, and removing objects during d3 data
 * binding.
 *
 * Arguments
 * ---------
 *
 * behavior: An escher.Behavior object.
 * settings: An escher.Settings object.
 *
 * Callbacks
 * ---------
 *
 * draw.callback_manager.run('create_membrane', draw, enter_selection)
 * draw.callback_manager.run('update_membrane', draw, update_selection)
 * draw.callback_manager.run('create_reaction', draw, enter_selection)
 * draw.callback_manager.run('update_reaction', draw, update_selection)
 * draw.callback_manager.run('create_reaction_label', draw, enter_selection)
 * draw.callback_manager.run('update_reaction_label', draw, update_selection)
 * draw.callback_manager.run('create_segment', draw, enter_selection)
 * draw.callback_manager.run('update_segment', draw, update_selection)
 * draw.callback_manager.run('create_bezier', draw, enter_selection)
 * draw.callback_manager.run('update_bezier', draw, update_selection)
 * draw.callback_manager.run('create_node', draw, enter_selection)
 * draw.callback_manager.run('update_node', draw, update_selection)
 * draw.callback_manager.run('create_text_label', draw, enter_selection)
 * draw.callback_manager.run('update_text_label', draw, update_selection)
 *
 */

var utils = __webpack_require__(1);
var data_styles = __webpack_require__(20);
var CallbackManager = __webpack_require__(17);
var d3_format = __webpack_require__(21).format;
var d3_select = __webpack_require__(0).select;
var d3_ease = __webpack_require__(93);
var _ = __webpack_require__(2);

var Draw = utils.make_class();
// instance methods
Draw.prototype = {
  init: init,
  create_reaction: create_reaction,
  update_reaction: update_reaction,
  create_bezier: create_bezier,
  update_bezier: update_bezier,
  create_node: create_node,
  update_node: update_node,
  create_text_label: create_text_label,
  update_text_label: update_text_label,
  create_membrane: create_membrane,
  update_membrane: update_membrane,
  create_reaction_label: create_reaction_label,
  update_reaction_label: update_reaction_label,
  create_segment: create_segment,
  update_segment: update_segment
};
module.exports = Draw;

function init(behavior, settings, map) {
  this.behavior = behavior;
  this.settings = settings;
  this.map = map;
  this.callback_manager = new CallbackManager();
}

/**
 * Create membranes in the enter_selection.
 * @param {} enter_selection - The D3 enter selection.
 * @returns {} The selection of the new nodes.
 */
function create_membrane(enter_selection) {
  var rect = enter_selection.append('rect').attr('class', 'membrane');

  this.callback_manager.run('create_membrane', this, enter_selection);

  return rect;
}

/**
 * Update the membrane
 */
function update_membrane(update_selection) {
  update_selection.attr('width', function (d) {
    return d.width;
  }).attr('height', function (d) {
    return d.height;
  }).attr('transform', function (d) {
    return 'translate(' + d.x + ',' + d.y + ')';
  }).style('stroke-width', function (d) {
    return 10;
  }).attr('rx', function (d) {
    return 20;
  }).attr('ry', function (d) {
    return 20;
  });

  this.callback_manager.run('update_membrane', this, update_selection);
}

/**
 * Create reactions in the enter_selection.
 * @param {} enter_selection - The D3 enter selection.
 * @returns {} The selection of the new nodes.
 */
function create_reaction(enter_selection) {
  // attributes for new reaction group
  var group = enter_selection.append('g').attr('id', function (d) {
    return 'r' + d.reaction_id;
  }).attr('class', 'reaction');
  this.create_reaction_label(group);

  this.callback_manager.run('create_reaction', this, enter_selection);

  return group;
}

/**
 * Run on the update selection for reactions.
 * update_selection: The D3.js update selection.
 * scale: A Scale object.
 * cobra_model: A CobraModel object.
 * drawn_nodes: The nodes object (e.g. Map.nodes).
 * defs: The defs object generated by utils.setup_defs() (e.g. Map.defs).
 * has_data_on_reactions: Boolean to determine whether data needs to be drawn.
 */
function update_reaction(update_selection, scale, cobra_model, drawn_nodes, defs, has_data_on_reactions, interpolation, transition_duration) {
  // Update reaction label
  update_selection.select('.reaction-label-group').call(function (sel) {
    return this.update_reaction_label(sel, has_data_on_reactions);
  }.bind(this));

  // draw segments
  utils.draw_a_nested_object(update_selection, '.segment-group', 'segments', 'segment_id', this.create_segment.bind(this), function (sel) {
    return this.update_segment(sel, scale, cobra_model, drawn_nodes, defs, has_data_on_reactions, interpolation, transition_duration);
  }.bind(this), function (sel) {
    sel.remove();
  });

  // run the callback
  this.callback_manager.run('update_reaction', this, update_selection);
}

/**
 * Draw reaction labels in the enter selection.
 * @param {} enter_selection - The D3 enter selection.
 * @returns {} The selection of the new nodes.
 */
function create_reaction_label(enter_selection, tool) {
  var group = enter_selection.append('g').attr('class', 'reaction-label-group');
  group.append('text').attr('class', 'reaction-label label');
  group.append('g').attr('class', 'all-genes-label-group');

  this.callback_manager.run('create_reaction_label', this, enter_selection);

  return group;
}

/**
 * Run on the update selection for reaction labels.
 * @param {D3 Selection} update_selection - The D3.js update selection.
 * @param {Boolean} has_data_on_reactions - Whether data needs to be drawn.
 */
function update_reaction_label(update_selection, has_data_on_reactions) {
  var _this = this;

  var decimal_format = d3_format('.4g');
  var identifiers_on_map = this.settings.get_option('identifiers_on_map');
  var reaction_data_styles = this.settings.get_option('reaction_styles');
  var show_gene_reaction_rules = this.settings.get_option('show_gene_reaction_rules');
  var hide_all_labels = this.settings.get_option('hide_all_labels');
  var gene_font_size = this.settings.get_option('gene_font_size');
  var label_mousedown_fn = this.behavior.label_mousedown;
  var label_mouseover_fn = this.behavior.label_mouseover;
  var label_mouseout_fn = this.behavior.label_mouseout;
  var label_touch_fn = this.behavior.label_touch;

  // label location
  update_selection.attr('transform', function (d) {
    return 'translate(' + d.label_x + ',' + d.label_y + ')';
  }).call(this.behavior.turn_off_drag).call(this.behavior.reaction_label_drag);

  // update label visibility
  var label = update_selection.select('.reaction-label').attr('visibility', hide_all_labels ? 'hidden' : 'visible');

  if (!hide_all_labels) {
    label
    //.transition()
    .text(function (d) {
      var t = d[identifiers_on_map];
      if (has_data_on_reactions && reaction_data_styles.indexOf('text') !== -1) {
        t += ' ' + d.data_string; // TODO: interpolate data_string?
      }
      return t;
    });

    label.on('mousedown', label_mousedown_fn).on('mouseover', function (d) {
      label_mouseover_fn('reaction_label', d);
    }).on('mouseout', label_mouseout_fn).on('touchend', function (d) {
      label_touch_fn('reaction_label', d);
    }).call(function (sel) {
      _this.map.callback_manager.run('update_tooltip', null, 'reaction_label', sel);
    });
  }

  var add_gene_height = function add_gene_height(y, i) {
    return y + gene_font_size * 1.5 * (i + 1);
  };

  // gene label
  var all_genes_g = update_selection.select('.all-genes-label-group').selectAll('.gene-label-group').data(function (d) {
    var show_gene_string = 'gene_string' in d && d.gene_string !== null && show_gene_reaction_rules && !hide_all_labels && reaction_data_styles.indexOf('text') !== -1;
    var show_gene_reaction_rule = 'gene_reaction_rule' in d && d.gene_reaction_rule !== null && show_gene_reaction_rules && !hide_all_labels;
    if (show_gene_string) {
      // TODO do we ever use gene_string?
      console.warn('Showing gene_string. See TODO in source.');
      return d.gene_string;
    } else if (show_gene_reaction_rule) {
      // make the gene string with no data
      var sd = data_styles.gene_string_for_data(d.gene_reaction_rule, null, d.genes, null, identifiers_on_map, null);
      // add coords for tooltip
      sd.forEach(function (td, i) {
        td.label_x = d.label_x;
        td.label_y = add_gene_height(d.label_y, i);
      });
      return sd;
    } else {
      return [];
    }
  });

  // enter
  var gene_g = all_genes_g.enter().append('g').attr('class', 'gene-label-group');
  gene_g.append('text').attr('class', 'gene-label').style('font-size', gene_font_size + 'px').on('mousedown', label_mousedown_fn).on('mouseover', function (d) {
    label_mouseover_fn('gene_label', d);
  }).on('mouseout', label_mouseout_fn);

  // update
  var gene_update = gene_g.merge(all_genes_g);
  gene_update.attr('transform', function (d, i) {
    return 'translate(0, ' + add_gene_height(0, i) + ')';
  });
  // update text
  gene_update.select('text').text(function (d) {
    return d['text'];
  });

  // exit
  all_genes_g.exit().remove();

  this.callback_manager.run('update_reaction_label', this, update_selection);
}

/**
 * Create segments in the enter_selection.
 * @param {} enter_selection - The D3 enter selection.
 * @returns {} The selection of the new nodes.
 */
function create_segment(enter_selection) {
  // create segments
  var g = enter_selection.append('g').attr('class', 'segment-group').attr('id', function (d) {
    return 's' + d.segment_id;
  });

  // create reaction arrow
  g.append('path').attr('class', 'segment');

  g.append('g').attr('class', 'arrowheads');

  g.append('g').attr('class', 'stoichiometry-labels');

  this.callback_manager.run('create_segment', this, enter_selection);

  return g;
}

/**
 * Update segments in update selection.
 * @param {} -
 * @param {} -
 * @param {} -
 * @param {} -
 * @param {} -
 * @param {} -
 * @return {}
 */
function update_segment(update_selection, scale, cobra_model, drawn_nodes, defs, has_data_on_reactions, interpolation, transition_duration) {
  var reaction_data_styles = this.settings.get_option('reaction_styles');
  var should_size = has_data_on_reactions && reaction_data_styles.indexOf('size') !== -1;
  var should_color = has_data_on_reactions && reaction_data_styles.indexOf('color') !== -1;
  var no_data_size = this.settings.get_option('reaction_no_data_size');
  var no_data_color = this.settings.get_option('reaction_no_data_color');

  // update segment attributes
  var highlight_missing = this.settings.get_option('highlight_missing');
  var hide_secondary_metabolites = this.settings.get_option('hide_secondary_metabolites');
  var primary_r = this.settings.get_option('primary_metabolite_radius');
  var secondary_r = this.settings.get_option('secondary_metabolite_radius');
  var get_arrow_size = function get_arrow_size(data, should_size) {
    var width = 20;
    var height = 13;
    if (should_size) {
      height = data === null ? no_data_size : scale.reaction_size(data);
      // check for nan
      if (isNaN(height)) {
        height = no_data_size;
      }
      width = height * 2;
    }
    return { width: width, height: height };
  },
      get_disp = function get_disp(arrow_size, reversibility, coefficient, node_is_primary) {
    var arrow_height = reversibility || coefficient > 0 ? arrow_size.height : 0;
    var r = node_is_primary ? primary_r : secondary_r;
    return r + arrow_height + 10;
  };

  // update arrows
  update_selection.selectAll('.segment').datum(function () {
    return this.parentNode.__data__;
  }).style('visibility', function (d) {
    var start = drawn_nodes[d.from_node_id];
    var end = drawn_nodes[d.to_node_id];
    if (hide_secondary_metabolites && (end['node_type'] === 'metabolite' && !end.node_is_primary || start['node_type'] === 'metabolite' && !start.node_is_primary)) {
      return 'hidden';
    }
    return null;
  }).attr('d', function (d) {
    if (d.from_node_id === null || d.to_node_id === null) {
      return null;
    }
    var start = drawn_nodes[d.from_node_id];
    var end = drawn_nodes[d.to_node_id];
    var b1 = d.b1;
    var b2 = d.b2;
    // if metabolite, then displace the arrow
    if (start['node_type'] === 'metabolite') {
      var arrow_size = get_arrow_size(d.data, should_size);
      var disp = get_disp(arrow_size, d.reversibility, d.from_node_coefficient, start.node_is_primary);
      var direction = b1 === null ? end : b1;
      start = displaced_coords(disp, start, direction, 'start');
    }
    if (end['node_type'] == 'metabolite') {
      var arrow_size = get_arrow_size(d.data, should_size);
      var disp = get_disp(arrow_size, d.reversibility, d.to_node_coefficient, end.node_is_primary);
      var direction = b2 === null ? start : b2;
      end = displaced_coords(disp, direction, end, 'end');
    }
    var curve = 'M' + start.x + ',' + start.y + ' ';
    if (b1 !== null && b2 !== null) {
      curve += 'C' + b1.x + ',' + b1.y + ' ' + b2.x + ',' + b2.y + ' ';
    }
    curve += end.x + ',' + end.y;
    return curve;
  });

  if (interpolation) {

    // TODO: reaction color does not work with interpolation
    update_selection.selectAll('.segment').datum(function () {
      return this.parentNode.__data__;
    }).transition().duration(transition_duration).ease(d3_ease.easeLinear).style('stroke', function (d) {
      var reaction_id = this.parentNode.parentNode.__data__.bigg_id;
      var show_missing = highlight_missing && cobra_model !== null && !(reaction_id in cobra_model.reactions);
      if (show_missing) {
        return 'red';
      }
      if (should_color) {
        var f = d.data;
        return f === null ? no_data_color : scale.reaction_color(f);
      }
      return null;
    });

    // reaction stroke-width
    update_selection.selectAll('.segment').transition().duration(transition_duration).ease(d3_ease.easeLinear).style('stroke-width', function (d) {
      if (should_size) {
        var f = d.data;
        return f === null ? no_data_size : scale.reaction_size(f);
      } else {
        return null;
      }
    });
  } else {

    // reaction color
    update_selection.selectAll('.segment').datum(function () {
      return this.parentNode.__data__;
    }).style('stroke', function (d) {
      var reaction_id = this.parentNode.parentNode.__data__.bigg_id;
      var show_missing = highlight_missing && cobra_model !== null && !(reaction_id in cobra_model.reactions);
      if (show_missing) {
        return 'red';
      }
      if (should_color) {
        var f = d.data;
        return f === null ? no_data_color : scale.reaction_color(f);
      }
      return null;
    });

    // reaction stroke-width
    update_selection.selectAll('.segment').style('stroke-width', function (d) {
      if (should_size) {
        var f = d.data;
        return f === null ? no_data_size : scale.reaction_size(f);
      } else {
        return null;
      }
    });
  }

  // new arrowheads
  var arrowheads = update_selection.select('.arrowheads').selectAll('.arrowhead').data(function (d) {
    var arrowheads = [];
    var start = drawn_nodes[d.from_node_id];
    var b1 = d.b1;
    var end = drawn_nodes[d.to_node_id];
    var b2 = d.b2;
    // hide_secondary_metabolites option
    if (hide_secondary_metabolites && (end['node_type'] === 'metabolite' && !end.node_is_primary || start['node_type'] === 'metabolite' && !start.node_is_primary)) {
      return arrowheads;
    }

    if (start.node_type === 'metabolite' && (d.reversibility || d.from_node_coefficient > 0)) {
      var arrow_size = get_arrow_size(d.data, should_size);
      var disp = get_disp(arrow_size, d.reversibility, d.from_node_coefficient, start.node_is_primary);
      var direction = b1 === null ? end : b1;
      var rotation = utils.to_degrees(utils.get_angle([start, direction])) + 90;
      var loc = displaced_coords(disp, start, direction, 'start');
      arrowheads.push({
        data: d.data,
        x: loc.x,
        y: loc.y,
        size: arrow_size,
        rotation: rotation,
        show_arrowhead_flux: d.from_node_coefficient < 0 === d.reverse_flux || d.data === 0
      });
    }

    if (end.node_type === 'metabolite' && (d.reversibility || d.to_node_coefficient > 0)) {
      var arrow_size = get_arrow_size(d.data, should_size);
      var disp = get_disp(arrow_size, d.reversibility, d.to_node_coefficient, end.node_is_primary);
      var direction = b2 === null ? start : b2;
      var rotation = utils.to_degrees(utils.get_angle([end, direction])) + 90;
      var loc = displaced_coords(disp, direction, end, 'end');
      arrowheads.push({
        data: d.data,
        x: loc.x,
        y: loc.y,
        size: arrow_size,
        rotation: rotation,
        show_arrowhead_flux: d.to_node_coefficient < 0 === d.reverse_flux || d.data === 0
      });
    }

    if (d.unconnected_segment_with_arrow) {
      var arrow_size = get_arrow_size(d.data, should_size);
      var direction = end;
      var rotation = utils.to_degrees(utils.get_angle([start, direction])) + 90;
      arrowheads.push({
        data: d.data,
        x: start.x,
        y: start.y,
        size: arrow_size,
        rotation: rotation,
        show_arrowhead_flux: d.to_node_coefficient < 0 === d.reverse_flux || d.data === 0
      });
    }

    return arrowheads;
  });
  arrowheads.enter().append('path').classed('arrowhead', true)
  // update arrowheads
  .merge(arrowheads).attr('d', function (d) {
    return 'M' + [-d.size.width / 2, 0] + ' L' + [0, d.size.height] + ' L' + [d.size.width / 2, 0] + ' Z';
  }).attr('transform', function (d) {
    return 'translate(' + d.x + ',' + d.y + ')rotate(' + d.rotation + ')';
  }).style('fill', function (d) {
    if (should_color) {
      if (d.show_arrowhead_flux) {
        // show the flux
        var f = d.data;
        return f === null ? no_data_color : scale.reaction_color(f);
      } else {
        // if the arrowhead is not filled because it is reversed
        return '#FFFFFF';
      }
    }
    // default fill color
    return null;
  }).style('stroke', function (d) {
    if (should_color) {
      // show the flux color in the stroke whether or not the fill is present
      var f = d.data;
      return f === null ? no_data_color : scale.reaction_color(f);
    }
    // default stroke color
    return null;
  });
  // remove
  arrowheads.exit().remove();

  // new stoichiometry labels
  var stoichiometry_labels = update_selection.select('.stoichiometry-labels').selectAll('.stoichiometry-label').data(function (d) {
    var labels = [];
    var start = drawn_nodes[d.from_node_id];
    var b1 = d.b1;
    var end = drawn_nodes[d.to_node_id];
    var b2 = d.b2;
    var disp_factor = 1.5;

    // hide_secondary_metabolites option
    if (hide_secondary_metabolites && (end['node_type'] == 'metabolite' && !end.node_is_primary || start['node_type'] == 'metabolite' && !start.node_is_primary)) {
      return labels;
    }

    if (start.node_type === 'metabolite' && Math.abs(d.from_node_coefficient) != 1) {
      var arrow_size = get_arrow_size(d.data, should_size);
      var disp = disp_factor * get_disp(arrow_size, false, 0, end.node_is_primary);
      var direction = b1 === null ? end : b1;
      direction = utils.c_plus_c(direction, utils.rotate_coords(direction, 0.5, start));
      var loc = displaced_coords(disp, start, direction, 'start');
      loc = utils.c_plus_c(loc, { x: 0, y: 7 });
      labels.push({
        coefficient: Math.abs(d.from_node_coefficient),
        x: loc.x,
        y: loc.y,
        data: d.data
      });
    }

    if (end.node_type === 'metabolite' && Math.abs(d.to_node_coefficient) !== 1) {
      var arrow_size = get_arrow_size(d.data, should_size);
      var disp = disp_factor * get_disp(arrow_size, false, 0, end.node_is_primary);
      var direction = b2 === null ? start : b2;
      direction = utils.c_plus_c(direction, utils.rotate_coords(direction, 0.5, end));
      var loc = displaced_coords(disp, direction, end, 'end');
      loc = utils.c_plus_c(loc, { x: 0, y: 7 });
      labels.push({
        coefficient: Math.abs(d.to_node_coefficient),
        x: loc.x,
        y: loc.y,
        data: d.data
      });
    }
    return labels;
  });

  // add labels
  stoichiometry_labels.enter().append('text').attr('class', 'stoichiometry-label').attr('text-anchor', 'middle')
  // update stoichiometry_labels
  .merge(stoichiometry_labels).attr('transform', function (d) {
    return 'translate(' + d.x + ',' + d.y + ')';
  }).text(function (d) {
    return d.coefficient;
  })
  //.transition()
  //.ease(d3.easeLinear)
  .style('fill', function (d) {
    if (should_color) {
      // show the flux color
      var f = d.data;
      return f === null ? no_data_color : scale.reaction_color(f);
    }
    // default segment color
    return null;
  });

  // remove
  stoichiometry_labels.exit().remove();

  this.callback_manager.run('update_segment', this, update_selection);
}

/**
 * Create beziers in the enter_selection.
 * @param {} enter_selection - The D3 enter selection.
 * @returns {} The selection of the new nodes.
 */
function create_bezier(enter_selection) {
  var g = enter_selection.append('g').attr('id', function (d) {
    return d.bezier_id;
  }).attr('class', function (d) {
    return 'bezier';
  });
  g.append('path').attr('class', 'connect-line');
  g.append('circle').attr('class', function (d) {
    return 'bezier-circle ' + d.bezier;
  }).style('stroke-width', String(1) + 'px').attr('r', String(7) + 'px');

  this.callback_manager.run('create_bezier', this, enter_selection);

  return g;
}

/**
 * Update beziers in update_selection.
 */
function update_bezier(update_selection, show_beziers, drag_behavior, mouseover, mouseout, drawn_nodes, drawn_reactions) {
  var hide_secondary_metabolites = this.settings.get_option('hide_secondary_metabolites');

  if (!show_beziers) {
    update_selection.attr('visibility', 'hidden');
    return;
  } else {
    update_selection.attr('visibility', 'visible');
  }

  // hide secondary
  update_selection.style('visibility', function (d) {
    var seg_data = drawn_reactions[d.reaction_id].segments[d.segment_id],
        start = drawn_nodes[seg_data.from_node_id],
        end = drawn_nodes[seg_data.to_node_id];
    if (hide_secondary_metabolites && (end['node_type'] == 'metabolite' && !end.node_is_primary || start['node_type'] == 'metabolite' && !start.node_is_primary)) return 'hidden';
    return null;
  });

  // draw bezier points
  update_selection.select('.bezier-circle').call(this.behavior.turn_off_drag).call(drag_behavior).on('mouseover', mouseover).on('mouseout', mouseout).attr('transform', function (d) {
    if (d.x == null || d.y == null) return '';
    return 'translate(' + d.x + ',' + d.y + ')';
  });

  // update bezier line
  update_selection.select('.connect-line').attr('d', function (d) {
    var node,
        segment_d = drawn_reactions[d.reaction_id].segments[d.segment_id];
    node = d.bezier == 'b1' ? drawn_nodes[segment_d.from_node_id] : drawn_nodes[segment_d.to_node_id];
    if (d.x == null || d.y == null || node.x == null || node.y == null) return '';
    return 'M' + d.x + ', ' + d.y + ' ' + node.x + ',' + node.y;
  });

  this.callback_manager.run('update_bezier', this, update_selection);
}

/**
 * Create nodes in the enter_selection.
 * @param {} enter_selection - The D3 enter selection.
 * @param {} drawn_nodes - The nodes object (e.g. Map.nodes).
 * @param {} drawn_reactions - The reactions object (e.g. Map.reactions).
 * @returns {} The selection of the new nodes.
 */
function create_node(enter_selection, drawn_nodes, drawn_reactions) {
  // create nodes
  var g = enter_selection.append('g').attr('class', 'node').attr('id', function (d) {
    return 'n' + d.node_id;
  });

  // create metabolite circle and label
  g.append('circle').attr('class', function (d) {
    var c = 'node-circle';
    if (d.node_type !== null) c += ' ' + d.node_type + '-circle';
    return c;
  });

  // labels
  var metabolite_groups = g.filter(function (d) {
    return d.node_type === 'metabolite';
  });

  metabolite_groups.append('text').attr('class', 'node-label label');

  this.callback_manager.run('create_node', this, enter_selection);

  return g;
}

/**
 * Run on the update selection for nodes.
 * @param {D3 Selection} update_selection - The D3.js update selection.
 * @param {Scale} scale - A Scale object.
 * @param {Boolean} has_data_on_nodes - Boolean to determine whether data needs to be drawn.
 * @param {Function} mousedown_fn - A function to call on mousedown for a node.
 * @param {Function} click_fn - A function to call on click for a node.
 * @param {Function} mouseover_fn - A function to call on mouseover for a node.
 * @param {Function} mouseout_fn - A function to call on mouseout for a node.
 * @param {D3 Behavior} drag_behavior - The D3.js drag behavior object for the nodes.
 * @param {D3 Behavior} label_drag_behavior - The D3.js drag behavior object for the node labels.
 */
function update_node(update_selection, scale, has_data_on_nodes, mousedown_fn, click_fn, mouseover_fn, mouseout_fn, drag_behavior, label_drag_behavior, interpolation, transition_duration) {
  // update circle and label location
  var hide_secondary_metabolites = this.settings.get_option('hide_secondary_metabolites');
  var primary_r = this.settings.get_option('primary_metabolite_radius');
  var secondary_r = this.settings.get_option('secondary_metabolite_radius');
  var marker_r = this.settings.get_option('marker_radius');
  var hide_all_labels = this.settings.get_option('hide_all_labels');
  var identifiers_on_map = this.settings.get_option('identifiers_on_map');
  var metabolite_data_styles = this.settings.get_option('metabolite_styles');
  var no_data_style = { color: this.settings.get_option('metabolite_no_data_color'),
    size: this.settings.get_option('metabolite_no_data_size') };
  var label_mousedown_fn = this.behavior.label_mousedown;
  var label_mouseover_fn = this.behavior.label_mouseover;
  var label_mouseout_fn = this.behavior.label_mouseout;
  var label_touch_fn = this.behavior.label_touch;

  var mg = update_selection.select('.node-circle').attr('transform', function (d) {
    return 'translate(' + d.x + ',' + d.y + ')';
  }).style('visibility', function (d) {
    return hideNode(d, hide_secondary_metabolites) ? 'hidden' : null;
  });

  if (interpolation) {

    update_selection.select('.node-circle').transition().duration(transition_duration).ease(d3_ease.easeLinear).attr('r', function (d) {
      if (d.node_type === 'metabolite') {
        var should_scale = has_data_on_nodes && metabolite_data_styles.indexOf('size') !== -1;
        if (should_scale) {
          var f = d.data;
          return f === null ? no_data_style['size'] : scale.metabolite_size(f);
        } else {
          return d.node_is_primary ? primary_r : secondary_r;
        }
      }
      // midmarkers and multimarkers
      return marker_r;
    }).style('fill', function (d) {
      if (d.node_type === 'metabolite') {
        var should_color_data = has_data_on_nodes && metabolite_data_styles.indexOf('color') !== -1;
        if (should_color_data) {
          var f = d.data;
          return f === null ? no_data_style['color'] : scale.metabolite_color(f);
        } else {
          return null;
        }
      }
      // midmarkers and multimarkers
      return null;
    });
  } else {

    update_selection.select('.node-circle').attr('r', function (d) {
      if (d.node_type === 'metabolite') {
        var should_scale = has_data_on_nodes && metabolite_data_styles.indexOf('size') !== -1;
        if (should_scale) {
          var f = d.data;
          return f === null ? no_data_style['size'] : scale.metabolite_size(f);
        } else {
          return d.node_is_primary ? primary_r : secondary_r;
        }
      }
      // midmarkers and multimarkers
      return marker_r;
    }).style('fill', function (d) {
      if (d.node_type === 'metabolite') {
        var should_color_data = has_data_on_nodes && metabolite_data_styles.indexOf('color') !== -1;
        if (should_color_data) {
          var f = d.data;
          return f === null ? no_data_style['color'] : scale.metabolite_color(f);
        } else {
          return null;
        }
      }
      // midmarkers and multimarkers
      return null;
    });
  }

  update_selection.select('.node-circle').call(this.behavior.turn_off_drag).call(drag_behavior).on('mousedown', mousedown_fn).on('click', click_fn).on('mouseover', mouseover_fn).on('mouseout', mouseout_fn);

  // update node label visibility
  var node_label = update_selection.select('.node-label').attr('visibility', hide_all_labels ? 'hidden' : 'visible');
  if (!hide_all_labels) {
    node_label.style('visibility', function (d) {
      return hideNode(d, hide_secondary_metabolites) ? 'hidden' : null;
    }).attr('transform', function (d) {
      return 'translate(' + d.label_x + ',' + d.label_y + ')';
    }).text(function (d) {
      var t = d[identifiers_on_map];
      if (has_data_on_nodes && metabolite_data_styles.indexOf('text') !== -1) t += ' ' + d.data_string;
      return t;
    }).call(this.behavior.turn_off_drag).call(label_drag_behavior).on('mousedown', label_mousedown_fn).on('mouseover', function (d) {
      label_mouseover_fn('node_label', d);
    }).on('mouseout', label_mouseout_fn);
  }

  this.callback_manager.run('update_node', this, update_selection);

  function hideNode(d, hide_secondary_metabolites) {
    return d.node_type === 'metabolite' && hide_secondary_metabolites && !d.node_is_primary;
  }
}

/**
 * Create text labels in the enter_selection.
 * @param {} enter_selection - The D3 enter selection.
 * @returns {} The selection of the new nodes.
 */
function create_text_label(enter_selection) {
  var g = enter_selection.append('g').attr('id', function (d) {
    return 'l' + d.text_label_id;
  }).attr('class', 'text-label');
  g.append('text').attr('class', 'label');

  this.callback_manager.run('create_text_label', this, enter_selection);

  return g;
}

function update_text_label(update_selection) {
  var mousedown_fn = this.behavior.text_label_mousedown;
  var click_fn = this.behavior.text_label_click;
  var drag_behavior = this.behavior.selectable_drag;
  var turn_off_drag = this.behavior.turn_off_drag;

  update_selection.select('.label').text(function (d) {
    return d.text;
  }).attr('transform', function (d) {
    return 'translate(' + d.x + ',' + d.y + ')';
  }).on('mousedown', mousedown_fn).on('click', click_fn).call(turn_off_drag).call(drag_behavior);

  this.callback_manager.run('update_text_label', this, update_selection);
}

function displaced_coords(reaction_arrow_displacement, start, end, displace) {
  utils.check_undefined(arguments, ['reaction_arrow_displacement', 'start', 'end', 'displace']);

  var length = reaction_arrow_displacement;
  var hyp = utils.distance(start, end);
  var new_x;
  var new_y;
  if (!length || !hyp) {
    console.error('Bad value');
  }
  if (displace === 'start') {
    new_x = start.x + length * (end.x - start.x) / hyp;
    new_y = start.y + length * (end.y - start.y) / hyp;
  } else if (displace === 'end') {
    new_x = end.x - length * (end.x - start.x) / hyp;
    new_y = end.y - length * (end.y - start.y) / hyp;
  } else {
    console.error('bad displace value: ' + displace);
  }
  return { x: new_x, y: new_y };
}

/***/ }),
/* 289 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** Scale */

var utils = __webpack_require__(1);
var d3_scaleLinear = __webpack_require__(97).scaleLinear;
var d3_format = __webpack_require__(21).format;

var Scale = utils.make_class();
Scale.prototype = {
  init: init,
  connect_to_settings: connect_to_settings
};
module.exports = Scale;

function init() {
  this.x = d3_scaleLinear();
  this.y = d3_scaleLinear();
  this.x_size = d3_scaleLinear();
  this.y_size = d3_scaleLinear();
  this.size = d3_scaleLinear();
  this.reaction_color = d3_scaleLinear().clamp(true);
  this.reaction_size = d3_scaleLinear().clamp(true);
  this.metabolite_color = d3_scaleLinear().clamp(true);
  this.metabolite_size = d3_scaleLinear().clamp(true);
  this.scale_path = function (path) {
    var x_fn = this.x,
        y_fn = this.y;
    // TODO: scale arrow width
    var str = d3_format(".2f"),
        path = path.replace(/(M|L)([0-9-.]+),?\s*([0-9-.]+)/g, function (match, p0, p1, p2) {
      return p0 + [str(x_fn(parseFloat(p1))), str(y_fn(parseFloat(p2)))].join(', ');
    }),
        reg = /C([0-9-.]+),?\s*([0-9-.]+)\s*([0-9-.]+),?\s*([0-9-.]+)\s*([0-9-.]+),?\s*([0-9-.]+)/g;
    path = path.replace(reg, function (match, p1, p2, p3, p4, p5, p6) {
      return 'C' + str(x_fn(parseFloat(p1))) + ',' + str(y_fn(parseFloat(p2))) + ' ' + str(x_fn(parseFloat(p3))) + ',' + str(y_fn(parseFloat(p4))) + ' ' + [str(x_fn(parseFloat(p5))) + ',' + str(y_fn(parseFloat(p6)))];
    });
    return path;
  }.bind(this);
  this.scale_decimals = function (path, scale_fn, precision) {
    var str = d3_format("." + String(precision) + "f");
    path = path.replace(/([0-9.]+)/g, function (match, p1) {
      return str(scale_fn(parseFloat(p1)));
    });
    return path;
  };
}

function connect_to_settings(settings, map, get_data_statistics) {
  // domains
  var update_reaction = function (s) {
    var out = sort_scale(s, get_data_statistics()['reaction']);
    this.reaction_color.domain(out.domain);
    this.reaction_size.domain(out.domain);
    this.reaction_color.range(out.color_range);
    this.reaction_size.range(out.size_range);
  }.bind(this);
  var update_metabolite = function (s) {
    var out = sort_scale(s, get_data_statistics()['metabolite']);
    this.metabolite_color.domain(out.domain);
    this.metabolite_size.domain(out.domain);
    this.metabolite_color.range(out.color_range);
    this.metabolite_size.range(out.size_range);
  }.bind(this);

  // scale changes
  settings.streams['reaction_scale'].onValue(update_reaction);
  settings.streams['metabolite_scale'].onValue(update_metabolite);
  // stats changes
  map.callback_manager.set('calc_data_stats__reaction', function (changed) {
    if (changed) update_reaction(settings.get_option('reaction_scale'));
  });
  map.callback_manager.set('calc_data_stats__metabolite', function (changed) {
    if (changed) update_metabolite(settings.get_option('metabolite_scale'));
  });

  // definitions
  function sort_scale(scale, stats) {
    var sorted = scale.map(function (x) {
      var v;
      if (x.type in stats) v = stats[x.type];else if (x.type == 'value') v = x.value;else throw new Error('Bad domain type ' + x.type);
      return { v: v,
        color: x.color,
        size: x.size };
    }).sort(function (a, b) {
      return a.v - b.v;
    });
    return { domain: sorted.map(function (x) {
        return x.v;
      }),
      color_range: sorted.map(function (x) {
        return x.color;
      }),
      size_range: sorted.map(function (x) {
        return x.size;
      }) };
  }
}

/***/ }),
/* 290 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = band;
/* harmony export (immutable) */ __webpack_exports__["b"] = point;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ordinal__ = __webpack_require__(110);



function band() {
  var scale = Object(__WEBPACK_IMPORTED_MODULE_1__ordinal__["a" /* default */])().unknown(undefined),
      domain = scale.domain,
      ordinalRange = scale.range,
      range = [0, 1],
      step,
      bandwidth,
      round = false,
      paddingInner = 0,
      paddingOuter = 0,
      align = 0.5;

  delete scale.unknown;

  function rescale() {
    var n = domain().length,
        reverse = range[1] < range[0],
        start = range[reverse - 0],
        stop = range[1 - reverse];
    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);
    if (round) step = Math.floor(step);
    start += (stop - start - step * (n - paddingInner)) * align;
    bandwidth = step * (1 - paddingInner);
    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);
    var values = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["e" /* range */])(n).map(function(i) { return start + step * i; });
    return ordinalRange(reverse ? values.reverse() : values);
  }

  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.range = function(_) {
    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();
  };

  scale.rangeRound = function(_) {
    return range = [+_[0], +_[1]], round = true, rescale();
  };

  scale.bandwidth = function() {
    return bandwidth;
  };

  scale.step = function() {
    return step;
  };

  scale.round = function(_) {
    return arguments.length ? (round = !!_, rescale()) : round;
  };

  scale.padding = function(_) {
    return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;
  };

  scale.paddingInner = function(_) {
    return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;
  };

  scale.paddingOuter = function(_) {
    return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;
  };

  scale.align = function(_) {
    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;
  };

  scale.copy = function() {
    return band()
        .domain(domain())
        .range(range)
        .round(round)
        .paddingInner(paddingInner)
        .paddingOuter(paddingOuter)
        .align(align);
  };

  return rescale();
}

function pointish(scale) {
  var copy = scale.copy;

  scale.padding = scale.paddingOuter;
  delete scale.paddingInner;
  delete scale.paddingOuter;

  scale.copy = function() {
    return pointish(copy());
  };

  return scale;
}

function point() {
  return pointish(band().paddingInner(1));
}


/***/ }),
/* 291 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__pairs__ = __webpack_require__(100);


/* unused harmony default export */ var _unused_webpack_default_export = (function(values0, values1, reduce) {
  var n0 = values0.length,
      n1 = values1.length,
      values = new Array(n0 * n1),
      i0,
      i1,
      i,
      value0;

  if (reduce == null) reduce = __WEBPACK_IMPORTED_MODULE_0__pairs__["a" /* pair */];

  for (i0 = i = 0; i0 < n0; ++i0) {
    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {
      values[i] = reduce(value0, values1[i1]);
    }
  }

  return values;
});


/***/ }),
/* 292 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(a, b) {
  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;
});


/***/ }),
/* 293 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__array__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__bisect__ = __webpack_require__(98);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constant__ = __webpack_require__(294);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__extent__ = __webpack_require__(103);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__identity__ = __webpack_require__(295);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__range__ = __webpack_require__(105);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ticks__ = __webpack_require__(106);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__threshold_sturges__ = __webpack_require__(107);









/* unused harmony default export */ var _unused_webpack_default_export = (function() {
  var value = __WEBPACK_IMPORTED_MODULE_4__identity__["a" /* default */],
      domain = __WEBPACK_IMPORTED_MODULE_3__extent__["a" /* default */],
      threshold = __WEBPACK_IMPORTED_MODULE_7__threshold_sturges__["a" /* default */];

  function histogram(data) {
    var i,
        n = data.length,
        x,
        values = new Array(n);

    for (i = 0; i < n; ++i) {
      values[i] = value(data[i], i, data);
    }

    var xz = domain(values),
        x0 = xz[0],
        x1 = xz[1],
        tz = threshold(values, x0, x1);

    // Convert number of thresholds into uniform thresholds.
    if (!Array.isArray(tz)) {
      tz = Object(__WEBPACK_IMPORTED_MODULE_6__ticks__["c" /* tickStep */])(x0, x1, tz);
      tz = Object(__WEBPACK_IMPORTED_MODULE_5__range__["a" /* default */])(Math.ceil(x0 / tz) * tz, Math.floor(x1 / tz) * tz, tz); // exclusive
    }

    // Remove any thresholds outside the domain.
    var m = tz.length;
    while (tz[0] <= x0) tz.shift(), --m;
    while (tz[m - 1] > x1) tz.pop(), --m;

    var bins = new Array(m + 1),
        bin;

    // Initialize bins.
    for (i = 0; i <= m; ++i) {
      bin = bins[i] = [];
      bin.x0 = i > 0 ? tz[i - 1] : x0;
      bin.x1 = i < m ? tz[i] : x1;
    }

    // Assign data to bins by value, ignoring any outside the domain.
    for (i = 0; i < n; ++i) {
      x = values[i];
      if (x0 <= x && x <= x1) {
        bins[Object(__WEBPACK_IMPORTED_MODULE_1__bisect__["a" /* default */])(tz, x, 0, m)].push(data[i]);
      }
    }

    return bins;
  }

  histogram.value = function(_) {
    return arguments.length ? (value = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_2__constant__["a" /* default */])(_), histogram) : value;
  };

  histogram.domain = function(_) {
    return arguments.length ? (domain = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_2__constant__["a" /* default */])([_[0], _[1]]), histogram) : domain;
  };

  histogram.thresholds = function(_) {
    return arguments.length ? (threshold = typeof _ === "function" ? _ : Array.isArray(_) ? Object(__WEBPACK_IMPORTED_MODULE_2__constant__["a" /* default */])(__WEBPACK_IMPORTED_MODULE_0__array__["b" /* slice */].call(_)) : Object(__WEBPACK_IMPORTED_MODULE_2__constant__["a" /* default */])(_), histogram) : threshold;
  };

  return histogram;
});


/***/ }),
/* 294 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return function() {
    return x;
  };
});


/***/ }),
/* 295 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return x;
});


/***/ }),
/* 296 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__array__ = __webpack_require__(104);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ascending__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__number__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__quantile__ = __webpack_require__(54);





/* unused harmony default export */ var _unused_webpack_default_export = (function(values, min, max) {
  values = __WEBPACK_IMPORTED_MODULE_0__array__["a" /* map */].call(values, __WEBPACK_IMPORTED_MODULE_2__number__["a" /* default */]).sort(__WEBPACK_IMPORTED_MODULE_1__ascending__["a" /* default */]);
  return Math.ceil((max - min) / (2 * (Object(__WEBPACK_IMPORTED_MODULE_3__quantile__["a" /* default */])(values, 0.75) - Object(__WEBPACK_IMPORTED_MODULE_3__quantile__["a" /* default */])(values, 0.25)) * Math.pow(values.length, -1 / 3)));
});


/***/ }),
/* 297 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__deviation__ = __webpack_require__(101);


/* unused harmony default export */ var _unused_webpack_default_export = (function(values, min, max) {
  return Math.ceil((max - min) / (3.5 * Object(__WEBPACK_IMPORTED_MODULE_0__deviation__["a" /* default */])(values) * Math.pow(values.length, -1 / 3)));
});


/***/ }),
/* 298 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      max;

  if (valueof == null) {
    while (++i < n) { // Find the first comparable value.
      if ((value = values[i]) != null && value >= value) {
        max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = values[i]) != null && value > max) {
            max = value;
          }
        }
      }
    }
  }

  else {
    while (++i < n) { // Find the first comparable value.
      if ((value = valueof(values[i], i, values)) != null && value >= value) {
        max = value;
        while (++i < n) { // Compare the remaining values.
          if ((value = valueof(values[i], i, values)) != null && value > max) {
            max = value;
          }
        }
      }
    }
  }

  return max;
});


/***/ }),
/* 299 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(23);


/* unused harmony default export */ var _unused_webpack_default_export = (function(values, valueof) {
  var n = values.length,
      m = n,
      i = -1,
      value,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(values[i]))) sum += value;
      else --m;
    }
  }

  else {
    while (++i < n) {
      if (!isNaN(value = Object(__WEBPACK_IMPORTED_MODULE_0__number__["a" /* default */])(valueof(values[i], i, values)))) sum += value;
      else --m;
    }
  }

  if (m) return sum / m;
});


/***/ }),
/* 300 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ascending__ = __webpack_require__(18);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__number__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__quantile__ = __webpack_require__(54);




/* unused harmony default export */ var _unused_webpack_default_export = (function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      numbers = [];

  if (valueof == null) {
    while (++i < n) {
      if (!isNaN(value = Object(__WEBPACK_IMPORTED_MODULE_1__number__["a" /* default */])(values[i]))) {
        numbers.push(value);
      }
    }
  }

  else {
    while (++i < n) {
      if (!isNaN(value = Object(__WEBPACK_IMPORTED_MODULE_1__number__["a" /* default */])(valueof(values[i], i, values)))) {
        numbers.push(value);
      }
    }
  }

  return Object(__WEBPACK_IMPORTED_MODULE_2__quantile__["a" /* default */])(numbers.sort(__WEBPACK_IMPORTED_MODULE_0__ascending__["a" /* default */]), 0.5);
});


/***/ }),
/* 301 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(arrays) {
  var n = arrays.length,
      m,
      i = -1,
      j = 0,
      merged,
      array;

  while (++i < n) j += arrays[i].length;
  merged = new Array(j);

  while (--n >= 0) {
    array = arrays[n];
    m = array.length;
    while (--m >= 0) {
      merged[--j] = array[m];
    }
  }

  return merged;
});


/***/ }),
/* 302 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(array, indexes) {
  var i = indexes.length, permutes = new Array(i);
  while (i--) permutes[i] = array[indexes[i]];
  return permutes;
});


/***/ }),
/* 303 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ascending__ = __webpack_require__(18);


/* unused harmony default export */ var _unused_webpack_default_export = (function(values, compare) {
  if (!(n = values.length)) return;
  var n,
      i = 0,
      j = 0,
      xi,
      xj = values[j];

  if (compare == null) compare = __WEBPACK_IMPORTED_MODULE_0__ascending__["a" /* default */];

  while (++i < n) {
    if (compare(xi = values[i], xj) < 0 || compare(xj, xj) !== 0) {
      xj = xi, j = i;
    }
  }

  if (compare(xj, xj) === 0) return j;
});


/***/ }),
/* 304 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(array, i0, i1) {
  var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),
      t,
      i;

  while (m) {
    i = Math.random() * m-- | 0;
    t = array[m + i0];
    array[m + i0] = array[i + i0];
    array[i + i0] = t;
  }

  return array;
});


/***/ }),
/* 305 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony default export */ var _unused_webpack_default_export = (function(values, valueof) {
  var n = values.length,
      i = -1,
      value,
      sum = 0;

  if (valueof == null) {
    while (++i < n) {
      if (value = +values[i]) sum += value; // Note: zero and null are equivalent.
    }
  }

  else {
    while (++i < n) {
      if (value = +valueof(values[i], i, values)) sum += value;
    }
  }

  return sum;
});


/***/ }),
/* 306 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__transpose__ = __webpack_require__(109);


/* unused harmony default export */ var _unused_webpack_default_export = (function() {
  return Object(__WEBPACK_IMPORTED_MODULE_0__transpose__["a" /* default */])(arguments);
});


/***/ }),
/* 307 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = identity;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__array__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__linear__ = __webpack_require__(24);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__number__ = __webpack_require__(111);




function identity() {
  var domain = [0, 1];

  function scale(x) {
    return +x;
  }

  scale.invert = scale;

  scale.domain = scale.range = function(_) {
    return arguments.length ? (domain = __WEBPACK_IMPORTED_MODULE_0__array__["a" /* map */].call(_, __WEBPACK_IMPORTED_MODULE_2__number__["a" /* default */]), scale) : domain.slice();
  };

  scale.copy = function() {
    return identity().domain(domain);
  };

  return Object(__WEBPACK_IMPORTED_MODULE_1__linear__["b" /* linearish */])(scale);
}


/***/ }),
/* 308 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_format__ = __webpack_require__(21);



/* harmony default export */ __webpack_exports__["a"] = (function(domain, count, specifier) {
  var start = domain[0],
      stop = domain[domain.length - 1],
      step = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["g" /* tickStep */])(start, stop, count == null ? 10 : count),
      precision;
  specifier = Object(__WEBPACK_IMPORTED_MODULE_1_d3_format__["formatSpecifier"])(specifier == null ? ",f" : specifier);
  switch (specifier.type) {
    case "s": {
      var value = Math.max(Math.abs(start), Math.abs(stop));
      if (specifier.precision == null && !isNaN(precision = Object(__WEBPACK_IMPORTED_MODULE_1_d3_format__["precisionPrefix"])(step, value))) specifier.precision = precision;
      return Object(__WEBPACK_IMPORTED_MODULE_1_d3_format__["formatPrefix"])(specifier, value);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      if (specifier.precision == null && !isNaN(precision = Object(__WEBPACK_IMPORTED_MODULE_1_d3_format__["precisionRound"])(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === "e");
      break;
    }
    case "f":
    case "%": {
      if (specifier.precision == null && !isNaN(precision = Object(__WEBPACK_IMPORTED_MODULE_1_d3_format__["precisionFixed"])(step))) specifier.precision = precision - (specifier.type === "%") * 2;
      break;
    }
  }
  return Object(__WEBPACK_IMPORTED_MODULE_1_d3_format__["format"])(specifier);
});


/***/ }),
/* 309 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = log;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_format__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constant__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__nice__ = __webpack_require__(112);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__continuous__ = __webpack_require__(32);






function deinterpolate(a, b) {
  return (b = Math.log(b / a))
      ? function(x) { return Math.log(x / a) / b; }
      : Object(__WEBPACK_IMPORTED_MODULE_2__constant__["a" /* default */])(b);
}

function reinterpolate(a, b) {
  return a < 0
      ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }
      : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };
}

function pow10(x) {
  return isFinite(x) ? +("1e" + x) : x < 0 ? 0 : x;
}

function powp(base) {
  return base === 10 ? pow10
      : base === Math.E ? Math.exp
      : function(x) { return Math.pow(base, x); };
}

function logp(base) {
  return base === Math.E ? Math.log
      : base === 10 && Math.log10
      || base === 2 && Math.log2
      || (base = Math.log(base), function(x) { return Math.log(x) / base; });
}

function reflect(f) {
  return function(x) {
    return -f(-x);
  };
}

function log() {
  var scale = Object(__WEBPACK_IMPORTED_MODULE_4__continuous__["b" /* default */])(deinterpolate, reinterpolate).domain([1, 10]),
      domain = scale.domain,
      base = 10,
      logs = logp(10),
      pows = powp(10);

  function rescale() {
    logs = logp(base), pows = powp(base);
    if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);
    return scale;
  }

  scale.base = function(_) {
    return arguments.length ? (base = +_, rescale()) : base;
  };

  scale.domain = function(_) {
    return arguments.length ? (domain(_), rescale()) : domain();
  };

  scale.ticks = function(count) {
    var d = domain(),
        u = d[0],
        v = d[d.length - 1],
        r;

    if (r = v < u) i = u, u = v, v = i;

    var i = logs(u),
        j = logs(v),
        p,
        k,
        t,
        n = count == null ? 10 : +count,
        z = [];

    if (!(base % 1) && j - i < n) {
      i = Math.round(i) - 1, j = Math.round(j) + 1;
      if (u > 0) for (; i < j; ++i) {
        for (k = 1, p = pows(i); k < base; ++k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      } else for (; i < j; ++i) {
        for (k = base - 1, p = pows(i); k >= 1; --k) {
          t = p * k;
          if (t < u) continue;
          if (t > v) break;
          z.push(t);
        }
      }
    } else {
      z = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["h" /* ticks */])(i, j, Math.min(j - i, n)).map(pows);
    }

    return r ? z.reverse() : z;
  };

  scale.tickFormat = function(count, specifier) {
    if (specifier == null) specifier = base === 10 ? ".0e" : ",";
    if (typeof specifier !== "function") specifier = Object(__WEBPACK_IMPORTED_MODULE_1_d3_format__["format"])(specifier);
    if (count === Infinity) return specifier;
    if (count == null) count = 10;
    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?
    return function(d) {
      var i = d / pows(Math.round(logs(d)));
      if (i * base < base - 0.5) i *= base;
      return i <= k ? specifier(d) : "";
    };
  };

  scale.nice = function() {
    return domain(Object(__WEBPACK_IMPORTED_MODULE_3__nice__["a" /* default */])(domain(), {
      floor: function(x) { return pows(Math.floor(logs(x))); },
      ceil: function(x) { return pows(Math.ceil(logs(x))); }
    }));
  };

  scale.copy = function() {
    return Object(__WEBPACK_IMPORTED_MODULE_4__continuous__["a" /* copy */])(scale, log().base(base));
  };

  return scale;
}


/***/ }),
/* 310 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = pow;
/* harmony export (immutable) */ __webpack_exports__["b"] = sqrt;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constant__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__linear__ = __webpack_require__(24);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__continuous__ = __webpack_require__(32);




function raise(x, exponent) {
  return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);
}

function pow() {
  var exponent = 1,
      scale = Object(__WEBPACK_IMPORTED_MODULE_2__continuous__["b" /* default */])(deinterpolate, reinterpolate),
      domain = scale.domain;

  function deinterpolate(a, b) {
    return (b = raise(b, exponent) - (a = raise(a, exponent)))
        ? function(x) { return (raise(x, exponent) - a) / b; }
        : Object(__WEBPACK_IMPORTED_MODULE_0__constant__["a" /* default */])(b);
  }

  function reinterpolate(a, b) {
    b = raise(b, exponent) - (a = raise(a, exponent));
    return function(t) { return raise(a + b * t, 1 / exponent); };
  }

  scale.exponent = function(_) {
    return arguments.length ? (exponent = +_, domain(domain())) : exponent;
  };

  scale.copy = function() {
    return Object(__WEBPACK_IMPORTED_MODULE_2__continuous__["a" /* copy */])(scale, pow().exponent(exponent));
  };

  return Object(__WEBPACK_IMPORTED_MODULE_1__linear__["b" /* linearish */])(scale);
}

function sqrt() {
  return pow().exponent(0.5);
}


/***/ }),
/* 311 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = quantile;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__array__ = __webpack_require__(14);



function quantile() {
  var domain = [],
      range = [],
      thresholds = [];

  function rescale() {
    var i = 0, n = Math.max(1, range.length);
    thresholds = new Array(n - 1);
    while (++i < n) thresholds[i - 1] = Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["d" /* quantile */])(domain, i / n);
    return scale;
  }

  function scale(x) {
    if (!isNaN(x = +x)) return range[Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["b" /* bisect */])(thresholds, x)];
  }

  scale.invertExtent = function(y) {
    var i = range.indexOf(y);
    return i < 0 ? [NaN, NaN] : [
      i > 0 ? thresholds[i - 1] : domain[0],
      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]
    ];
  };

  scale.domain = function(_) {
    if (!arguments.length) return domain.slice();
    domain = [];
    for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);
    domain.sort(__WEBPACK_IMPORTED_MODULE_0_d3_array__["a" /* ascending */]);
    return rescale();
  };

  scale.range = function(_) {
    return arguments.length ? (range = __WEBPACK_IMPORTED_MODULE_1__array__["b" /* slice */].call(_), rescale()) : range.slice();
  };

  scale.quantiles = function() {
    return thresholds.slice();
  };

  scale.copy = function() {
    return quantile()
        .domain(domain)
        .range(range);
  };

  return scale;
}


/***/ }),
/* 312 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = quantize;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__array__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__linear__ = __webpack_require__(24);




function quantize() {
  var x0 = 0,
      x1 = 1,
      n = 1,
      domain = [0.5],
      range = [0, 1];

  function scale(x) {
    if (x <= x) return range[Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["b" /* bisect */])(domain, x, 0, n)];
  }

  function rescale() {
    var i = -1;
    domain = new Array(n);
    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);
    return scale;
  }

  scale.domain = function(_) {
    return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];
  };

  scale.range = function(_) {
    return arguments.length ? (n = (range = __WEBPACK_IMPORTED_MODULE_1__array__["b" /* slice */].call(_)).length - 1, rescale()) : range.slice();
  };

  scale.invertExtent = function(y) {
    var i = range.indexOf(y);
    return i < 0 ? [NaN, NaN]
        : i < 1 ? [x0, domain[0]]
        : i >= n ? [domain[n - 1], x1]
        : [domain[i - 1], domain[i]];
  };

  scale.copy = function() {
    return quantize()
        .domain([x0, x1])
        .range(range);
  };

  return Object(__WEBPACK_IMPORTED_MODULE_2__linear__["b" /* linearish */])(scale);
}


/***/ }),
/* 313 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = threshold;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_array__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__array__ = __webpack_require__(14);



function threshold() {
  var domain = [0.5],
      range = [0, 1],
      n = 1;

  function scale(x) {
    if (x <= x) return range[Object(__WEBPACK_IMPORTED_MODULE_0_d3_array__["b" /* bisect */])(domain, x, 0, n)];
  }

  scale.domain = function(_) {
    return arguments.length ? (domain = __WEBPACK_IMPORTED_MODULE_1__array__["b" /* slice */].call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();
  };

  scale.range = function(_) {
    return arguments.length ? (range = __WEBPACK_IMPORTED_MODULE_1__array__["b" /* slice */].call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();
  };

  scale.invertExtent = function(y) {
    var i = range.indexOf(y);
    return [domain[i - 1], domain[i]];
  };

  scale.copy = function() {
    return threshold()
        .domain(domain)
        .range(range);
  };

  return scale;
}


/***/ }),
/* 314 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export milliseconds */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);


var millisecond = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function() {
  // noop
}, function(date, step) {
  date.setTime(+date + step);
}, function(start, end) {
  return end - start;
});

// An optimized implementation for this simple case.
millisecond.every = function(k) {
  k = Math.floor(k);
  if (!isFinite(k) || !(k > 0)) return null;
  if (!(k > 1)) return millisecond;
  return Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
    date.setTime(Math.floor(date / k) * k);
  }, function(date, step) {
    date.setTime(+date + step * k);
  }, function(start, end) {
    return (end - start) / k;
  });
};

/* harmony default export */ __webpack_exports__["a"] = (millisecond);
var milliseconds = millisecond.range;


/***/ }),
/* 315 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export seconds */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



var second = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setTime(Math.floor(date / __WEBPACK_IMPORTED_MODULE_1__duration__["d" /* durationSecond */]) * __WEBPACK_IMPORTED_MODULE_1__duration__["d" /* durationSecond */]);
}, function(date, step) {
  date.setTime(+date + step * __WEBPACK_IMPORTED_MODULE_1__duration__["d" /* durationSecond */]);
}, function(start, end) {
  return (end - start) / __WEBPACK_IMPORTED_MODULE_1__duration__["d" /* durationSecond */];
}, function(date) {
  return date.getUTCSeconds();
});

/* harmony default export */ __webpack_exports__["a"] = (second);
var seconds = second.range;


/***/ }),
/* 316 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export minutes */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



var minute = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setTime(Math.floor(date / __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */]) * __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */]);
}, function(date, step) {
  date.setTime(+date + step * __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */]);
}, function(start, end) {
  return (end - start) / __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */];
}, function(date) {
  return date.getMinutes();
});

/* harmony default export */ __webpack_exports__["a"] = (minute);
var minutes = minute.range;


/***/ }),
/* 317 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export hours */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



var hour = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  var offset = date.getTimezoneOffset() * __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */] % __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */];
  if (offset < 0) offset += __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */];
  date.setTime(Math.floor((+date - offset) / __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */]) * __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */] + offset);
}, function(date, step) {
  date.setTime(+date + step * __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */]);
}, function(start, end) {
  return (end - start) / __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */];
}, function(date) {
  return date.getHours();
});

/* harmony default export */ __webpack_exports__["a"] = (hour);
var hours = hour.range;


/***/ }),
/* 318 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export days */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



var day = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setDate(date.getDate() + step);
}, function(start, end) {
  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */]) / __WEBPACK_IMPORTED_MODULE_1__duration__["a" /* durationDay */];
}, function(date) {
  return date.getDate() - 1;
});

/* harmony default export */ __webpack_exports__["a"] = (day);
var days = day.range;


/***/ }),
/* 319 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return sunday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return monday; });
/* unused harmony export tuesday */
/* unused harmony export wednesday */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return thursday; });
/* unused harmony export friday */
/* unused harmony export saturday */
/* unused harmony export sundays */
/* unused harmony export mondays */
/* unused harmony export tuesdays */
/* unused harmony export wednesdays */
/* unused harmony export thursdays */
/* unused harmony export fridays */
/* unused harmony export saturdays */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



function weekday(i) {
  return Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setDate(date.getDate() + step * 7);
  }, function(start, end) {
    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */]) / __WEBPACK_IMPORTED_MODULE_1__duration__["e" /* durationWeek */];
  });
}

var sunday = weekday(0);
var monday = weekday(1);
var tuesday = weekday(2);
var wednesday = weekday(3);
var thursday = weekday(4);
var friday = weekday(5);
var saturday = weekday(6);

var sundays = sunday.range;
var mondays = monday.range;
var tuesdays = tuesday.range;
var wednesdays = wednesday.range;
var thursdays = thursday.range;
var fridays = friday.range;
var saturdays = saturday.range;


/***/ }),
/* 320 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export months */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);


var month = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setDate(1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setMonth(date.getMonth() + step);
}, function(start, end) {
  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;
}, function(date) {
  return date.getMonth();
});

/* harmony default export */ __webpack_exports__["a"] = (month);
var months = month.range;


/***/ }),
/* 321 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export years */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);


var year = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setMonth(0, 1);
  date.setHours(0, 0, 0, 0);
}, function(date, step) {
  date.setFullYear(date.getFullYear() + step);
}, function(start, end) {
  return end.getFullYear() - start.getFullYear();
}, function(date) {
  return date.getFullYear();
});

// An optimized implementation for this simple case.
year.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
    date.setFullYear(Math.floor(date.getFullYear() / k) * k);
    date.setMonth(0, 1);
    date.setHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setFullYear(date.getFullYear() + step * k);
  });
};

/* harmony default export */ __webpack_exports__["a"] = (year);
var years = year.range;


/***/ }),
/* 322 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export utcMinutes */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



var utcMinute = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setUTCSeconds(0, 0);
}, function(date, step) {
  date.setTime(+date + step * __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */]);
}, function(start, end) {
  return (end - start) / __WEBPACK_IMPORTED_MODULE_1__duration__["c" /* durationMinute */];
}, function(date) {
  return date.getUTCMinutes();
});

/* harmony default export */ __webpack_exports__["a"] = (utcMinute);
var utcMinutes = utcMinute.range;


/***/ }),
/* 323 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export utcHours */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



var utcHour = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setUTCMinutes(0, 0, 0);
}, function(date, step) {
  date.setTime(+date + step * __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */]);
}, function(start, end) {
  return (end - start) / __WEBPACK_IMPORTED_MODULE_1__duration__["b" /* durationHour */];
}, function(date) {
  return date.getUTCHours();
});

/* harmony default export */ __webpack_exports__["a"] = (utcHour);
var utcHours = utcHour.range;


/***/ }),
/* 324 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export utcDays */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



var utcDay = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCDate(date.getUTCDate() + step);
}, function(start, end) {
  return (end - start) / __WEBPACK_IMPORTED_MODULE_1__duration__["a" /* durationDay */];
}, function(date) {
  return date.getUTCDate() - 1;
});

/* harmony default export */ __webpack_exports__["a"] = (utcDay);
var utcDays = utcDay.range;


/***/ }),
/* 325 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return utcSunday; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return utcMonday; });
/* unused harmony export utcTuesday */
/* unused harmony export utcWednesday */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return utcThursday; });
/* unused harmony export utcFriday */
/* unused harmony export utcSaturday */
/* unused harmony export utcSundays */
/* unused harmony export utcMondays */
/* unused harmony export utcTuesdays */
/* unused harmony export utcWednesdays */
/* unused harmony export utcThursdays */
/* unused harmony export utcFridays */
/* unused harmony export utcSaturdays */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__duration__ = __webpack_require__(12);



function utcWeekday(i) {
  return Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCDate(date.getUTCDate() + step * 7);
  }, function(start, end) {
    return (end - start) / __WEBPACK_IMPORTED_MODULE_1__duration__["e" /* durationWeek */];
  });
}

var utcSunday = utcWeekday(0);
var utcMonday = utcWeekday(1);
var utcTuesday = utcWeekday(2);
var utcWednesday = utcWeekday(3);
var utcThursday = utcWeekday(4);
var utcFriday = utcWeekday(5);
var utcSaturday = utcWeekday(6);

var utcSundays = utcSunday.range;
var utcMondays = utcMonday.range;
var utcTuesdays = utcTuesday.range;
var utcWednesdays = utcWednesday.range;
var utcThursdays = utcThursday.range;
var utcFridays = utcFriday.range;
var utcSaturdays = utcSaturday.range;


/***/ }),
/* 326 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export utcMonths */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);


var utcMonth = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setUTCDate(1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCMonth(date.getUTCMonth() + step);
}, function(start, end) {
  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;
}, function(date) {
  return date.getUTCMonth();
});

/* harmony default export */ __webpack_exports__["a"] = (utcMonth);
var utcMonths = utcMonth.range;


/***/ }),
/* 327 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export utcYears */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interval__ = __webpack_require__(4);


var utcYear = Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
}, function(date, step) {
  date.setUTCFullYear(date.getUTCFullYear() + step);
}, function(start, end) {
  return end.getUTCFullYear() - start.getUTCFullYear();
}, function(date) {
  return date.getUTCFullYear();
});

// An optimized implementation for this simple case.
utcYear.every = function(k) {
  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : Object(__WEBPACK_IMPORTED_MODULE_0__interval__["a" /* default */])(function(date) {
    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);
    date.setUTCMonth(0, 1);
    date.setUTCHours(0, 0, 0, 0);
  }, function(date, step) {
    date.setUTCFullYear(date.getUTCFullYear() + step * k);
  });
};

/* harmony default export */ __webpack_exports__["a"] = (utcYear);
var utcYears = utcYear.range;


/***/ }),
/* 328 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__isoFormat__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__defaultLocale__ = __webpack_require__(57);



function parseIsoNative(string) {
  var date = new Date(string);
  return isNaN(date) ? null : date;
}

var parseIso = +new Date("2000-01-01T00:00:00.000Z")
    ? parseIsoNative
    : Object(__WEBPACK_IMPORTED_MODULE_1__defaultLocale__["c" /* utcParse */])(__WEBPACK_IMPORTED_MODULE_0__isoFormat__["a" /* isoSpecifier */]);

/* unused harmony default export */ var _unused_webpack_default_export = (parseIso);


/***/ }),
/* 329 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__time__ = __webpack_require__(113);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_time_format__ = __webpack_require__(114);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3_time__ = __webpack_require__(56);




/* harmony default export */ __webpack_exports__["a"] = (function() {
  return Object(__WEBPACK_IMPORTED_MODULE_0__time__["a" /* calendar */])(__WEBPACK_IMPORTED_MODULE_2_d3_time__["v" /* utcYear */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["q" /* utcMonth */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["u" /* utcWeek */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["l" /* utcDay */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["m" /* utcHour */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["o" /* utcMinute */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["r" /* utcSecond */], __WEBPACK_IMPORTED_MODULE_2_d3_time__["n" /* utcMillisecond */], __WEBPACK_IMPORTED_MODULE_1_d3_time_format__["b" /* utcFormat */]).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]);
});


/***/ }),
/* 330 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors__ = __webpack_require__(25);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"));


/***/ }),
/* 331 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors__ = __webpack_require__(25);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"));


/***/ }),
/* 332 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors__ = __webpack_require__(25);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"));


/***/ }),
/* 333 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors__ = __webpack_require__(25);


/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"));


/***/ }),
/* 334 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(9);



/* harmony default export */ __webpack_exports__["a"] = (Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["b" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(300, 0.5, 0.0), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(-240, 0.5, 1.0)));


/***/ }),
/* 335 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return warm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return cool; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(9);



var warm = Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["b" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(-100, 0.75, 0.35), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(80, 1.50, 0.8));

var cool = Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__["b" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(260, 0.75, 0.35), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])(80, 1.50, 0.8));

var rainbow = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__["b" /* cubehelix */])();

/* harmony default export */ __webpack_exports__["b"] = (function(t) {
  if (t < 0 || t > 1) t -= Math.floor(t);
  var ts = Math.abs(t - 0.5);
  rainbow.h = 360 * t - 100;
  rainbow.s = 1.5 - 1.5 * ts;
  rainbow.l = 0.8 - 0.9 * ts;
  return rainbow + "";
});


/***/ }),
/* 336 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return magma; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return inferno; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return plasma; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors__ = __webpack_require__(25);


function ramp(range) {
  var n = range.length;
  return function(t) {
    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];
  };
}

/* harmony default export */ __webpack_exports__["a"] = (ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")));

var magma = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));

var inferno = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));

var plasma = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors__["a" /* default */])("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));


/***/ }),
/* 337 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = sequential;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__linear__ = __webpack_require__(24);


function sequential(interpolator) {
  var x0 = 0,
      x1 = 1,
      clamp = false;

  function scale(x) {
    var t = (x - x0) / (x1 - x0);
    return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);
  }

  scale.domain = function(_) {
    return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];
  };

  scale.clamp = function(_) {
    return arguments.length ? (clamp = !!_, scale) : clamp;
  };

  scale.interpolator = function(_) {
    return arguments.length ? (interpolator = _, scale) : interpolator;
  };

  scale.copy = function() {
    return sequential(interpolator).domain([x0, x1]).clamp(clamp);
  };

  return Object(__WEBPACK_IMPORTED_MODULE_0__linear__["b" /* linearish */])(scale);
}


/***/ }),
/* 338 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Canvas. Defines a canvas that accepts drag/zoom events and can be resized.
 * Canvas(selection, x, y, width, height)
 * Adapted from http://bl.ocks.org/mccannf/1629464.
 */

var utils = __webpack_require__(1);
var CallbackManager = __webpack_require__(17);
var d3_drag = __webpack_require__(15).drag;
var d3_selection = __webpack_require__(0);
var _ = __webpack_require__(2);

var Canvas = utils.make_class();
Canvas.prototype = {
  init: init,
  toggle_resize: toggle_resize,
  setup: setup,
  size_and_location: size_and_location
};
module.exports = Canvas;

function init(selection, size_and_location) {
  this.selection = selection;
  this.x = size_and_location.x;
  this.y = size_and_location.y;
  this.width = size_and_location.width;
  this.height = size_and_location.height;

  // enable by default
  this.resize_enabled = true;

  // set up the callbacks
  this.callback_manager = new CallbackManager();

  this.setup();
}

/**
 * Turn the resize on or off
 */
function toggle_resize(on_off) {
  if (_.isUndefined(on_off)) on_off = !this.resize_enabled;

  if (on_off) {
    this.selection.selectAll('.drag-rect').style('pointer-events', 'auto');
  } else {
    this.selection.selectAll('.drag-rect').style('pointer-events', 'none');
  }
}

function setup() {
  var self = this;
  var extent = { x: this.width, y: this.height };
  var dragbar_width = 100;
  var mouse_node_mult = 10;
  var new_sel = this.selection.append('g').classed('canvas-group', true).data([{ x: this.x, y: this.y }]);

  var mouse_node = new_sel.append('rect').attr('id', 'mouse-node').attr('width', this.width * mouse_node_mult).attr('height', this.height * mouse_node_mult).attr('transform', 'translate(' + [self.x - this.width * mouse_node_mult / 2, self.y - this.height * mouse_node_mult / 2] + ')').attr('pointer-events', 'all');
  this.mouse_node = mouse_node;

  var rect = new_sel.append('rect').attr('id', 'canvas').attr('width', this.width).attr('height', this.height).attr('transform', 'translate(' + [self.x, self.y] + ')');

  var drag_right = d3_drag()
  // TODO do we need these? in d3 v4, origin is now subject
  // .origin(Object)
  .on('start', stop_propagation).on('drag', rdragresize),
      drag_left = d3_drag()
  // .origin(Object)
  .on('start', stop_propagation).on('drag', ldragresize),
      drag_top = d3_drag()
  // .origin(Object)
  .on('start', stop_propagation).on('drag', tdragresize),
      drag_bottom = d3_drag()
  // .origin(Object)
  .on('start', stop_propagation).on('drag', bdragresize);

  var left = new_sel.append('rect').classed('drag-rect', true).attr('transform', function (d) {
    return 'translate(' + [d.x - dragbar_width / 2, d.y + dragbar_width / 2] + ')';
  }).attr('height', this.height - dragbar_width).attr('id', 'dragleft').attr('width', dragbar_width).attr('cursor', 'ew-resize').classed('resize-rect', true).call(drag_left);

  var right = new_sel.append('rect').classed('drag-rect', true).attr('transform', function (d) {
    return 'translate(' + [d.x + self.width - dragbar_width / 2, d.y + dragbar_width / 2] + ')';
  }).attr('id', 'dragright').attr('height', this.height - dragbar_width).attr('width', dragbar_width).attr('cursor', 'ew-resize').classed('resize-rect', true).call(drag_right);

  var top = new_sel.append('rect').classed('drag-rect', true).attr('transform', function (d) {
    return 'translate(' + [d.x + dragbar_width / 2, d.y - dragbar_width / 2] + ')';
  }).attr('height', dragbar_width).attr('id', 'dragtop').attr('width', this.width - dragbar_width).attr('cursor', 'ns-resize').classed('resize-rect', true).call(drag_top);

  var bottom = new_sel.append('rect').classed('drag-rect', true).attr('transform', function (d) {
    return 'translate(' + [d.x + dragbar_width / 2, d.y + self.height - dragbar_width / 2] + ')';
  }).attr('id', 'dragbottom').attr('height', dragbar_width).attr('width', this.width - dragbar_width).attr('cursor', 'ns-resize').classed('resize-rect', true).call(drag_bottom);

  // definitions
  function stop_propagation() {
    d3_selection.event.sourceEvent.stopPropagation();
  }

  function transform_string(x, y, current_transform) {
    var tr = utils.d3_transform_catch(current_transform),
        translate = tr.translate;
    if (x !== null) translate[0] = x;
    if (y !== null) translate[1] = y;
    return 'translate(' + translate + ')';
  }

  function ldragresize(d) {
    var oldx = d.x;
    d.x = Math.min(d.x + self.width - dragbar_width / 2, d3_selection.event.x);
    self.x = d.x;
    self.width = self.width + (oldx - d.x);
    left.attr('transform', function (d) {
      return transform_string(d.x - dragbar_width / 2, null, left.attr('transform'));
    });
    mouse_node.attr('transform', function (d) {
      return transform_string(d.x, null, mouse_node.attr('transform'));
    }).attr('width', self.width * mouse_node_mult);
    rect.attr('transform', function (d) {
      return transform_string(d.x, null, rect.attr('transform'));
    }).attr('width', self.width);
    top.attr('transform', function (d) {
      return transform_string(d.x + dragbar_width / 2, null, top.attr('transform'));
    }).attr('width', self.width - dragbar_width);
    bottom.attr('transform', function (d) {
      return transform_string(d.x + dragbar_width / 2, null, bottom.attr('transform'));
    }).attr('width', self.width - dragbar_width);

    self.callback_manager.run('resize');
  }

  function rdragresize(d) {
    d3_selection.event.sourceEvent.stopPropagation();
    var dragx = Math.max(d.x + dragbar_width / 2, d.x + self.width + d3_selection.event.dx);
    //recalculate width
    self.width = dragx - d.x;
    //move the right drag handle
    right.attr('transform', function (d) {
      return transform_string(dragx - dragbar_width / 2, null, right.attr('transform'));
    });
    //resize the drag rectangle
    //as we are only resizing from the right, the x coordinate does not need to change
    mouse_node.attr('width', self.width * mouse_node_mult);
    rect.attr('width', self.width);
    top.attr('width', self.width - dragbar_width);
    bottom.attr('width', self.width - dragbar_width);

    self.callback_manager.run('resize');
  }

  function tdragresize(d) {
    d3_selection.event.sourceEvent.stopPropagation();
    var oldy = d.y;
    d.y = Math.min(d.y + self.height - dragbar_width / 2, d3_selection.event.y);
    self.y = d.y;
    self.height = self.height + (oldy - d.y);
    top.attr('transform', function (d) {
      return transform_string(null, d.y - dragbar_width / 2, top.attr('transform'));
    });
    mouse_node.attr('transform', function (d) {
      return transform_string(null, d.y, mouse_node.attr('transform'));
    }).attr('width', self.height * mouse_node_mult);
    rect.attr('transform', function (d) {
      return transform_string(null, d.y, rect.attr('transform'));
    }).attr('height', self.height);
    left.attr('transform', function (d) {
      return transform_string(null, d.y + dragbar_width / 2, left.attr('transform'));
    }).attr('height', self.height - dragbar_width);
    right.attr('transform', function (d) {
      return transform_string(null, d.y + dragbar_width / 2, right.attr('transform'));
    }).attr('height', self.height - dragbar_width);

    self.callback_manager.run('resize');
  }

  function bdragresize(d) {
    d3_selection.event.sourceEvent.stopPropagation();
    var dragy = Math.max(d.y + dragbar_width / 2, d.y + self.height + d3_selection.event.dy);
    //recalculate width
    self.height = dragy - d.y;
    //move the right drag handle
    bottom.attr('transform', function (d) {
      return transform_string(null, dragy - dragbar_width / 2, bottom.attr('transform'));
    });
    //resize the drag rectangle
    //as we are only resizing from the right, the x coordinate does not need to change
    mouse_node.attr('height', self.height * mouse_node_mult);
    rect.attr('height', self.height);
    left.attr('height', self.height - dragbar_width);
    right.attr('height', self.height - dragbar_width);

    self.callback_manager.run('resize');
  }
}

function size_and_location() {
  return {
    x: this.x,
    y: this.y,
    width: this.width,
    height: this.height
  };
}

/***/ }),
/* 339 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * Define a brush to select elements in a map.
 * @param {D3 Selection} selection - A d3 selection to place the brush in.
 * @param {Boolean} is_enabled - Whether to turn the brush on.
 * @param {escher.Map} map - The map where the brush will be active.
 * @param {String} insert_after - A d3 selector string to choose the svg element
 *                                that the brush will be inserted after. Often a
 *                                canvas element (e.g. '.canvas-group').
 */

var utils = __webpack_require__(1);
var d3_brush = __webpack_require__(121).brush;
var d3_brushSelection = __webpack_require__(121).brushSelection;
var d3_scaleIdentity = __webpack_require__(97).scaleIdentity;
var d3_selection = __webpack_require__(0);
var d3_select = __webpack_require__(0).select;

var Brush = utils.make_class();
Brush.prototype = {
  init: init,
  toggle: toggle,
  setup_selection_brush: setup_selection_brush
};
module.exports = Brush;

/**
 * Initialize the brush.
 * @param {D3 Selection} selection - The selection for the brush.
 * @param {Boolean} is_enabled - Whether to enable right away.
 * @param {escher.Map} map - The Escher Map object.
 * @param {Node} insert_after - A node within selection to insert after.
 */
function init(selection, is_enabled, map, insert_after) {
  this.brush_sel = selection.append('g').attr('id', 'brush-container');
  var node = this.brush_sel.node();
  var insert_before_node = selection.select(insert_after).node().nextSibling;
  if (node !== insert_before_node) {
    node.parentNode.insertBefore(node, insert_before_node);
  }
  this.enabled = is_enabled;
  this.map = map;
}

/**
 * Returns a boolean for the on/off status of the brush
 * @return {Boolean}
 */
function brush_is_enabled() {
  return this.map.sel.select('.brush').empty();
}

/**
 * Turn the brush on or off
 * @param {Boolean} on_off
 */
function toggle(on_off) {
  if (on_off === undefined) {
    on_off = !this.enabled;
  }
  if (on_off) {
    this.setup_selection_brush();
  } else {
    this.brush_sel.selectAll('*').remove();
  }
}

/**
 * Turn off the mouse crosshair
 */
function turn_off_crosshair(sel) {
  sel.selectAll('rect').attr('cursor', null);
}

function setup_selection_brush() {
  var map = this.map;
  var selection = this.brush_sel;
  var selectable_selection = map.sel.selectAll('#nodes,#text-labels');
  var size_and_location = map.canvas.size_and_location();
  var width = size_and_location.width;
  var height = size_and_location.height;
  var x = size_and_location.x;
  var y = size_and_location.y;

  // Clear existing brush
  selection.selectAll('*').remove();

  // Set a flag so we know that the brush is being cleared at the end of a
  // successful brush
  var clearing_flag = false;

  var brush = d3_brush().extent([[x, y], [x + width, y + height]]).on('start', function () {
    turn_off_crosshair(selection);
    // unhide secondary metabolites if they are hidden
    if (map.settings.get_option('hide_secondary_metabolites')) {
      map.settings.set_conditional('hide_secondary_metabolites', false);
      map.draw_everything();
      map.set_status('Showing secondary metabolites. You can hide them ' + 'again in Settings.', 2000);
    }
  }).on('brush', function () {
    var shift_key_on = d3_selection.event.sourceEvent.shiftKey;
    var rect = d3_brushSelection(this);
    // Check for no selection (e.g. after clearing brush)
    if (rect !== null) {
      // When shift is pressed, ignore the currently selected nodes.
      // Otherwise, brush all nodes.
      var selection = shift_key_on ? selectable_selection.selectAll('.node:not(.selected),.text-label:not(.selected)') : selectable_selection.selectAll('.node,.text-label');
      selection.classed('selected', function (d) {
        var sx = d.x;
        var sy = d.y;
        return rect[0][0] <= sx && sx < rect[1][0] && rect[0][1] <= sy && sy < rect[1][1];
      });
    }
  }).on('end', function () {
    turn_off_crosshair(selection);
    // Clear brush
    var rect = d3_brushSelection(this);
    if (rect === null) {
      if (clearing_flag) {
        clearing_flag = false;
      } else {
        // Empty selection, deselect all
        map.select_none();
      }
    } else {
      // Not empty, then clear the box
      clearing_flag = true;
      selection.call(brush.move, null);
    }
  });

  selection
  // Initialize brush
  .call(brush);

  // Turn off the pan grab icons
  turn_off_crosshair(selection);
}

/***/ }),
/* 340 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = brushSelection;
/* harmony export (immutable) */ __webpack_exports__["b"] = brushX;
/* harmony export (immutable) */ __webpack_exports__["c"] = brushY;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_dispatch__ = __webpack_require__(19);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_drag__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3_interpolate__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3_selection__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d3_transition__ = __webpack_require__(89);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__constant__ = __webpack_require__(341);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__event__ = __webpack_require__(342);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__noevent__ = __webpack_require__(343);









var MODE_DRAG = {name: "drag"},
    MODE_SPACE = {name: "space"},
    MODE_HANDLE = {name: "handle"},
    MODE_CENTER = {name: "center"};

var X = {
  name: "x",
  handles: ["e", "w"].map(type),
  input: function(x, e) { return x && [[x[0], e[0][1]], [x[1], e[1][1]]]; },
  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }
};

var Y = {
  name: "y",
  handles: ["n", "s"].map(type),
  input: function(y, e) { return y && [[e[0][0], y[0]], [e[1][0], y[1]]]; },
  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }
};

var XY = {
  name: "xy",
  handles: ["n", "e", "s", "w", "nw", "ne", "se", "sw"].map(type),
  input: function(xy) { return xy; },
  output: function(xy) { return xy; }
};

var cursors = {
  overlay: "crosshair",
  selection: "move",
  n: "ns-resize",
  e: "ew-resize",
  s: "ns-resize",
  w: "ew-resize",
  nw: "nwse-resize",
  ne: "nesw-resize",
  se: "nwse-resize",
  sw: "nesw-resize"
};

var flipX = {
  e: "w",
  w: "e",
  nw: "ne",
  ne: "nw",
  se: "sw",
  sw: "se"
};

var flipY = {
  n: "s",
  s: "n",
  nw: "sw",
  ne: "se",
  se: "ne",
  sw: "nw"
};

var signsX = {
  overlay: +1,
  selection: +1,
  n: null,
  e: +1,
  s: null,
  w: -1,
  nw: -1,
  ne: +1,
  se: +1,
  sw: -1
};

var signsY = {
  overlay: +1,
  selection: +1,
  n: -1,
  e: null,
  s: +1,
  w: null,
  nw: -1,
  ne: -1,
  se: +1,
  sw: +1
};

function type(t) {
  return {type: t};
}

// Ignore right-click, since that should open the context menu.
function defaultFilter() {
  return !__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].button;
}

function defaultExtent() {
  var svg = this.ownerSVGElement || this;
  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];
}

// Like d3.local, but with the name “__brush” rather than auto-generated.
function local(node) {
  while (!node.__brush) if (!(node = node.parentNode)) return;
  return node.__brush;
}

function empty(extent) {
  return extent[0][0] === extent[1][0]
      || extent[0][1] === extent[1][1];
}

function brushSelection(node) {
  var state = node.__brush;
  return state ? state.dim.output(state.selection) : null;
}

function brushX() {
  return brush(X);
}

function brushY() {
  return brush(Y);
}

/* harmony default export */ __webpack_exports__["d"] = (function() {
  return brush(XY);
});

function brush(dim) {
  var extent = defaultExtent,
      filter = defaultFilter,
      listeners = Object(__WEBPACK_IMPORTED_MODULE_0_d3_dispatch__["a" /* dispatch */])(brush, "start", "brush", "end"),
      handleSize = 6,
      touchending;

  function brush(group) {
    var overlay = group
        .property("__brush", initialize)
      .selectAll(".overlay")
      .data([type("overlay")]);

    overlay.enter().append("rect")
        .attr("class", "overlay")
        .attr("pointer-events", "all")
        .attr("cursor", cursors.overlay)
      .merge(overlay)
        .each(function() {
          var extent = local(this).extent;
          Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(this)
              .attr("x", extent[0][0])
              .attr("y", extent[0][1])
              .attr("width", extent[1][0] - extent[0][0])
              .attr("height", extent[1][1] - extent[0][1]);
        });

    group.selectAll(".selection")
      .data([type("selection")])
      .enter().append("rect")
        .attr("class", "selection")
        .attr("cursor", cursors.selection)
        .attr("fill", "#777")
        .attr("fill-opacity", 0.3)
        .attr("stroke", "#fff")
        .attr("shape-rendering", "crispEdges");

    var handle = group.selectAll(".handle")
      .data(dim.handles, function(d) { return d.type; });

    handle.exit().remove();

    handle.enter().append("rect")
        .attr("class", function(d) { return "handle handle--" + d.type; })
        .attr("cursor", function(d) { return cursors[d.type]; });

    group
        .each(redraw)
        .attr("fill", "none")
        .attr("pointer-events", "all")
        .style("-webkit-tap-highlight-color", "rgba(0,0,0,0)")
        .on("mousedown.brush touchstart.brush", started);
  }

  brush.move = function(group, selection) {
    if (group.selection) {
      group
          .on("start.brush", function() { emitter(this, arguments).beforestart().start(); })
          .on("interrupt.brush end.brush", function() { emitter(this, arguments).end(); })
          .tween("brush", function() {
            var that = this,
                state = that.__brush,
                emit = emitter(that, arguments),
                selection0 = state.selection,
                selection1 = dim.input(typeof selection === "function" ? selection.apply(this, arguments) : selection, state.extent),
                i = Object(__WEBPACK_IMPORTED_MODULE_2_d3_interpolate__["a" /* interpolate */])(selection0, selection1);

            function tween(t) {
              state.selection = t === 1 && empty(selection1) ? null : i(t);
              redraw.call(that);
              emit.brush();
            }

            return selection0 && selection1 ? tween : tween(1);
          });
    } else {
      group
          .each(function() {
            var that = this,
                args = arguments,
                state = that.__brush,
                selection1 = dim.input(typeof selection === "function" ? selection.apply(that, args) : selection, state.extent),
                emit = emitter(that, args).beforestart();

            Object(__WEBPACK_IMPORTED_MODULE_4_d3_transition__["a" /* interrupt */])(that);
            state.selection = selection1 == null || empty(selection1) ? null : selection1;
            redraw.call(that);
            emit.start().brush().end();
          });
    }
  };

  function redraw() {
    var group = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(this),
        selection = local(this).selection;

    if (selection) {
      group.selectAll(".selection")
          .style("display", null)
          .attr("x", selection[0][0])
          .attr("y", selection[0][1])
          .attr("width", selection[1][0] - selection[0][0])
          .attr("height", selection[1][1] - selection[0][1]);

      group.selectAll(".handle")
          .style("display", null)
          .attr("x", function(d) { return d.type[d.type.length - 1] === "e" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })
          .attr("y", function(d) { return d.type[0] === "s" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })
          .attr("width", function(d) { return d.type === "n" || d.type === "s" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })
          .attr("height", function(d) { return d.type === "e" || d.type === "w" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });
    }

    else {
      group.selectAll(".selection,.handle")
          .style("display", "none")
          .attr("x", null)
          .attr("y", null)
          .attr("width", null)
          .attr("height", null);
    }
  }

  function emitter(that, args) {
    return that.__brush.emitter || new Emitter(that, args);
  }

  function Emitter(that, args) {
    this.that = that;
    this.args = args;
    this.state = that.__brush;
    this.active = 0;
  }

  Emitter.prototype = {
    beforestart: function() {
      if (++this.active === 1) this.state.emitter = this, this.starting = true;
      return this;
    },
    start: function() {
      if (this.starting) this.starting = false, this.emit("start");
      return this;
    },
    brush: function() {
      this.emit("brush");
      return this;
    },
    end: function() {
      if (--this.active === 0) delete this.state.emitter, this.emit("end");
      return this;
    },
    emit: function(type) {
      Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["customEvent"])(new __WEBPACK_IMPORTED_MODULE_6__event__["a" /* default */](brush, type, dim.output(this.state.selection)), listeners.apply, listeners, [type, this.that, this.args]);
    }
  };

  function started() {
    if (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].touches) { if (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].changedTouches.length < __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].touches.length) return Object(__WEBPACK_IMPORTED_MODULE_7__noevent__["a" /* default */])(); }
    else if (touchending) return;
    if (!filter.apply(this, arguments)) return;

    var that = this,
        type = __WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].target.__data__.type,
        mode = (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].metaKey ? type = "overlay" : type) === "selection" ? MODE_DRAG : (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].altKey ? MODE_CENTER : MODE_HANDLE),
        signX = dim === Y ? null : signsX[type],
        signY = dim === X ? null : signsY[type],
        state = local(that),
        extent = state.extent,
        selection = state.selection,
        W = extent[0][0], w0, w1,
        N = extent[0][1], n0, n1,
        E = extent[1][0], e0, e1,
        S = extent[1][1], s0, s1,
        dx,
        dy,
        moving,
        shifting = false, // ZK disable shift key
        lockX,
        lockY,
        point0 = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["mouse"])(that),
        point = point0,
        emit = emitter(that, arguments).beforestart();

    if (type === "overlay") {
      state.selection = selection = [
        [w0 = dim === Y ? W : point0[0], n0 = dim === X ? N : point0[1]],
        [e0 = dim === Y ? E : w0, s0 = dim === X ? S : n0]
      ];
    } else {
      w0 = selection[0][0];
      n0 = selection[0][1];
      e0 = selection[1][0];
      s0 = selection[1][1];
    }

    w1 = w0;
    n1 = n0;
    e1 = e0;
    s1 = s0;

    var group = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(that)
        .attr("pointer-events", "none");

    var overlay = group.selectAll(".overlay")
        .attr("cursor", cursors[type]);

    if (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].touches) {
      group
          .on("touchmove.brush", moved, true)
          .on("touchend.brush touchcancel.brush", ended, true);
    } else {
      var view = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["select"])(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].view)
          .on("keydown.brush", keydowned, true)
          .on("keyup.brush", keyupped, true)
          .on("mousemove.brush", moved, true)
          .on("mouseup.brush", ended, true);

      Object(__WEBPACK_IMPORTED_MODULE_1_d3_drag__["dragDisable"])(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].view);
    }

    Object(__WEBPACK_IMPORTED_MODULE_7__noevent__["b" /* nopropagation */])();
    Object(__WEBPACK_IMPORTED_MODULE_4_d3_transition__["a" /* interrupt */])(that);
    redraw.call(that);
    emit.start();

    function moved() {
      var point1 = Object(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["mouse"])(that);
      if (shifting && !lockX && !lockY) {
        if (Math.abs(point1[0] - point[0]) > Math.abs(point1[1] - point[1])) lockY = true;
        else lockX = true;
      }
      point = point1;
      moving = true;
      Object(__WEBPACK_IMPORTED_MODULE_7__noevent__["a" /* default */])();
      move();
    }

    function move() {
      var t;

      dx = point[0] - point0[0];
      dy = point[1] - point0[1];

      switch (mode) {
        case MODE_SPACE:
        case MODE_DRAG: {
          if (signX) dx = Math.max(W - w0, Math.min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;
          if (signY) dy = Math.max(N - n0, Math.min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;
          break;
        }
        case MODE_HANDLE: {
          if (signX < 0) dx = Math.max(W - w0, Math.min(E - w0, dx)), w1 = w0 + dx, e1 = e0;
          else if (signX > 0) dx = Math.max(W - e0, Math.min(E - e0, dx)), w1 = w0, e1 = e0 + dx;
          if (signY < 0) dy = Math.max(N - n0, Math.min(S - n0, dy)), n1 = n0 + dy, s1 = s0;
          else if (signY > 0) dy = Math.max(N - s0, Math.min(S - s0, dy)), n1 = n0, s1 = s0 + dy;
          break;
        }
        case MODE_CENTER: {
          if (signX) w1 = Math.max(W, Math.min(E, w0 - dx * signX)), e1 = Math.max(W, Math.min(E, e0 + dx * signX));
          if (signY) n1 = Math.max(N, Math.min(S, n0 - dy * signY)), s1 = Math.max(N, Math.min(S, s0 + dy * signY));
          break;
        }
      }

      if (e1 < w1) {
        signX *= -1;
        t = w0, w0 = e0, e0 = t;
        t = w1, w1 = e1, e1 = t;
        if (type in flipX) overlay.attr("cursor", cursors[type = flipX[type]]);
      }

      if (s1 < n1) {
        signY *= -1;
        t = n0, n0 = s0, s0 = t;
        t = n1, n1 = s1, s1 = t;
        if (type in flipY) overlay.attr("cursor", cursors[type = flipY[type]]);
      }

      if (state.selection) selection = state.selection; // May be set by brush.move!
      if (lockX) w1 = selection[0][0], e1 = selection[1][0];
      if (lockY) n1 = selection[0][1], s1 = selection[1][1];

      if (selection[0][0] !== w1
          || selection[0][1] !== n1
          || selection[1][0] !== e1
          || selection[1][1] !== s1) {
        state.selection = [[w1, n1], [e1, s1]];
        redraw.call(that);
        emit.brush();
      }
    }

    function ended() {
      Object(__WEBPACK_IMPORTED_MODULE_7__noevent__["b" /* nopropagation */])();
      if (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].touches) {
        if (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].touches.length) return;
        if (touchending) clearTimeout(touchending);
        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!
        group.on("touchmove.brush touchend.brush touchcancel.brush", null);
      } else {
        Object(__WEBPACK_IMPORTED_MODULE_1_d3_drag__["dragEnable"])(__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].view, moving);
        view.on("keydown.brush keyup.brush mousemove.brush mouseup.brush", null);
      }
      group.attr("pointer-events", "all");
      overlay.attr("cursor", cursors.overlay);
      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!
      if (empty(selection)) state.selection = null, redraw.call(that);
      emit.end();
    }

    function keydowned() {
      switch (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].keyCode) {
        case 16: { // SHIFT
          shifting = signX && signY;
          break;
        }
        case 18: { // ALT
          if (mode === MODE_HANDLE) {
            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;
            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;
            mode = MODE_CENTER;
            move();
          }
          break;
        }
        case 32: { // SPACE; takes priority over ALT
          if (mode === MODE_HANDLE || mode === MODE_CENTER) {
            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;
            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;
            mode = MODE_SPACE;
            overlay.attr("cursor", cursors.selection);
            move();
          }
          break;
        }
        default: return;
      }
      Object(__WEBPACK_IMPORTED_MODULE_7__noevent__["a" /* default */])();
    }

    function keyupped() {
      switch (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].keyCode) {
        case 16: { // SHIFT
          if (shifting) {
            lockX = lockY = shifting = false;
            move();
          }
          break;
        }
        case 18: { // ALT
          if (mode === MODE_CENTER) {
            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;
            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;
            mode = MODE_HANDLE;
            move();
          }
          break;
        }
        case 32: { // SPACE
          if (mode === MODE_SPACE) {
            if (__WEBPACK_IMPORTED_MODULE_3_d3_selection__["event"].altKey) {
              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;
              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;
              mode = MODE_CENTER;
            } else {
              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;
              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;
              mode = MODE_HANDLE;
            }
            overlay.attr("cursor", cursors[type]);
            move();
          }
          break;
        }
        default: return;
      }
      Object(__WEBPACK_IMPORTED_MODULE_7__noevent__["a" /* default */])();
    }
  }

  function initialize() {
    var state = this.__brush || {selection: null};
    state.extent = extent.apply(this, arguments);
    state.dim = dim;
    return state;
  }

  brush.extent = function(_) {
    return arguments.length ? (extent = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_5__constant__["a" /* default */])([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), brush) : extent;
  };

  brush.filter = function(_) {
    return arguments.length ? (filter = typeof _ === "function" ? _ : Object(__WEBPACK_IMPORTED_MODULE_5__constant__["a" /* default */])(!!_), brush) : filter;
  };

  brush.handleSize = function(_) {
    return arguments.length ? (handleSize = +_, brush) : handleSize;
  };

  brush.on = function() {
    var value = listeners.on.apply(listeners, arguments);
    return value === listeners ? brush : value;
  };

  return brush;
}


/***/ }),
/* 341 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(x) {
  return function() {
    return x;
  };
});


/***/ }),
/* 342 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony default export */ __webpack_exports__["a"] = (function(target, type, selection) {
  this.target = target;
  this.type = type;
  this.selection = selection;
});


/***/ }),
/* 343 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = nopropagation;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_selection__ = __webpack_require__(0);


function nopropagation() {
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].stopImmediatePropagation();
}

/* harmony default export */ __webpack_exports__["a"] = (function() {
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].preventDefault();
  __WEBPACK_IMPORTED_MODULE_0_d3_selection__["event"].stopImmediatePropagation();
});


/***/ }),
/* 344 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * TextEditInput
 */

var utils = __webpack_require__(1);
var PlacedDiv = __webpack_require__(44);
var build = __webpack_require__(53);

var TextEditInput = utils.make_class();
TextEditInput.prototype = {
  init: init,
  setup_map_callbacks: setup_map_callbacks,
  setup_zoom_callbacks: setup_zoom_callbacks,
  is_visible: is_visible,
  show: show,
  hide: hide,
  _accept_changes: _accept_changes,
  _add_and_edit: _add_and_edit
};
module.exports = TextEditInput;

function init(selection, map, zoom_container) {
  var div = selection.append('div').attr('id', 'text-edit-input');
  this.placed_div = PlacedDiv(div, map);
  this.placed_div.hide();
  this.input = div.append('input');

  this.map = map;
  this.setup_map_callbacks(map);
  this.zoom_container = zoom_container;
  this.setup_zoom_callbacks(zoom_container);

  this.is_new = false;
}

function setup_map_callbacks(map) {
  // Input
  map.callback_manager.set('edit_text_label.text_edit_input', function (target, coords) {
    this.show(target, coords);
  }.bind(this));

  // new text_label
  map.callback_manager.set('new_text_label.text_edit_input', function (coords) {
    if (this.active_target !== null) {
      this._accept_changes(this.active_target.target);
    }
    this.hide();
    this._add_and_edit(coords);
  }.bind(this));

  map.callback_manager.set('hide_text_label_editor.text_edit_input', function () {
    this.hide();
  }.bind(this));
}

function setup_zoom_callbacks(zoom_container) {
  zoom_container.callback_manager.set('zoom.text_edit_input', function () {
    if (this.active_target) {
      this._accept_changes(this.active_target.target);
    }
    this.hide();
  }.bind(this));
  zoom_container.callback_manager.set('go_to.text_edit_input', function () {
    if (this.active_target) {
      this._accept_changes(this.active_target.target);
    }
    this.hide();
  }.bind(this));
}

function is_visible() {
  return this.placed_div.is_visible();
}

function show(target, coords) {
  // save any existing edit
  if (this.active_target) {
    this._accept_changes(this.active_target.target);
  }

  // set the current target
  this.active_target = { target: target, coords: coords

    // set the new value
  };target.each(function (d) {
    this.input.node().value = d.text;
  }.bind(this));

  // place the input
  this.placed_div.place(coords);
  this.input.node().focus();

  // escape key
  this.clear_escape = this.map.key_manager.add_escape_listener(function () {
    this._accept_changes(target);
    this.hide();
  }.bind(this), true);
  // enter key
  this.clear_enter = this.map.key_manager.add_enter_listener(function (target) {
    this._accept_changes(target);
    this.hide();
  }.bind(this, target), true);
}

function hide() {
  this.is_new = false;

  // hide the input
  this.placed_div.hide();

  // clear the value
  this.input.attr('value', '');
  this.active_target = null;

  // clear escape
  if (this.clear_escape) this.clear_escape();
  this.clear_escape = null;
  // clear enter
  if (this.clear_enter) this.clear_enter();
  this.clear_enter = null;
  // turn off click listener
  // this.map.sel.on('click.', null)
}

function _accept_changes(target) {
  if (this.input.node().value === '') {
    // Delete the label
    target.each(function (d) {
      var selected = {};
      selected[d.text_label_id] = this.map.text_labels[d.text_label_id];
      this.map.delete_selectable({}, selected, true);
    }.bind(this));
  } else {
    // Set the text
    var text_label_ids = [];
    target.each(function (d) {
      this.map.edit_text_label(d.text_label_id, this.input.node().value, true, this.is_new);
      text_label_ids.push(d.text_label_id);
    }.bind(this));
  }
}

function _add_and_edit(coords) {
  this.is_new = true;

  // Make an empty label
  var text_label_id = this.map.new_text_label(coords, '');
  // Apply the cursor to the new label
  var sel = this.map.sel.select('#text-labels').selectAll('.text-label').filter(function (d) {
    return d.text_label_id === text_label_id;
  });
  sel.select('text').classed('edit-text-cursor', true);
  this.show(sel, coords);
}

/***/ }),
/* 345 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/**
 * A QuickJump menu to move between maps.
 * sel: The d3 selection of an html node to place the menu inside.
 * options: An array of map names to jump to.
 * load_callback: A callback function that accepts two arguments: map_name, and
 * another callback which returns true or false for success or failure (callback
 * purgatory).
*/

var utils = __webpack_require__(1);

var QuickJump = utils.make_class();
// instance methods
QuickJump.prototype = {
  init: init,
  reset_selection: reset_selection,
  replace_state_for_map_name: replace_state_for_map_name
};
module.exports = QuickJump;

function init(sel, load_callback) {
  // set up the menu
  var select_sel = sel.append('select').attr('id', 'quick-jump-menu').attr('class', 'form-control');
  this.selector = select_sel;

  // get the options to show
  var url_comp = utils.parse_url_components(window);
  var current = 'map_name' in url_comp ? url_comp.map_name : null;
  var quick_jump_path = 'quick_jump_path' in url_comp ? url_comp.quick_jump_path : null;
  var options = 'quick_jump' in url_comp ? url_comp.quick_jump : [];
  var default_value = '— Jump to map —';
  var view_options = [default_value].concat(options);
  if (current !== null) {
    view_options = view_options.filter(function (o) {
      return o != current;
    });
  }

  // on selection
  var change_map = function (map_name) {
    load_callback(map_name, quick_jump_path, function (success) {
      if (success) {
        this.replace_state_for_map_name(map_name);
      } else {
        this.reset_selection();
      }
    }.bind(this));
  }.bind(this);

  // only show if there are options
  if (view_options.length > 1) {
    var s = select_sel.selectAll('option').data(view_options);
    s.enter().append('option').merge(s).text(function (d) {
      // works whether or not a '.' is present
      return d.split('.').slice(-1)[0];
    });
    select_sel.on('change', function () {
      // get the new map
      var map_name = this.options[this.selectedIndex].__data__;
      change_map(map_name);
    });
  } else {
    select_sel.style('display', 'none');
  }
}

function reset_selection() {
  this.selector.node().selectedIndex = 0;
}

/**
 * Just changes the url to match the new map name. Does not actually manage the
 * HTML5 history.
 */
function replace_state_for_map_name(map_name) {
  // update the url with the new map
  var url = window.location.href.replace(/(map_name=)([^&]+)(&|$)/, '$1' + map_name + '$3');
  window.history.replaceState('Not implemented', '', url);
}

/***/ }),
/* 346 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _preact = __webpack_require__(3);

var _preact2 = _interopRequireDefault(_preact);

var _CallbackManager = __webpack_require__(17);

var _CallbackManager2 = _interopRequireDefault(_CallbackManager);

var _ReactWrapper = __webpack_require__(61);

var _ReactWrapper2 = _interopRequireDefault(_ReactWrapper);

var _underscore = __webpack_require__(2);

var _ = _interopRequireWildcard(_underscore);

var _utils = __webpack_require__(1);

var utils = _interopRequireWildcard(_utils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PlacedDiv = __webpack_require__(44);

/**
 * Manage the tooltip that lives in a PlacedDiv.
 * @param selection
 * @param map
 * @param tooltipComponent
 * @param zoom_container
 */
/** @jsx h */
var TooltipContainer = utils.make_class();
// instance methods
TooltipContainer.prototype = {
  init: init,
  setup_map_callbacks: setup_map_callbacks,
  setup_zoom_callbacks: setup_zoom_callbacks,
  is_visible: is_visible,
  show: show,
  hide: hide,
  delay_hide: delay_hide,
  cancelHideTooltip: cancelHideTooltip
};
module.exports = TooltipContainer;

// definitions
function init(selection, TooltipComponent, zoom_container) {
  var _this = this;

  this.div = selection.append('div').attr('id', 'tooltip-container');
  this.TooltipComponent = TooltipComponent;
  this.tooltipRef = null;

  this.zoom_container = zoom_container;
  this.setup_zoom_callbacks(zoom_container);

  // Create callback manager
  this.callback_manager = (0, _CallbackManager2.default)();

  this.div.on('mouseover', this.cancelHideTooltip.bind(this));
  this.div.on('mouseleave', this.hide.bind(this));

  this.map = null;
  this.delay_hide_timeout = null;
  this.currentTooltip = null;

  // keep a reference to preact tooltip
  _preact2.default.render((0, _preact.h)(_ReactWrapper2.default, {
    callbackManager: this.callback_manager,
    component: this.TooltipComponent,
    refProp: function refProp(instance) {
      _this.tooltipRef = instance;
    }
  }), this.div.node());
}

/**
 * Sets up the appropriate callbacks to show the input
 * @param {object} map - map object
 */
function setup_map_callbacks(map) {
  var _this2 = this;

  this.map = map;
  this.placed_div = PlacedDiv(this.div, map, undefined, false);

  //
  map.callback_manager.set('show_tooltip.tooltip_container', function (type, d) {
    if (map.settings.get_option('enable_tooltips')) {
      this.show(type, d);
    }
  }.bind(this));

  //
  map.callback_manager.set('hide_tooltip.tooltip_container', this.hide.bind(this));
  map.sel.selectAll('#canvas').on('touchend', this.hide.bind(this));
  map.callback_manager.set('delay_hide_tooltip.tooltip_container', this.delay_hide.bind(this));
  map.callback_manager.set('update_tooltip.tooltip_container', function (type, sel) {
    if (_this2.currentTooltip !== null) {
      var d = null;
      sel.each(function (data) {
        if (data[type.replace('_label', '_id')] === _this2.currentTooltip.id) {
          d = data;
        }
      });
      if (d === null) {
        console.warn('Could not find tooltip data for ' + _this2.currentTooltip);
      } else {
        _this2.show(type, d);
      }
    }
  });
}

function setup_zoom_callbacks(zoom_container) {
  zoom_container.callback_manager.set('zoom.tooltip_container', function () {
    if (this.is_visible()) {
      this.hide();
    }
  }.bind(this));
  zoom_container.callback_manager.set('go_to.tooltip_container', function () {
    if (this.is_visible()) {
      this.hide();
    }
  }.bind(this));
}

/**
 * Return visibility of tooltip container.
 * @return {Boolean} Whether tooltip is visible.
 */
function is_visible() {
  return this.placed_div.is_visible();
}

/**
 * Show and place the input.
 * @param {string} type - 'reaction_label', 'node_label', or 'gene_label'
 * @param {Object} d - D3 data for DOM element
 */
function show(type, d) {
  // get rid of a lingering delayed hide
  this.cancelHideTooltip();

  if (_.contains(['reaction_label', 'node_label', 'gene_label'], type)) {
    // Use a default height if the ref hasn't been connected yet
    var tooltipSize = this.tooltipRef !== null && this.tooltipRef.getSize ? this.tooltipRef.getSize() : { width: 270, height: 100 };
    this.currentTooltip = { type: type, id: d[type.replace('_label', '_id')] };
    var windowTranslate = this.zoom_container.window_translate;
    var windowScale = this.zoom_container.window_scale;
    var mapSize = this.map !== null ? this.map.get_size() : { width: 1000, height: 1000 };
    var offset = { x: 0, y: 0 };
    var rightEdge = windowScale * d.label_x + windowTranslate.x + tooltipSize.width;
    var bottomEdge = windowScale * d.label_y + windowTranslate.y + tooltipSize.height;
    if (mapSize.width < 500) {
      if (rightEdge > mapSize.width) {
        offset.x = -(rightEdge - mapSize.width) / windowScale;
      }
      if (bottomEdge > mapSize.height - 74) {
        offset.y = -(bottomEdge - mapSize.height + 77) / windowScale;
      }
    } else {
      if (windowScale * d.label_x + windowTranslate.x + 0.5 * tooltipSize.width > mapSize.width) {
        offset.x = -tooltipSize.width / windowScale;
      } else if (rightEdge > mapSize.width) {
        offset.x = -(rightEdge - mapSize.width) / windowScale;
      }
      if (windowScale * d.label_y + windowTranslate.y + 0.5 * tooltipSize.height > mapSize.height - 45) {
        offset.y = -tooltipSize.height / windowScale;
      } else if (bottomEdge > mapSize.height - 45) {
        offset.y = -(bottomEdge - mapSize.height + 47) / windowScale;
      }
    }
    var coords = { x: d.label_x + offset.x, y: d.label_y + 10 + offset.y };
    this.placed_div.place(coords);
    var data = {
      biggId: d.bigg_id,
      name: d.name,
      loc: coords,
      data: d.data_string,
      type: type.replace('_label', '').replace('node', 'metabolite')
    };
    this.callback_manager.run('setState', null, data);
  } else {
    throw new Error('Tooltip not supported for object type ' + type);
  }
}

/**
 * Hide the input.
 */
function hide() {
  this.placed_div.hide();
  this.currentTooltip = null;
}

/**
 * Hide the input after a short delay, so that mousing onto the tooltip does not
 * cause it to hide.
 */
function delay_hide() {
  this.delay_hide_timeout = setTimeout(function () {
    this.hide();
  }.bind(this), 100);
}

function cancelHideTooltip() {
  if (this.delay_hide_timeout !== null) {
    clearTimeout(this.delay_hide_timeout);
  }
}

/***/ }),
/* 347 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

__webpack_require__(348);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* global window */
/** @jsx h */

/**
 * Define a Tooltip component and interface with Preact.
 */


var utils = __webpack_require__(1);

var DefaultTooltip = function (_Component) {
  _inherits(DefaultTooltip, _Component);

  function DefaultTooltip() {
    _classCallCheck(this, DefaultTooltip);

    return _possibleConstructorReturn(this, _Component.apply(this, arguments));
  }

  DefaultTooltip.prototype.decompartmentalizeCheck = function decompartmentalizeCheck(id, type) {
    // ID without compartment, if metabolite.
    return type === 'metabolite' ? utils.decompartmentalize(id)[0] : id;
  };

  DefaultTooltip.prototype.openBigg = function openBigg() {
    var type = this.props.type;
    var biggId = this.props.biggId;
    var pref = 'http://bigg.ucsd.edu/';
    var url = type === 'gene' ? pref + 'search?query=' + biggId : pref + 'universal/' + type + 's/' + this.decompartmentalizeCheck(biggId, type);
    window.open(url);
  };

  DefaultTooltip.prototype.capitalizeFirstLetter = function capitalizeFirstLetter(s) {
    return typeof s === 'string' ? s.charAt(0).toUpperCase() + s.slice(1) : console.warn('capitalizeFirstLetter was passed something other than a string');
  };

  DefaultTooltip.prototype.render = function render() {
    var _this2 = this;

    var decomp = this.decompartmentalizeCheck(this.props.biggId, this.props.type);
    var biggButtonText = 'Open ' + decomp + ' in BiGG Models.';
    return (0, _preact.h)(
      'div',
      { className: 'tooltip' },
      (0, _preact.h)(
        'div',
        { className: 'id' },
        this.props.biggId
      ),
      (0, _preact.h)(
        'div',
        { className: 'name' },
        'name: ',
        this.props.name
      ),
      (0, _preact.h)(
        'div',
        { className: 'data' },
        'data: ',
        this.props.data && this.props.data !== '(nd)' ? this.props.data : 'no data'
      ),
      (0, _preact.h)(
        'button',
        {
          className: 'biggIdButton',
          onClick: function onClick() {
            return _this2.openBigg();
          }
        },
        biggButtonText
      ),
      (0, _preact.h)(
        'div',
        {
          className: 'typeLabel'
        },
        this.capitalizeFirstLetter(this.props.type)
      )
    );
  };

  return DefaultTooltip;
}(_preact.Component);

exports.default = DefaultTooltip;

/***/ }),
/* 348 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(349);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./DefaultTooltip.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./DefaultTooltip.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 349 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .tooltip{box-sizing:border-box;min-width:270px;min-height:100px;border-radius:2px;border:1px solid #b58787;padding:7px;background-color:#fff;text-align:left;font-size:16px;font-family:sans-serif;color:#111;box-shadow:4px 6px 20px 0 rgba(0,0,0,.4)}.escher-container .tooltip .id{font-size:18px;font-weight:700}.escher-container .tooltip .biggIdButton{border-radius:3px;background-color:#eee;border:1px solid #ddd;margin-top:4px;font-size:16px;padding:3px 6px}.escher-container .tooltip .typeLabel{position:absolute;top:4px;right:4px;color:#d27066;background-color:#ffeded;border-radius:2px;font-size:14px;text-align:right;padding:0 5px}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/DefaultTooltip.css"],"names":[],"mappings":"AAAA,2BACE,sBAAuB,AACvB,gBAAiB,AACjB,iBAAkB,AAClB,kBAAmB,AACnB,yBAA0B,AAC1B,YAAa,AACb,sBAAuB,AACvB,gBAAiB,AACjB,eAAgB,AAChB,uBAAwB,AACxB,WAAY,AACZ,wCAAgD,CACjD,AAED,+BACE,eAAgB,AAChB,eAAkB,CACnB,AAED,yCACE,kBAAmB,AACnB,sBAAuB,AACvB,sBAAuB,AACvB,eAAgB,AAChB,eAAgB,AAChB,eAAiB,CAClB,AAED,sCACE,kBAAmB,AACnB,QAAS,AACT,UAAW,AACX,cAAe,AACf,yBAA0B,AAC1B,kBAAmB,AACnB,eAAgB,AAChB,iBAAkB,AAClB,aAAiB,CAClB","file":"DefaultTooltip.css","sourcesContent":[".escher-container .tooltip {\n  box-sizing: border-box;\n  min-width: 270px;\n  min-height: 100px;\n  border-radius: 2px;\n  border: 1px solid #b58787;\n  padding: 7px;\n  background-color: #fff;\n  text-align: left;\n  font-size: 16px;\n  font-family: sans-serif;\n  color: #111;\n  box-shadow: 4px 6px 20px 0px rgba(0, 0, 0, 0.4);\n}\n\n.escher-container .tooltip .id{\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.escher-container .tooltip .biggIdButton {\n  border-radius: 3px;\n  background-color: #eee;\n  border: 1px solid #ddd;\n  margin-top: 4px;\n  font-size: 16px;\n  padding: 3px 6px;\n}\n\n.escher-container .tooltip .typeLabel {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  color: #d27066;\n  background-color: #ffeded;\n  border-radius: 2px;\n  font-size: 14px;\n  text-align: right;\n  padding: 0px 5px;\n}"],"sourceRoot":""}]);

// exports


/***/ }),
/* 350 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.__esModule = true;

var _preact = __webpack_require__(3);

__webpack_require__(351);

var _d3Selection = __webpack_require__(0);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable camelcase */

/** TimeSeriesBar
 * @author Christoph Blessing */

/** @jsx h */


var TimeSeriesBar = function (_Component) {
  _inherits(TimeSeriesBar, _Component);

  function TimeSeriesBar(props) {
    _classCallCheck(this, TimeSeriesBar);

    var _this = _possibleConstructorReturn(this, _Component.call(this, props));

    _this.state = {
      visible: props.visible,
      builder: props.builder,
      map: props.map,
      playing: false,
      sliding_window: false,
      duration: 2000
    };

    return _this;
  }

  TimeSeriesBar.prototype.close = function close() {
    // TODO: get this right with props / state
    this.setState({ visible: false });
    this.state.visible = false;
    this.props.visible = false;
  };

  TimeSeriesBar.prototype.is_visible = function is_visible() {
    return this.state.visible;
  };

  /**
   *  Updates the GUI
   *  if a data set is loaded
   *   set to specific data set
   *   set slider to max of data set length
   *   set dropdown menu length
   *  else
   *   reset everything
   */

  TimeSeriesBar.prototype.update = function update(builder) {

    var currentDataSet = this.get_current_data_set(builder);

    if (currentDataSet !== null) {
      // update display
      var current = 0;

      // update slider
      (0, _d3Selection.select)('#sliderReference').attr('max', currentDataSet.length - 1).attr('value', 0);

      (0, _d3Selection.select)('#sliderTarget').attr('max', currentDataSet.length - 1).attr('value', 0);

      document.getElementById('dropDownMenuReference').options.length = 0;
      document.getElementById('dropDownMenuTarget').options.length = 0;

      for (var x in currentDataSet) {

        var name_of_current_data_set = x;

        if (builder.type_of_data === 'reaction') {
          name_of_current_data_set = builder.reaction_data_names[x];
        } else if (builder.type_of_data === 'metabolite') {
          name_of_current_data_set = builder.metabolite_data_names[x];
        } else if (builder.type_of_data === 'gene') {
          name_of_current_data_set = builder.gene_data_names[x];
        }

        (0, _d3Selection.select)('#dropDownMenuReference').append('option').attr('value', x).text('Reference Data Set: ' + name_of_current_data_set);
        (0, _d3Selection.select)('#dropDownMenuTarget').append('option').attr('value', x).text('Target Data Set: ' + name_of_current_data_set);
      }
    } else {
      // reset everything

      // reset stats
      builder.map.interpolation = false;
      this.state.duration = 2000;

      // update display
      this.current = 0;

      // update slider
      (0, _d3Selection.select)('#sliderReference').attr('max', 0).attr('value', 0);

      (0, _d3Selection.select)('#sliderTarget').attr('max', 0).attr('value', 0);

      (0, _d3Selection.select)('#checkBoxChart').property('checked', false);
      (0, _d3Selection.select)('#checkBoxInterpolation').property('checked', false);

      // reset dropdown menu
      document.getElementById('dropDownMenuReference').options.length = 0;
      document.getElementById('dropDownMenuTarget').options.length = 0;
    }
  };

  TimeSeriesBar.prototype.openTab = function openTab(builder) {

    var tabs = document.getElementsByClassName('tab');

    for (var i = 0; i < tabs.length; i++) {
      tabs[i].style.display = 'none';
    }

    if (builder.type_of_data === 'reaction' || builder.type_of_data === 'gene') {
      (0, _d3Selection.select)('#reaction_tab_button').property('className', 'timeSeriesButton activated');
      (0, _d3Selection.select)('#metabolite_tab_button').property('className', 'timeSeriesButton deactivated');
      this.update(builder);
    } else if (builder.type_of_data === 'metabolite') {
      (0, _d3Selection.select)('#reaction_tab_button').property('className', 'timeSeriesButton deactivated');
      (0, _d3Selection.select)('#metabolite_tab_button').property('className', 'timeSeriesButton activated');
      this.update(builder);
    }
  };

  TimeSeriesBar.prototype.deactivateUserInterface = function deactivateUserInterface(disabled) {

    if (disabled === true) {

      (0, _d3Selection.select)('#reaction_tab_button').attr('disabled', 'true');
      (0, _d3Selection.select)('#metabolite_tab_button').attr('disabled', 'true');
      (0, _d3Selection.select)('#timeSeriesButton').attr('disabled', 'true');
      (0, _d3Selection.select)('#differenceModeButton').attr('disabled', 'true');
      (0, _d3Selection.select)('#sliderReference').attr('disabled', 'true');
      (0, _d3Selection.select)('#dropDownMenuReference').attr('disabled', 'true');
      (0, _d3Selection.select)('#sliderTarget').attr('disabled', 'true');
      (0, _d3Selection.select)('#dropDownMenuTarget').attr('disabled', 'true');
    } else {

      (0, _d3Selection.select)('#reaction_tab_button').attr('disabled', null);
      (0, _d3Selection.select)('#metabolite_tab_button').attr('disabled', null);
      (0, _d3Selection.select)('#timeSeriesButton').attr('disabled', null);
      (0, _d3Selection.select)('#differenceModeButton').attr('disabled', null);
      (0, _d3Selection.select)('#sliderReference').attr('disabled', null);
      (0, _d3Selection.select)('#dropDownMenuReference').attr('disabled', null);
      (0, _d3Selection.select)('#sliderTarget').attr('disabled', null);
      (0, _d3Selection.select)('#dropDownMenuTarget').attr('disabled', null);
    }
  };

  TimeSeriesBar.prototype.play_time_series = function play_time_series(builder, map, duration, sliding_window) {

    map = builder.map;

    if (!this.state.playing) {

      /*
        */
      var play = function play(builder, sliding_window) {

        if (sliding_window) {

          if (tick === array_of_time_points[time_point]) {

            if (parseInt(builder.builder.target) < parseInt(end)) {

              builder.builder.reference = parseInt(builder.builder.reference) + 1;
              builder.builder.target = parseInt(builder.builder.reference) + sliding_window_size;

              (0, _d3Selection.select)('#sliderReference').property('value', builder.builder.reference);
              (0, _d3Selection.select)('#dropDownMenuReference').property('selectedIndex', builder.builder.reference);
              (0, _d3Selection.select)('#sliderTarget').property('value', builder.builder.target);
              (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', builder.builder.target);

              time_point++;
              tick++;
            } else {
              // play as loop
              builder.builder.reference = sliding_window_start;
              builder.builder.target = sliding_window_start + sliding_window_size;

              time_point = start;
              tick = array_of_time_points[start];

              (0, _d3Selection.select)('#sliderReference').property('value', builder.builder.reference);
              (0, _d3Selection.select)('#dropDownMenuReference').property('selectedIndex', builder.builder.reference);
              (0, _d3Selection.select)('#sliderTarget').property('value', builder.builder.target);
              (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', builder.builder.target);
            }

            builder.builder.set_data_indices(builder.type_of_data, builder.reference, builder.target);
          } else {

            if (tick >= array_of_time_points[end]) {
              tick = array_of_time_points[start];

              (0, _d3Selection.select)('#sliderReference').property('value', start);
              (0, _d3Selection.select)('#dropDownMenuReference').property('selectedIndex', start);
              (0, _d3Selection.select)('#sliderTarget').property('value', start + sliding_window_size);
              (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', start + sliding_window_size);

              builder.builder.reference = sliding_window_start;
              builder.builder.target = sliding_window_start + sliding_window_size;
            } else {
              tick++;

              (0, _d3Selection.select)('#sliderReference').property('value', start);
              (0, _d3Selection.select)('#dropDownMenuReference').property('selectedIndex', start);
              (0, _d3Selection.select)('#sliderTarget').property('value', start + sliding_window_size);
              (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', start + sliding_window_size);
            }
          }
        } else if (builder.builder.difference_mode) {

          if (tick === array_of_time_points[time_point]) {

            // reference is static, next goes from reference + 1 to end
            builder.builder.set_data_indices(builder.builder.type_of_data, builder.builder.reference, builder.builder.target);

            var next = builder.builder.target;

            (0, _d3Selection.select)('#sliderTarget').property('value', next);
            (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', next);

            if (parseInt(builder.builder.target) < end) {
              next++;
              builder.builder.target = next;

              time_point++;
              tick++;
            } else {
              // play as loop
              builder.builder.target = start;

              time_point = start;
              tick = array_of_time_points[start];
            }
          } else {

            if (tick >= array_of_time_points[end]) {
              tick = array_of_time_points[start];
              (0, _d3Selection.select)('#sliderTarget').property('value', start);
              (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', start);
            } else {
              tick++;
              (0, _d3Selection.select)('#sliderTarget').property('value', builder.builder.target);
              (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', builder.builder.target);
            }
          }
        } else {
          // TODO: handle interpolated data with non-linear time scale: set duration to next tick
          if (tick === array_of_time_points[time_point]) {

            builder.builder.set_data_indices(builder.builder.type_of_data, builder.builder.reference, sliding_window_end);

            if (parseInt(builder.builder.reference) < end) {
              var _next = builder.builder.reference;
              _next++;
              builder.builder.reference = _next;

              time_point++;
              tick++;
            } else {
              // play as loop
              builder.builder.reference = sliding_window_start;

              time_point = sliding_window_start;
              tick = array_of_time_points[sliding_window_start];
            }
            animate_slider();

            builder.builder.set_data_indices(builder.builder.type_of_data, builder.builder.reference, builder.builder.target);
          } else {

            if (tick >= array_of_time_points[end]) {
              tick = array_of_time_points[sliding_window_start];
              animate_slider(0);
            } else {
              tick++;
            }
          }
        }
      };

      // animation


      this.deactivateUserInterface(true);
      this.state.playing = true;

      var sliding_window_start = parseInt(builder.builder.reference);
      var sliding_window_end = parseInt(builder.builder.target);

      // array of time points for non-linear time scale
      var array_of_time_points = this.get_array_of_time_points(builder, map);

      var tick = array_of_time_points[sliding_window_start];
      var time_point = sliding_window_start;

      // difference mode
      var start = parseInt(builder.builder.reference);
      var end = parseInt(this.get_current_data_set(builder.builder).length - 1);

      if (builder.difference_mode && !sliding_window) {
        builder.builder.target = parseInt(builder.builder.reference);
      }

      // sliding window mode
      var sliding_window_size = 1;

      var _duration = _duration / (end - start);

      map.transition_duration = this.state.duration;this.animation = setInterval(function () {
        play(builder, sliding_window);
      }, this.state.duration);
    } else {
      // clear animation and reset data

      clearInterval(this.animation);

      this.state.playing = false;
      this.deactivateUserInterface(false);

      builder.builder.reference = parseInt((0, _d3Selection.select)('#sliderReference').property('value'));
      if (builder.builder.difference_mode) {
        builder.builder.target = parseInt(builder.builder.reference) + 1;
      } else {
        builder.builder.target = parseInt((0, _d3Selection.select)('#sliderTarget').property('value'));
      }
    }

    function animate_slider(set_to) {

      var slider_value = parseInt((0, _d3Selection.select)('#sliderReference').property('value'));
      var slider_max = parseInt((0, _d3Selection.select)('#sliderReference').property('max'));
      var slider_min = parseInt((0, _d3Selection.select)('#sliderReference').property('min'));

      if (set_to !== undefined) {
        slider_value = set_to;
      } else if (slider_value < slider_max) {
        slider_value++;
      } else {
        slider_value = slider_min;
      }

      (0, _d3Selection.select)('#sliderReference').property('value', slider_value);
      (0, _d3Selection.select)('#dropDownMenuReference').property('selectedIndex', slider_value);
    }
  };

  TimeSeriesBar.prototype.get_current_data_set = function get_current_data_set(builder) {
    if (builder.type_of_data === 'reaction') {
      return builder.options.reaction_data;
    } else if (builder.type_of_data === 'gene') {
      return builder.options.gene_data;
    } else if (builder.type_of_data === 'metabolite') {
      return builder.options.metabolite_data;
    } else {
      return [];
    }
  };

  TimeSeriesBar.prototype.get_current_data_set_names = function get_current_data_set_names(builder) {
    if (builder.type_of_data === 'reaction') {
      return builder.reaction_data_names;
    } else if (builder.type_of_data === 'gene') {
      return builder.gene_data_names;
    } else if (builder.type_of_data === 'metabolite') {
      return builder.metabolite_data_names;
    } else {
      return [];
    }
  };

  TimeSeriesBar.prototype.get_array_of_time_points = function get_array_of_time_points(builder, map) {

    var array_of_time_points = [];
    var time_scale_is_linear = void 0;

    for (var i in this.get_current_data_set_names(builder.builder)) {
      var name = this.get_current_data_set_names(builder.builder)[i];

      if (name.startsWith('t') && typeof parseInt(name.slice(1)) === 'number') {
        // check if rest of string is a number
        array_of_time_points.push(parseInt(name.slice(1)));
        time_scale_is_linear = false;
      } else {
        array_of_time_points.push(parseInt(i));
        time_scale_is_linear = true;
      }
    }

    if (time_scale_is_linear) {
      map.set_status('Displaying Linear Time Scale');
    } else {
      map.set_status('Displaying Non Linear Time Scale');
    }

    return array_of_time_points;
  };

  TimeSeriesBar.prototype.buttonDifferenceMode = function buttonDifferenceMode(builder) {
    (0, _d3Selection.select)('#timeSeriesButton').style('background-color', 'lightgrey');
    (0, _d3Selection.select)('#differenceModeButton').style('background-color', 'white');
    builder.builder.difference_mode = true;
    this.showDifferenceData(builder);

    (0, _d3Selection.select)('#dropDownMenuTarget').style('display', 'block');
    (0, _d3Selection.select)('#sliderTarget').style('display', 'block');

    (0, _d3Selection.select)('#checkBoxSlidingWindow').style('opacity', 1);
    (0, _d3Selection.select)('#checkBoxSlidingWindow').property('checked', false);

    (0, _d3Selection.select)('#checkBoxSlidingWindowLabel').style('opacity', 1);
    (0, _d3Selection.select)('#checkBoxSlidingWindowLabel').text('Sliding Window');
  };

  TimeSeriesBar.prototype.buttonTimeSeries = function buttonTimeSeries(builder) {
    (0, _d3Selection.select)('#timeSeriesButton').style('background-color', 'white');
    (0, _d3Selection.select)('#differenceModeButton').style('background-color', 'lightgrey');
    builder.builder.difference_mode = false;
    builder.builder.set_data_indices(builder.builder.type_of_data, builder.builder.reference, null);

    (0, _d3Selection.select)('#dropDownMenuTarget').style('display', 'none');
    (0, _d3Selection.select)('#sliderTarget').style('display', 'none');

    (0, _d3Selection.select)('#checkBoxSlidingWindow').style('opacity', 0);
    (0, _d3Selection.select)('#checkBoxSlidingWindowLabel').style('opacity', 0);
  };

  TimeSeriesBar.prototype.showDifferenceData = function showDifferenceData(builder) {
    builder.builder.difference_mode = true;
    builder.builder.set_data_indices(builder.builder.type_of_data, builder.reference, builder.target);
  };

  TimeSeriesBar.prototype.dropDownMenuReference = function dropDownMenuReference(builder) {

    var value = parseInt((0, _d3Selection.select)('#dropDownMenuReference').property('value'));
    builder.builder.reference = value;
    (0, _d3Selection.select)('#sliderReference').property('value', value);
    this.current = value;

    if (builder.difference_mode) {
      this.showDifferenceData(builder);
    } else {
      builder.builder.set_data_indices(builder.builder.type_of_data, builder.reference, builder.target);
    }
  };

  TimeSeriesBar.prototype.sliderReference = function sliderReference(builder) {
    var value = parseInt((0, _d3Selection.select)('#sliderReference').property('value'));
    builder.reference = value;
    (0, _d3Selection.select)('#dropDownMenuReference').property('selectedIndex', value);
    this.current = value;

    if (builder.difference_mode) {
      this.showDifferenceData(builder);
    } else {
      builder.builder.set_data_indices(builder.builder.type_of_data, builder.reference, builder.target);
    }
  };

  TimeSeriesBar.prototype.dropDownMenuTarget = function dropDownMenuTarget(builder) {
    var value = parseInt((0, _d3Selection.select)('#dropDownMenuTarget').property('value'));
    builder.target = value;
    (0, _d3Selection.select)('#sliderTarget').property('selectedIndex', value);
    this.current = value;

    if (builder.difference_mode) {
      this.showDifferenceData(builder);
    } else {
      builder.builder.set_data_indices(builder.builder.type_of_data, builder.reference, builder.target);
    }
  };

  TimeSeriesBar.prototype.sliderTarget = function sliderTarget(builder) {
    var value = parseInt((0, _d3Selection.select)('#sliderTarget').property('value'));
    builder.target = value;
    (0, _d3Selection.select)('#dropDownMenuTarget').property('selectedIndex', value);
    this.current = value;

    if (builder.difference_mode) {
      this.showDifferenceData(builder);
    } else {
      builder.builder.set_data_indices(builder.builder.type_of_data, builder.reference, builder.target);
    }
  };

  TimeSeriesBar.prototype.checkBoxInterpolation = function checkBoxInterpolation(builder) {
    if ((0, _d3Selection.select)('#checkBoxInterpolation').property('checked')) {
      builder.map.interpolation = true;
    } else {
      builder.map.interpolation = false;
    }
  };

  TimeSeriesBar.prototype.setDuration = function setDuration(value) {
    this.state.duration = value;
  };

  TimeSeriesBar.prototype.render = function render(builder) {
    var _this2 = this;

    //let duration = 2000
    this.state.playing = false;

    builder.difference_mode = false;
    builder.reference = 0;
    builder.target = 0;

    // set to time series mode on default
    this.buttonTimeSeries(builder);

    var map = builder.map;
    var current = 0;

    var type_of_data = builder.type_of_data;
    var sliding_window = false;

    return (0, _preact.h)(
      'div',
      {
        className: 'timeSeriesContainer',
        style: this.props.visible ? { display: 'inline-flex' } : { display: 'none' } },
      (0, _preact.h)(
        'div',
        null,
        (0, _preact.h)(
          'div',
          null,
          (0, _preact.h)(
            'button',
            {
              className: 'timeSeriesButton',
              id: 'reaction_tab_button',
              onClick: function onClick() {
                return _this2.openTab('reaction', builder);
              }
            },
            'Reaction / Gene Data'
          ),
          (0, _preact.h)(
            'button',
            {
              className: 'timeSeriesButton',
              id: 'metabolite_tab_button',
              onClick: function onClick() {
                return _this2.openTab('metabolite', builder);
              }
            },
            'Metabolite Data'
          ),
          (0, _preact.h)(
            'button',
            {
              className: 'timeSeriesButton escape',
              onClick: function onClick() {
                return _this2.close();
              }
            },
            'x'
          )
        ),
        (0, _preact.h)(
          'div',
          null,
          (0, _preact.h)(
            'button',
            {
              className: 'timeSeriesButton',
              id: 'timeSeriesButton',
              onClick: function onClick() {
                return _this2.buttonTimeSeries(builder);
              }
            },
            'Time Series'
          ),
          (0, _preact.h)(
            'button',
            {
              className: 'timeSeriesButton',
              id: 'differenceModeButton',
              onClick: function onClick() {
                return _this2.buttonDifferenceMode(builder);
              }
            },
            'Difference Mode'
          )
        ),
        (0, _preact.h)(
          'div',
          null,
          (0, _preact.h)(
            'div',
            null,
            (0, _preact.h)(
              'div',
              null,
              (0, _preact.h)(
                'select',
                {
                  className: 'dropDownMenu',
                  id: 'dropDownMenuReference',
                  onChange: function onChange() {
                    return _this2.dropDownMenuReference(builder);
                  }
                },
                'Reference'
              )
            ),
            (0, _preact.h)(
              'input',
              {
                className: 'slider',
                id: 'sliderReference',
                type: 'range',
                min: 0,
                max: 0,
                step: 1,
                value: 0,
                onChange: function onChange() {
                  return _this2.sliderReference(builder);
                }
              },
              ' '
            )
          ),
          (0, _preact.h)(
            'div',
            null,
            (0, _preact.h)(
              'div',
              null,
              (0, _preact.h)(
                'select',
                {
                  className: 'dropDownMenu',
                  id: 'dropDownMenuTarget',
                  onChange: function onChange() {
                    return _this2.dropDownMenuTarget(builder);
                  }
                },
                'Target'
              )
            ),
            (0, _preact.h)(
              'input',
              {
                className: 'slider',
                id: 'sliderTarget',
                type: 'range',
                min: 0,
                max: 0,
                step: 1,
                value: 0,
                onChange: function onChange() {
                  return _this2.sliderTarget(builder);
                }
              },
              ' '
            )
          )
        ),
        (0, _preact.h)(
          'div',
          null,
          (0, _preact.h)(
            'button',
            {
              className: 'timeSeriesButton play',
              onClick: function onClick() {
                return _this2.play_time_series(builder, map, _this2.state.duration, sliding_window);
              }
            },
            'Play'
          ),
          (0, _preact.h)('input', {
            type: 'number',
            id: 'inputDuration',
            style: 'width: 60px',
            value: this.duration,
            onChange: function onChange() {
              return _this2.setDuration((0, _d3Selection.select)('#inputDuration').property('value'));
            }
          }),
          (0, _preact.h)(
            'label',
            {
              'for': 'inputDuration' },
            'in ms'
          ),
          (0, _preact.h)('input', {
            type: 'checkbox',
            id: 'checkBoxInterpolation',
            onChange: function onChange() {
              return _this2.checkBoxInterpolation(builder);
            }
          }),
          (0, _preact.h)(
            'label',
            {
              'for': 'checkBoxInterpolation' },
            'Interpolation'
          ),
          (0, _preact.h)('input', {
            type: 'checkbox',
            id: 'checkBoxSlidingWindow'
          }),
          (0, _preact.h)(
            'label',
            {
              id: 'checkBoxSlidingWindowLabel',
              'for': 'checkBoxSlidingWindow' },
            'Sliding Window'
          )
        )
      )
    );
  };

  return TimeSeriesBar;
}(_preact.Component);

exports.default = TimeSeriesBar;

/***/ }),
/* 351 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(352);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./TimeSeriesBar.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./TimeSeriesBar.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 352 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container .timeSeriesContainer *{box-sizing:border-box}.escher-container .timeSeriesContainer{float:left;box-sizing:border-box;display:inline-block;justify-content:space-between;background-color:hsla(0,0%,100%,.95);padding:3px;border:1px solid #ddd;width:410px}.escher-container .timeSeriesContainer .timeSeriesButton{border-radius:4px;text-align:center;font-size:14px!important;font-weight:400;height:25px;width:175px;padding-top:0;margin:1px}.escher-container .timeSeriesContainer .timeSeriesButton.activated{background-color:#fff}.escher-container .timeSeriesContainer .timeSeriesButton.deactivated{background-color:#d3d3d3}.escher-container .timeSeriesContainer .timeSeriesButton.escape{width:25px;float:right}.escher-container .timeSeriesContainer .timeSeriesButton.play{width:49px}.escher-container .timeSeriesContainer .slider{width:100%}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/TimeSeriesBar.css"],"names":[],"mappings":"AAAA,yCACI,qBAAuB,CAC1B,AAED,uCACI,WAAY,AACZ,sBAAuB,AACvB,qBAAsB,AACtB,8BAA+B,AAC/B,qCAA4C,AAC5C,YAAa,AACb,sBAAuB,AACvB,WAAa,CAChB,AAED,yDACI,kBAAmB,AACnB,kBAAmB,AAEnB,yBAA0B,AAC1B,gBAAiB,AACjB,YAAa,AACb,YAAa,AACb,cAAiB,AACjB,UAAY,CACf,AAED,mEACI,qBAAwB,CAC3B,AAED,qEACI,wBAA4B,CAC/B,AAED,gEACI,WAAY,AACZ,WAAa,CAChB,AAED,8DACI,UAAY,CACf,AAKD,+CACI,UAAY,CACf","file":"TimeSeriesBar.css","sourcesContent":[".escher-container .timeSeriesContainer * {\n    box-sizing: border-box;\n}\n\n.escher-container .timeSeriesContainer {\n    float: left;\n    box-sizing: border-box;\n    display: inline-block;\n    justify-content: space-between;\n    background-color: rgba(255, 255, 255, 0.95);\n    padding: 3px;\n    border: 1px solid #DDD;\n    width: 410px;\n}\n\n.escher-container .timeSeriesContainer .timeSeriesButton {\n    border-radius: 4px;\n    text-align: center;\n    /*vertical-align: middle;*/\n    font-size: 14px!important;\n    font-weight: 400;\n    height: 25px;\n    width: 175px;\n    padding-top: 0px;\n    margin: 1px;\n}\n\n.escher-container .timeSeriesContainer .timeSeriesButton.activated {\n    background-color: white;\n}\n\n.escher-container .timeSeriesContainer .timeSeriesButton.deactivated {\n    background-color: lightgrey;\n}\n\n.escher-container .timeSeriesContainer .timeSeriesButton.escape {\n    width: 25px;\n    float: right;\n}\n\n.escher-container .timeSeriesContainer .timeSeriesButton.play {\n    width: 49px;\n}\n\n.escher-container .timeSeriesContainer .dropDownMenu {\n}\n\n.escher-container .timeSeriesContainer .slider {\n    width: 100%;\n}\n"],"sourceRoot":""}]);

// exports


/***/ }),
/* 353 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(354);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../../node_modules/css-loader/index.js??ref--0-1!./fontello.css", function() {
			var newContent = require("!!../../node_modules/css-loader/index.js??ref--0-1!./fontello.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 354 */
/***/ (function(module, exports, __webpack_require__) {

var escape = __webpack_require__(355);
exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, "@font-face{font-family:fontello;src:url(" + escape(__webpack_require__(123)) + ");src:url(" + escape(__webpack_require__(123)) + "#iefix) format(\"embedded-opentype\"),url(" + escape(__webpack_require__(356)) + ") format(\"woff2\"),url(" + escape(__webpack_require__(357)) + ") format(\"woff\"),url(" + escape(__webpack_require__(358)) + ") format(\"truetype\"),url(" + escape(__webpack_require__(359)) + "#fontello) format(\"svg\");font-weight:400;font-style:normal}[class*=\" icon-\"]:before,[class^=icon-]:before{font-family:fontello;font-style:normal;font-weight:400;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-ok:before{content:\"\\E800\"}.icon-cancel:before{content:\"\\E801\"}.icon-plus:before{content:\"\\E802\"}.icon-down-big:before{content:\"\\E803\"}.icon-left-big:before{content:\"\\E804\"}.icon-right-big:before{content:\"\\E805\"}.icon-up-big:before{content:\"\\E806\"}.icon-left-open:before{content:\"\\E807\"}.icon-right-open:before{content:\"\\E808\"}.icon-wrench:before{content:\"\\E809\"}.icon-resize-full:before{content:\"\\E80A\"}.icon-cw:before{content:\"\\E80B\"}.icon-minus-circled:before{content:\"\\E80C\"}.icon-plus-circled:before{content:\"\\E80D\"}.icon-trash-empty:before{content:\"\\E80E\"}.icon-font:before{content:\"\\E80F\"}.icon-zoom-in:before{content:\"\\E810\"}.icon-zoom-out:before{content:\"\\E811\"}.icon-down-dir:before{content:\"\\E812\"}.icon-move:before{content:\"\\F047\"}.icon-blank:before{content:\"\\F0C8\"}.icon-mouse-pointer:before{content:\"\\F245\"}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/icons/css/fontello.css"],"names":[],"mappings":"AAAA,WACE,qBAAwB,AACxB,kCAA0C,AAC1C,sPAIiE,AACjE,gBAAoB,AACpB,iBAAmB,CACpB,AAYA,+CACC,qBAAwB,AACxB,kBAAmB,AACnB,gBAAoB,AACpB,WAAY,AAEZ,qBAAsB,AACtB,wBAAyB,AACzB,UAAW,AACX,kBAAmB,AACnB,kBAAmB,AAInB,oBAAqB,AACrB,oBAAqB,AAGrB,gBAAiB,AAIjB,iBAAkB,AAMlB,mCAAoC,AACpC,iCAAmC,CAIpC,AAED,gBAAkB,eAAiB,CAAE,AACrC,oBAAsB,eAAiB,CAAE,AACzC,kBAAoB,eAAiB,CAAE,AACvC,sBAAwB,eAAiB,CAAE,AAC3C,sBAAwB,eAAiB,CAAE,AAC3C,uBAAyB,eAAiB,CAAE,AAC5C,oBAAsB,eAAiB,CAAE,AACzC,uBAAyB,eAAiB,CAAE,AAC5C,wBAA0B,eAAiB,CAAE,AAC7C,oBAAsB,eAAiB,CAAE,AACzC,yBAA2B,eAAiB,CAAE,AAC9C,gBAAkB,eAAiB,CAAE,AACrC,2BAA6B,eAAiB,CAAE,AAChD,0BAA4B,eAAiB,CAAE,AAC/C,yBAA2B,eAAiB,CAAE,AAC9C,kBAAoB,eAAiB,CAAE,AACvC,qBAAuB,eAAiB,CAAE,AAC1C,sBAAwB,eAAiB,CAAE,AAC3C,sBAAwB,eAAiB,CAAE,AAC3C,kBAAoB,eAAiB,CAAE,AACvC,mBAAqB,eAAiB,CAAE,AACxC,2BAA6B,eAAiB,CAAE","file":"fontello.css","sourcesContent":["@font-face {\n  font-family: 'fontello';\n  src: url('../font/fontello.eot?85850796');\n  src: url('../font/fontello.eot?85850796#iefix') format('embedded-opentype'),\n       url('../font/fontello.woff2?85850796') format('woff2'),\n       url('../font/fontello.woff?85850796') format('woff'),\n       url('../font/fontello.ttf?85850796') format('truetype'),\n       url('../font/fontello.svg?85850796#fontello') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */\n/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */\n/*\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  @font-face {\n    font-family: 'fontello';\n    src: url('../font/fontello.svg?85850796#fontello') format('svg');\n  }\n}\n*/\n \n [class^=\"icon-\"]:before, [class*=\" icon-\"]:before {\n  font-family: \"fontello\";\n  font-style: normal;\n  font-weight: normal;\n  speak: none;\n \n  display: inline-block;\n  text-decoration: inherit;\n  width: 1em;\n  margin-right: .2em;\n  text-align: center;\n  /* opacity: .8; */\n \n  /* For safety - reset parent styles, that can break glyph codes*/\n  font-variant: normal;\n  text-transform: none;\n \n  /* fix buttons height, for twitter bootstrap */\n  line-height: 1em;\n \n  /* Animation center compensation - margins should be symmetric */\n  /* remove if not needed */\n  margin-left: .2em;\n \n  /* you can be more comfortable with increased icons size */\n  /* font-size: 120%; */\n \n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n \n  /* Uncomment for 3D effect */\n  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */\n}\n \n.icon-ok:before { content: '\\e800'; } /* '' */\n.icon-cancel:before { content: '\\e801'; } /* '' */\n.icon-plus:before { content: '\\e802'; } /* '' */\n.icon-down-big:before { content: '\\e803'; } /* '' */\n.icon-left-big:before { content: '\\e804'; } /* '' */\n.icon-right-big:before { content: '\\e805'; } /* '' */\n.icon-up-big:before { content: '\\e806'; } /* '' */\n.icon-left-open:before { content: '\\e807'; } /* '' */\n.icon-right-open:before { content: '\\e808'; } /* '' */\n.icon-wrench:before { content: '\\e809'; } /* '' */\n.icon-resize-full:before { content: '\\e80a'; } /* '' */\n.icon-cw:before { content: '\\e80b'; } /* '' */\n.icon-minus-circled:before { content: '\\e80c'; } /* '' */\n.icon-plus-circled:before { content: '\\e80d'; } /* '' */\n.icon-trash-empty:before { content: '\\e80e'; } /* '' */\n.icon-font:before { content: '\\e80f'; } /* '' */\n.icon-zoom-in:before { content: '\\e810'; } /* '' */\n.icon-zoom-out:before { content: '\\e811'; } /* '' */\n.icon-down-dir:before { content: '\\e812'; } /* '' */\n.icon-move:before { content: '\\f047'; } /* '' */\n.icon-blank:before { content: '\\f0c8'; } /* '' */\n.icon-mouse-pointer:before { content: '\\f245'; } /* '' */"],"sourceRoot":""}]);

// exports


/***/ }),
/* 355 */
/***/ (function(module, exports) {

module.exports = function escape(url) {
    if (typeof url !== 'string') {
        return url
    }
    // If url is already wrapped in quotes, remove them
    if (/^['"].*['"]$/.test(url)) {
        url = url.slice(1, -1);
    }
    // Should url be wrapped?
    // See https://drafts.csswg.org/css-values-3/#urls
    if (/["'() \t\n]/.test(url)) {
        return '"' + url.replace(/"/g, '\\"').replace(/\n/g, '\\n') + '"'
    }

    return url
}


/***/ }),
/* 356 */
/***/ (function(module, exports) {

module.exports = "data:application/font-woff2;base64,d09GMgABAAAAABKoAA8AAAAAJSwAABJRAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGVgCFLgggCZZwEQgKn0ybCgE2AiQDXAswAAQgBYVNB4IPDIEGG7EhJezYq+BxQNE8n+z/vyxoI4ZgtUPtmyFKSEeZiXcsFlvQvq2hwNARiiHQiSga4eM49ag1N78dxJWlCvfuxpouXuuCzw6++k8shMZzZfKbuPhZvvqQclJx24o6VedxQyl5gF+rvT9/Zs/Mo1jDdBNiki4ilsgX6jUiUTOZuBGve7r39TLGRAezRsdYaEzm73ceiZ/Pss9ZABVWZRWveBQWFeHiEpZ5aJt/YSRgkA8OA+0FcQuwj3snsUnaAYssjD5Z449zc11hMTinye+SzQVOcmMhT0IPWB2IO9vajS0QGZP0h3PVTJoSp+0CZznLkHsAUkdCvZHn1KM/q3Rlw+zsau/0RkrtiCoHlJGityKTDj6J7Tg11KPtlYoy4WtWeQbShcioTwnbLAUlU1GnqK+rRhc2TR2ldsuf4lu20++UKZsTQGlHdVfyaGy/R7DppsXlX1Pz6e5eWkcJbI2QUKZ98ur83urKXpfLxHKadXGKzteUUitMWFhF1U4rFQVlwisNRZ8Q/qG2mnM9o9BNTaIgH8bmdw9XwTIQUFDJya+6pxFQbtYD3Vsv3n2E8etKIizrRfcMnNqH694qGOzXSjkDg9LKHOOq8VDXTxnJ0+6/eLULhR/mQoL9yyJ60YMXnzfwqOA3Dr+/svhe9fBbnw+9ViImzakP75nJd+IBJ3e6nJVMnXdpQKnkDwr1X4gvn35Hp5OCU/kkWW56AeR/5iWiVCanRKky5SpUqlKtRq0p02bMmjMPQg5tWwmhNcs3g4KVETIFI4GCEaFgpFAwMigYOSgYJVAwSqFglEHBKIeCUQEFoxIKRhUUjGooGDVQMGqhYNRBwaiHwgQawE/CaIR7BhNoAr/xvWpG3daFTGny4iqyHxQYCPgcR0l6+w+892/RPp8iiyPdIl+q+xwhWv4bNQNuzuy0cQ74Djy0YQ8ID3PwIKj5pYdA5+JeBw2f+m7d4uhstP85OnNN9028240OmRqxOeQ3RVIV8Ms53Wt14YlJp4aJFLtHNSByVySsZ8w3VGOTdRArtqrOyV9ZA1pKBryLFyl5FGgkqJZzoXI3okpAk9D0aALdQ2EmtdR5VasgZqxi2ERBH52h5I7VRHUR/gVanbRbNhXbi3m3KfspWuJ48iAOqLFI1Xo2jwp0rvZA/ILa+eNIMAE8FEh1CX5BR809OtTAuWye/aO1a5XOInPKr81DciEDvT6sPRyFFefprZjwvGtpuByaAQ+hmjXqeBkFO0g1UAzkbGpHZGhaoaiVofr1sYsamiU2g6JdS4yY8xoBHnp70IzRNebSivO4qKQRuS1DjwfQJRy+yeS+WULCveAfuFvo8SECfwT6R2s3db41PGZ1l8KTYJ4Abw9jpb9hmsP92w9PiLd78e3BHdO4YVk8ZoQK/sOjuF+XB8uAbwl4CNFQnTV3A3BjciGxG6vnAqiGLrZQpZc7K+Kc3IYH4rVEJ5icwInpOGEsJU7LE72LVIAGG4IETj26/Zi+gRhTW5HHhxFfgkbYErAE9KAMlr+D2TR48CB0lzXqCH6uNneSh6FCvOpJUHHHUkFYJhSWE5TlhcoKQmNFobOSMFhZmE0VTLGxrRG8yiu8BgTrAGADAOQAYBMAbAGAbQCwAwB2AZjcg9ZTifVbZALXoHo9CHcWnV6LygnQNx2f3DOANJGvs1ae2evU8nNlqkzyDMM/L24Y5OD6nmVrjAKylPuTx9BjE5smmGIdUfG+QasQWFlIfwEturVpz+q4nqx4pi5vjyYm5oCH5RknaIb2xrpnLuaDPBO9zAKV1NJ5tZoAvM3mXnd3hIVXFF+vbzGBEvp5HddXVzxLAClUl3Z+UUyuXnQjkdY7Paut8mrV9psFlSCREJdP5M5yL/4kt9laU1cIs4UUggmD6rjkIdo4Q/kcyWeB9ipehDCfGwrLeZ5PWJoT5ReXpcpHi0nQYOPHhqbdH0N0a9ewzayOay9jHmXe+ahaVksVkNrAGa0NkBt39+VrsXqyybN2Py5PowYU2Pozz+aejyGBHR8DFcGD0lt/QeNVMKPwKbZaN9fcOEOpaDF/G00v1nj9thqL0jKTVj0UaV7as6u9knGh/L67VPucODbvYWoDdqPxftR6aquos1XP4d5Eu2s5Si6bf/ATWJrC0BmsrKsUWoo0dBnkAlC2CPPI5HICCy2rrWldrT1TdWxfrFWjpaEd/icmiQdNh9cUs24vG4s/6nqXzKMHnnBcFw/rnXWVC+X28kdu8sSs6eE5eFyutExzz2NW9MlaBWRXmJ38p2sstuxZFNKRqdW4M0D1ap6vtUWD2qmTkDp2GyB5zzUiMK0Gb3AYbNBwPk8RaUBIBwDpASADeIIwAsgEAJkBoHTwJJEBoEwAKAsAygbHRA6AcgGgPAAoHzxRFACoEAAqAmB6ceyWwT6mkjOzRXEoK+VxuiyVJOHxrLxqiCRVwIauPAB0FWDGLN2HknVuQ4/IAHokAGxUdzmNntvQYzKAHgtAu3Gx2z1doE9FJVJitniUbYFFuinvJS37AQGgs/g5X1LN3vD+ZwmrgZcCXGwAUHviW9cOLjwDAgo6vx9WmnlTrDCREBEKmUxPHx6XI2b4inwZ3tnHQ+ShEnlyGbo9GGcI7G+6Qo5jKjtNRHkgqVHf2TqI34F4GdoPuF/p59kE4yOLsb7C9v8WNJYJqbIJx9qArFrxWHjl8jp4hC/Yjkuq47QSde5v0Oy+VS6t2HOQBC7MLlV8gQNoPSnFtiOhz1gZxeY1ogryvTECBi0g02bjUkMneqGE71/BrPapC+ghqM/ypry9siYbwLKYS2nl6TlTeeasFCgRYCVXSpXz1aOquPvyZ21ZMmdLiPRl+tz/jOUyjMwLjm0Hplr8zHFPKRFw5hYD4rniZ2Fwcx7r6jZVPgEvzYm6GtaAXnHhPebIwNv/WEupTvE4EcK0TIfffhpvS33GhvFTZIUYVKJAobjR1QDEjfzkcnkzB9GoB0NpApAI4vWhUewqh1XYr4AQqzpIQDMZlR2J+y5vM5RbQjqORyezl3U1M/TJAeDPnSC8mnTEVVLQ2/bpo/TG674ymathPtmPYtWPhcNiscojEe+eVZdiUgpIGpdMsvxFqKrLlgkvbgY4t8qqW2NRXSJJTwnmnHSemv/hcbAdqIbIz7Hek3AtQ+shSnCoWYU2hjhOge+jfsubwe3bZXNmadAguh/xtodnmOd4J6WhwlBug0fpyVcne3rSZCuQJYHVM4ESrZpisqtnRIukVgZw0qtnBsWjTCH54Qy/QtXDRDNgbkFF6ZbjqbUU6rcppYoKKfJK0F9WgJXWJP5HsZQbWCzn48d9gz4m83PsZ43GuVZ0tI8ctY1oNH2C66NZn7uZ2D5He0gS40lqY4nToE/9P13iEyIO3m1lOXVv3rJ6dftOLm/fsB+6Wdl77s0b1mM2PR67Wnm6qCHieQhmsZrkSvMxBb4En8HhWCogrxACO39pu0OmMC3Bg9C6fAIZKljqcGBxWBumwKxWmRy1WpRyUysux6VvcbBIqpcjUovVKMdIU5xp/fqlgqFIiciRpevbjXFGUu4SFotUNEQs4+NLTQpZ+yg0/gmBNPFVdpbFyUilQmmxjFzfFB5kK0xFRkRGkgiZm0vxqVWrKcQyq9qQtndAIv2qKvvVfOoMd/A7IiIjIrYWMkdyb4nf7yafSdHQq2Lh2IapZT9nzMDkxo02fczp09ONxtYHrBM89dy84UBlXd2VupoKMAgPqFnov2h93kyrwq9VHQvTyax2F3d8z540HYlIn3T5qO91M8atG9LS9u7BaeY+fPu9Ll/6dfl3wJ495oxzSMN/K3RyD2EWo/XHuzyU0cWOpWu1eu0YeVU/jaZf1QRZbT0fSZ4ycegCFDiq0WICs0LVmZYPZKzBRo8nVsGdiasmj2/Bcgwt8WcIAtwW/+/QVJr5SifNSLt7ok/ueqtk4tjjJ8e/OT1+5HHXt1OP7x//Y+/4mccFQqGaGrrxCmGoNUp8yZvlKRhJFuxK9iA9RCu121q1+5WwdXd/HHeSsPv98PMZPxW6Ak0dP6m0i5ckS9qqk70z8M89yK+/FAu7EiZN9g1AlZxmY3jugv26bexV8+d77PQgSxu5+V0aoFbonTRgxbm/9nF0596MgvkZ9obUnLHe0fqzxnkDpn6hJv6voc9DvWAuGGrzHBhtd2dy/FPphbogN7EfHhrgGZxVNrkLeDyU9PX5+nfdj8DwYrp6Bc/1DnJFGae3yxtE7vbCmTPd9+us5153ab4Fc4uN7ZuvSXAq6uoug3VN5+paLrvWLReUCcg42aFDJcrpurr4iqrEGnCdwmYdaRvqgG3J1jJFE7B3urLk0CFlnu6KFI2bLEVPTnE+7GVN3CIzYW4+rcNW3YGgtNTbt1NpRoSqrk5nK1MUYrwm9EKmObDKJayNbNdWLpZJFX9E6dB6CyclLy8FYDOvIPn42vwmezMaF3FujvbM3X+iOOqmPdfS3dnZQXMvzmITnMxid3pb8MgnDIAWhf+BWgHOz9ANaNFu6GV4Puw9dAmcBX0cuhWeD70efgRqhZVlExKT4LUyt7S1A/yvIAs+QU5E7WWPuwf8YBlTyjkhi418oAfEKVLQPjDnzCXGaDkvZBvCUSBylNGAP21Pa3wjhPGKz1u6ANfKRSHLOV8VNER2U8kyUzKiDrK0DukQdKa2s5TzB1iWXYvBIjVAYmuKr5pbbR2RcqAL5jS4kvcJQeyB/NGSLHm1/2kn7fmhrC7JW80i5JrPO6Rp90/+fUeWkXJW/B8Ee5WiS8ugjeHrnUhRgITL8HpJHji8F4q90FVoDo0q1ieXc+kf+d0lPsxFarkg5KhbzStc4KRjg5okuXczHa0ZO5YV1vPm3RBZzJaClwRNeMuitSj9wsKZInzHQqoqfDXSiTvNeZSkqQ1wI6pFCqUfTcmyGdhSJ5fgNQxr6tlq/YyOpbeoY14HR2YMiMjOGfmqKeHNFrfDjHJZyKsMHMp2o54PTWbjvMzav7wktlRCTdTFAYZ2MMw1o9q6K9nyUF2t6ie1q7/htlavLpQW5edkGQ1pWhWRnMiarE0vwwP1ipDm3VXdjOKHxi032j+ylk4u2lJY8YV/XhE7sPEBAH9h+EXHy1+2dC6l0usgSwkzsdJU5/JZSQGGx99Fqb0atUqx6/PieyNtvtAPYY44TkVoeEwRj7DyDg61TCKd4S2ignWrI6PnnNH+fwjMUDG0OsxaG9vz5cNyzuKE8bZquB2KyMZsNHhzfZNXwWJPEmJqRsDEbJdACZdZxBjPW3jRom2ul0tCRkg8Xj0UfgAgSOW0kK+9OfTah7qtYm1d8yw5giL8hMZrXCrZConGQ72vn7FHP19Pij/st4v5aBBncdhK6jHzTKvy2m/tcv4seqyKR4ITiAK3yB1preejRf56pP53eH+pxvL/zY3v9Hs/PXAswPeFq5m7qzp7ixXxfzQAKJUgbf9f0INY4LCu8qlDseVWZlOJdSu+0zUvT3XJFyzGMld9KOt1ZBM7xSLqwzc9bl7erml4C6f/KoleOwrwoCIBnVTvnzkVS9IBQelFrDcyUWJ5ZFRqi6dd947MVDg6MqfUqZHlJthrV2jwSxTSMlz159/IoDbUjExUhx6MrK5TmKLr8shMc9iHOXQ9N7Lc8VAeqcJw+Lw5Op1mb53gysNVnE2m69r1KfL18/ioAqoqjnPBR2g4CoXAW5pb0v492RpUHjq7832mXDxH3B1NsrlfUqSshBrN1yhHdk/EoMnc4gvuX2HKfEBatpxIurM9rusW4SmWnMo8yxFohXGpVWjPjl03oQ5JI5YIe5ESUKhUwjGxAB9laPpBJIiEA7ZF99besvA98aza37uSOUu9TH5G+rVnHTratWVHgr/UUUorRlVjtlcc9XCPJIUxUGeD9oZe9JMosec9QDSxFZCwSO7YXiyXa7Gn2wFQjn5bJ3CQ0AwWJisbB3auuObIAx7jcYaMGJMxYcqMOYiMW4f9WkVNoTeFWgYbPo6bHW8HAxnZ66HEgkOyv6Yrm5nnRHG4C8fX03+cKWo3kqn4M9o0NYRufTzW+ljLpvZZB2pGlTvT0iOSVXGb1CY57U2TeQfOmNtNHwd3Ka7SjLfa+Nzb8hH1dYKKh2Mt10KbiX0UygD2fPDpcOZ5CG/yW8Jvx9nb57JfD2uM7/MX5Uko7fauFs1tXCYfBWV9VtLHWsS2dgfBZ4d+8MwtObk1nj/EcJHL0m0hXftxznTHs5Wnl7+oTELl+B4WFxKvd2UL"

/***/ }),
/* 357 */
/***/ (function(module, exports) {

module.exports = "data:application/font-woff;base64,d09GRgABAAAAABX4AA8AAAAAJSwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+I1MlY21hcAAAAdgAAADIAAACruAxuAljdnQgAAACoAAAABMAAAAgBtX+/mZwZ20AAAK0AAAFkAAAC3CKkZBZZ2FzcAAACEQAAAAIAAAACAAAABBnbHlmAAAITAAACh0AAA/Ku8WigGhlYWQAABJsAAAAMwAAADYPa+ZOaGhlYQAAEqAAAAAfAAAAJAc6A2RobXR4AAASwAAAADIAAABcTEj/9mxvY2EAABL0AAAAMAAAADAn1iw5bWF4cAAAEyQAAAAgAAAAIAEmDApuYW1lAAATRAAAAXcAAALNzJ0dH3Bvc3QAABS8AAAAvgAAAQ9tb/8bcHJlcAAAFXwAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZA5knMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGD65Mgf9z2KIYg5imAkUZgTJAQDfawvQAHic7ZLbTcNAEEXPOiaBEMgDYlEEoouIRiiIL2pKKffTSgPJHftKNJFZHWt3dr225gzwACzMp+mh/dGo+HW2TfkF6ynf8+P1mkc6Oh3G7/F8OV2vIP7nieZzX9Ooeec7en9pycpvP3nvmQ0vvLJlx54Db7xzZPDhJffY1KN9ZDVUhWfKiIKrikIZVCiLCmVXwdVHwR5QsBEU7AaFsq5gXyjU3ynYIQq2iYK9omDDKNg1CraOgv27h2bcCYznGfcEl9MMww3YET/AeJxjYEADEhDIHPQ/HYQBEloD1wB4nK1WaXfTRhQdeUmchCwlCy1qYcTEabBGJmzBgAlBsmMgXZytlaCLFDvpvvGJ3+Bf82Tac+g3flrvGy8kkLTncJqTo3fnzdXM22USWpLYC+uRlJsvxdTWJo3sPAnphk3LUXwoO3shZYrJ3wVREK2W2rcdh0REIlC1rrBEEPseWZpkfOhRRsu2pFdNyi096S5b40G9Vd9+GjrKsTuhpGYzdGg9siVVGFWiSKY9UtKmZaj6K0krvL/CzFfNUMKITiJpvBnG0EjeG2e0ymg1tuMoimyy3ChSJJrhQRR5lNUS5+SKCQzKB82Q8sqnEeXD/Iis2KOcVrBLttP8vi95p3c5P7Ffb1G25EAfyI7s4Ox0JV+EW1th3LST7ShUEXbXd0Js2exU/2aP8ppGA7crMr3QjGCpfIUQKz+hzP4hWS2cT/mSR6NaspETQetlTuxLPoHW44gpcc0YWdDd0QkR1P2SMwz2mD4e/PHeKZYLEwJ4HMt6RyWcCBMpYXM0SdowcmAlZYsqqfWumDjldVrEW8J+7drRl85o41B3YjxbDx1bOVHJ8WhSp5lMndpJzaMpDaKUdCZ4zK8DKD+iSV5tYzWJlUfTOGbGhEQiAi3cS1NBLDuxpCkEzaMZvbkbprl2LVqkyQP13KP39OZWuLnTU9oO9LNGf1anYjrYC9PpaeQv8Wna5SJF6frpGX5M4kHWAjKRLTbDlIMHb/0O0svXlhyF1wbY7u3zK6h91kTwpAH7G9AeT9UpCUyFmFWIVkBirWtZlsnVrBapyNR3Q5pWvqzTBIpyHBfHvoxx/V8zM5aYEr7fidOzIy49c+1LCNMcfJt1PZrXqcVyAXFmeU6nWZbv6zTH8gOd5lme1+kIS1unoyw/1GmB5Uc6HWN5QQuadN/BkIsw5AIOkDCEpQNDWF6CISwVDGG5CENYFmEIyyUYwvJjGMJyGYawvKxl1dRTSePamVgGbEJgYo4eucxF5WoquVRCu2hUakOeEm6VVBTPqn9loF488oY5sBZIl8iaXzHOlY9G5fjWFS1vGjtXwLHqbx+O9jnxUtaLhT8F/9XWVCW9Ys3Dk6vwG4aebCeqNql4dE2Xz1U9uv5fVFRYC/QbSIVYKMqybHBnIoSPOp2GaqCVQ8xszDy063XLmp/D/TcxQhZQ/fg3FBoL3INOWUlZ7eCs1dfbstw7g3I4EyxJMTfz+lb4IiOz0n6RWcqej3wecAWMSmXYagOtFbzZJzEPmd4kzwRxW1E2SNrYzgSJDRzzgHnznQQmYeqqDeRO4YYN+AVhbsF5J1yieqMsh+5F7PMopPxbp+JE9qhojMCz2Rthr+9Cym9xDCQ0+aV+DFQVoakYNRXQNFJuqAZfxtm6bULGDvQjKnbDsqziw8cW95WSbRmEfKSI1aOjn9Zeok6q3H5mFJfvnb4FwSA1MX9733RxkMq7WskyR20DU7calVPXmkPjVYfq5lH1vePsEzlrmm66Jx56X9Oq28HFXCyw9m0O0lImF9T1YYUNosvFpVDqZTRJ77gHGBYY0O9Qio3/q/rYfJ4rVYXRcSTfTtS30edgDPwP2H9H9QPQ92Pocg0uz/eaE59u9OFsma6iF+un6Dcwa625WboG3NB0A+IhR62OuMoNfKcGcXqkuRzpIeBj3RXiAcAmgMXgE921jOZTAKP5jDk+wOfMYdBkDoMt5jDYZs4awA5zGOwyh8Eecxh8wZx1gC+ZwyBkDoOIOQyeMCcAeMocBl8xh8HXzGHwDXPuA3zLHAYxcxgkzGGwr+nWMMwtXtBdoLZBVaADU09Y3MPiUFNlyP6OF4b9vUHM/sEgpv6o6faQ+hMvDPVng5j6i0FM/VXTnSH1N14Y6u8GMfUPg5j6TL8Yy2UGv4x8lwoHlF1sPufvifcP28VAuQABAAH//wAPeJyVV21sHMUZnnd2d3Zv93yfs7tn+7z23Z7v7LNjgs/ng7PjXL5qm1yECVGxQTamDYHa+bBQCghIf5CqalBrIyugFKGUNrYqVSUCSoVAVYNUVFUIqfygDVLVvzRQVfxBSA3Nuu/MnRO3EYKeTrMzO+/u+7xfz7xLgOBPWafniE06am1RIADjhAI9QXB6AjePcJcrmtsHXAeWLUB+aCcMD3aCHBxlPRZ0xfpjwSfRaB2va3Acx3qMOg5uRKPgyGVsHU7EYvUovpRsfEo/oD8gOeLV2rOtMV1FdeMKUEJPAAh9ac5VLdXXzaOo8BbQxSC0FjZVV6Rq3HYd+kFD7VpDDV5jN9bR6NpadMkRk/X16M2C0QEhIDH9S0koFvFJby1PVEWV1i9poKBzDuFFIdMUiELqfqnbL/lMa+sDm7OCj4PuZ/OVMg6F8tBwpYTDCAw6rl0adJREl3Oly1l0uuCK6wEuPHcRJ2Lxhrj7sYN37Y+bd50uIS7x/Ek5jXg80lXrSEXp9aAosBkVu+xKL/1vWOICw6BjxxtOUk7bwXNOFQfb7sXrWtEb7yiu8xGn14anPR6ctW04Kpf2GpzpKEJ/OnhsTQhLHD9UZug/SQfJ1TKEKo2sWCLSLUR4hQin5F3Hl1jQG37GdWTgBKQKbEYqg86YyXXIVxftETs4yzkctatOsaE3B3PjXnGNj/K+5gYsSsTOWo9I0QaWMmLxJBaFKifE3SV0C9BDhFKYJkCh7nTnt/ilkTiZbH4HDA27mWYGueiXMpd+KTrOheCxjlyuA85ccBCNUMyhKjzDedEetS+gx7wirCM0xBo8xyWWV5XT9O+N+MR0ShSMj0KUE5gkQNBJcMS1y00cjSyONxKlHG+mc6WJ4zQaOcLXezqb5qMOBDCKgw1DaekegQ/yaTjT9J3wDIKXON6m55S9hJNtvwFZuvtfyU1N16yGawDCMNleC10v5ZnXXZdqTl+I3hwjuhxchl7TnLXSVvAty4LzpmfOmvSXwYfBZTk14ad4hfOWNWt6zZi8TU829Ye+lv50QupvhqYSgusR4XQB1aatWVTdE3wolaAyE74TPNBABb3Q0xAQgiLzyMajyktYJwYiGCAztVgeVKWnkFCoisqJgnAyCKeNKCqmi0qxrgXNkGaQWgS61JdsHpl5I+1vSyU0rbWvMpSPUA+GuzdxgwfdXI9AIZvHesNqF/603WFhi/MX7nGaakvBkeA05tMIRvQp5xD8pKX96TsfXl19uOsbraHQhaO0uD8TNTsiDk10JdS2z4PTnO/ASoSnKof+5nTvn4PV95+lPMYS+typUdq6jZsEEYrcuxdtTpHt5NbaQE9nK1qbCGMxAh1vmiEKVQHlBodXudtWEZaAZM1GLiJfjcEmm2LtRuC/yVYSCaxrb06ZPHo1ysFJW1NvaRFW0+B13hWaepOJufbWXXLfAU1nb95leigYQXEaRgG2k8Ffry9q+HBTQuTPRoC2zKAt28mOWnUbgCaSCK0goGD0jmGVg0IXiYZ2aDBPqKrKUlenhZ31QiFZyJU2ubgPsvmdkPezEco9WhocrgjjPMAo6dkBOqagMW5lGGmIx666yfiBg0vVhfrAQH2huvvRXjXO6hploxfvv+elpQm19vi5+w6e2zER76e/vxpxtsUOHEDBkyhfLTPQDqgRdscU7D15/uL5k3vHbp9IJNEeunEN7bkf7YmStDhNJSU084liICg9YtvlnKSF8lBez2SZa3OnkkGw6H2BEgY9oL9wIsHdEUfE6uWI89ojf7jyx+Psid9+9tb3oDoh78ux9N13Tp585xMxbNHtozd31cZa0JOdWA10XHCSdCeeYyr+F4mOkHT0p8qYeoioKpsmTGV12/Zz3X6OG1q6gc/HoeBnmW77TaQlHFzh23LpZswrTmQcs2RFIryxuBn/isilyErDjM3FVmsIYTLPE9KXneQWMkL2kIfI4doD9+yjzOjNtMaRQ0SuaJgjjDAgx1RKic6IvkgiJGREQvPRFmqETcrAYHNEtyz9ENF1a5pYulV/8PADc/fN3H3wzvrk+K6dPMfz4ufHtI4+QdUimcrx5kn+FetkPBPnHpQyg2MApQJ6jOmaTMi4OA6xzuJ+4wAaAcxJUVSdICrLM42cYcph5cZ02dQbU92cCMKGQeF9ahjBmavtqvYqU+EfpjE81B1s7x6CspD7VSHU77zmFkOFlw0T3gguiZuwS4xfMg8O0/i1T8PcNDl9cJeGZXc3arz26cDe3QM0KUHM2mnw+KzZ5JufYRx0MkV+XQuNDWdCqqYIpjeRWosNisEoKBo9hhWKZLSoM6zU40Q0CAdFe/lNUQh3tO9/xbrpCRUoUyhbxMOa3fzE//P6mZla0jCMKWOqvv+OyZFq0W+/y8CzBnTXKQ1W8uh7tdIOJTfpATZbriMHjJObzetZ5g/tpIK+8V8Yyt9CI+BiUJEYKyijZ5FXWIHBc/fXq52WvT0oQ0sunXbY91+cYI8kDzqh7THLsOohlYK/nCu+aNNJnSlxlSL0rJv6IlKFWJfVZWO3knm6S+N0G237AgB+HLB+LEMzFYNpOBsOPut7dyj5RKaNhWKKYyomNcFIJWMoqVPKVDV07/Bt0PVCJJww8dVg2ZoVxgQnysbGxgLGqQXrv5/sI7O1eztTVFGTCexhlRaGJLAHdBiEkK7hKcEUpiK/gqAC/Rgxsf5NNo8EIcmCzOP9kKGH5olhtBiTO0bLJZ60uZ/nvm+JEtnsfQtbe98R2Nr7ukMDwLiDNcHFmcJ8QRWqR12OAaEjpn4qzHJ6GE7pJoTZKZnwYjGx+v4q/sErjvJLh5+cWn24RkePLq8tHx2FfZdsONt4KAym0XjolEjsU2brQ6v0+XfPsR8FL3QU7Uv7xhae/fny8aq6+8jzB548fMkmW3wUxdPzVjJSuy1koLV47CnEA01RxpF3kE7ovOhtkDPnMbM0VdGQKtUWddL10Qt5X9faGx7INOzGyv9qa4PfSTth99e0UJr21UbJ7zd4j+axUu1aApuevfIjShxHeN5ovA8sgPc++ojmgyV4VvZsC8oV5SDZS6ZqBywImboZ0o+1gG6YurHIxAEMRBYmfpMpi2EwkCGIAXPENMMTWHQtyuSu2o7RkduHSgP9STxJu+1MkkdEWsimEqnOFwnQbHzzMjFEsjQ7C+yQOqAkkqb5yeIIrrTFh5P8YrliLVsev4xng7WCLeCK5UQmLnMxEevmBvaBmxsoDnMR6+vIbX0zafbxM/KMidci15ulckn0qLJjzzRoviI/X+b2XPt4z9zcHurumaML167snoP5XTQlLvJdD9Fn0K9pkql5EdGNYx+D32wEsM7gOAYjTCd72n35Le3oaHLSYeiivGi6/GxBKKoMlwZd+njCDKX+vMTCLd+OtLHFi1ZE1x1H16OYQHHbDT5vSWtF3P33RUsxXWU8FUIT/gN0aZ3SAAAAeJxjYGRgYABi32/rN8Xz23xl4GZ+ARRhuGZ8MQJG///7P535BXMQkMvBwAQSBQCNJA5MAHicY2BkYGAO+p8FJF/8//v/F/MLBqAIChAHALYaB6MAeJxjfsHAwAzCglC8AIgjoRjIZjoFwQjx//+A+C8Yw9Qv+P8fhBnPQM2KhOgBAGcJFnYAAAAAAAAAOACCAMoBDgFUAZoB3gIeAl4C2AM+A6YD5ARMBRAF5AZ2BuAG+Ad+B6QH5QABAAAAFwBoAAYAAAAAAAIAIAAwAHMAAAB1C3AAAAAAeJx1kN1qwjAYht/Mn20K29hgp8vRUMbqDwxBEASHnmwnMjwdtda2UhtJo+Bt7B52MbuJXcte2ziGspY0z/fky5evAXCNbwjkzxNHzgJnjHI+wSl6lgv0z5aL5BfLJVTxZrlM/265ggcElqu4wQcriOI5owU+LQtciUvLJ7gQd5YL9I+Wi+Se5RJuxavlMr1nuYKJSC1XcS++Bmq11VEQGlkb1GW72erI6VYqqihxY+muTah0KvtyrhLjx7FyPLXc89gP1rGr9+F+nvg6jVQiW05zr0Z+4mvX+LNd9XQTtI2Zy7lWSzm0GXKl1cL3jBMas+o2Gn/PwwAKK2yhEfGqQhhI1GjrnNtoooUOacoMycw8K0ICFzGNizV3hNlKyrjPMWeU0PrMiMkOPH6XR35MCrg/ZhV9tHoYT0i7M6LMS/blsLvDrBEpyTLdzM5+e0+x4WltWsNduy511pXE8KCG5H3s1hY0Hr2T3Yqh7aLB95//+wHmboRRAHicbY5LcoMwEETVGGMMJj8ncS6hQ2ExGJUljUqfUPHpU0Bll9706+7FjCjEpkb8rwsK7FBijwoH1DiiQYsTOjzhGS94xRvOeMcHPnHBlyj4XqneKTKlNznWA89OXvWtNjSmBY5B36aVquzXYl3Yk2u2acFqDuTU1AaK+kFyzMYUau6sdjlKpYMyNJyWA3+hTaGPkyTr0085skuHB7OV2tWrc07bK4MOpeVv2l9N7+6d5RxJetYuURDiFx0XRMQAAHicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA="

/***/ }),
/* 358 */
/***/ (function(module, exports) {

module.exports = "data:application/octet-stream;base64,AAEAAAAPAIAAAwBwR1NVQiCLJXoAAAD8AAAAVE9TLzI+I1MlAAABUAAAAFZjbWFw4DG4CQAAAagAAAKuY3Z0IAbV/v4AABkUAAAAIGZwZ22KkZBZAAAZNAAAC3BnYXNwAAAAEAAAGQwAAAAIZ2x5ZrvFooAAAARYAAAPymhlYWQPa+ZOAAAUJAAAADZoaGVhBzoDZAAAFFwAAAAkaG10eExI//YAABSAAAAAXGxvY2En1iw5AAAU3AAAADBtYXhwASYMCgAAFQwAAAAgbmFtZcydHR8AABUsAAACzXBvc3Rtb/8bAAAX/AAAAQ9wcmVw5UErvAAAJKQAAACGAAEAAAAKADAAPgACREZMVAAObGF0bgAaAAQAAAAAAAAAAQAAAAQAAAAAAAAAAQAAAAFsaWdhAAgAAAABAAAAAQAEAAQAAAABAAgAAQAGAAAAAQAAAAEDUQGQAAUAAAJ6ArwAAACMAnoCvAAAAeAAMQECAAACAAUDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFBmRWQAQOgA8kUDUv9qAFoDUgCZAAAAAQAAAAAAAAAAAAUAAAADAAAALAAAAAQAAAGWAAEAAAAAAJAAAwABAAAALAADAAoAAAGWAAQAZAAAAAoACAACAALoEvBH8MjyRf//AADoAPBH8MjyRf//AAAAAAAAAAAAAQAKAC4ALgAuAAAAAQACAAMABAAFAAYABwAIAAkACgALAAwADQAOAA8AEAARABIAEwAUABUAFgAAAQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAABGAAAAAAAAAAWAADoAAAA6AAAAAABAADoAQAA6AEAAAACAADoAgAA6AIAAAADAADoAwAA6AMAAAAEAADoBAAA6AQAAAAFAADoBQAA6AUAAAAGAADoBgAA6AYAAAAHAADoBwAA6AcAAAAIAADoCAAA6AgAAAAJAADoCQAA6AkAAAAKAADoCgAA6AoAAAALAADoCwAA6AsAAAAMAADoDAAA6AwAAAANAADoDQAA6A0AAAAOAADoDgAA6A4AAAAPAADoDwAA6A8AAAAQAADoEAAA6BAAAAARAADoEQAA6BEAAAASAADoEgAA6BIAAAATAADwRwAA8EcAAAAUAADwyAAA8MgAAAAVAADyRQAA8kUAAAAWAAAAAQAAAAADpQKYABUAHUAaDwEAAQFHAAIBAm8AAQABbwAAAGYUFxQDBRcrARQHAQYiJwEmND8BNjIfAQE2Mh8BFgOlEP4gECwQ/uoPD0wQLBCkAW4QLBBMEAIWFhD+IA8PARYQLBBMEBClAW8QEEwPAAEAAP/vAtQChgAkAB5AGyIZEAcEAAIBRwMBAgACbwEBAABmFBwUFAQFGCslFA8BBiIvAQcGIi8BJjQ/AScmND8BNjIfATc2Mh8BFhQPARcWAtQPTBAsEKSkECwQTBAQpKQQEEwQLBCkpBAsEEwPD6SkD3AWEEwPD6WlDw9MECwQpKQQLBBMEBCkpBAQTA8uD6SkDwABAAD/+QMSAwsAIwApQCYABAMEbwABAAFwBQEDAAADVAUBAwMAWAIBAAMATCMzJSMzIwYFGisBFRQGJyMVFAYHIyImNzUjIiYnNTQ2NzM1NDY7ATIWFxUzMhYDEiAW6CAWaxYgAegXHgEgFugeF2sXHgHoFx4Bt2sWIAHpFh4BIBXpHhdrFx4B6BYgIBboIAABAAD/zwODAwsAHgAgQB0YDwIAAQFHAAIBAm8DAQEAAW8AAABmFTUXFAQFGCsBFAcBBiInASY0PwE2Mh8BETQ2NzMyFhURNzYyHwEWA4MV/pUWOhX+lRUVKRY6FaQqHkcdKqUUOxYpFQGCHhT+lBUVAWwUOxYpFRWkAYkdKgEsHP53pBUVKRYAAQAA/4gDWQLtAB0AJEAhAAIDAm8AAQABcAADAAADVAADAwBYAAADAEwmFxYjBAUYKwEVFAYjIRcWFA8BBiInASY0NwE2Mh8BFhQPASEyFgNZJB3+d6QVFSoVOxX+lBQUAWwVOhYqFRWkAYkdJAFeRx4qpBQ8FCsUFAFsFToWAWsVFSkWOhakKAAAAAABAAD/iAM1Au0AHgAkQCEAAwIDbwAAAQBwAAIBAQJUAAICAVgAAQIBTBYlJhQEBRgrARQHAQYiLwEmND8BISImPQE0NhchJyY0PwE2MhcBFgM1FP6VFjoVKhYWo/53HSQkHQGJoxYWKhU6FgFrFAE6HhT+lBQUKhU8FaMqHkceKgGlFDwUKhUV/pUUAAEAAP+xA4MC5wAeACBAHRAHAgADAUcAAwADbwIBAAEAbwABAWYXFTUUBAUYKwEUDwEGIi8BERQGByMiJjURBwYiLwEmNDcBNjIXARYDgxUpFjsUpSgfRx4qpBQ8FCoVFQFrFDwVAWsVATQcFioVFaT+dx0kASYcAYmkFRUqFTsVAWsVFf6VFgABAAD/wAKYA0QAFAAttQEBAAEBR0uwJFBYQAsAAAEAcAABAQwBSRtACQABAAFvAAAAZlm0FxcCBRYrCQIWFA8BBiInASY0NwE2Mh8BFhQCjv7XASkKCl0LHAv+YgsLAZ4KHgpdCgKq/tj+1woeCl0KCgGfCh4KAZ4LC10KHgAAAAEAAP/AAnQDRAAUAC21CQEAAQFHS7AkUFhACwAAAQBwAAEBDAFJG0AJAAEAAW8AAABmWbQcEgIFFisJAQYiLwEmNDcJASY0PwE2MhcBFhQCav5iCxwLXQsLASj+2AsLXQoeCgGeCgFp/mEKCl0LHAsBKQEoCxwLXQsL/mILHAAAAwAA/3YDoAMLAAgAFAAuAFlAECYBBAMoJxIDAgQAAQEAA0dLsCFQWEAaAAMEA28ABAIEbwACAAJvAAABAG8AAQENAUkbQBgAAwQDbwAEAgRvAAIAAm8AAAEAbwABAWZZtxwjLRgSBQUZKzc0Jg4CHgE2JQEGIi8BJjQ3AR4BJRQHDgEnIiY0NjcyFhcWFA8BFRc2PwE2MhbWFB4UAhgaGAFm/oMVOhY7FRUBfBZUAZkNG4JPaJKSaCBGGQkJo2wCKkshDwodDhYCEiASBBr2/oMUFD0UOxYBfDdU3RYlS14BktCQAhQQBhIHXn08AhktFAoAAAIAAP+xA1oDCwAYADAAMUAuKB8ZAwIEEgwDAwABAkcABAIEbwACAwJvAAMBA28AAQABbwAAAGY6FBcaNwUFGSsBFA8BFxYUBgcjIiYnNTQ+AR8BNzYyHwEWARUUDgEvAQcGIi8BJjQ/AScmNDY3MzIWAaUFuVAKFA/6DxQBFhwLULoFDgZABQG0FCAJULkGDgZABQW6UQoUD/oPFgEFBwa5UQoeFAEWDvoPFAIMULkGBj8GAdv6DxQCDFC5BgZABQ4GuVEKHhQBFgAAAAH//v+xA1kDCwAwAD1AOi0BAQUJAQABAkcAAAEDAQADbQADAgEDAmsABQABAAUBYAACBAQCVAACAgRYAAQCBEwnJxMnJDMGBRorARUUBisBIiY/ASYjIg4CFB4CMzI2Nz4BHwEeAQcOAQciLgI+AzMyFhc3NhYDWRQQ+hcTEU1ScDpqTC4uTGo6QnYpBBEGTAUCBjyuX1egcEgEQHiYW1KYPUgRLALD+g4WLRBNTS5ManRqTC46NQYBBU0EDgZKUAFEdJ6unnREPjlIEhMAAAAC//3/sQNfAwsADwAcAB1AGgADAANvAAABAG8AAQIBbwACAmYVFTUkBAUYKwE1NCYHISIGFxUUFjchMjY3FA4BIi4CPgEyHgECpxYO/lMOFgEUDwGtDhaycsboyG4Gerz0un4BOkgOFgEUD0gOFgEUM3XEdHTE6sR0dMQAAv/9/7EDXwMLACMAMABBQD4NAQABHwEEAwJHAgEAAQMBAANtBQEDBAEDBGsABwABAAcBYAAEBgYEVAAEBAZYAAYEBkwVFSMkJSMkFAgFHCsBNTQmByM1NCYnIyIGBxUjIgYXFRQWNzMVFBYXMzI2NzUzMjY3FA4BIi4CPgEyHgECpxYOjxYORw8UAY8OFgEUD48WDkcPFAGPDhaycsboyG4Gerz0un4BOkgOFgGPDxQBFg6PFA9IDhYBjw8UARYOjxQzdcR0dMTqxHR0xAAAAAYAAP+xAxIDCwAPAB8ALwA7AEMAZwBkQGFXRQIGCCkhGREJAQYAAQJHBQMCAQYABgEAbQQCAgAHBgAHawAOAAkIDglgDw0CCAwKAgYBCAZeAAcLCwdUAAcHC1gACwcLTGVkYV5bWVNST0xJR0E/FCQUJiYmJiYjEAUdKwERFAYrASImNRE0NjsBMhYXERQGKwEiJjURNDY7ATIWFxEUBisBIiY1ETQ2OwEyFhMRIREUHgEzITI+AQEzJyYnIwYHBRUUBisBERQGIyEiJicRIyImPQE0NjsBNz4BNzMyFh8BMzIWAR4KCCQICgoIJAgKjwoIJAgKCggkCAqOCgckCAoKCCQHCkj+DAgIAgHQAggI/on6GwQFsQYEAesKCDY0Jf4wJTQBNQgKCgisJwksFrIXKgknrQgKAbf+vwgKCggBQQgKCgj+vwgKCggBQQgKCgj+vwgKCggBQQgKCv5kAhH97wwUCgoUAmVBBQEBBVMkCAr97y5EQi4CEwoIJAgKXRUcAR4UXQoAAgAA/7EDoQMLAAcAUACzQAk+NiEJBAUDAUdLsApQWEAqAAEAAW8ABQMCAwUCbQACBAMCBGsHBgIEBG4AAAMDAFIAAAADVgADAANKG0uwC1BYQCoAAQABbwAFAwIDBQJtBAECBgMCBmsHAQYGbgAAAwMAUgAAAANWAAMAA0obQCoAAQABbwAFAwIDBQJtAAIEAwIEawcGAgQEbgAAAwMAUgAAAANWAAMAA0pZWUATCAgIUAhQTEtKSTs6KiMbUQgFFisBBxcWMzI3JgE3PgQ3GwEzFxMeARceARcWFx4BFxYVFAYXIiYHIgYjND8CNj8BNj8BNic0Ji8CDgEXFB4BHwEWNxYVFAciJiMiBicGAZVfTDofCxUw/jUBDSQcHBYGhJxIBnITUhYJMBALCAtMCQQCASOOJCqcFQJJBwYDEQQCBQMCIhcY+w46ARAgCyAVAgEBIYIgBRQCLQIa+wEBAY3+BiwEBgYKGBABWAGUDP70K8o0E3ohGgYJEAMWCgMKAgoBCBgTEAEBAQcCAgYEBAlaNjgBIJoODBIKAgUDAQsVBQsMBgEIAAP///9qA6EDDQAjACwARQBdQFofGAIDBBMSAQMAAw0GAgEAQwEHATIBCQcFRwAEBgMGBANtAAEABwABB20ACgAGBAoGYAUBAwIBAAEDAGAABwAJCAcJYAAICA0IST08NTMUExUUIyYUIyMLBR0rARUUBicjFRQGJyMiJjc1IyImJzU0NjsBNTQ2OwEyFhcVMzIWFzQuAQYUFj4BARQGIi8BBiMiLgI+BB4CFxQHFxYCOwoHfQwGJAcMAX0HCgEMBn0KCCQHCgF9BwpIktCSktCSAR4qPBS/ZHtQkmhAAjxsjqSObDwBRb8VAZQkBwwBfQcMAQoIfQoIJAcKfQgKCgh9ChlnkgKWypgGjP6aHSoVv0U+apCijm46BEJmlk17ZL8VAAAD////agOhAw0ADwAYADEAO0A4CQgBAwABLwEDAB4BBQMDRwAGAAIBBgJgAAEAAAMBAGAAAwAFBAMFYAAEBA0ESRcjFBMVJiMHBRsrARUUBichIiYnNTQ2MyEyFhc0LgEGFBY+AQEUBiIvAQYjIi4CPgQeAhcUBxcWAjsKB/6+BwoBDAYBQgcKSJLQkpLQkgEeKjwUv2R7UJJoQAI8bI6kjmw8AUW/FQGUJAcMAQoIJAcKChlnkgKWypgGjP6aHSoVv0U+apCijm46BEJmlk17ZL8VAAEAAAAAAcwCJgACABVAEgEBAEQBAQAAZgAAAAIAAgIFFCsBCwEBzObmAib+cAGQAAEAAP9qA+gDUgBEAFBATQsBCQoHCgkHbQ0BBwgKBwhrBgEAAQIBAAJtBAECAwECA2sMAQgFAQEACAFeAAoKDEgAAwMNA0lBQD08Ozk0My4sExcTESUVIRMUDgUdKwEUDwEGIiY9ASMVMzIWFA8BBiIvASY0NjsBNSMVFAYiLwEmND8BNjIWHQEzNSMiJjQ/ATYyHwEWFAYrARUzNTQ2Mh8BFgPoC44LHhTXSA4WC48KHgqPCxYOSNcUHgqPCwuPCh4U10gOFguPCxwLjwsWDkjXFB4LjgsBXg4LjwsWDkjXFB4KjwsLjwoeFNdIDhYLjwscC48LFg5I1xQeC44LC44LHhTXSA4WC48KAAABAAD/sQNZAwsADwARQA4AAQABbwAAAGY1MwIFFisBERQGByEiJjURNDY3ITIWA1leQ/3pQ15eQwIXQ14Cav3oQl4BYEECGEJeAWAAAQAA/2cCigNSABwAIUAeDgEBAAFHAAACAQIAAW0AAQFuAAICDAJJKBsjAwUXKwEWBwYrARMWBg8BBiYvAQcGIyInJjURNDc2MzIXAngSCgkY1XAGDA1jDhoGa64LDgcHFhYHBw8KAQwRFRf+9g0cBSoGDA38rgsDChcDRxgJAwsAAAAAAQAAAAEAAE322dZfDzz1AAsD6AAAAADWM9FYAAAAANYz0Vj//f9nA+gDUgAAAAgAAgAAAAAAAAABAAADUv9qAAAD6P/9//oD6AABAAAAAAAAAAAAAAAAAAAAFwPoAAAD6AAAAxEAAAMRAAADoAAAA1kAAANZAAADoAAAAsoAAALKAAADoAAAA1kAAANZ//4DWf/9A1n//QMRAAADoAAAA6D//wOg//8BzAAAA+gAAANZAAACygAAAAAAAAA4AIIAygEOAVQBmgHeAh4CXgLYAz4DpgPkBEwFEAXkBnYG4Ab4B34HpAflAAEAAAAXAGgABgAAAAAAAgAgADAAcwAAAHULcAAAAAAAAAASAN4AAQAAAAAAAAA1AAAAAQAAAAAAAQAIADUAAQAAAAAAAgAHAD0AAQAAAAAAAwAIAEQAAQAAAAAABAAIAEwAAQAAAAAABQALAFQAAQAAAAAABgAIAF8AAQAAAAAACgArAGcAAQAAAAAACwATAJIAAwABBAkAAABqAKUAAwABBAkAAQAQAQ8AAwABBAkAAgAOAR8AAwABBAkAAwAQAS0AAwABBAkABAAQAT0AAwABBAkABQAWAU0AAwABBAkABgAQAWMAAwABBAkACgBWAXMAAwABBAkACwAmAclDb3B5cmlnaHQgKEMpIDIwMTcgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbWZvbnRlbGxvUmVndWxhcmZvbnRlbGxvZm9udGVsbG9WZXJzaW9uIDEuMGZvbnRlbGxvR2VuZXJhdGVkIGJ5IHN2ZzJ0dGYgZnJvbSBGb250ZWxsbyBwcm9qZWN0Lmh0dHA6Ly9mb250ZWxsby5jb20AQwBvAHAAeQByAGkAZwBoAHQAIAAoAEMAKQAgADIAMAAxADcAIABiAHkAIABvAHIAaQBnAGkAbgBhAGwAIABhAHUAdABoAG8AcgBzACAAQAAgAGYAbwBuAHQAZQBsAGwAbwAuAGMAbwBtAGYAbwBuAHQAZQBsAGwAbwBSAGUAZwB1AGwAYQByAGYAbwBuAHQAZQBsAGwAbwBmAG8AbgB0AGUAbABsAG8AVgBlAHIAcwBpAG8AbgAgADEALgAwAGYAbwBuAHQAZQBsAGwAbwBHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAHMAdgBnADIAdAB0AGYAIABmAHIAbwBtACAARgBvAG4AdABlAGwAbABvACAAcAByAG8AagBlAGMAdAAuAGgAdAB0AHAAOgAvAC8AZgBvAG4AdABlAGwAbABvAC4AYwBvAG0AAAAAAgAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXAQIBAwEEAQUBBgEHAQgBCQEKAQsBDAENAQ4BDwEQAREBEgETARQBFQEWARcBGAACb2sGY2FuY2VsBHBsdXMIZG93bi1iaWcIbGVmdC1iaWcJcmlnaHQtYmlnBnVwLWJpZwlsZWZ0LW9wZW4KcmlnaHQtb3BlbgZ3cmVuY2gLcmVzaXplLWZ1bGwCY3cNbWludXMtY2lyY2xlZAxwbHVzLWNpcmNsZWQLdHJhc2gtZW1wdHkEZm9udAd6b29tLWluCHpvb20tb3V0CGRvd24tZGlyBG1vdmUFYmxhbmsNbW91c2UtcG9pbnRlcgAAAAABAAH//wAPAAAAAAAAAAAAAAAAAAAAAAAYABgAGAAYA1L/ZwNS/2ewACwgsABVWEVZICBLuAAOUUuwBlNaWLA0G7AoWWBmIIpVWLACJWG5CAAIAGNjI2IbISGwAFmwAEMjRLIAAQBDYEItsAEssCBgZi2wAiwgZCCwwFCwBCZasigBCkNFY0VSW1ghIyEbilggsFBQWCGwQFkbILA4UFghsDhZWSCxAQpDRWNFYWSwKFBYIbEBCkNFY0UgsDBQWCGwMFkbILDAUFggZiCKimEgsApQWGAbILAgUFghsApgGyCwNlBYIbA2YBtgWVlZG7ABK1lZI7AAUFhlWVktsAMsIEUgsAQlYWQgsAVDUFiwBSNCsAYjQhshIVmwAWAtsAQsIyEjISBksQViQiCwBiNCsQEKQ0VjsQEKQ7ABYEVjsAMqISCwBkMgiiCKsAErsTAFJbAEJlFYYFAbYVJZWCNZISCwQFNYsAErGyGwQFkjsABQWGVZLbAFLLAHQyuyAAIAQ2BCLbAGLLAHI0IjILAAI0JhsAJiZrABY7ABYLAFKi2wBywgIEUgsAtDY7gEAGIgsABQWLBAYFlmsAFjYESwAWAtsAgssgcLAENFQiohsgABAENgQi2wCSywAEMjRLIAAQBDYEItsAosICBFILABKyOwAEOwBCVgIEWKI2EgZCCwIFBYIbAAG7AwUFiwIBuwQFlZI7AAUFhlWbADJSNhRESwAWAtsAssICBFILABKyOwAEOwBCVgIEWKI2EgZLAkUFiwABuwQFkjsABQWGVZsAMlI2FERLABYC2wDCwgsAAjQrILCgNFWCEbIyFZKiEtsA0ssQICRbBkYUQtsA4ssAFgICCwDENKsABQWCCwDCNCWbANQ0qwAFJYILANI0JZLbAPLCCwEGJmsAFjILgEAGOKI2GwDkNgIIpgILAOI0IjLbAQLEtUWLEEZERZJLANZSN4LbARLEtRWEtTWLEEZERZGyFZJLATZSN4LbASLLEAD0NVWLEPD0OwAWFCsA8rWbAAQ7ACJUKxDAIlQrENAiVCsAEWIyCwAyVQWLEBAENgsAQlQoqKIIojYbAOKiEjsAFhIIojYbAOKiEbsQEAQ2CwAiVCsAIlYbAOKiFZsAxDR7ANQ0dgsAJiILAAUFiwQGBZZrABYyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsQAAEyNEsAFDsAA+sgEBAUNgQi2wEywAsQACRVRYsA8jQiBFsAsjQrAKI7ABYEIgYLABYbUQEAEADgBCQopgsRIGK7ByKxsiWS2wFCyxABMrLbAVLLEBEystsBYssQITKy2wFyyxAxMrLbAYLLEEEystsBkssQUTKy2wGiyxBhMrLbAbLLEHEystsBwssQgTKy2wHSyxCRMrLbAeLACwDSuxAAJFVFiwDyNCIEWwCyNCsAojsAFgQiBgsAFhtRAQAQAOAEJCimCxEgYrsHIrGyJZLbAfLLEAHistsCAssQEeKy2wISyxAh4rLbAiLLEDHistsCMssQQeKy2wJCyxBR4rLbAlLLEGHistsCYssQceKy2wJyyxCB4rLbAoLLEJHistsCksIDywAWAtsCosIGCwEGAgQyOwAWBDsAIlYbABYLApKiEtsCsssCorsCoqLbAsLCAgRyAgsAtDY7gEAGIgsABQWLBAYFlmsAFjYCNhOCMgilVYIEcgILALQ2O4BABiILAAUFiwQGBZZrABY2AjYTgbIVktsC0sALEAAkVUWLABFrAsKrABFTAbIlktsC4sALANK7EAAkVUWLABFrAsKrABFTAbIlktsC8sIDWwAWAtsDAsALABRWO4BABiILAAUFiwQGBZZrABY7ABK7ALQ2O4BABiILAAUFiwQGBZZrABY7ABK7AAFrQAAAAAAEQ+IzixLwEVKi2wMSwgPCBHILALQ2O4BABiILAAUFiwQGBZZrABY2CwAENhOC2wMiwuFzwtsDMsIDwgRyCwC0NjuAQAYiCwAFBYsEBgWWawAWNgsABDYbABQ2M4LbA0LLECABYlIC4gR7AAI0KwAiVJiopHI0cjYSBYYhshWbABI0KyMwEBFRQqLbA1LLAAFrAEJbAEJUcjRyNhsAlDK2WKLiMgIDyKOC2wNiywABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyCwCEMgiiNHI0cjYSNGYLAEQ7ACYiCwAFBYsEBgWWawAWNgILABKyCKimEgsAJDYGQjsANDYWRQWLACQ2EbsANDYFmwAyWwAmIgsABQWLBAYFlmsAFjYSMgILAEJiNGYTgbI7AIQ0awAiWwCENHI0cjYWAgsARDsAJiILAAUFiwQGBZZrABY2AjILABKyOwBENgsAErsAUlYbAFJbACYiCwAFBYsEBgWWawAWOwBCZhILAEJWBkI7ADJWBkUFghGyMhWSMgILAEJiNGYThZLbA3LLAAFiAgILAFJiAuRyNHI2EjPDgtsDgssAAWILAII0IgICBGI0ewASsjYTgtsDkssAAWsAMlsAIlRyNHI2GwAFRYLiA8IyEbsAIlsAIlRyNHI2EgsAUlsAQlRyNHI2GwBiWwBSVJsAIlYbkIAAgAY2MjIFhiGyFZY7gEAGIgsABQWLBAYFlmsAFjYCMuIyAgPIo4IyFZLbA6LLAAFiCwCEMgLkcjRyNhIGCwIGBmsAJiILAAUFiwQGBZZrABYyMgIDyKOC2wOywjIC5GsAIlRlJYIDxZLrErARQrLbA8LCMgLkawAiVGUFggPFkusSsBFCstsD0sIyAuRrACJUZSWCA8WSMgLkawAiVGUFggPFkusSsBFCstsD4ssDUrIyAuRrACJUZSWCA8WS6xKwEUKy2wPyywNiuKICA8sAQjQoo4IyAuRrACJUZSWCA8WS6xKwEUK7AEQy6wKystsEAssAAWsAQlsAQmIC5HI0cjYbAJQysjIDwgLiM4sSsBFCstsEEssQgEJUKwABawBCWwBCUgLkcjRyNhILAEI0KwCUMrILBgUFggsEBRWLMCIAMgG7MCJgMaWUJCIyBHsARDsAJiILAAUFiwQGBZZrABY2AgsAErIIqKYSCwAkNgZCOwA0NhZFBYsAJDYRuwA0NgWbADJbACYiCwAFBYsEBgWWawAWNhsAIlRmE4IyA8IzgbISAgRiNHsAErI2E4IVmxKwEUKy2wQiywNSsusSsBFCstsEMssDYrISMgIDywBCNCIzixKwEUK7AEQy6wKystsEQssAAVIEewACNCsgABARUUEy6wMSotsEUssAAVIEewACNCsgABARUUEy6wMSotsEYssQABFBOwMiotsEcssDQqLbBILLAAFkUjIC4gRoojYTixKwEUKy2wSSywCCNCsEgrLbBKLLIAAEErLbBLLLIAAUErLbBMLLIBAEErLbBNLLIBAUErLbBOLLIAAEIrLbBPLLIAAUIrLbBQLLIBAEIrLbBRLLIBAUIrLbBSLLIAAD4rLbBTLLIAAT4rLbBULLIBAD4rLbBVLLIBAT4rLbBWLLIAAEArLbBXLLIAAUArLbBYLLIBAEArLbBZLLIBAUArLbBaLLIAAEMrLbBbLLIAAUMrLbBcLLIBAEMrLbBdLLIBAUMrLbBeLLIAAD8rLbBfLLIAAT8rLbBgLLIBAD8rLbBhLLIBAT8rLbBiLLA3Ky6xKwEUKy2wYyywNyuwOystsGQssDcrsDwrLbBlLLAAFrA3K7A9Ky2wZiywOCsusSsBFCstsGcssDgrsDsrLbBoLLA4K7A8Ky2waSywOCuwPSstsGossDkrLrErARQrLbBrLLA5K7A7Ky2wbCywOSuwPCstsG0ssDkrsD0rLbBuLLA6Ky6xKwEUKy2wbyywOiuwOystsHAssDorsDwrLbBxLLA6K7A9Ky2wciyzCQQCA0VYIRsjIVlCK7AIZbADJFB4sAEVMC0AS7gAyFJYsQEBjlmwAbkIAAgAY3CxAAVCsgABACqxAAVCswoCAQgqsQAFQrMOAAEIKrEABkK6AsAAAQAJKrEAB0K6AEAAAQAJKrEDAESxJAGIUViwQIhYsQNkRLEmAYhRWLoIgAABBECIY1RYsQMARFlZWVmzDAIBDCq4Af+FsASNsQIARAAA"

/***/ }),
/* 359 */
/***/ (function(module, exports) {

module.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxtZXRhZGF0YT5Db3B5cmlnaHQgKEMpIDIwMTcgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbTwvbWV0YWRhdGE+CjxkZWZzPgo8Zm9udCBpZD0iZm9udGVsbG8iIGhvcml6LWFkdi14PSIxMDAwIiA+Cjxmb250LWZhY2UgZm9udC1mYW1pbHk9ImZvbnRlbGxvIiBmb250LXdlaWdodD0iNDAwIiBmb250LXN0cmV0Y2g9Im5vcm1hbCIgdW5pdHMtcGVyLWVtPSIxMDAwIiBhc2NlbnQ9Ijg1MCIgZGVzY2VudD0iLTE1MCIgLz4KPG1pc3NpbmctZ2x5cGggaG9yaXotYWR2LXg9IjEwMDAiIC8+CjxnbHlwaCBnbHlwaC1uYW1lPSJvayIgdW5pY29kZT0iJiN4ZTgwMDsiIGQ9Ik05MzMgNTM0cTAtMjItMTYtMzhsLTQwNC00MDQtNzYtNzZxLTE2LTE1LTM4LTE1dC0zOCAxNWwtNzYgNzYtMjAyIDIwMnEtMTUgMTYtMTUgMzh0MTUgMzhsNzYgNzZxMTYgMTYgMzggMTZ0MzgtMTZsMTY0LTE2NSAzNjYgMzY3cTE2IDE2IDM4IDE2dDM4LTE2bDc2LTc2cTE2LTE1IDE2LTM4eiIgaG9yaXotYWR2LXg9IjEwMDAiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iY2FuY2VsIiB1bmljb2RlPSImI3hlODAxOyIgZD0iTTcyNCAxMTJxMC0yMi0xNS0zOGwtNzYtNzZxLTE2LTE1LTM4LTE1dC0zOCAxNWwtMTY0IDE2NS0xNjQtMTY1cS0xNi0xNS0zOC0xNXQtMzggMTVsLTc2IDc2cS0xNiAxNi0xNiAzOHQxNiAzOGwxNjQgMTY0LTE2NCAxNjRxLTE2IDE2LTE2IDM4dDE2IDM4bDc2IDc2cTE2IDE2IDM4IDE2dDM4LTE2bDE2NC0xNjQgMTY0IDE2NHExNiAxNiAzOCAxNnQzOC0xNmw3Ni03NnExNS0xNSAxNS0zOHQtMTUtMzhsLTE2NC0xNjQgMTY0LTE2NHExNS0xNSAxNS0zOHoiIGhvcml6LWFkdi14PSI3ODUuNyIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJwbHVzIiB1bmljb2RlPSImI3hlODAyOyIgZD0iTTc4NiA0Mzl2LTEwN3EwLTIyLTE2LTM4dC0zOC0xNWgtMjMydi0yMzNxMC0yMi0xNi0zN3QtMzgtMTZoLTEwN3EtMjIgMC0zOCAxNnQtMTUgMzd2MjMzaC0yMzJxLTIzIDAtMzggMTV0LTE2IDM4djEwN3EwIDIzIDE2IDM4dDM4IDE2aDIzMnYyMzJxMCAyMiAxNSAzOHQzOCAxNmgxMDdxMjMgMCAzOC0xNnQxNi0zOHYtMjMyaDIzMnEyMyAwIDM4LTE2dDE2LTM4eiIgaG9yaXotYWR2LXg9Ijc4NS43IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9ImRvd24tYmlnIiB1bmljb2RlPSImI3hlODAzOyIgZD0iTTg5OSAzODZxMC0zMC0yMS01MGwtMzYzLTM2NHEtMjItMjEtNTEtMjEtMjkgMC01MCAyMWwtMzYzIDM2NHEtMjEgMjAtMjEgNTAgMCAyOSAyMSA1MWw0MSA0MXEyMiAyMSA1MSAyMSAyOSAwIDUwLTIxbDE2NC0xNjR2MzkzcTAgMjkgMjEgNTB0NTEgMjJoNzFxMjkgMCA1MC0yMnQyMS01MHYtMzkzbDE2NSAxNjRxMjAgMjEgNTAgMjEgMjkgMCA1MS0yMWw0MS00MXEyMS0yMiAyMS01MXoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJsZWZ0LWJpZyIgdW5pY29kZT0iJiN4ZTgwNDsiIGQ9Ik04NTcgMzUwdi03MXEwLTMwLTE4LTUxdC00Ny0yMWgtMzkzbDE2NC0xNjRxMjEtMjAgMjEtNTB0LTIxLTUwbC00Mi00M3EtMjEtMjAtNTEtMjAtMjkgMC01MCAyMGwtMzY0IDM2NHEtMjAgMjEtMjAgNTAgMCAyOSAyMCA1MWwzNjQgMzYzcTIxIDIxIDUwIDIxIDI5IDAgNTEtMjFsNDItNDFxMjEtMjIgMjEtNTF0LTIxLTUxbC0xNjQtMTY0aDM5M3EyOSAwIDQ3LTIwdDE4LTUxeiIgaG9yaXotYWR2LXg9Ijg1Ny4xIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9InJpZ2h0LWJpZyIgdW5pY29kZT0iJiN4ZTgwNTsiIGQ9Ik04MjEgMzE0cTAtMzAtMjAtNTBsLTM2My0zNjRxLTIyLTIwLTUxLTIwLTI5IDAtNTAgMjBsLTQyIDQycS0yMiAyMS0yMiA1MXQyMiA1MWwxNjMgMTYzaC0zOTNxLTI5IDAtNDcgMjF0LTE4IDUxdjcxcTAgMzAgMTggNTF0NDcgMjBoMzkzbC0xNjMgMTY1cS0yMiAyMC0yMiA1MHQyMiA1MGw0MiA0MnEyMSAyMSA1MCAyMSAyOSAwIDUxLTIxbDM2My0zNjNxMjAtMjAgMjAtNTF6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0idXAtYmlnIiB1bmljb2RlPSImI3hlODA2OyIgZD0iTTg5OSAzMDhxMC0yOC0yMS01MGwtNDEtNDJxLTIyLTIxLTUxLTIxLTMwIDAtNTAgMjFsLTE2NSAxNjR2LTM5M3EwLTI5LTIwLTQ3dC01MS0xOWgtNzFxLTMwIDAtNTEgMTl0LTIxIDQ3djM5M2wtMTY0LTE2NHEtMjAtMjEtNTAtMjF0LTUwIDIxbC00MiA0MnEtMjEgMjEtMjEgNTAgMCAzMCAyMSA1MWwzNjMgMzYzcTIwIDIxIDUwIDIxIDMwIDAgNTEtMjFsMzYzLTM2M3EyMS0yMiAyMS01MXoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJsZWZ0LW9wZW4iIHVuaWNvZGU9IiYjeGU4MDc7IiBkPSJNNjU0IDY4MmwtMjk3LTI5NiAyOTctMjk3cTEwLTEwIDEwLTI1dC0xMC0yNWwtOTMtOTNxLTExLTEwLTI1LTEwdC0yNSAxMGwtNDE0IDQxNXEtMTEgMTAtMTEgMjV0MTEgMjVsNDE0IDQxNHExMCAxMSAyNSAxMXQyNS0xMWw5My05M3ExMC0xMCAxMC0yNXQtMTAtMjV6IiBob3Jpei1hZHYteD0iNzE0LjMiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0icmlnaHQtb3BlbiIgdW5pY29kZT0iJiN4ZTgwODsiIGQ9Ik02MTggMzYxbC00MTQtNDE1cS0xMS0xMC0yNS0xMHQtMjUgMTBsLTkzIDkzcS0xMSAxMS0xMSAyNXQxMSAyNWwyOTYgMjk3LTI5NiAyOTZxLTExIDExLTExIDI1dDExIDI1bDkzIDkzcTEwIDExIDI1IDExdDI1LTExbDQxNC00MTRxMTAtMTEgMTAtMjV0LTEwLTI1eiIgaG9yaXotYWR2LXg9IjcxNC4zIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9IndyZW5jaCIgdW5pY29kZT0iJiN4ZTgwOTsiIGQ9Ik0yMTQgMjlxMCAxNC0xMCAyNXQtMjUgMTAtMjUtMTAtMTEtMjUgMTEtMjUgMjUtMTEgMjUgMTEgMTAgMjV6IG0zNjAgMjM0bC0zODEtMzgxcS0yMS0yMC01MC0yMC0yOSAwLTUxIDIwbC01OSA2MXEtMjEgMjAtMjEgNTAgMCAyOSAyMSA1MWwzODAgMzgwcTIyLTU1IDY0LTk3dDk3LTY0eiBtMzU0IDI0M3EwLTIyLTEzLTU5LTI3LTc1LTkyLTEyMnQtMTQ0LTQ2cS0xMDQgMC0xNzcgNzN0LTczIDE3NyA3MyAxNzYgMTc3IDc0cTMyIDAgNjctMTB0NjAtMjZxOS02IDktMTV0LTktMTZsLTE2My05NHYtMTI1bDEwOC02MHEyIDIgNDQgMjd0NzUgNDUgNDAgMjBxOCAwIDEzLTV0NS0xNHoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJyZXNpemUtZnVsbCIgdW5pY29kZT0iJiN4ZTgwYTsiIGQ9Ik00MjEgMjYxcTAtNy01LTEzbC0xODUtMTg1IDgwLTgxcTEwLTEwIDEwLTI1dC0xMC0yNS0yNS0xMWgtMjUwcS0xNSAwLTI1IDExdC0xMSAyNXYyNTBxMCAxNSAxMSAyNXQyNSAxMSAyNS0xMWw4MC04MCAxODYgMTg1cTUgNiAxMiA2dDEzLTZsNjQtNjNxNS02IDUtMTN6IG00MzYgNDgydi0yNTBxMC0xNS0xMC0yNXQtMjYtMTEtMjUgMTFsLTgwIDgwLTE4NS0xODVxLTYtNi0xMy02dC0xMyA2bC02NCA2NHEtNSA1LTUgMTJ0NSAxM2wxODYgMTg1LTgxIDgxcS0xMCAxMC0xMCAyNXQxMCAyNSAyNSAxMWgyNTBxMTUgMCAyNi0xMXQxMC0yNXoiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJjdyIgdW5pY29kZT0iJiN4ZTgwYjsiIGQ9Ik04NTcgNzA3di0yNTBxMC0xNC0xMC0yNXQtMjYtMTFoLTI1MHEtMjMgMC0zMiAyMy0xMCAyMiA3IDM4bDc3IDc3cS04MiA3Ny0xOTQgNzctNTggMC0xMTEtMjN0LTkxLTYxLTYxLTkxLTIzLTExMSAyMy0xMTEgNjEtOTEgOTEtNjEgMTExLTIzcTY2IDAgMTI1IDI5dDEwMCA4MnE0IDYgMTMgNyA4IDAgMTQtNWw3Ni03N3E1LTQgNi0xMXQtNS0xM3EtNjAtNzQtMTQ3LTExNHQtMTgyLTQxcS04NyAwLTE2NyAzNHQtMTM2IDkyLTkyIDEzNy0zNCAxNjYgMzQgMTY2IDkyIDEzNyAxMzYgOTIgMTY3IDM0cTgyIDAgMTU4LTMxdDEzNy04OGw3MiA3MnExNyAxOCAzOSA4IDIyLTkgMjItMzN6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0ibWludXMtY2lyY2xlZCIgdW5pY29kZT0iJiN4ZTgwYzsiIGQ9Ik02NzkgMzE0djcycTAgMTQtMTEgMjV0LTI1IDEwaC00MjlxLTE0IDAtMjUtMTB0LTEwLTI1di03MnEwLTE0IDEwLTI1dDI1LTEwaDQyOXExNCAwIDI1IDEwdDExIDI1eiBtMTc4IDM2cTAtMTE3LTU3LTIxNXQtMTU2LTE1Ni0yMTUtNTgtMjE2IDU4LTE1NSAxNTYtNTggMjE1IDU4IDIxNSAxNTUgMTU2IDIxNiA1OCAyMTUtNTggMTU2LTE1NiA1Ny0yMTV6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0icGx1cy1jaXJjbGVkIiB1bmljb2RlPSImI3hlODBkOyIgZD0iTTY3OSAzMTR2NzJxMCAxNC0xMSAyNXQtMjUgMTBoLTE0M3YxNDNxMCAxNS0xMSAyNXQtMjUgMTFoLTcxcS0xNSAwLTI1LTExdC0xMS0yNXYtMTQzaC0xNDNxLTE0IDAtMjUtMTB0LTEwLTI1di03MnEwLTE0IDEwLTI1dDI1LTEwaDE0M3YtMTQzcTAtMTUgMTEtMjV0MjUtMTFoNzFxMTUgMCAyNSAxMXQxMSAyNXYxNDNoMTQzcTE0IDAgMjUgMTB0MTEgMjV6IG0xNzggMzZxMC0xMTctNTctMjE1dC0xNTYtMTU2LTIxNS01OC0yMTYgNTgtMTU1IDE1Ni01OCAyMTUgNTggMjE1IDE1NSAxNTYgMjE2IDU4IDIxNS01OCAxNTYtMTU2IDU3LTIxNXoiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJ0cmFzaC1lbXB0eSIgdW5pY29kZT0iJiN4ZTgwZTsiIGQ9Ik0yODYgNDM5di0zMjFxMC04LTUtMTN0LTEzLTVoLTM2cS04IDAtMTMgNXQtNSAxM3YzMjFxMCA4IDUgMTN0MTMgNWgzNnE4IDAgMTMtNXQ1LTEzeiBtMTQzIDB2LTMyMXEwLTgtNS0xM3QtMTMtNWgtMzZxLTggMC0xMyA1dC01IDEzdjMyMXEwIDggNSAxM3QxMyA1aDM2cTggMCAxMy01dDUtMTN6IG0xNDIgMHYtMzIxcTAtOC01LTEzdC0xMi01aC0zNnEtOCAwLTEzIDV0LTUgMTN2MzIxcTAgOCA1IDEzdDEzIDVoMzZxNyAwIDEyLTV0NS0xM3ogbTcyLTQwNHY1MjloLTUwMHYtNTI5cTAtMTIgNC0yMnQ4LTE1IDYtNWg0NjRxMiAwIDYgNXQ4IDE1IDQgMjJ6IG0tMzc1IDYwMWgyNTBsLTI3IDY1cS00IDUtOSA2aC0xNzdxLTYtMS0xMC02eiBtNTE4LTE4di0zNnEwLTgtNS0xM3QtMTMtNWgtNTR2LTUyOXEwLTQ2LTI2LTgwdC02My0zNGgtNDY0cS0zNyAwLTYzIDMzdC0yNyA3OXY1MzFoLTUzcS04IDAtMTMgNXQtNSAxM3YzNnEwIDggNSAxM3QxMyA1aDE3MmwzOSA5M3E5IDIxIDMxIDM1dDQ0IDE1aDE3OHEyMyAwIDQ0LTE1dDMwLTM1bDM5LTkzaDE3M3E4IDAgMTMtNXQ1LTEzeiIgaG9yaXotYWR2LXg9Ijc4NS43IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9ImZvbnQiIHVuaWNvZGU9IiYjeGU4MGY7IiBkPSJNNDA1IDUzOGwtOTUtMjUxcTE4IDAgNzYtMXQ4OS0xcTExIDAgMzIgMS00OCAxNDEtMTAyIDI1MnogbS00MDUtNjE3bDEgNDRxMTMgNCAzMSA3dDMyIDYgMjggOCAyNSAxNyAxNyAyOGwxMzIgMzQ0IDE1NiA0MDRoNzJxNC04IDYtMTJsMTE0LTI2OHExOS00MyA2MC0xNDR0NjMtMTUzcTktMTkgMzMtODB0NDAtOTRxMTEtMjYgMTktMzIgMTEtOSA0OS0xN3Q0Ny0xMXE0LTIyIDQtMzIgMC0zLTEtOHQwLTdxLTM1IDAtMTA2IDV0LTEwNyA0cS00MiAwLTEyMC00dC05OS00cTAgMjQgMiA0M2w3MyAxNnExIDAgNyAxdDkgMiA4IDMgOSA0IDYgNCA1IDYgMSA4cTAgOS0xNyA1NHQtNDAgOTktMjQgNTZsLTI1MSAxcS0xNC0zMi00My0xMDl0LTI4LTkxcTAtMTIgOC0yMXQyNC0xNCAyNy03IDMyLTUgMjMtMnExLTExIDEtMzIgMC01LTEtMTYtMzMgMC05OCA2dC05NyA2cS01IDAtMTUtM3QtMTItMnEtNDUtOC0xMDUtOHoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJ6b29tLWluIiB1bmljb2RlPSImI3hlODEwOyIgZD0iTTU3MSA0MDR2LTM2cTAtNy01LTEzdC0xMi01aC0xMjV2LTEyNXEwLTctNi0xM3QtMTItNWgtMzZxLTcgMC0xMyA1dC01IDEzdjEyNWgtMTI1cS03IDAtMTIgNXQtNiAxM3YzNnEwIDcgNiAxMnQxMiA1aDEyNXYxMjVxMCA4IDUgMTN0MTMgNWgzNnE3IDAgMTItNXQ2LTEzdi0xMjVoMTI1cTcgMCAxMi01dDUtMTJ6IG03Mi0xOHEwIDEwMy03MyAxNzZ0LTE3NyA3NC0xNzctNzQtNzMtMTc2IDczLTE3NyAxNzctNzMgMTc3IDczIDczIDE3N3ogbTI4Ni00NjVxMC0yOS0yMS01MHQtNTEtMjFxLTMwIDAtNTAgMjFsLTE5MSAxOTFxLTEwMC02OS0yMjMtNjktODAgMC0xNTMgMzF0LTEyNSA4NC04NCAxMjUtMzEgMTUzIDMxIDE1MiA4NCAxMjYgMTI1IDg0IDE1MyAzMSAxNTMtMzEgMTI1LTg0IDg0LTEyNiAzMS0xNTJxMC0xMjMtNjktMjIzbDE5MS0xOTFxMjEtMjEgMjEtNTF6IiBob3Jpei1hZHYteD0iOTI4LjYiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iem9vbS1vdXQiIHVuaWNvZGU9IiYjeGU4MTE7IiBkPSJNNTcxIDQwNHYtMzZxMC03LTUtMTN0LTEyLTVoLTMyMnEtNyAwLTEyIDV0LTYgMTN2MzZxMCA3IDYgMTJ0MTIgNWgzMjJxNyAwIDEyLTV0NS0xMnogbTcyLTE4cTAgMTAzLTczIDE3NnQtMTc3IDc0LTE3Ny03NC03My0xNzYgNzMtMTc3IDE3Ny03MyAxNzcgNzMgNzMgMTc3eiBtMjg2LTQ2NXEwLTI5LTIxLTUwdC01MS0yMXEtMzAgMC01MCAyMWwtMTkxIDE5MXEtMTAwLTY5LTIyMy02OS04MCAwLTE1MyAzMXQtMTI1IDg0LTg0IDEyNS0zMSAxNTMgMzEgMTUyIDg0IDEyNiAxMjUgODQgMTUzIDMxIDE1My0zMSAxMjUtODQgODQtMTI2IDMxLTE1MnEwLTEyMy02OS0yMjNsMTkxLTE5MXEyMS0yMSAyMS01MXoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJkb3duLWRpciIgdW5pY29kZT0iJiN4ZTgxMjsiIGQ9Ik00NjAgNTUwbC0yMzAtNDAwLTIzMCA0MDAgNDYwIDB6IiBob3Jpei1hZHYteD0iNDYwIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9Im1vdmUiIHVuaWNvZGU9IiYjeGYwNDc7IiBkPSJNMTAwMCAzNTBxMC0xNC0xMS0yNWwtMTQyLTE0M3EtMTEtMTEtMjYtMTF0LTI1IDExLTEwIDI1djcyaC0yMTV2LTIxNWg3MnExNCAwIDI1LTEwdDExLTI1LTExLTI1bC0xNDMtMTQzcS0xMC0xMS0yNS0xMXQtMjUgMTFsLTE0MyAxNDNxLTExIDEwLTExIDI1dDExIDI1IDI1IDEwaDcydjIxNWgtMjE1di03MnEwLTE0LTEwLTI1dC0yNS0xMS0yNSAxMWwtMTQzIDE0M3EtMTEgMTEtMTEgMjV0MTEgMjVsMTQzIDE0M3ExMCAxMSAyNSAxMXQyNS0xMSAxMC0yNXYtNzJoMjE1djIxNWgtNzJxLTE0IDAtMjUgMTB0LTExIDI1IDExIDI2bDE0MyAxNDJxMTEgMTEgMjUgMTF0MjUtMTFsMTQzLTE0MnExMS0xMSAxMS0yNnQtMTEtMjUtMjUtMTBoLTcydi0yMTVoMjE1djcycTAgMTQgMTAgMjV0MjUgMTEgMjYtMTFsMTQyLTE0M3ExMS0xMCAxMS0yNXoiIGhvcml6LWFkdi14PSIxMDAwIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9ImJsYW5rIiB1bmljb2RlPSImI3hmMGM4OyIgZD0iTTg1NyA2MTh2LTUzNnEwLTY2LTQ3LTExM3QtMTE0LTQ4aC01MzVxLTY3IDAtMTE0IDQ4dC00NyAxMTN2NTM2cTAgNjYgNDcgMTEzdDExNCA0OGg1MzVxNjcgMCAxMTQtNDh0NDctMTEzeiIgaG9yaXotYWR2LXg9Ijg1Ny4xIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9Im1vdXNlLXBvaW50ZXIiIHVuaWNvZGU9IiYjeGYyNDU7IiBkPSJNNjMyIDI2OHExOC0xNyA4LTM4LTktMjMtMzMtMjNoLTIxM2wxMTItMjY2cTYtMTMgMC0yN3QtMTktMTlsLTk5LTQycS0xNC02LTI3IDB0LTE5IDE5bC0xMDcgMjUyLTE3NC0xNzRxLTExLTExLTI1LTExLTcgMC0xNCAzLTIyIDEwLTIyIDMzdjgzOXEwIDI0IDIyIDMzIDcgMyAxNCAzIDE1IDAgMjUtMTF6IiBob3Jpei1hZHYteD0iNzE0LjMiIC8+CjwvZm9udD4KPC9kZWZzPgo8L3N2Zz4="

/***/ }),
/* 360 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(361);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(8)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(false) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept("!!../node_modules/css-loader/index.js??ref--0-1!./Builder.css", function() {
			var newContent = require("!!../node_modules/css-loader/index.js??ref--0-1!./Builder.css");
			if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 361 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(7)(true);
// imports


// module
exports.push([module.i, ".escher-container{font-family:Open Sans,Helvetica Neue,Helvetica,Arial,sans-serif!important;background-color:#f3f3f3;text-align:center;position:relative;font-size:14px;color:#333}body.fill-screen,html.fill-screen{height:100%;width:100%}body.fill-screen{margin:0;position:relative;overflow:hidden}.fill-screen-div{margin:0;padding:0;position:fixed;top:0;bottom:0;left:0;right:0}.escher-3d-transform-container,.escher-zoom-container,.full-screen-on,svg.escher-svg{height:100%!important;width:100%!important;overflow:hidden}.escher-container #status{position:absolute;bottom:10px;left:20px;color:red;background-color:#fff;font-size:16px}.escher-container #menu{display:block;margin:5px auto 0;border:1px solid #ddd;background-color:hsla(0,0%,100%,.95);border-radius:0}.escher-container .help-button{float:right;padding:0 5px;font-size:12px;background-color:#f5f5f5}.escher-container .dropdown-menu{border:1px solid #ddd;background-color:hsla(0,0%,100%,.95);border-radius:0;margin:0;text-align:left}.escher-container .dropdown-menu>li>a{font-size:15px}.escher-container .dropdown-menu>.escher-disabled>a{color:#e0e0e0;pointer-events:none}.escher-container .dropdown{background-color:hsla(0,0%,100%,.95)}@media (max-width:550px){.escher-container .dropdown-button{padding:5px 9px}}@media (min-width:550px){.escher-container .dropdown-button{font-size:18px}.escher-container .help-button{font-size:16px}}.escher-container .search-menu-container{position:absolute;width:100%;top:0;left:0;margin:0;text-align:center;pointer-events:none}.escher-container .search-menu-container-inline{box-sizing:border-box;width:320px;display:inline-block;text-align:left;pointer-events:auto}@media (min-width:550px){.escher-container .search-menu-container-inline{width:410px}}.escher-container .search-container{display:block;background:hsla(0,0%,100%,.95);padding:3px;border:1px solid #ddd;margin:2px 0 0}.escher-container .search-bar{display:inline-block;border:1px solid #ddd;margin-right:4px;width:114px;height:29px;border-radius:3px}.escher-container .search-counter{display:inline-block;padding:0 8px}.escher-container .settings-box-background{display:block;position:absolute;top:0;left:0;width:100%;height:100%;z-index:9;background:rgba(0,0,0,.4);padding:5% 0;text-align:center}.escher-container .settings-box-container{display:inline-block;position:relative;width:90%;max-width:520px;height:100%;z-index:10}.escher-container .settings-button{position:absolute;top:5px;right:20px;z-index:10}.escher-container .settings-button-close{right:60px}.escher-container .settings-box{display:inline-block;max-height:100%;width:100%;overflow-y:scroll;overflow-x:hidden;background:hsla(0,0%,100%,.95);padding:8px;margin:0;border:1px solid #ddd;text-align:left}.escher-container .settings-section-heading-large{font-size:17px;font-weight:700;margin-top:15px}.escher-container .settings-section-heading{font-weight:700;margin-top:15px}.escher-container .settings-table{width:100%}.escher-container .settings-table td{padding:3px 5px}.escher-container td.options-label{width:88px}.escher-container td.options-label-wide{width:192px}.escher-container .settings-number{text-align:center;color:#aaa;font-style:italic}.escher-container .input-cell{width:23%;font-size:13px}.escher-container .scale-bar-input{width:100%;text-align:left}.escher-container .no-data-input{width:23%;margin:0 4px}.escher-container label.option-group{margin:0 10px 0 0}.escher-container label.option-group span{margin:0 0 0 4px}.escher-container label.full-line{width:100%}.escher-container label{font-weight:inherit}.escher-container .settings-tip{font-style:italic}.escher-container .scale-editor{position:relative;width:100%;height:190px;font-size:12px}.escher-container .scale-editor .centered{position:absolute;width:440px;left:35px;top:0}.escher-container .scale-editor .data-not-loaded{position:absolute;z-index:5;left:60px;top:25px;text-align:center;width:400px;font-size:15px;color:#b19ec0}.escher-container .scale-editor .add{position:absolute;top:0;right:0;width:20px;cursor:pointer}.escher-container .scale-editor .trash-container{position:absolute;top:0;left:0;width:420px;height:20px}.escher-container .scale-editor .trash{position:absolute;top:0;left:0;cursor:pointer}.escher-container .scale-editor .scale-svg{position:absolute;width:440px;height:80px;top:20px;left:0}.escher-container .scale-editor .input-container{position:absolute;top:56px;left:0;width:420px}.escher-container .scale-editor .input-container input{position:absolute;left:0;top:0}.escher-container .scale-editor input[disabled]{background-color:#f1ecfa}.escher-container .scale-editor .row-label{position:absolute;left:0}.escher-container .scale-editor .input-set{position:absolute;top:0;box-shadow:0 2px 14px #c5c5c5}.escher-container .scale-editor .input-set.selected-set{z-index:5}.escher-container .scale-editor .domain-type-picker{position:absolute;top:0;right:0;height:14px;background-color:#e8e8e8}.escher-container .scale-editor .picker rect{color:#000;opacity:.4}.escher-container .scale-editor .no-data{position:absolute;left:0;width:100%}.escher-container .scale-editor .no-data-heading{font-weight:700}.escher-container .scale-editor .no-data .input-group{position:absolute;top:0;left:0}.escher-container .scale-editor .no-data .input-group input,.escher-container .scale-editor .no-data .input-group span{position:absolute;top:17px}.escher-container #rxn-input{z-index:10}.escher-container .input-close-button:hover{color:#f33;font-weight:700}.escher-container .light{color:#8b8b8b;font-weight:400}.escher-container #text-edit-input input{width:500px;border:1px solid #ccc;font-size:22px}.escher-container #quick-jump-menu{position:absolute;right:10px;bottom:10px;width:300px}@media (max-width:550px){.escher-container #quick-jump-menu{display:none}}.escher-container #tooltip-container{-ms-touch-action:none;touch-action:none}.escher-container .btn{color:#fff!important;border:1px solid #2e2f2f;background-image:linear-gradient(#4f5151,#474949 6%,#3f4141);background-color:#fff;cursor:pointer}.escher-container .btn:active{background-image:linear-gradient(#3f4141,#474949 6%,#4f5151)}", "", {"version":3,"sources":["/Users/Christoph/Documents/Studium Bioinformatik/07 SoSe 17/Bachelorarbeit/project/escher-time-series-visualization/src/Builder.css"],"names":[],"mappings":"AAGA,kBACE,0EAAoF,AACpF,yBAA0B,AAC1B,kBAAmB,AACnB,kBAAmB,AACnB,eAAgB,AAChB,UAAe,CAChB,AAQD,kCAHE,YAAa,AACb,UAAY,CAQb,AAND,iBACE,SAAU,AACV,kBAAmB,AACnB,eAAiB,CAGlB,AAKD,iBACE,SAAU,AACV,UAAW,AACX,eAAgB,AAChB,MAAS,AACT,SAAY,AACZ,OAAU,AACV,OAAW,CACZ,AAUD,qFANE,sBAAwB,AACxB,qBAAuB,AACvB,eAAiB,CAQlB,AAGD,0BACE,kBAAkB,AAClB,YAAY,AACZ,UAAW,AACX,UAAW,AACX,sBAAwB,AACxB,cAAe,CAChB,AAED,wBACE,cAAe,AACf,kBAAwB,AACxB,sBAAuB,AACvB,qCAA4C,AAC5C,eAAmB,CACpB,AACD,+BACE,YAAa,AACb,cAAe,AACf,eAAgB,AAChB,wBAAqC,CACtC,AACD,iCACE,sBAAuB,AACvB,qCAA4C,AAC5C,gBAAmB,AACnB,SAAU,AACV,eAAiB,CAClB,AACD,sCACE,cAAgB,CACjB,AACD,oDACE,cAAe,AACf,mBAAqB,CACtB,AACD,4BACE,oCAA4C,CAC7C,AACD,yBACE,mCACE,eAAiB,CAClB,CACF,AACD,yBACE,mCACE,cAAgB,CACjB,AACD,+BACE,cAAgB,CACjB,CACF,AAED,yCACE,kBAAmB,AACnB,WAAY,AACZ,MAAS,AACT,OAAU,AACV,SAAU,AACV,kBAAmB,AACnB,mBAAqB,CACtB,AACD,gDACE,sBAAuB,AACvB,YAAa,AACb,qBAAsB,AACtB,gBAAiB,AACjB,mBAAqB,CACtB,AACD,yBACE,gDACE,WAAa,CACd,CACF,AACD,oCACE,cAAe,AACf,+BAAsC,AACtC,YAAa,AACb,sBAAuB,AACvB,cAAkB,CACnB,AACD,8BACE,qBAAsB,AACtB,sBAAuB,AACvB,iBAAkB,AAClB,YAAa,AACb,YAAa,AACb,iBAAmB,CACpB,AACD,kCACE,qBAAsB,AACtB,aAAe,CAChB,AAED,2CACE,cAAe,AACf,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,WAAY,AACZ,YAAa,AACb,UAAW,AACX,0BAA+B,AAC/B,aAAmB,AACnB,iBAAmB,CACpB,AACD,0CACE,qBAAsB,AACtB,kBAAmB,AACnB,UAAW,AACX,gBAAiB,AACjB,YAAa,AACb,UAAY,CACb,AACD,mCACE,kBAAmB,AACnB,QAAS,AACT,WAAY,AACZ,UAAY,CACb,AACD,yCACE,UAAY,CACb,AACD,gCACE,qBAAsB,AACtB,gBAAiB,AACjB,WAAY,AAEZ,kBAAmB,AACnB,kBAAmB,AACnB,+BAAsC,AACtC,YAAa,AACb,SAAU,AACV,sBAAuB,AACvB,eAAiB,CAClB,AACD,kDACE,eAAgB,AAChB,gBAAkB,AAClB,eAAiB,CAClB,AACD,4CACE,gBAAkB,AAClB,eAAiB,CAClB,AACD,kCACE,UAAY,CACb,AACD,qCACE,eAAiB,CAClB,AACD,mCACE,UAAY,CACb,AACD,wCACE,WAAa,CACd,AACD,mCACE,kBAAmB,AACnB,WAAY,AACZ,iBAAmB,CACpB,AACD,8BACE,UAAW,AAEX,cAAgB,CACjB,AACD,mCACE,WAAY,AACZ,eAAiB,CAClB,AACD,iCACE,UAAW,AACX,YAAoB,CACrB,AACD,qCACE,iBAAmB,CACpB,AACD,0CACE,gBAAkB,CACnB,AACD,kCACE,UAAY,CACb,AACD,wBACE,mBAAqB,CACtB,AACD,gCACE,iBAAmB,CACpB,AAED,gCACE,kBAAmB,AACnB,WAAY,AACZ,aAAc,AACd,cAAgB,CACjB,AACD,0CACE,kBAAmB,AACnB,YAAa,AACb,UAAW,AACX,KAAS,CACV,AACD,iDACE,kBAAmB,AACnB,UAAW,AACX,UAAW,AACX,SAAU,AACV,kBAAmB,AACnB,YAAa,AACb,eAAgB,AAChB,aAAe,CAChB,AACD,qCACE,kBAAmB,AACnB,MAAS,AACT,QAAW,AACX,WAAY,AACZ,cAAgB,CACjB,AACD,iDACE,kBAAmB,AACnB,MAAS,AACT,OAAU,AACV,YAAa,AACb,WAAa,CACd,AACD,uCACE,kBAAmB,AACnB,MAAS,AACT,OAAU,AACV,cAAgB,CACjB,AACD,2CACE,kBAAmB,AACnB,YAAa,AACb,YAAa,AACb,SAAU,AACV,MAAU,CACX,AACD,iDACE,kBAAmB,AACnB,SAAU,AACV,OAAU,AACV,WAAa,CACd,AACD,uDACE,kBAAmB,AACnB,OAAU,AACV,KAAS,CACV,AACD,gDACE,wBAA0B,CAC3B,AACD,2CACE,kBAAmB,AACnB,MAAU,CACX,AACD,2CACE,kBAAmB,AACnB,MAAS,AACT,6BAA4C,CAC7C,AACD,wDACE,SAAW,CACZ,AACD,oDACE,kBAAmB,AACnB,MAAS,AACT,QAAW,AACX,YAAa,AACb,wBAAqC,CACtC,AACD,6CACE,WAAa,AACb,UAAa,CACd,AACD,yCACE,kBAAmB,AACnB,OAAU,AACV,UAAY,CACb,AACD,iDACE,eAAkB,CACnB,AACD,sDACE,kBAAmB,AACnB,MAAS,AACT,MAAU,CACX,AACD,uHAEE,kBAAmB,AACnB,QAAU,CACX,AAGD,6BACE,UAAY,CACb,AACD,4CACE,WAAe,AACf,eAAkB,CACnB,AACD,yBACE,cAAe,AACf,eAAoB,CACrB,AAED,yCACE,YAAa,AACb,sBAA0B,AAC1B,cAAgB,CACjB,AAED,mCACE,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,WAAa,CACd,AACD,yBACE,mCACC,YAAc,CACd,CACF,AAED,qCACE,sBAAuB,AACvB,iBAAmB,CACpB,AAGD,uBACE,qBAAuB,AACvB,yBAA0B,AAC1B,6DAAgE,AAChE,sBAAwB,AACxB,cAAgB,CACjB,AAED,8BACE,4DAAgE,CACjE","file":"Builder.css","sourcesContent":["/* Containers */\n\n/* The top level container for an Escher Builder */\n.escher-container {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif !important;\n  background-color: #F3F3F3;\n  text-align: center;\n  position: relative;\n  font-size: 14px;\n  color: #333333;\n}\n\n/* Applied to the body when Escher fills the screen. This stops browser from\nshowing scroll-end animations. */\nhtml.fill-screen {\n  height: 100%;\n  width: 100%;\n}\nbody.fill-screen {\n  margin: 0;\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n}\n\n/* Applied to top level container (generally .escher-container) when Escher\nfills the screen. These make sure Escher completely fills the screen, even after\nresizes. */\n.fill-screen-div {\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n}\n\n/* Temporarily applied when entering full screen. */\n.full-screen-on {\n  height: 100% !important;\n  width: 100% !important;\n  overflow: hidden;\n}\n\n/* The zoom container classes. */\n.escher-zoom-container, .escher-3d-transform-container, svg.escher-svg {\n  width: 100% !important;\n  height: 100% !important;\n  overflow: hidden;\n}\n\n/* Status */\n.escher-container #status {\n  position:absolute;\n  bottom:10px;\n  left: 20px;\n  color: red;\n  background-color: white;\n  font-size: 16px\n}\n/* Menus */\n.escher-container #menu {\n  display: block;\n  margin: 5px auto 0 auto;\n  border: 1px solid #ddd;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 0px;\n}\n.escher-container .help-button {\n  float: right;\n  padding: 0 5px;\n  font-size: 12px;\n  background-color: rgb(245, 245, 245);\n}\n.escher-container .dropdown-menu {\n  border: 1px solid #ddd;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 0px;\n  margin: 0;\n  text-align: left;\n}\n.escher-container .dropdown-menu>li>a {\n  font-size: 15px;\n}\n.escher-container .dropdown-menu>.escher-disabled>a {\n  color: #E0E0E0;\n  pointer-events: none;\n}\n.escher-container .dropdown {\n  background-color: rgba(255, 255, 255, 0.95);\n}\n@media (max-width: 550px) {\n  .escher-container .dropdown-button {\n    padding: 5px 9px;\n  }\n}\n@media (min-width: 550px) {\n  .escher-container .dropdown-button {\n    font-size: 18px;\n  }\n  .escher-container .help-button {\n    font-size: 16px;\n  }\n}\n/* Search */\n.escher-container .search-menu-container {\n  position: absolute;\n  width: 100%;\n  top: 0px;\n  left: 0px;\n  margin: 0;\n  text-align: center;\n  pointer-events: none;\n}\n.escher-container .search-menu-container-inline {\n  box-sizing: border-box;\n  width: 320px;\n  display: inline-block;\n  text-align: left;\n  pointer-events: auto;\n}\n@media (min-width: 550px) {\n  .escher-container .search-menu-container-inline {\n    width: 410px;\n  }\n}\n.escher-container .search-container {\n  display: block;\n  background: rgba(255, 255, 255, 0.95);\n  padding: 3px;\n  border: 1px solid #DDD;\n  margin: 2px 0 0 0;\n}\n.escher-container .search-bar {\n  display: inline-block;\n  border: 1px solid #DDD;\n  margin-right: 4px;\n  width: 114px;\n  height: 29px;\n  border-radius: 3px;\n}\n.escher-container .search-counter {\n  display: inline-block;\n  padding: 0 8px;\n}\n/* Settings */\n.escher-container .settings-box-background {\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9;\n  background: rgba(0, 0, 0, 0.4);\n  padding: 5% 0 5% 0;\n  text-align: center;\n}\n.escher-container .settings-box-container {\n  display: inline-block;\n  position: relative;\n  width: 90%;\n  max-width: 520px;\n  height: 100%;\n  z-index: 10;\n}\n.escher-container .settings-button {\n  position: absolute;\n  top: 5px;\n  right: 20px;\n  z-index: 10;\n}\n.escher-container .settings-button-close {\n  right: 60px;\n}\n.escher-container .settings-box {\n  display: inline-block;\n  max-height: 100%;\n  width: 100%;\n  /* max-width: 520px; */\n  overflow-y: scroll;\n  overflow-x: hidden;\n  background: rgba(255, 255, 255, 0.95);\n  padding: 8px;\n  margin: 0;\n  border: 1px solid #DDD;\n  text-align: left;\n}\n.escher-container .settings-section-heading-large {\n  font-size: 17px;\n  font-weight: bold;\n  margin-top: 15px;\n}\n.escher-container .settings-section-heading {\n  font-weight: bold;\n  margin-top: 15px;\n}\n.escher-container .settings-table {\n  width: 100%;\n}\n.escher-container .settings-table td {\n  padding: 3px 5px;\n}\n.escher-container td.options-label {\n  width: 88px;\n}\n.escher-container td.options-label-wide {\n  width: 192px;\n}\n.escher-container .settings-number {\n  text-align: center;\n  color: #AAA;\n  font-style: italic;\n}\n.escher-container .input-cell {\n  width: 23%;\n  /* padding: 3px 5px; */\n  font-size: 13px;\n}\n.escher-container .scale-bar-input {\n  width: 100%;\n  text-align: left;\n}\n.escher-container .no-data-input {\n  width: 23%;\n  margin: 0 4px 0 4px;\n}\n.escher-container label.option-group {\n  margin: 0 10px 0 0;\n}\n.escher-container label.option-group span {\n  margin: 0 0 0 4px;\n}\n.escher-container label.full-line {\n  width: 100%;\n}\n.escher-container label {\n  font-weight: inherit;\n}\n.escher-container .settings-tip {\n  font-style: italic;\n}\n/* Live scale */\n.escher-container .scale-editor {\n  position: relative;\n  width: 100%;\n  height: 190px;\n  font-size: 12px;\n}\n.escher-container .scale-editor .centered {\n  position: absolute;\n  width: 440px;\n  left: 35px;\n  top: 0px;\n}\n.escher-container .scale-editor .data-not-loaded {\n  position: absolute;\n  z-index: 5;\n  left: 60px;\n  top: 25px;\n  text-align: center;\n  width: 400px;\n  font-size: 15px;\n  color: #B19EC0;\n}\n.escher-container .scale-editor .add {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  width: 20px;\n  cursor: pointer;\n}\n.escher-container .scale-editor .trash-container {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 420px;\n  height: 20px;\n}\n.escher-container .scale-editor .trash {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  cursor: pointer;\n}\n.escher-container .scale-editor .scale-svg {\n  position: absolute;\n  width: 440px;\n  height: 80px;\n  top: 20px;\n  left: 0px;\n}\n.escher-container .scale-editor .input-container {\n  position: absolute;\n  top: 56px;\n  left: 0px;\n  width: 420px;\n}\n.escher-container .scale-editor .input-container input {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n}\n.escher-container .scale-editor input[disabled] {\n  background-color: #F1ECFA;\n}\n.escher-container .scale-editor .row-label {\n  position: absolute;\n  left: 0px;\n}\n.escher-container .scale-editor .input-set {\n  position: absolute;\n  top: 0px;\n  box-shadow: 0px 2px 14px rgb(197, 197, 197);\n}\n.escher-container .scale-editor .input-set.selected-set {\n  z-index: 5;\n}\n.escher-container .scale-editor .domain-type-picker {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  height: 14px;\n  background-color: rgb(232, 232, 232);\n}\n.escher-container .scale-editor .picker rect {\n  color: black;\n  opacity: 0.4;\n}\n.escher-container .scale-editor .no-data {\n  position: absolute;\n  left: 0px;\n  width: 100%;\n}\n.escher-container .scale-editor .no-data-heading {\n  font-weight: bold;\n}\n.escher-container .scale-editor .no-data .input-group {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n}\n.escher-container .scale-editor .no-data .input-group span,\n.escher-container .scale-editor .no-data .input-group input {\n  position: absolute;\n  top: 17px;\n}\n\n/* Reaction input */\n.escher-container #rxn-input {\n  z-index: 10;\n}\n.escher-container .input-close-button:hover {\n  color: #ff3333;\n  font-weight: bold;\n}\n.escher-container .light {\n  color: #8b8b8b;\n  font-weight: normal;\n}\n/* text edit input */\n.escher-container #text-edit-input input {\n  width: 500px;\n  border: 1px solid #cccccc;\n  font-size: 22px;\n}\n/* quick jump menu */\n.escher-container #quick-jump-menu {\n  position: absolute;\n  right: 10px;\n  bottom: 10px;\n  width: 300px;\n}\n@media (max-width: 550px) {\n  .escher-container #quick-jump-menu {\n\t  display: none;\n  }\n}\n\n.escher-container #tooltip-container {\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n/* Buttons */\n.escher-container .btn {\n  color: white!important;\n  border: 1px solid #2E2F2F;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  cursor: pointer;\n}\n\n.escher-container .btn:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n"],"sourceRoot":""}]);

// exports


/***/ }),
/* 362 */
/***/ (function(module, exports) {

module.exports = "svg.escher-svg #mouse-node {\n  fill: none;\n}\nsvg.escher-svg #canvas {\n  stroke: #ccc;\n  stroke-width: 7px;\n  fill: white;\n}\nsvg.escher-svg .resize-rect {\n  fill: black;\n  opacity: 0;\n  stroke: none;\n}\nsvg.escher-svg .label {\n  font-family: sans-serif;\n  font-style: italic;\n  font-weight: bold;\n  font-size: 8px;\n  fill: black;\n  stroke: none;\n  text-rendering: optimizelegibility;\n  cursor: default;\n}\nsvg.escher-svg .reaction-label {\n  font-size: 30px;\n  fill: rgb(32, 32, 120);\n  text-rendering: optimizelegibility;\n}\nsvg.escher-svg .node-label {\n  font-size: 20px;\n}\nsvg.escher-svg .gene-label {\n  font-size: 18px;\n  fill: rgb(32, 32, 120);\n  text-rendering: optimizelegibility;\n  cursor: default;\n}\nsvg.escher-svg .text-label .label {\n  font-size: 50px;\n}\nsvg.escher-svg .text-label-input {\n  font-size: 50px;\n}\nsvg.escher-svg .node-circle {\n  stroke-width: 2px;\n}\nsvg.escher-svg .midmarker-circle, svg.escher-svg .multimarker-circle {\n  fill: white;\n  fill-opacity: 0.2;\n  stroke: rgb(50, 50, 50);\n}\nsvg.escher-svg g.selected .node-circle{\n  stroke-width: 6px;\n  stroke: rgb(20, 113, 199);\n}\nsvg.escher-svg g.selected .label {\n  fill: rgb(20, 113, 199);\n}\nsvg.escher-svg .metabolite-circle {\n  stroke: rgb(162, 69, 16);\n  fill: rgb(224, 134, 91);\n}\nsvg.escher-svg g.selected .metabolite-circle {\n  stroke: rgb(5, 2, 0);\n}\nsvg.escher-svg .segment {\n  stroke: #334E75;\n  stroke-width: 10px;\n  fill: none;\n}\nsvg.escher-svg .arrowhead {\n  fill: #334E75;\n}\nsvg.escher-svg .stoichiometry-label-rect {\n  fill: white;\n  opacity: 0.5;\n}\nsvg.escher-svg .stoichiometry-label {\n  fill: #334E75;\n  font-size: 17px;\n}\nsvg.escher-svg .membrane {\n  fill: none;\n  stroke: rgb(255, 187, 0);\n}\nsvg.escher-svg .brush .extent {\n  fill-opacity: 0.1;\n  fill: black;\n  stroke: #fff;\n  shape-rendering: crispEdges;\n}\nsvg.escher-svg #brush-container .background {\n  fill: none;\n}\nsvg.escher-svg .bezier-circle {\n  fill: rgb(255,255,255);\n}\nsvg.escher-svg .bezier-circle.b1 {\n  stroke: red;\n}\nsvg.escher-svg .bezier-circle.b2 {\n  stroke: blue;\n}\nsvg.escher-svg .connect-line{\n  stroke: rgb(200,200,200);\n}\nsvg.escher-svg .direction-arrow {\n  stroke: black;\n  stroke-width: 1px;\n  fill: white;\n  opacity: 0.3;\n}\nsvg.escher-svg .start-reaction-cursor {\n  cursor: pointer;\n}\nsvg.escher-svg .start-reaction-target {\n  stroke: rgb(100,100,100);\n  fill: none;\n  opacity: 0.5;\n}\nsvg.escher-svg .rotation-center-line {\n  stroke: red;\n  stroke-width: 5px;\n}\nsvg.escher-svg .highlight {\n  fill: #D97000;\n  text-decoration: underline;\n}\nsvg.escher-svg .cursor-grab {\n  cursor: grab;\n  cursor: -webkit-grab;\n}\nsvg.escher-svg .cursor-grabbing {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\nsvg.escher-svg .edit-text-cursor {\n  cursor: text;\n}\n"

/***/ }),
/* 363 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** DataMenu */

var utils = __webpack_require__(1);
var d3_json = __webpack_require__(16).json;

module.exports = function (options) {
    var o = utils.set_options(options, {
        selection: null,
        getdatafiles: null,
        datafiles: null,
        update_callback: null,
        target: null });

    if (o.selection === null) throw new Error('No selection provided for DataMenu');

    // setup dropdown menu
    // Append menu if it doesn't exist
    var menu = o.selection.select('.data-menu');
    if (menu.empty()) {
        menu = o.selection.append('div').attr('class', 'data-menu');
    }
    var select_sel = menu.append('form').append('select').attr('class', 'dropdown-menu');

    if (o.getdatafiles) {
        if (o.datafiles) {
            console.warn('DataMenu: getdatafiles option overrides datafiles');
        }
        d3_json(o.getdatafiles, function (error, d) {
            // returns json object:  { data: [file0, file1, ...] }
            if (error) {
                return console.warn(error);
            } else {
                load_with_files(o.target, d.data, select_sel, o.update_callback, o.selection);
            }
            return null;
        });
    } else if (o.datafiles) {
        load_with_files(o.target, o.datafiles, select_sel, o.update_callback, o.selection);
    } else {
        console.warn('DataMenu: No datafiles given');
    }

    return { update: update };

    // definitions
    function load_with_files(t, files, select_sel, update_callback, selection) {

        //when it changes
        select_sel.node().addEventListener("change", function () {
            load_datafile(t, this.value, selection, update_callback);
        }, false);

        var file = files[0];

        update(files, select_sel);
        load_datafile(t, file, selection, update_callback);
    };
    function load_datafile(t, this_file, selection, callback) {
        utils.load_the_file(t, this_file, function (error, data) {
            if (error) {
                return console.warn(error);
                selection.append('error loading');
                o.data = null;
            } else {
                o.data = data;
                if (callback) {
                    callback(data);
                }
            }
        });
    };

    function update(list, select_sel) {
        // update select element with d3 selection /select_sel/ to have options
        // given by /list/
        // TODO remove paths from file list
        select_sel.selectAll(".menu-option").data(list).enter().append('option').attr('value', function (d) {
            return d;
        }).text(function (d) {
            return d;
        });
        // TODO set value to default_filename_index
        select_sel.node().focus();
    };

    function get_data() {
        return o.data;
    };
};

/***/ }),
/* 364 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/** static */

var utils = __webpack_require__(1);
var d3_json = __webpack_require__(16).json;

module.exports = {
    load_map_model_from_url: load_map_model_from_url
};

function load_map_model_from_url(map_download_url, model_download_url, local_index, options, callback) {
    var opt = utils.parse_url_components(window, options),
        to_load = [],
        load_map = function load_map(fn) {
        fn(null);
    },
        load_model = function load_model(fn) {
        fn(null);
    };
    if (opt.map_name) {
        var map_path = _get_path('map', opt.map_name, local_index, map_download_url);
        if (map_path) {
            load_map = function load_map(fn) {
                d3_json(map_path, function (error, data) {
                    if (error) console.warn(error);
                    fn(data);
                });
            };
        }
    }
    if (opt.model_name) {
        var model_path = _get_path('model', opt.model_name, local_index, model_download_url);
        if (model_path) {
            load_model = function load_model(fn) {
                d3_json(model_path, function (error, data) {
                    if (error) console.warn(error);
                    fn(data);
                });
            };
        }
    }
    if (opt.hasOwnProperty('enable_editing')) {
        options.enable_editing = opt.enable_editing.toLowerCase() === 'true';
    }
    load_map(function (map_data) {
        load_model(function (model_data) {
            callback(map_data, model_data, options);
        });
    });
}

function _get_path(kind, name, index, url) {
    var match = index[kind + 's'].filter(function (x) {
        return x[kind + '_name'] == name;
    });
    if (match.length == 0) throw new Error('Bad ' + kind + ' ' + name);
    return url + encodeURIComponent(match[0].organism) + '/' + encodeURIComponent(match[0][kind + '_name']) + '.json';
}

/***/ })
/******/ ]);
//# sourceMappingURL=bundle.js.map